" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Compress a string such that 'AAABCCDDDD' becomes 'A3BC2D4'. Only compress the string if it saves space.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s4 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s5 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the string is ASCII?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> <li class=""li2""><span class=""s1"">Note: Unicode strings could require special handling depending on your language</span></li> </ul> <li class=""li2""><span class=""s1"">Is this case sensitive?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we use additional data structures?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; None</span></li> <li class=""li2""><span class=""s1"">'' -&gt; ''</span></li> <li class=""li2""><span class=""s1"">'AABBCC' -&gt; 'AABBCC'</span></li> <li class=""li2""><span class=""s1"">'AAABCCDDDD' -&gt; 'A3BC2D4'</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">For each char in string</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If char is the same as last_char, increment count</span></li> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Append last_char and count to compressed_string</span></li> <li class=""li2""><span class=""s1"">last_char = char</span></li> <li class=""li2""><span class=""s1"">count = 1</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Append last_char and count to compressed_string</span></li> <li class=""li2""><span class=""s1"">If the compressed string size is &lt; string size</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return compressed string</span></li> </ul> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return string</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity Note:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Although strings are immutable in Python, appending to strings is optimized in CPython so that it now runs in O(n) and extends the string in-place. Refer to this <a href=""http://stackoverflow.com/a/4435752""><span class=""s3"">Stack Overflow post</span></a>.</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s4""><b>class</b></span><span class=""s5""> </span><span class=""s1"">CompressString</span><span class=""s5"">(</span><span class=""s4"">object</span><span class=""s5"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">compress</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, string):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> string </span><span class=""s4""><b>is</b></span><span class=""s1""> </span><span class=""s4""><b>None</b></span><span class=""s1""> </span><span class=""s4""><b>or</b></span><span class=""s1""> </span><span class=""s4""><b>not</b></span><span class=""s1""> string:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> string</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = </span><span class=""s8"">''</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; prev_char = string[</span><span class=""s9"">0</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; count = </span><span class=""s9"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>for</b></span><span class=""s1""> char </span><span class=""s4""><b>in</b></span><span class=""s1""> string:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> char </span><span class=""s10""><b>==</b></span><span class=""s1""> prev_char:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count += </span><span class=""s9"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result += </span><span class=""s7"">self</span><span class=""s1"">._calc_partial_result(prev_char, count)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prev_char = char</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count = </span><span class=""s9"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result += </span><span class=""s7"">self</span><span class=""s1"">._calc_partial_result(prev_char, count)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> result </span><span class=""s4""><b>if</b></span><span class=""s1""> </span><span class=""s4"">len</span><span class=""s1"">(result) </span><span class=""s10""><b>&lt;</b></span><span class=""s1""> </span><span class=""s4"">len</span><span class=""s1"">(string) </span><span class=""s4""><b>else</b></span><span class=""s1""> string</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">_calc_partial_result</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, prev_char, count):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> prev_char </span><span class=""s10""><b>+</b></span><span class=""s1""> (</span><span class=""s4"">str</span><span class=""s1"">(count) </span><span class=""s4""><b>if</b></span><span class=""s1""> count </span><span class=""s10""><b>&gt;</b></span><span class=""s1""> </span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s4""><b>else</b></span><span class=""s1""> </span><span class=""s8"">''</span><span class=""s1"">)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s10""><b>%%</b></span><span class=""s1"">writefile test_compress.py</span></p> <p class=""p6""><span class=""s4""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s4""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4""><b>class</b></span><span class=""s5""> </span><span class=""s1"">TestCompress</span><span class=""s5"">(</span><span class=""s4"">object</span><span class=""s5"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">test_compress</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, func):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s4""><b>None</b></span><span class=""s1"">), </span><span class=""s4""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s8"">''</span><span class=""s1"">), </span><span class=""s8"">''</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s8"">'AABBCC'</span><span class=""s1"">), </span><span class=""s8"">'AABBCC'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s8"">'AAABCCDDDDE'</span><span class=""s1"">), </span><span class=""s8"">'A3BC2D4E'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s8"">'BAAACCDDDD'</span><span class=""s1"">), </span><span class=""s8"">'BA3C2D4'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s8"">'AAABAACCDDDD'</span><span class=""s1"">), </span><span class=""s8"">'A3BA2C2D4'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">print</span><span class=""s5"">(</span><span class=""s1"">'Success: test_compress'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestCompress()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; compress_string = CompressString()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_compress(compress_string.compress)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s4""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s10""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p> <p class=""p5""><span class=""s1""></span><br /></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement a hash table with set, get, and remove methods.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier} span.s4 {font: 14.0px Courier; font-kerning: none} span.s5 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s11 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">For simplicity, are the keys integers only?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">For collision resolution, can we use chaining?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we have to worry about load factors?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Do we have to validate inputs?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s4"">get</span><span class=""s1""> no matching key -&gt; KeyError exception</span></li> <li class=""li2""><span class=""s3""></span><span class=""s4"">get</span><span class=""s1""> matching key -&gt; value</span></li> <li class=""li2""><span class=""s3""></span><span class=""s4"">set</span><span class=""s1""> no matchin gkey -&gt; new key, value</span></li> <li class=""li2""><span class=""s3""></span><span class=""s4"">set</span><span class=""s1""> matching key -&gt; update value</span></li> <li class=""li2""><span class=""s3""></span><span class=""s4"">remove</span><span class=""s1""> no matching key -&gt; KeyError exception</span></li> <li class=""li2""><span class=""s3""></span><span class=""s4"">remove</span><span class=""s1""> matching key -&gt; remove key, value</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p4""><span class=""s1""><b>Hash Function</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Return key % table size</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Set</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Get hash index for lookup</span></li> <li class=""li2""><span class=""s1"">If key exists, replace</span></li> <li class=""li2""><span class=""s1"">Else, add</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1) average and best, O(n) worst</span></li> <li class=""li2""><span class=""s1"">Space: O(1) space for newly added element</span></li> </ul> <p class=""p4""><span class=""s1""><b>Get</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Get hash index for lookup</span></li> <li class=""li2""><span class=""s1"">If key exists, return value</span></li> <li class=""li2""><span class=""s1"">Else, raise KeyError</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1) average and best, O(n) worst</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Remove</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Get hash index for lookup</span></li> <li class=""li2""><span class=""s1"">If key exists, delete the item</span></li> <li class=""li2""><span class=""s1"">Else, raise KeyError</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1) average and best, O(n) worst</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">Item</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, key, value):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.key = key</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.value = value</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">HashTable</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, size):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.size = size</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.table = [[] </span><span class=""s7""><b>for</b></span><span class=""s1""> _ </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s7"">range</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.size)]</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s5""> </span><span class=""s1"">_hash_function</span><span class=""s5"">(</span><span class=""s8"">self</span><span class=""s5"">, key):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> key </span><span class=""s9""><b>%</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.size</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s7"">set</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, key, value):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hash_index = </span><span class=""s8"">self</span><span class=""s1"">._hash_function(key)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> item </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.table[hash_index]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> item.key </span><span class=""s9""><b>==</b></span><span class=""s1""> key:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item.value = value</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.table[hash_index].append(Item(key, value))</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">get</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, key):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hash_index = </span><span class=""s8"">self</span><span class=""s1"">._hash_function(key)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> item </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.table[hash_index]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> item.key </span><span class=""s9""><b>==</b></span><span class=""s1""> key:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> item.value</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s1""> KeyError(</span><span class=""s10"">'Key not found'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">remove</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, key):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hash_index = </span><span class=""s8"">self</span><span class=""s1"">._hash_function(key)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> index, item </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s7"">enumerate</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.table[hash_index]):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> item.key </span><span class=""s9""><b>==</b></span><span class=""s1""> key:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>del</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.table[hash_index][index]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s1""> KeyError(</span><span class=""s10"">'Key not found'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_hash_map.py</span></p> <p class=""p7""><span class=""s7""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s7""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s7""><b>class</b></span><span class=""s5""> </span><span class=""s1"">TestHashMap</span><span class=""s5"">(</span><span class=""s7"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s1""><i># TODO: It would be better if we had unit tests for each</i></span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s1""><i># method in addition to the following end-to-end test</i></span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s5""> </span><span class=""s1"">test_end_to_end</span><span class=""s5"">(</span><span class=""s8"">self</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hash_table = HashTable(</span><span class=""s11"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">""Test: get on an empty hash table index""</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(KeyError, hash_table.get, </span><span class=""s11"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">""Test: set on an empty hash table index""</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hash_table.</span><span class=""s7"">set</span><span class=""s1"">(</span><span class=""s11"">0</span><span class=""s1"">, </span><span class=""s10"">'foo'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(hash_table.get(</span><span class=""s11"">0</span><span class=""s1"">), </span><span class=""s10"">'foo'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hash_table.</span><span class=""s7"">set</span><span class=""s1"">(</span><span class=""s11"">1</span><span class=""s1"">, </span><span class=""s10"">'bar'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(hash_table.get(</span><span class=""s11"">1</span><span class=""s1"">), </span><span class=""s10"">'bar'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">""Test: set on a non empty hash table index""</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hash_table.</span><span class=""s7"">set</span><span class=""s1"">(</span><span class=""s11"">10</span><span class=""s1"">, </span><span class=""s10"">'foo2'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(hash_table.get(</span><span class=""s11"">0</span><span class=""s1"">), </span><span class=""s10"">'foo'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(hash_table.get(</span><span class=""s11"">10</span><span class=""s1"">), </span><span class=""s10"">'foo2'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">""Test: set on a key that already exists""</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hash_table.</span><span class=""s7"">set</span><span class=""s1"">(</span><span class=""s11"">10</span><span class=""s1"">, </span><span class=""s10"">'foo3'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(hash_table.get(</span><span class=""s11"">0</span><span class=""s1"">), </span><span class=""s10"">'foo'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(hash_table.get(</span><span class=""s11"">10</span><span class=""s1"">), </span><span class=""s10"">'foo3'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">""Test: remove on a key that already exists""</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hash_table.remove(</span><span class=""s11"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(hash_table.get(</span><span class=""s11"">0</span><span class=""s1"">), </span><span class=""s10"">'foo'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(KeyError, hash_table.get, </span><span class=""s11"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">""Test: remove on a key that doesn't exist""</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(KeyError, hash_table.remove, </span><span class=""s9""><b>-</b></span><span class=""s11"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">'Success: test_end_to_end'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestHashMap()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_end_to_end()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Determine if a string is a permutation of another string.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the string is ASCII?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> <li class=""li2""><span class=""s1"">Note: Unicode strings could require special handling depending on your language</span></li> </ul> <li class=""li2""><span class=""s1"">Is whitespace important?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is this case sensitive? 'Nib', 'bin' is not a match?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we use additional data structures?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">One or more None inputs -&gt; False</span></li> <li class=""li2""><span class=""s1"">One or more empty strings -&gt; False</span></li> <li class=""li2""><span class=""s1"">'Nib', 'bin' -&gt; False</span></li> <li class=""li2""><span class=""s1"">'act', 'cat' -&gt; True</span></li> <li class=""li2""><span class=""s1"">'a ct', 'ca t' -&gt; True</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm: Compare Sorted Strings</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">Permutations contain the same strings but in different orders. This approach could be slow for large strings due to sorting.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Sort both strings</span></li> <li class=""li2""><span class=""s1"">If both sorted strings are equal</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">return True</span></li> </ul> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">return False</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n log n) from the sort, in general</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code: Compare Sorted Strings</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">Permutations</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">is_permutation</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, str1, str2):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> str1 </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> str2 </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3"">sorted</span><span class=""s1"">(str1) </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s3"">sorted</span><span class=""s1"">(str2)</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm: Hash Map Lookup</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">We'll keep a hash map (dict) to keep track of characters we encounter.</span></p><p class=""p2""><span class=""s1""><br></span></p> <p class=""p2""><span class=""s1"">Steps:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Scan each character</span></li> <li class=""li2""><span class=""s1"">For each character in each string:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the character does not exist in a hash map, add the character to a hash map</span></li> <li class=""li2""><span class=""s1"">Else, increment the character's count</span></li> </ul> <li class=""li2""><span class=""s1"">If the hash maps for each string are equal</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return True</span></li> </ul> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return False</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Notes:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Since the characters are in ASCII, we could potentially use an array of size 128 (or 256 for extended ASCII), where each array index is equivalent to an ASCII value</span></li> <li class=""li2""><span class=""s1"">Instead of using two hash maps, you could use one hash map and increment character values based on the first string and decrement based on the second string</span></li> <li class=""li2""><span class=""s1"">You can short circuit if the lengths of each string are not equal, although len() in Python is generally O(1) unlike other languages like C where getting the length of a string is O(n)</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code: Hash Map Lookup</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>from</b></span><span class=""s1""> collections </span><span class=""s3""><b>import</b></span><span class=""s1""> defaultdict</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">PermutationsAlt</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">is_permutation</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, str1, str2):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> str1 </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> str2 </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(str1) </span><span class=""s7""><b>!=</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(str2):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; unique_counts1 = defaultdict(</span><span class=""s3"">int</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; unique_counts2 = defaultdict(</span><span class=""s3"">int</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> char </span><span class=""s3""><b>in</b></span><span class=""s1""> str1:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unique_counts1[char] += </span><span class=""s8"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> char </span><span class=""s3""><b>in</b></span><span class=""s1""> str2:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unique_counts2[char] += </span><span class=""s8"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> unique_counts1 </span><span class=""s7""><b>==</b></span><span class=""s1""> unique_counts2</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_permutation_solution.py</span></p> <p class=""p6""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestPermutation</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_permutation</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">, func):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s3""><b>None</b></span><span class=""s1"">, </span><span class=""s9"">'foo'</span><span class=""s1"">), </span><span class=""s3""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s9"">''</span><span class=""s1"">, </span><span class=""s9"">'foo'</span><span class=""s1"">), </span><span class=""s3""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s9"">'Nib'</span><span class=""s1"">, </span><span class=""s9"">'bin'</span><span class=""s1"">), </span><span class=""s3""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s9"">'act'</span><span class=""s1"">, </span><span class=""s9"">'cat'</span><span class=""s1"">), </span><span class=""s3""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s9"">'a ct'</span><span class=""s1"">, </span><span class=""s9"">'ca t'</span><span class=""s1"">), </span><span class=""s3""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_permutation'</span><span class=""s4"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestPermutation()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; permutations = Permutations()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_permutation(permutations.is_permutation)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>try</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; permutations_alt = PermutationsAlt()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; test.test_permutation(permutations_alt.is_permutation)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>except</b></span><span class=""s1""> NameError:</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Alternate solutions are only defined</i></span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># in the solutions file</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>pass</b></span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement a priority queue backed by an array.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier} span.s4 {font: 14.0px Courier; font-kerning: none} span.s5 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s8 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s9 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s11 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Do we expect the methods to be insert, extract_min, and decrease_key?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume there aren't any duplicate keys?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we need to validate inputs?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <p class=""p4""><span class=""s1""><b>insert</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s4"">insert</span><span class=""s1""> general case -&gt; inserted node</span></li> </ul> <p class=""p4""><span class=""s1""><b>extract_min</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s4"">extract_min</span><span class=""s1""> from an empty list -&gt; None</span></li> <li class=""li2""><span class=""s3""></span><span class=""s4"">extract_min</span><span class=""s1""> general case -&gt; min node</span></li> </ul> <p class=""p4""><span class=""s1""><b>decrease_key</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s4"">decrease_key</span><span class=""s1""> an invalid key -&gt; None</span></li> <li class=""li2""><span class=""s3""></span><span class=""s4"">decrease_key</span><span class=""s1""> general case -&gt; updated node</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p4""><span class=""s1""><b>insert</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Append to the internal array.</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>extract_min</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Loop through each item in the internal array</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Update the min value as needed</span></li> </ul> <li class=""li2""><span class=""s1"">Remove the min element from the array and return it</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>decrease_key</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Loop through each item in the internal array to find the matching input</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Update the matching element's key</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s5""><b>%%</b></span><span class=""s1"">writefile priority_queue.py</span></p> <p class=""p8""><span class=""s1""><b>import</b></span><span class=""s6""> sys</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s7""><b>class</b></span><span class=""s6""> </span><span class=""s1"">PriorityQueueNode</span><span class=""s6"">(</span><span class=""s7"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__init__</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, obj, key):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.obj = obj</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.key = key</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__repr__</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s7"">str</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">.obj) </span><span class=""s5""><b>+</b></span><span class=""s1""> </span><span class=""s10"">': '</span><span class=""s1""> </span><span class=""s5""><b>+</b></span><span class=""s1""> </span><span class=""s7"">str</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">.key)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s7""><b>class</b></span><span class=""s6""> </span><span class=""s1"">PriorityQueue</span><span class=""s6"">(</span><span class=""s7"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__init__</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.array = []</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__len__</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s7"">len</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">.array)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">insert</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, node):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.array.append(node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.array[</span><span class=""s5""><b>-</b></span><span class=""s11"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s6""> </span><span class=""s1"">extract_min</span><span class=""s6"">(</span><span class=""s9"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> </span><span class=""s7""><b>not</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.array:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; minimum = sys.maxsize</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> index, node </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s7"">enumerate</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">.array):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> node.key </span><span class=""s5""><b>&lt;</b></span><span class=""s1""> minimum:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; minimum = node.key</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; minimum_index = index</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.array.pop(minimum_index)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">decrease_key</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, obj, new_key):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> node </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.array:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> node.obj </span><span class=""s7""><b>is</b></span><span class=""s1""> obj:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.key = new_key</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> node</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s6""> </span><span class=""s1""><b>None</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s5""><b>%%</b></span><span class=""s1"">writefile test_priority_queue.py</span></p> <p class=""p7""><span class=""s7""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s7""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s7""><b>class</b></span><span class=""s6""> </span><span class=""s1"">TestPriorityQueue</span><span class=""s6"">(</span><span class=""s7"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_priority_queue</span><span class=""s6"">(</span><span class=""s9"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; priority_queue = PriorityQueue()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(priority_queue.extract_min(), </span><span class=""s7""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; priority_queue.insert(PriorityQueueNode(</span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s11"">20</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; priority_queue.insert(PriorityQueueNode(</span><span class=""s10"">'b'</span><span class=""s1"">, </span><span class=""s11"">5</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; priority_queue.insert(PriorityQueueNode(</span><span class=""s10"">'c'</span><span class=""s1"">, </span><span class=""s11"">15</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; priority_queue.insert(PriorityQueueNode(</span><span class=""s10"">'d'</span><span class=""s1"">, </span><span class=""s11"">22</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; priority_queue.insert(PriorityQueueNode(</span><span class=""s10"">'e'</span><span class=""s1"">, </span><span class=""s11"">40</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; priority_queue.insert(PriorityQueueNode(</span><span class=""s10"">'f'</span><span class=""s1"">, </span><span class=""s11"">3</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; priority_queue.decrease_key(</span><span class=""s10"">'f'</span><span class=""s1"">, </span><span class=""s11"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; priority_queue.decrease_key(</span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s11"">19</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mins = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>while</b></span><span class=""s1""> priority_queue.array:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mins.append(priority_queue.extract_min().key)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(mins, [</span><span class=""s11"">2</span><span class=""s1"">, </span><span class=""s11"">5</span><span class=""s1"">, </span><span class=""s11"">15</span><span class=""s1"">, </span><span class=""s11"">19</span><span class=""s1"">, </span><span class=""s11"">22</span><span class=""s1"">, </span><span class=""s11"">40</span><span class=""s1"">])</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_min_heap'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestPriorityQueue()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_priority_queue()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s5""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement a function to reverse a string (a list of characters), in-place.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the string is ASCII?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> <li class=""li2""><span class=""s1"">Note: Unicode strings could require special handling depending on your language</span></li> </ul> <li class=""li2""><span class=""s1"">Since we need to do this in-place, it seems we cannot use the slice operator or the reversed function?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Correct</span></li> </ul> <li class=""li2""><span class=""s1"">Since Python string are immutable, can we use a list of characters instead?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; None</span></li> <li class=""li2""><span class=""s1"">[''] -&gt; ['']</span></li> <li class=""li2""><span class=""s1"">['f', 'o', 'o', ' ', 'b', 'a', 'r'] -&gt; ['r', 'a', 'b', ' ', 'o', 'o', 'f']</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Since Python strings are immutable, we'll use a list of chars instead to exercise in-place string manipulation as you would get with a C string.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Iterate len(string)/2 times, starting with i = 0:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Swap i and len(string) - 1 - i</span></li> <li class=""li2""><span class=""s1"">Increment i</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p2""><span class=""s1"">Note:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">You could use a byte array instead of a list to do in-place string operations</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>from</b></span><span class=""s1""> __future__ </span><span class=""s3""><b>import</b></span><span class=""s1""> division</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">ReverseString</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">reverse</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, chars):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> chars </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> chars:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> chars</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; size = </span><span class=""s3"">len</span><span class=""s1"">(chars)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> i </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(size&nbsp;</span><span class=""s7""><b>//&nbsp;</b></span><span class=""s8"">2</span><span class=""s1"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chars[i], chars[size&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s1"">i] = </span><span class=""s9"">\</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chars[size&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s1"">i], chars[i]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> chars</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Pythonic-Code</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">This question has an artificial constraint that prevented the use of the slice operator and the reversed method. For completeness, the solutions for these are provided below. Note these solutions are not in-place.</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">ReverseStringAlt</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">reverse_string_alt</span><span class=""s4"">(string):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> string </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> string:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> string</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> string[::</span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">reverse_string_alt2</span><span class=""s4"">(string):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> string </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> string:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> string</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s10"">''</span><span class=""s1"">.join(</span><span class=""s3"">reversed</span><span class=""s1"">(string))</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_reverse_string.py</span></p> <p class=""p6""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestReverse</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">test_reverse</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, func):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s3""><b>None</b></span><span class=""s1"">), </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func([</span><span class=""s10"">''</span><span class=""s1"">]), [</span><span class=""s10"">''</span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s10"">'f'</span><span class=""s1"">, </span><span class=""s10"">'o'</span><span class=""s1"">, </span><span class=""s10"">'o'</span><span class=""s1"">, </span><span class=""s10"">' '</span><span class=""s1"">, </span><span class=""s10"">'b'</span><span class=""s1"">, </span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s10"">'r'</span><span class=""s1"">]),</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s10"">'r'</span><span class=""s1"">, </span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s10"">'b'</span><span class=""s1"">, </span><span class=""s10"">' '</span><span class=""s1"">, </span><span class=""s10"">'o'</span><span class=""s1"">, </span><span class=""s10"">'o'</span><span class=""s1"">, </span><span class=""s10"">'f'</span><span class=""s1"">])</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_reverse'</span><span class=""s4"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_reverse_inplace</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">, func):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; target_list = [</span><span class=""s10"">'f'</span><span class=""s1"">, </span><span class=""s10"">'o'</span><span class=""s1"">, </span><span class=""s10"">'o'</span><span class=""s1"">, </span><span class=""s10"">' '</span><span class=""s1"">, </span><span class=""s10"">'b'</span><span class=""s1"">, </span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s10"">'r'</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; func(target_list)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(target_list, [</span><span class=""s10"">'r'</span><span class=""s1"">, </span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s10"">'b'</span><span class=""s1"">, </span><span class=""s10"">' '</span><span class=""s1"">, </span><span class=""s10"">'o'</span><span class=""s1"">, </span><span class=""s10"">'o'</span><span class=""s1"">, </span><span class=""s10"">'f'</span><span class=""s1"">])</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_reverse_inplace'</span><span class=""s4"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestReverse()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; reverse_string = ReverseString()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_reverse(reverse_string.reverse)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_reverse_inplace(reverse_string.reverse)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Determine if a string s1 is a rotation of another string s2, by calling (only once) a function is_substring.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the string is ASCII?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> <li class=""li2""><span class=""s1"">Note: Unicode strings could require special handling depending on your language</span></li> </ul> <li class=""li2""><span class=""s1"">Is this case sensitive?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we use additional data structures?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Any strings that differ in size -&gt; False</span></li> <li class=""li2""><span class=""s1"">None, 'foo' -&gt; False (any None results in False)</span></li> <li class=""li2""><span class=""s1"">' ', 'foo' -&gt; False</span></li> <li class=""li2""><span class=""s1"">' ', ' ' -&gt; True</span></li> <li class=""li2""><span class=""s1"">'foobarbaz', 'barbazfoo' -&gt; True</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">Examine the following test case:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">s1 = 'barbazfoo'</span></li> <li class=""li2""><span class=""s1"">s2 = 'foobarbaz'</span></li> </ul> <p class=""p2""><span class=""s1"">We see that if we can use the given is_substring method if we take compare s2 with s1 + s1:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">s2 = 'foobarbaz'</span></li> <li class=""li2""><span class=""s1"">s3 = 'barbaz<i>foobarbaz</i>foo'</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Rotation</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">is_substring</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, s1, s2):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> s1 </span><span class=""s5""><b>in</b></span><span class=""s1""> s2</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">is_rotation</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, s1, s2):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> s1 </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> s2 </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5"">len</span><span class=""s1"">(s1) </span><span class=""s7""><b>!=</b></span><span class=""s1""> </span><span class=""s5"">len</span><span class=""s1"">(s2):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.is_substring(s1, s2 </span><span class=""s7""><b>+</b></span><span class=""s1""> s2)</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_rotation.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestRotation</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_rotation</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; rotation = Rotation()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(rotation.is_rotation(</span><span class=""s8"">'o'</span><span class=""s1"">, </span><span class=""s8"">'oo'</span><span class=""s1"">), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(rotation.is_rotation(</span><span class=""s5""><b>None</b></span><span class=""s1"">, </span><span class=""s8"">'foo'</span><span class=""s1"">), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(rotation.is_rotation(</span><span class=""s8"">''</span><span class=""s1"">, </span><span class=""s8"">'foo'</span><span class=""s1"">), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(rotation.is_rotation(</span><span class=""s8"">''</span><span class=""s1"">, </span><span class=""s8"">''</span><span class=""s1"">), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(rotation.is_rotation(</span><span class=""s8"">'foobarbaz'</span><span class=""s1"">, </span><span class=""s8"">'barbazfoo'</span><span class=""s1"">), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_rotation'</span><span class=""s3"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestRotation()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_rotation()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement an algorithm to determine if a string has all unique characters.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the string is ASCII?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> <li class=""li2""><span class=""s1"">Note: Unicode strings could require special handling depending on your language</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this is case sensitive?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we use additional data structures?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; False</span></li> <li class=""li2""><span class=""s1"">'' -&gt; True</span></li> <li class=""li2""><span class=""s1"">'foo' -&gt; False</span></li> <li class=""li2""><span class=""s1"">'bar' -&gt; True</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm 1: Sets and Length Comparison</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">A set is an unordered collection of unique elements.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the length of the set(string) equals the length of the string</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return True</span></li> </ul> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return False</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: Additional O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code: Sets and Length Comparison</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">UniqueCharsSet</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">has_unique_chars</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, string):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> string </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(</span><span class=""s3"">set</span><span class=""s1"">(string)) </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(string)</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm 2: Hash Map Lookup</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">We'll keep a hash map (set) to keep track of unique characters we encounter.</span></p> <p class=""p2""><span class=""s1"">Steps:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Scan each character</span></li> <li class=""li2""><span class=""s1"">For each character:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the character does not exist in a hash map, add the character to a hash map</span></li> <li class=""li2""><span class=""s1"">Else, return False</span></li> </ul> <li class=""li2""><span class=""s1"">Return True</span></li> </ul> <p class=""p2""><span class=""s1"">Notes:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">We could also use a dictionary, but it seems more logical to use a set as it does not contain duplicate elements</span></li> <li class=""li2""><span class=""s1"">Since the characters are in ASCII, we could potentially use an array of size 128 (or 256 for extended ASCII)</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: Additional O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code: Hash Map Lookup</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">UniqueChars</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">has_unique_chars</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, string):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> string </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; chars_set = </span><span class=""s3"">set</span><span class=""s1"">()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> char </span><span class=""s3""><b>in</b></span><span class=""s1""> string:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> char </span><span class=""s3""><b>in</b></span><span class=""s1""> chars_set:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chars_set.add(char)</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s4""> </span><span class=""s1""><b>True</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm 3: In-Place</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">Assume we cannot use additional data structures, which will eliminate the fast lookup O(1) time provided by our hash map.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Scan each character</span></li> <li class=""li2""><span class=""s1"">For each character:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Scan all [other] characters in the array</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Exluding the current character from the scan is rather tricky in Python and results in a non-Pythonic solution</span></li> <li class=""li2""><span class=""s1"">If there is a match, return False</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Return True</span></li> </ul> <p class=""p2""><span class=""s1"">Algorithm Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n^2)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code: In-Place</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">UniqueCharsInPlace</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">has_unique_chars</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, string):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> string </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> char </span><span class=""s3""><b>in</b></span><span class=""s1""> string:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> string.count(char) </span><span class=""s7""><b>&gt;</b></span><span class=""s1""> </span><span class=""s8"">1</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3""><b>False</b></span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s4""> </span><span class=""s1""><b>True</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_unique_chars.py</span></p> <p class=""p6""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestUniqueChars</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_unique_chars</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">, func):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s3""><b>None</b></span><span class=""s1"">), </span><span class=""s3""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s9"">''</span><span class=""s1"">), </span><span class=""s3""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s9"">'foo'</span><span class=""s1"">), </span><span class=""s3""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s9"">'bar'</span><span class=""s1"">), </span><span class=""s3""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_unique_chars'</span><span class=""s4"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestUniqueChars()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; unique_chars = UniqueChars()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_unique_chars(unique_chars.has_unique_chars)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>try</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; unique_chars_set = UniqueCharsSet()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; test.test_unique_chars(unique_chars_set.has_unique_chars)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; unique_chars_in_place = UniqueCharsInPlace()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; test.test_unique_chars(unique_chars_in_place.has_unique_chars)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>except</b></span><span class=""s1""> NameError:</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Alternate solutions are only defined</i></span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># in the solutions file</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>pass</b></span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement n stacks using a single array.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Are the stacks and array a fixed size?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are the stacks equally sized?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Does pushing to a full stack result in an exception?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Does popping from an empty stack result in an exception?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the user passed in stack index is valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Test the following on the three stacks:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Push to full stack -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">Push to non-full stack</span></li> <li class=""li2""><span class=""s1"">Pop on empty stack -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">Pop on non-empty stack</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1""><b>Absolute Index</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">return stack size * stack index + stack pointer</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Push</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If stack is full, throw exception</span></li> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Increment stack pointer</span></li> <li class=""li2""><span class=""s1"">Get the absolute array index</span></li> <li class=""li2""><span class=""s1"">Insert the value to this index</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Pop</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If stack is empty, throw exception</span></li> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Store the value contained in the absolute array index</span></li> <li class=""li2""><span class=""s1"">Set the value in the absolute array index to None</span></li> <li class=""li2""><span class=""s1"">Decrement stack pointer</span></li> <li class=""li2""><span class=""s1"">return value</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Stacks</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">__init__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, num_stacks, stack_size):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.num_stacks = num_stacks</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.stack_size = stack_size</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.stack_pointers = [</span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">] </span><span class=""s7""><b>*</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.num_stacks</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.stack_array = [</span><span class=""s5""><b>None</b></span><span class=""s1"">] </span><span class=""s7""><b>*</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.num_stacks </span><span class=""s7""><b>*</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.stack_size</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">abs_index</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, stack_index):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> stack_index </span><span class=""s7""><b>*</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.stack_size </span><span class=""s7""><b>+</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.stack_pointers[stack_index]</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">push</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, stack_index, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.stack_pointers[stack_index] </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.stack_size </span><span class=""s7""><b>-</b></span><span class=""s1""> </span><span class=""s8"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> Exception(</span><span class=""s9"">'Stack is full'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.stack_pointers[stack_index] += </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array_index = </span><span class=""s6"">self</span><span class=""s1"">.abs_index(stack_index)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.stack_array[array_index] = data</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">pop</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, stack_index):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.stack_pointers[stack_index] </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> Exception(</span><span class=""s9"">'Stack is empty'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array_index = </span><span class=""s6"">self</span><span class=""s1"">.abs_index(stack_index)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = </span><span class=""s6"">self</span><span class=""s1"">.stack_array[array_index]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.stack_array[array_index] = </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.stack_pointers[stack_index] -= </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> data</span></p><p class=""p7""><span class=""s1""><br /></span></p><p class=""p7""><span class=""s1""></span></p><p class=""p1"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 22px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b><br /></b></span></p><p class=""p1"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 22px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b><br /></b></span></p><p class=""p1"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 22px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b>Unit Test</b></span></p><p class=""p6"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p6"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p6"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(255, 255, 255); min-height: 17px; -webkit-text-stroke-width: initial; -webkit-text-stroke-color: rgb(0, 0, 0); ""><span class=""s1""></span><br /></p><p class=""p6"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp;</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><font color=""#000000"">%%writefile test_n_stacks.py</font></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">from nose.tools import assert_equal</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">from nose.tools import raises</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">class TestStacks(object):</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; @raises(Exception)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; def test_pop_on_empty(self, num_stacks, stack_size):</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; print('Test: Pop on empty stack')</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; stacks = Stacks(num_stacks, stack_size)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; stacks.pop(0)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; @raises(Exception)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; def test_push_on_full(self, num_stacks, stack_size):</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; print('Test: Push to full stack')</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; stacks = Stacks(num_stacks, stack_size)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; for i in range(0, stack_size):</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stacks.push(2, i)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; stacks.push(2, stack_size)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; def test_stacks(self, num_stacks, stack_size):</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; print('Test: Push to non-full stack')</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; stacks = Stacks(num_stacks, stack_size)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; stacks.push(0, 1)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; stacks.push(0, 2)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; stacks.push(1, 3)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; stacks.push(2, 4)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; print('Test: Pop on non-empty stack')</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stacks.pop(0), 2)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stacks.pop(0), 1)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stacks.pop(1), 3)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stacks.pop(2), 4)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; &nbsp; &nbsp; print('Success: test_stacks\n')</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">def main():</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; num_stacks = 3</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; stack_size = 100</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; test = TestStacks()</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; test.test_pop_on_empty(num_stacks, stack_size)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; test.test_push_on_full(num_stacks, stack_size)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; test.test_stacks(num_stacks, stack_size)</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); ""><br /></p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">if __name__ == '__main__':</p><p class=""p7"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; background-color: rgb(247, 247, 247); "">&nbsp; &nbsp; main()</p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement a queue using two stacks.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Do we expect the methods to be enqueue and dequeue?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a stack class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we push a None value to the Stack?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Enqueue and dequeue on empty stack</span></li> <li class=""li2""><span class=""s1"">Enqueue and dequeue on non-empty stack</span></li> <li class=""li2""><span class=""s1"">Multiple enqueue in a row</span></li> <li class=""li2""><span class=""s1"">Multiple dequeue in a row</span></li> <li class=""li2""><span class=""s1"">Enqueue after a dequeue</span></li> <li class=""li2""><span class=""s1"">Dequeue after an enqueue</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">We'll use two stacks (left and right) to implement the queue. The left stack will be used for enqueue and the right stack will be used for dequeue.</span></p> <p class=""p2""><span class=""s1"">To prevent multiple dequeue calls from needlessly shifting elements around between the stacks, we'll shift elements in a lazy manner.</span></p> <p class=""p4""><span class=""s1""><b><br></b></span></p><p class=""p4""><span class=""s1""><b>Enqueue</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If right stack is not empty</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Shift the elements of the right stack to the left stack</span></li> </ul> <li class=""li2""><span class=""s1"">Push the data to the left stack</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Dequeue</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the left stack is not empty</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Shift the elements of the left stack to the right stack</span></li> </ul> <li class=""li2""><span class=""s1"">Pop from the right stack and return the data</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Shift Stacks</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">While the source stack has elements:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Pop from the source stack and push the data to the destination stack</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">QueueFromStacks</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.left_stack = Stack()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.right_stack = Stack()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">shift_stacks</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, source, destination):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> source.peek() </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; destination.push(source.pop())</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">enqueue</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.shift_stacks(</span><span class=""s8"">self</span><span class=""s1"">.right_stack, </span><span class=""s8"">self</span><span class=""s1"">.left_stack)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.left_stack.push(data)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">dequeue</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.shift_stacks(</span><span class=""s8"">self</span><span class=""s1"">.left_stack, </span><span class=""s8"">self</span><span class=""s1"">.right_stack)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.right_stack.pop()</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_queue_from_stacks.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">TestQueueFromStacks</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_queue_from_stacks</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Dequeue on empty stack'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue = QueueFromStacks()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(queue.dequeue(), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Enqueue on empty stack'</span><span class=""s6"">)</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Enqueue on non-empty stack'</span><span class=""s6"">)</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Multiple enqueue in a row'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_items = </span><span class=""s9"">3</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> i </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s9"">0</span><span class=""s1"">, num_items):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; queue.enqueue(i)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Dequeue on non-empty stack'</span><span class=""s6"">)</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Dequeue after an enqueue'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(queue.dequeue(), </span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Multiple dequeue in a row'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(queue.dequeue(), </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(queue.dequeue(), </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Enqueue after a dequeue'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue.enqueue(</span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(queue.dequeue(), </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_queue_from_stacks'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestQueueFromStacks()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_queue_from_stacks()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement a queue with enqueue and dequeue methods using a linked list.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If there is one item in the list, do you expect the head and tail pointers to both point to it?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If there are no items on the list, do you expect the head and tail pointers to be None?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If you dequeue on an empty queue, does that return None?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p4""><span class=""s1""><b>Enqueue</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Enqueue to an empty queue</span></li> <li class=""li2""><span class=""s1"">Enqueue to a non-empty queue</span></li> </ul> <p class=""p4""><span class=""s1""><b>Dequeue</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Dequeue an empty queue -&gt; None</span></li> <li class=""li2""><span class=""s1"">Dequeue a queue with one element</span></li> <li class=""li2""><span class=""s1"">Dequeue a queue with more than one element</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p4""><span class=""s1""><b><br></b></span></p><p class=""p4""><span class=""s1""><b>Enqueue</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the list is empty, set head and tail to node</span></li> <li class=""li2""><span class=""s1"">Else, set tail to node</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Dequeue</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the list is empty, return None</span></li> <li class=""li2""><span class=""s1"">If the list has one node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Save the head node's value</span></li> <li class=""li2""><span class=""s1"">Set head and tail to None</span></li> <li class=""li2""><span class=""s1"">Return the saved value</span></li> </ul> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Save the head node's value</span></li> <li class=""li2""><span class=""s1"">Set head to its next node</span></li> <li class=""li2""><span class=""s1"">Return the saved value</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile queue_list.py</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Node</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.data = data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.</span><span class=""s6"">next</span><span class=""s1""> = </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Queue</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.head = </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.tail = </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">enqueue</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = Node(data)</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Empty list</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.head </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1""> </span><span class=""s6""><b>and</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.tail </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.head = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.tail = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.tail.</span><span class=""s6"">next</span><span class=""s1""> = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.tail = node</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">dequeue</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Empty list</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.head </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1""> </span><span class=""s6""><b>and</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.tail </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = </span><span class=""s7"">self</span><span class=""s1"">.head.data</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Remove only element from a one element list</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.head </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.tail:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.head = </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.tail = </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.head = </span><span class=""s7"">self</span><span class=""s1"">.head.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p6""><span class=""s1""></span></p><p class=""p6""><br></p><p class=""p6""><br></p><p class=""p6""><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_queue_list.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">TestQueue</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s1""><i># TODO: It would be better if we had unit tests for each</i></span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s1""><i># method in addition to the following end-to-end test</i></span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_end_to_end</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p12""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: Dequeue an empty queue'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue = Queue()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(queue.dequeue(), </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: Enqueue to an empty queue'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue.enqueue(</span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: Dequeue a queue with one element'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(queue.dequeue(), </span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: Enqueue to a non-empty queue'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue.enqueue(</span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue.enqueue(</span><span class=""s8"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue.enqueue(</span><span class=""s8"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: Dequeue a queue with more than one element'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(queue.dequeue(), </span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(queue.dequeue(), </span><span class=""s8"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(queue.dequeue(), </span><span class=""s8"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_end_to_end'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestQueue()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_end_to_end()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement SetOfStacks that wraps a list of stacks, where each stack is bound by a capacity.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume we already have a stack class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are all stack bound by the same capacity?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If a stack becomes full, should automatically create one?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If a stack becomes empty, should we delete it?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If we pop on an empty stack, should we return None?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Push and pop on an empty stack</span></li> <li class=""li2""><span class=""s1"">Push and pop on a non-empty stack</span></li> <li class=""li2""><span class=""s1"">Push on a capacity stack to create a new one</span></li> <li class=""li2""><span class=""s1"">Pop on a stack to destroy it</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p4""><span class=""s1""><b><br></b></span></p><p class=""p4""><span class=""s1""><b>Push</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If there are no stacks or the last stack is full</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Create a new stack</span></li> </ul> <li class=""li2""><span class=""s1"">Push to the new stack</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(m), where m is the size of the new stack if the last stack is full</span></li> </ul> <p class=""p4""><span class=""s1""><b>Pop</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If there are no stacks, return None</span></li> <li class=""li2""><span class=""s1"">Else if the last stack has one element</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Pop the last element's data</span></li> <li class=""li2""><span class=""s1"">Delete the now empty stack</span></li> <li class=""li2""><span class=""s1"">Update the last stack pointer</span></li> </ul> <li class=""li2""><span class=""s1"">Else Pop the last element's data</span></li> <li class=""li2""><span class=""s1"">Return the last element's data</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">StackWithCapacity</span><span class=""s6"">(Stack):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, top=</span><span class=""s5""><b>None</b></span><span class=""s1"">, capacity=</span><span class=""s9"">10</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">super</span><span class=""s1"">(StackWithCapacity, </span><span class=""s8"">self</span><span class=""s1"">).__init__(top)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.capacity = capacity</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.num_items = </span><span class=""s9"">0</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">push</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.is_full():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> Exception(</span><span class=""s10"">'Stack full'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">super</span><span class=""s1"">(StackWithCapacity, </span><span class=""s8"">self</span><span class=""s1"">).push(data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.num_items += </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">pop</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.num_items -= </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5"">super</span><span class=""s1"">(StackWithCapacity, </span><span class=""s8"">self</span><span class=""s1"">).pop()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">is_full</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.num_items </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.capacity</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">is_empty</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.num_items </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s9"">0</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">SetOfStacks</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, indiv_stack_capacity):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.indiv_stack_capacity = indiv_stack_capacity</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.stacks = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.last_stack = </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">push</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.last_stack </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.last_stack.is_full():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.last_stack = StackWithCapacity(</span><span class=""s5""><b>None</b></span><span class=""s1"">, </span><span class=""s8"">self</span><span class=""s1"">.indiv_stack_capacity)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.stacks.append(</span><span class=""s8"">self</span><span class=""s1"">.last_stack)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.last_stack.push(data)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">pop</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.last_stack </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = </span><span class=""s8"">self</span><span class=""s1"">.last_stack.pop()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.last_stack.is_empty():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.stacks.pop()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.last_stack = </span><span class=""s8"">self</span><span class=""s1"">.stacks[</span><span class=""s3""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">] </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.stacks </span><span class=""s5""><b>else</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_set_of_stacks.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">TestSetOfStacks</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_set_of_stacks</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Push on an empty stack'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stacks = SetOfStacks(indiv_stack_capacity=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stacks.push(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Push on a non-empty stack'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stacks.push(</span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Push on a capacity stack to create a new one'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stacks.push(</span><span class=""s10"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Pop on a stack to destroy it'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stacks.pop(), </span><span class=""s10"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Pop general case'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stacks.pop(), </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stacks.pop(), </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Pop on no elements'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stacks.pop(), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_set_of_stacks'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestSetOfStacks()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_set_of_stacks()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Sort a stack. You can use another stack as a buffer.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">When sorted, should the largest element be at the top or bottom?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Top</span></li> </ul> <li class=""li2""><span class=""s1"">Can you have duplicate values like 5, 5?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a stack class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Empty stack -&gt; None</span></li> <li class=""li2""><span class=""s1"">One element stack</span></li> <li class=""li2""><span class=""s1"">Two or more element stack (general case)</span></li> <li class=""li2""><span class=""s1"">Already sorted stack</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Our buffer will hold elements in reverse sorted order, smallest at the top</span></li> <li class=""li2""><span class=""s1"">Store the current top element in a temp variable</span></li> <li class=""li2""><span class=""s1"">While stack is not empty</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">While buffer is not empty or buffer top is &gt; than temp</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Move buffer top to stack</span></li> </ul> <li class=""li2""><span class=""s1"">Move temp to top of buffer</span></li> </ul> <li class=""li2""><span class=""s1"">Return buffer</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n^2)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s5""><b>class</b></span><span class=""s1""> </span><span class=""s6"">MyStack</span><span class=""s1"">(Stack):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">sort</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; buff = MyStack()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.is_empty():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; temp = </span><span class=""s7"">self</span><span class=""s1"">.pop()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> buff.is_empty() </span><span class=""s5""><b>or</b></span><span class=""s1""> temp </span><span class=""s3""><b>&gt;=</b></span><span class=""s1""> buff.peek():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buff.push(temp)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> buff.is_empty() </span><span class=""s5""><b>and</b></span><span class=""s1""> temp </span><span class=""s3""><b>&lt;</b></span><span class=""s1""> buff.peek():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.push(buff.pop())</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buff.push(temp)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> buff</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p2""><span class=""s1"">The solution can be further simplified:</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s5""><b>class</b></span><span class=""s8""> </span><span class=""s1"">MyStackSimplified</span><span class=""s8"">(Stack):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">sort</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; buff = MyStack()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.is_empty():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; temp = </span><span class=""s7"">self</span><span class=""s1"">.pop()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> buff.is_empty() </span><span class=""s5""><b>and</b></span><span class=""s1""> temp </span><span class=""s3""><b>&lt;</b></span><span class=""s1""> buff.peek():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.push(buff.pop())</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buff.push(temp)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> buff</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_sort_stack.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> random </span><span class=""s5""><b>import</b></span><span class=""s1""> randint</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>class</b></span><span class=""s8""> </span><span class=""s1"">TestSortStack</span><span class=""s8"">(</span><span class=""s5"">object</span><span class=""s8"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">get_sorted_stack</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, stack, numbers):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> x </span><span class=""s5""><b>in</b></span><span class=""s1""> numbers:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stack.push(x)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sorted_stack = stack.sort()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> sorted_stack</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">test_sort_stack</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, stack):</span></p> <p class=""p8""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: Empty stack'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sorted_stack = </span><span class=""s7"">self</span><span class=""s1"">.get_sorted_stack(stack, [])</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(sorted_stack.pop(), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: One element stack'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sorted_stack = </span><span class=""s7"">self</span><span class=""s1"">.get_sorted_stack(stack, [</span><span class=""s9"">1</span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(sorted_stack.pop(), </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: Two or more element stack (general case)'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_items = </span><span class=""s9"">10</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; numbers = [randint(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">10</span><span class=""s1"">) </span><span class=""s5""><b>for</b></span><span class=""s1""> x </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(num_items)]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sorted_stack = </span><span class=""s7"">self</span><span class=""s1"">.get_sorted_stack(stack, numbers)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sorted_numbers = []</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> _ </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(num_items):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sorted_numbers.append(sorted_stack.pop())</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(sorted_numbers, </span><span class=""s5"">sorted</span><span class=""s1"">(numbers, reverse=</span><span class=""s5""><b>True</b></span><span class=""s1"">))</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Success: test_sort_stack'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestSortStack()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_sort_stack(MyStack())</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_sort_stack(MyStackSimplified())</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement a stack with push, pop, peek, and is_empty methods using a linked list.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If we pop on an empty stack, do we return None?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <p class=""p4""><span class=""s1""><b><br></b></span></p><p class=""p4""><span class=""s1""><b>Push</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Push to empty stack</span></li> <li class=""li2""><span class=""s1"">Push to non-empty stack</span></li> </ul> <p class=""p4""><span class=""s1""><b>Pop</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Pop on empty stack</span></li> <li class=""li2""><span class=""s1"">Pop on single element stack</span></li> <li class=""li2""><span class=""s1"">Pop on multiple element stack</span></li> </ul> <p class=""p4""><span class=""s1""><b>Peek</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Peek on empty stack</span></li> <li class=""li2""><span class=""s1"">Peek on one or more element stack</span></li> </ul> <p class=""p4""><span class=""s1""><b>Is Empty</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is empty on empty stack</span></li> <li class=""li2""><span class=""s1"">Is empty on one or more element stack</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p4""><span class=""s1""><b><br></b></span></p><p class=""p4""><span class=""s1""><b>Push</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Create new node with value</span></li> <li class=""li2""><span class=""s1"">Set node's next to top</span></li> <li class=""li2""><span class=""s1"">Set top to node</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Pop</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If stack is empty, return None</span></li> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Save top's value</span></li> <li class=""li2""><span class=""s1"">Set top to top.next</span></li> <li class=""li2""><span class=""s1"">Return saved value</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Peek</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If stack is empty, return None</span></li> <li class=""li2""><span class=""s1"">Else return top's value</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Is Empty</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If peek has a value, return False</span></li> <li class=""li2""><span class=""s1"">Else return True</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile stack.py</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Node</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data, </span><span class=""s6"">next</span><span class=""s1"">=</span><span class=""s6""><b>None</b></span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.data = data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.</span><span class=""s6"">next</span><span class=""s1""> = </span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Stack</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, top=</span><span class=""s6""><b>None</b></span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.top = top</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">push</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.top = Node(data, </span><span class=""s7"">self</span><span class=""s1"">.top)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">pop</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.top </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = </span><span class=""s7"">self</span><span class=""s1"">.top.data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.top = </span><span class=""s7"">self</span><span class=""s1"">.top.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">peek</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.top.data </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.top </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1""> </span><span class=""s6""><b>else</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">is_empty</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.peek() </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_stack.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">TestStack</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s1""><i># TODO: It would be better if we had unit tests for each</i></span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s1""><i># method in addition to the following end-to-end test</i></span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_end_to_end</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p12""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: Empty stack'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack = Stack()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.peek(), </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.pop(), </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: One element'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; top = Node(</span><span class=""s8"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack = Stack(top)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.pop(), </span><span class=""s8"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.peek(), </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: More than one element'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack = Stack()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack.push(</span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack.push(</span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack.push(</span><span class=""s8"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.pop(), </span><span class=""s8"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.peek(), </span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.pop(), </span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.peek(), </span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.is_empty(), </span><span class=""s6""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.pop(), </span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.peek(), </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.is_empty(), </span><span class=""s6""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_end_to_end'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestStack()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_end_to_end()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement a stack with push, pop, and min methods running O(1) time.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume this is a stack of ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the input values for push are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If we call this function on an empty stack, can we return sys.maxsize?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a stack class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Push/pop on empty stack</span></li> <li class=""li2""><span class=""s1"">Push/pop on non-empty stack</span></li> <li class=""li2""><span class=""s1"">Min on empty stack</span></li> <li class=""li2""><span class=""s1"">Min on non-tempty stack</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">We'll use a second stack to keep track of the minimum values.</span></p> <p class=""p4""><span class=""s1""><b><br></b></span></p><p class=""p4""><span class=""s1""><b>Min</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the second stack is empty, return an error code (max int value)</span></li> <li class=""li2""><span class=""s1"">Else, return the top of the stack, without popping it</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Push</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Push the data</span></li> <li class=""li2""><span class=""s1"">If the data is less than min</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Push data to second stack</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Pop</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Pop the data</span></li> <li class=""li2""><span class=""s1"">If the data is equal to min</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Pop the top of the second stack</span></li> </ul> <li class=""li2""><span class=""s1"">Return the data</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>import</b></span><span class=""s5""> sys</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>class</b></span><span class=""s1""> </span><span class=""s7"">StackMin</span><span class=""s1"">(Stack):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, top=</span><span class=""s6""><b>None</b></span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">super</span><span class=""s1"">(StackMin, </span><span class=""s8"">self</span><span class=""s1"">).__init__(top)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.stack_of_mins = Stack()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">minimum</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.stack_of_mins.top </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> sys.maxsize</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.stack_of_mins.peek()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">push</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">super</span><span class=""s1"">(StackMin, </span><span class=""s8"">self</span><span class=""s1"">).push(data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> data </span><span class=""s3""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.minimum():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.stack_of_mins.push(data)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">pop</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = </span><span class=""s6"">super</span><span class=""s1"">(StackMin, </span><span class=""s8"">self</span><span class=""s1"">).pop()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> data </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.minimum():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.stack_of_mins.pop()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_stack_min.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6""><b>class</b></span><span class=""s5""> </span><span class=""s1"">TestStackMin</span><span class=""s5"">(</span><span class=""s6"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s5""> </span><span class=""s1"">test_stack_min</span><span class=""s5"">(</span><span class=""s8"">self</span><span class=""s5"">):</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s5"">(</span><span class=""s1"">'Test: Push on empty stack, non-empty stack'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack = StackMin()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack.push(</span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.peek(), </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.minimum(), </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack.push(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.peek(), </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.minimum(), </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack.push(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.peek(), </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.minimum(), </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stack.push(</span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.peek(), </span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.minimum(), </span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s5"">(</span><span class=""s1"">'Test: Pop on non-empty stack'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.pop(), </span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.minimum(), </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.pop(), </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.minimum(), </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.pop(), </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.minimum(), </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.pop(), </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.minimum(), sys.maxsize)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s5"">(</span><span class=""s1"">'Test: Pop empty stack'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stack.pop(), </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s5"">(</span><span class=""s1"">'Success: test_stack_min'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestStackMin()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_stack_min()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Add two numbers whose digits are stored in a linked list in reverse order.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font: 14.0px 'Helvetica Neue'} span.s5 {font: 14.0px 'Helvetica Neue'; font-kerning: none} span.s6 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s7 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s8 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s9 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s10 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s11 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s12 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s13 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume this is a non-circular, singly linked list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we expect the return to be in reverse order too?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">What if one of the inputs is None?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return None for an invalid operation</span></li> </ul> <li class=""li2""><span class=""s1"">How large are these numbers--can they fit in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a linked list class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Empty list(s) -&gt; None</span></li> <li class=""li2""><span class=""s1"">Add values of different lengths</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Input 1: 6-&gt;5-&gt;None</span></li> <li class=""li2""><span class=""s1"">Input 2: 9-&gt;8-&gt;7</span></li> <li class=""li2""><span class=""s1"">Result: 5-&gt;4-&gt;8</span></li> </ul> <li class=""li2""><span class=""s1"">Add values of same lengths</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Exercised from values of different lengths</span></li> <li class=""li2""><span class=""s1"">Done here for completeness</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">We could solve this with an iterative or a recursive algorithm, both are well suited for this exercise. We'll use a recursive algorithm for practice with recursion. Note this takes an extra space of O(m) where m is the recursion depth.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Base case:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">if first and second lists are None AND carry is zero</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Return None</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Recursive case:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Set </span><span class=""s3"">value</span><span class=""s1""> to </span><span class=""s3"">carry</span></li> <li class=""li2""><span class=""s1"">Add both nodes' </span><span class=""s3"">data</span><span class=""s1""> to </span><span class=""s3"">value</span></li> <li class=""li4""><span class=""s4""></span><span class=""s5"">Set the </span><span class=""s1"">carry</span><span class=""s5""> to 1 if </span><span class=""s1"">value &gt;= 10, else 0</span></li> <li class=""li4""><span class=""s4""></span><span class=""s5"">Set the </span><span class=""s1"">remainder</span><span class=""s5""> to </span><span class=""s1"">value % 10</span></li> <li class=""li2""><span class=""s1"">Create a </span><span class=""s3"">node</span><span class=""s1""> with the </span><span class=""s3"">remainder</span></li> <li class=""li2""><span class=""s1"">Set </span><span class=""s3"">node.next</span><span class=""s1""> to a recursive call on the </span><span class=""s3"">next</span><span class=""s1""> nodes, passing in the </span><span class=""s3"">carry</span></li> <li class=""li2""><span class=""s1"">Return </span><span class=""s3"">node</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(m), extra space for result and recursion depth</span></li> </ul> <p class=""p2""><span class=""s1"">Notes:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Careful with adding if the lists differ</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Only add if a node is not None</span></li> <li class=""li2""><span class=""s1"">Alternatively, we could add trailing zeroes to the smaller list</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>class</b></span><span class=""s1""> </span><span class=""s9"">MyLinkedList</span><span class=""s1"">(LinkedList):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s1""> </span><span class=""s9"">_add_reverse</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, first_node, second_node, carry):</span></p> <p class=""p8""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Base case</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s1""> first_node </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1""> </span><span class=""s8""><b>and</b></span><span class=""s1""> second_node </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1""> </span><span class=""s8""><b>and</b></span><span class=""s1""> </span><span class=""s8""><b>not</b></span><span class=""s1""> carry:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Recursive case</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; value = carry</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; value += first_node.data </span><span class=""s8""><b>if</b></span><span class=""s1""> first_node </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>not</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1""> </span><span class=""s8""><b>else</b></span><span class=""s1""> </span><span class=""s12"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; value += second_node.data </span><span class=""s8""><b>if</b></span><span class=""s1""> second_node </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>not</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1""> </span><span class=""s8""><b>else</b></span><span class=""s1""> </span><span class=""s12"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; carry = </span><span class=""s12"">1</span><span class=""s1""> </span><span class=""s8""><b>if</b></span><span class=""s1""> value </span><span class=""s6""><b>&gt;=</b></span><span class=""s1""> </span><span class=""s12"">10</span><span class=""s1""> </span><span class=""s8""><b>else</b></span><span class=""s1""> </span><span class=""s12"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; value %= </span><span class=""s12"">10</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = Node(value)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node.</span><span class=""s8"">next</span><span class=""s1""> = </span><span class=""s10"">self</span><span class=""s1"">._add_reverse(</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; first_node.</span><span class=""s8"">next</span><span class=""s1""> </span><span class=""s8""><b>if</b></span><span class=""s1""> first_node </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>not</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1""> </span><span class=""s8""><b>else</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; second_node.</span><span class=""s8"">next</span><span class=""s1""> </span><span class=""s8""><b>if</b></span><span class=""s1""> first_node </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>not</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1""> </span><span class=""s8""><b>else</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; carry)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s1""> node</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s1""> </span><span class=""s9"">add_reverse</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, first_list, second_list):</span></p> <p class=""p8""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># See constraints</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s1""> first_list </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1""> </span><span class=""s8""><b>or</b></span><span class=""s1""> second_list </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = </span><span class=""s10"">self</span><span class=""s1"">._add_reverse(first_list.head, second_list.head, </span><span class=""s12"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s1""> MyLinkedList(head)</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s6""><b>%%</b></span><span class=""s1"">writefile test_add_reverse.py</span></p> <p class=""p7""><span class=""s8""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s8""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s8""><b>class</b></span><span class=""s11""> </span><span class=""s1"">TestAddReverse</span><span class=""s11"">(</span><span class=""s8"">object</span><span class=""s11"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s11"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s11""> </span><span class=""s1"">test_add_reverse</span><span class=""s11"">(</span><span class=""s10"">self</span><span class=""s11"">):</span></p> <p class=""p10""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">print</span><span class=""s11"">(</span><span class=""s1"">'Test: Empty list(s)'</span><span class=""s11"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(MyLinkedList().add_reverse(</span><span class=""s8""><b>None</b></span><span class=""s1"">, </span><span class=""s8""><b>None</b></span><span class=""s1"">), </span><span class=""s8""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(MyLinkedList().add_reverse(Node(</span><span class=""s12"">5</span><span class=""s1"">), </span><span class=""s8""><b>None</b></span><span class=""s1"">), </span><span class=""s8""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(MyLinkedList().add_reverse(</span><span class=""s8""><b>None</b></span><span class=""s1"">, Node(</span><span class=""s12"">10</span><span class=""s1"">)), </span><span class=""s8""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">print</span><span class=""s11"">(</span><span class=""s1"">'Test: Add values of different lengths'</span><span class=""s11"">)</span></p> <p class=""p8""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Input 1: 6-&gt;5-&gt;None</i></span></p> <p class=""p8""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Input 2: 9-&gt;8-&gt;7</i></span></p> <p class=""p8""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Result: 5-&gt;4-&gt;8</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; first_list = MyLinkedList(Node(</span><span class=""s12"">6</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; first_list.append(</span><span class=""s12"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; second_list = MyLinkedList(Node(</span><span class=""s12"">9</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; second_list.append(</span><span class=""s12"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; second_list.append(</span><span class=""s12"">7</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = MyLinkedList().add_reverse(first_list, second_list)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result.get_all_data(), [</span><span class=""s12"">5</span><span class=""s1"">, </span><span class=""s12"">4</span><span class=""s1"">, </span><span class=""s12"">8</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">print</span><span class=""s11"">(</span><span class=""s1"">'Test: Add values of same lengths'</span><span class=""s11"">)</span></p> <p class=""p8""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Input 1: 6-&gt;5-&gt;4</i></span></p> <p class=""p8""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Input 2: 9-&gt;8-&gt;7</i></span></p> <p class=""p8""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Result: 5-&gt;4-&gt;2-&gt;1</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; first_head = Node(</span><span class=""s12"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; first_list = MyLinkedList(first_head)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; first_list.append(</span><span class=""s12"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; first_list.append(</span><span class=""s12"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; second_head = Node(</span><span class=""s12"">9</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; second_list = MyLinkedList(second_head)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; second_list.append(</span><span class=""s12"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; second_list.append(</span><span class=""s12"">7</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = MyLinkedList().add_reverse(first_list, second_list)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result.get_all_data(), [</span><span class=""s12"">5</span><span class=""s1"">, </span><span class=""s12"">4</span><span class=""s1"">, </span><span class=""s12"">2</span><span class=""s1"">, </span><span class=""s12"">1</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s11"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">print</span><span class=""s11"">(</span><span class=""s1"">'Success: test_add_reverse'</span><span class=""s11"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s8""><b>def</b></span><span class=""s1""> </span><span class=""s9"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestAddReverse()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_add_reverse()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s8""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s6""><b>==</b></span><span class=""s1""> </span><span class=""s13"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Delete a node in the middle, given only access to that node.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume this is a non-circular, singly linked list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">What if the final node is being deleted, do we make it a dummy with value None?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a linked list class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Delete on empty list -&gt; None</span></li> <li class=""li2""><span class=""s1"">Delete None -&gt; None</span></li> <li class=""li2""><span class=""s1"">Delete on one node -&gt; [None]</span></li> <li class=""li2""><span class=""s1"">Delete on multiple nodes</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">We'll need two pointers, one to the current node and one to the next node. We will copy the next node's data to the current node's data (effectively deleting the current node) and update the current node's next pointer.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">set curr.data to next.data</span></li> <li class=""li2""><span class=""s1"">set curr.next to next.next</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s5""><b>class</b></span><span class=""s1""> </span><span class=""s6"">MyLinkedList</span><span class=""s1"">(LinkedList):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">delete_node</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, node):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.</span><span class=""s5"">next</span><span class=""s1""> </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.data = </span><span class=""s5""><b>None</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.data = node.</span><span class=""s5"">next</span><span class=""s1"">.data</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.</span><span class=""s5"">next</span><span class=""s1""> = node.</span><span class=""s5"">next</span><span class=""s1"">.</span><span class=""s5"">next</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_delete_mid.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>class</b></span><span class=""s8""> </span><span class=""s1"">TestDeleteNode</span><span class=""s8"">(</span><span class=""s5"">object</span><span class=""s8"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s8"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s8""> </span><span class=""s1"">test_delete_node</span><span class=""s8"">(</span><span class=""s7"">self</span><span class=""s8"">):</span></p> <p class=""p8""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: Empty list, null node to delete'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.delete_node(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: One node'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(head)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.delete_node(head)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s5""><b>None</b></span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: Multiple nodes'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node0 = linked_list.insert_to_front(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node1 = linked_list.insert_to_front(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node2 = linked_list.insert_to_front(</span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node3 = linked_list.insert_to_front(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.delete_node(node1)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: Multiple nodes, delete last element'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node0 = linked_list.insert_to_front(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node1 = linked_list.insert_to_front(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node2 = linked_list.insert_to_front(</span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node3 = linked_list.insert_to_front(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.delete_node(node0)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s5""><b>None</b></span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Success: test_delete_node'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestDeleteNode()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_delete_node()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the start of a linked list loop.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font: 14.0px Courier} span.s5 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s6 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s7 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s8 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s9 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s10 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s11 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s12 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is this a singly linked list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we are always passed a circular linked list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">When we find a loop, do we return the node or the node's data?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">The node</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a linked list class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Empty list -&gt; None</span></li> <li class=""li2""><span class=""s1"">Not a circular linked list -&gt; None</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">One element</span></li> <li class=""li2""><span class=""s1"">Two or more elements</span></li> </ul> <li class=""li2""><span class=""s1"">Circular linked list general case</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Use two references </span><span class=""s3"">slow</span><span class=""s1"">, </span><span class=""s3"">fast</span><span class=""s1"">, initialized to the </span><span class=""s3"">head</span></li> <li class=""li2""><span class=""s1"">Increment </span><span class=""s3"">slow</span><span class=""s1""> and </span><span class=""s3"">fast</span><span class=""s1""> until they meet</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s4""></span><span class=""s3"">fast</span><span class=""s1""> is incremented twice as fast as </span><span class=""s3"">slow</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">If </span><span class=""s3"">fast.next</span><span class=""s1""> is </span><span class=""s3"">None</span><span class=""s1"">, we do not have a circular list</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">When </span><span class=""s3"">slow</span><span class=""s1""> and </span><span class=""s3"">fast</span><span class=""s1""> meet, move </span><span class=""s3"">slow</span><span class=""s1""> to the </span><span class=""s3"">head</span></li> <li class=""li2""><span class=""s1"">Increment </span><span class=""s3"">slow</span><span class=""s1""> and </span><span class=""s3"">fast</span><span class=""s1""> one node at a time until they meet</span></li> <li class=""li2""><span class=""s1"">Where they meet is the start of the loop</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s7""><b>class</b></span><span class=""s1""> </span><span class=""s8"">MyLinkedList</span><span class=""s1"">(LinkedList):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s9"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s9""> </span><span class=""s1"">find_loop_start</span><span class=""s9"">(</span><span class=""s10"">self</span><span class=""s9"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.head </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1""> </span><span class=""s7""><b>or</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.head.</span><span class=""s7"">next</span><span class=""s1""> </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; slow = </span><span class=""s10"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; fast = </span><span class=""s10"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>while</b></span><span class=""s1""> fast.</span><span class=""s7"">next</span><span class=""s1""> </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>not</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; slow = slow.</span><span class=""s7"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fast = fast.</span><span class=""s7"">next</span><span class=""s1"">.</span><span class=""s7"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> fast </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> slow </span><span class=""s5""><b>==</b></span><span class=""s1""> fast:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>break</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; slow = </span><span class=""s10"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>while</b></span><span class=""s1""> slow </span><span class=""s5""><b>!=</b></span><span class=""s1""> fast:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; slow = slow.</span><span class=""s7"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fast = fast.</span><span class=""s7"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> fast </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> slow</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s5""><b>%%</b></span><span class=""s1"">writefile test_find_loop_start.py</span></p> <p class=""p6""><span class=""s7""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s7""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7""><b>class</b></span><span class=""s9""> </span><span class=""s1"">TestFindLoopStart</span><span class=""s9"">(</span><span class=""s7"">object</span><span class=""s9"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s9"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s9""> </span><span class=""s1"">test_find_loop_start</span><span class=""s9"">(</span><span class=""s10"">self</span><span class=""s9"">):</span></p> <p class=""p8""><span class=""s9"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s9"">(</span><span class=""s1"">'Test: Empty list'</span><span class=""s9"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.find_loop_start(), </span><span class=""s7""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s9"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s9"">(</span><span class=""s1"">'Test: Not a circular linked list: One element'</span><span class=""s9"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s11"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(head)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.find_loop_start(), </span><span class=""s7""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s9"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s9"">(</span><span class=""s1"">'Test: Not a circular linked list: Two elements'</span><span class=""s9"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s11"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.find_loop_start(), </span><span class=""s7""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s9"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s9"">(</span><span class=""s1"">'Test: Not a circular linked list: Three or more elements'</span><span class=""s9"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s11"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.find_loop_start(), </span><span class=""s7""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s9"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s9"">(</span><span class=""s1"">'Test: General case: Circular linked list'</span><span class=""s9"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node10 = Node(</span><span class=""s11"">10</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node9 = Node(</span><span class=""s11"">9</span><span class=""s1"">, node10)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node8 = Node(</span><span class=""s11"">8</span><span class=""s1"">, node9)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node7 = Node(</span><span class=""s11"">7</span><span class=""s1"">, node8)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node6 = Node(</span><span class=""s11"">6</span><span class=""s1"">, node7)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node5 = Node(</span><span class=""s11"">5</span><span class=""s1"">, node6)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node4 = Node(</span><span class=""s11"">4</span><span class=""s1"">, node5)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node3 = Node(</span><span class=""s11"">3</span><span class=""s1"">, node4)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node2 = Node(</span><span class=""s11"">2</span><span class=""s1"">, node3)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node1 = Node(</span><span class=""s11"">1</span><span class=""s1"">, node2)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node0 = Node(</span><span class=""s11"">0</span><span class=""s1"">, node1)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node10.</span><span class=""s7"">next</span><span class=""s1""> = node3</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(node0)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.find_loop_start(), node3)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s9"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s9"">(</span><span class=""s1"">'Success: test_find_loop_start'</span><span class=""s9"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestFindLoopStart()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_find_loop_start()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s7""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s5""><b>==</b></span><span class=""s1""> </span><span class=""s12"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Find the kth to last element of a linked list.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume this is a non-circular, singly linked list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume k is a valid integer?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If k = 0, does this return the last element?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">What happens if k is greater than or equal to the length of the linked list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return None</span></li> </ul> <li class=""li2""><span class=""s1"">Can you use additional data structures?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a linked list class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Empty list -&gt; None</span></li> <li class=""li2""><span class=""s1"">k is &gt;= the length of the linked list -&gt; None</span></li> <li class=""li2""><span class=""s1"">One element, k = 0 -&gt; element</span></li> <li class=""li2""><span class=""s1"">General case with many elements, k &lt; length of linked list</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Setup two pointers, fast and slow</span></li> <li class=""li2""><span class=""s1"">Give fast a headstart, incrementing it once if k = 1, twice if k = 2, ...</span></li> <li class=""li2""><span class=""s1"">Increment both pointers until fast reaches the end</span></li> <li class=""li2""><span class=""s1"">Return the value of slow</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s5""><b>class</b></span><span class=""s1""> </span><span class=""s6"">MyLinkedList</span><span class=""s1"">(LinkedList):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s7""> </span><span class=""s1"">kth_to_last_elem</span><span class=""s7"">(</span><span class=""s8"">self</span><span class=""s7"">, k):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.head </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; fast = </span><span class=""s8"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; slow = </span><span class=""s8"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Give fast a headstart, incrementing it</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># once for k = 1, twice for k = 2, etc</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> _ </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(k):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fast = fast.</span><span class=""s5"">next</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># If k &gt;= num elements, return None</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> fast </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Increment both pointers until fast reaches the end</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> fast.</span><span class=""s5"">next</span><span class=""s1""> </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fast = fast.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; slow = slow.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> slow.data</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_kth_to_last_elem.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s7""> </span><span class=""s6"">Test</span><span class=""s7"">(</span><span class=""s1"">object</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s7""> </span><span class=""s1"">test_kth_to_last_elem</span><span class=""s7"">(</span><span class=""s8"">self</span><span class=""s7"">):</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: Empty list'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.kth_to_last_elem(</span><span class=""s9"">0</span><span class=""s1"">), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: k &gt;= len(list)'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.kth_to_last_elem(</span><span class=""s9"">100</span><span class=""s1"">), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: One element, k = 0'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(head)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.kth_to_last_elem(</span><span class=""s9"">0</span><span class=""s1"">), </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: General case'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">7</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.kth_to_last_elem(</span><span class=""s9"">2</span><span class=""s1"">), </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Success: test_kth_to_last_elem'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = Test()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_kth_to_last_elem()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement a linked list with insert, append, find, delete, length, and print methods.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume this is a non-circular, singly linked list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we keep track of the tail or just the head?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Just the head</span></li> </ul> <li class=""li2""><span class=""s1"">Can we insert None values?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p4""><span class=""s1""><b>Insert to Front</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Insert a None</span></li> <li class=""li2""><span class=""s1"">Insert in an empty list</span></li> <li class=""li2""><span class=""s1"">Insert in a list with one element or more elements</span></li> </ul> <p class=""p4""><span class=""s1""><b>Append</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Append a None</span></li> <li class=""li2""><span class=""s1"">Append in an empty list</span></li> <li class=""li2""><span class=""s1"">Insert in a list with one element or more elements</span></li> </ul> <p class=""p4""><span class=""s1""><b>Find</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Find a None</span></li> <li class=""li2""><span class=""s1"">Find in an empty list</span></li> <li class=""li2""><span class=""s1"">Find in a list with one element or more matching elements</span></li> <li class=""li2""><span class=""s1"">Find in a list with no matches</span></li> </ul> <p class=""p4""><span class=""s1""><b>Delete</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Delete a None</span></li> <li class=""li2""><span class=""s1"">Delete in an empty list</span></li> <li class=""li2""><span class=""s1"">Delete in a list with one element or more matching elements</span></li> <li class=""li2""><span class=""s1"">Delete in a list with no matches</span></li> </ul> <p class=""p4""><span class=""s1""><b>Length</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Length of zero or more elements</span></li> </ul> <p class=""p4""><span class=""s1""><b>Print</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Print an empty list</span></li> <li class=""li2""><span class=""s1"">Print a list with one or more elements</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p4""><span class=""s1""><b><br></b></span></p><p class=""p4""><span class=""s1""><b>Insert to Front</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the data we are inserting is None, return</span></li> <li class=""li2""><span class=""s1"">Create a node with the input data, set node.next to head</span></li> <li class=""li2""><span class=""s1"">Assign the head to the node</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Append</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the data we are inserting is None, return</span></li> <li class=""li2""><span class=""s1"">Create a node with the input data</span></li> <li class=""li2""><span class=""s1"">If this is an empty list</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Assign the head to the node</span></li> </ul> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Iterate to the end of the list</span></li> <li class=""li2""><span class=""s1"">Set the final node's next to the new node</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Find</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If data we are finding is None, return</span></li> <li class=""li2""><span class=""s1"">If the list is empty, return</span></li> <li class=""li2""><span class=""s1"">For each node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the value is a match, return it</span></li> <li class=""li2""><span class=""s1"">Else, move on to the next node</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Delete</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If data we are deleting is None, return</span></li> <li class=""li2""><span class=""s1"">If the list is empty, return</span></li> <li class=""li2""><span class=""s1"">For each node, keep track of previous and current node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the value we are deleting is a match in the current node</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Update previous node's next pointer to the current node's next pointer</span></li> <li class=""li2""><span class=""s1"">We do not have have to explicitly delete in Python</span></li> </ul> <li class=""li2""><span class=""s1"">Else, move on to the next node</span></li> </ul> <li class=""li2""><span class=""s1"">As an alternative, we could avoid the use of two pointers by evaluating the current node's next value:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the next value is a match, set the current node's next to next.next</span></li> <li class=""li2""><span class=""s1"">Special care should be taken if deleting the head node</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Length</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">For each node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Increase length counter</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Print</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">For each node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Print the node's value</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile linked_list.py</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Node</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data, </span><span class=""s6"">next</span><span class=""s1"">=</span><span class=""s6""><b>None</b></span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.</span><span class=""s6"">next</span><span class=""s1""> = </span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.data = data</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__str__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.data</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">LinkedList</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, head=</span><span class=""s6""><b>None</b></span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.head = head</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__len__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr = </span><span class=""s7"">self</span><span class=""s1"">.head</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; counter = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> curr </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; counter += </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr = curr.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> counter</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">insert_to_front</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> data </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = Node(data, </span><span class=""s7"">self</span><span class=""s1"">.head)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.head = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> node</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">append</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> data </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = Node(data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.head </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.head = Node(data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_node = </span><span class=""s7"">self</span><span class=""s1"">.head</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> curr_node.</span><span class=""s6"">next</span><span class=""s1""> </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_node = curr_node.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_node.</span><span class=""s6"">next</span><span class=""s1""> = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> node</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">find</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> data </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_node = </span><span class=""s7"">self</span><span class=""s1"">.head</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> curr_node </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> curr_node.data </span><span class=""s3""><b>==</b></span><span class=""s1""> data:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> curr_node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_node = curr_node.</span><span class=""s6"">next</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s4""> </span><span class=""s1""><b>None</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">delete</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> data </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.head </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.head.data </span><span class=""s3""><b>==</b></span><span class=""s1""> data:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.head = </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; prev_node = </span><span class=""s7"">self</span><span class=""s1"">.head</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_node = </span><span class=""s7"">self</span><span class=""s1"">.head.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> curr_node </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> curr_node.data </span><span class=""s3""><b>==</b></span><span class=""s1""> data:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prev_node.</span><span class=""s6"">next</span><span class=""s1""> = curr_node.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prev_node = curr_node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_node = curr_node.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">delete_alt</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> data </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.head </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_node = </span><span class=""s7"">self</span><span class=""s1"">.head</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> curr_node.data </span><span class=""s3""><b>==</b></span><span class=""s1""> data:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_node = curr_node.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> curr_node.</span><span class=""s6"">next</span><span class=""s1""> </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> curr_node.</span><span class=""s6"">next</span><span class=""s1"">.data </span><span class=""s3""><b>==</b></span><span class=""s1""> data:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_node.</span><span class=""s6"">next</span><span class=""s1""> = curr_node.</span><span class=""s6"">next</span><span class=""s1"">.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_node = curr_node.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">print_list</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_node = </span><span class=""s7"">self</span><span class=""s1"">.head</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> curr_node </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s1"">(curr_node.data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_node = curr_node.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">get_all_data</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_node = </span><span class=""s7"">self</span><span class=""s1"">.head</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> curr_node </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data.append(curr_node.data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_node = curr_node.</span><span class=""s6"">next</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_linked_list.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestLinkedList</span><span class=""s4"">(</span><span class=""s6"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_insert_to_front</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: insert_to_front on an empty list'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = LinkedList(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s8"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s8"">10</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: insert_to_front on a None'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s8"">10</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: insert_to_front general case'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">'bc'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s9"">'bc'</span><span class=""s1"">, </span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s8"">10</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_insert_to_front\n'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_append</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: append on an empty list'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = LinkedList(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s8"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s8"">10</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: append a None'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s8"">10</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: append general case'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s9"">'bc'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s8"">10</span><span class=""s1"">, </span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'bc'</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_append\n'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_find</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: find on an empty list'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = LinkedList(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = linked_list.find(</span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(node, </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: find a None'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s8"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = LinkedList(head)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = linked_list.find(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(node, </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: find general case with matches'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s8"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = LinkedList(head)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">'bc'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = linked_list.find(</span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">str</span><span class=""s1"">(node), </span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: find general case with no matches'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = linked_list.find(</span><span class=""s9"">'aaa'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(node, </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_find\n'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_delete</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: delete on an empty list'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = LinkedList(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.delete(</span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: delete a None'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s8"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = LinkedList(head)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.delete(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s8"">10</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: delete general case with matches'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s8"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = LinkedList(head)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">'bc'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.delete(</span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s9"">'bc'</span><span class=""s1"">, </span><span class=""s8"">10</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: delete general case with no matches'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.delete(</span><span class=""s9"">'aa'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s9"">'bc'</span><span class=""s1"">, </span><span class=""s8"">10</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_delete\n'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">test_len</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: len on an empty list'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = LinkedList(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">len</span><span class=""s1"">(linked_list), </span><span class=""s8"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Test: len general case'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s8"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = LinkedList(head)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">'bc'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">len</span><span class=""s1"">(linked_list), </span><span class=""s8"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_len\n'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestLinkedList()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_insert_to_front()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_append()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_find()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_delete()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_len()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Determine if a linked list is a palindrome.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume this is a non-circular, singly linked list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is a single character or number a palindrome?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a linked list class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we use additional data structures?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Empty list -&gt; False</span></li> <li class=""li2""><span class=""s1"">Single element list -&gt; False</span></li> <li class=""li2""><span class=""s1"">Two or more element list, not a palindrome -&gt; False</span></li> <li class=""li2""><span class=""s1"">General case: Palindrome with even length -&gt; True</span></li> <li class=""li2""><span class=""s1"">General case: Palindrome with odd length -&gt; True</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Reverse the linked list</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Iterate through the current linked list</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Insert to front the current node into a new linked list</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Compare the reversed list with the original list</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Only need to compare the first half</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p2""><span class=""s1"">Note:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">We could also do this iteratively, using a stack to effectively reverse the first half of the string.</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> __future__ </span><span class=""s5""><b>import</b></span><span class=""s1""> division</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>class</b></span><span class=""s1""> </span><span class=""s6"">MyLinkedList</span><span class=""s1"">(LinkedList):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s7""> </span><span class=""s1"">is_palindrome</span><span class=""s7"">(</span><span class=""s8"">self</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.head </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.head.</span><span class=""s5"">next</span><span class=""s1""> </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr = </span><span class=""s8"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; reversed_list = MyLinkedList()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; length = </span><span class=""s9"">0</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Reverse the linked list</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> curr </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reversed_list.insert_to_front(curr.data)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; length += </span><span class=""s9"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr = curr.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Compare the reversed list with the original list</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Only need to compare the first half</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; iterations = length </span><span class=""s3""><b>//</b></span><span class=""s1""> </span><span class=""s9"">2</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr = </span><span class=""s8"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_reversed = reversed_list.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> _ </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(iterations):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> curr.data </span><span class=""s3""><b>!=</b></span><span class=""s1""> curr_reversed.data:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr = curr.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_reversed = curr_reversed.</span><span class=""s5"">next</span></p> <p class=""p9""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s7""> </span><span class=""s1""><b>True</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_palindrome.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>class</b></span><span class=""s7""> </span><span class=""s1"">TestPalindrome</span><span class=""s7"">(</span><span class=""s5"">object</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s7""> </span><span class=""s1"">test_palindrome</span><span class=""s7"">(</span><span class=""s8"">self</span><span class=""s7"">):</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: Empty list'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.is_palindrome(), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: Single element list'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(head)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.is_palindrome(), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: Two element list, not a palindrome'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.is_palindrome(), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: General case: Palindrome with even length'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s10"">'a'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(head)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s10"">'b'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s10"">'b'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s10"">'a'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.is_palindrome(), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: General case: Palindrome with odd length'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; head = Node(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(head)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.append(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.is_palindrome(), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Success: test_palindrome'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestPalindrome()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_palindrome()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Partition a linked list around a value x, such that all nodes less than x come before all nodes greater than or equal to x.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume this is a non-circular, singly linked list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we expect the function to return a new list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the input x is valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a linked list class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we create additional data structures?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Empty list -&gt; []</span></li> <li class=""li2""><span class=""s1"">One element list -&gt; [element]</span></li> <li class=""li2""><span class=""s1"">Left linked list is empty</span></li> <li class=""li2""><span class=""s1"">Right linked list is empty</span></li> <li class=""li2""><span class=""s1"">General case</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Partition = 10</span></li> <li class=""li2""><span class=""s1"">Input: 4, 3, 13, 8, 10, 1, 10, 12</span></li> <li class=""li2""><span class=""s1"">Output: 4, 3, 8, 1, 10, 10, 13, 12</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Create left and right linked lists</span></li> <li class=""li2""><span class=""s1"">For each element in the list</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If elem &lt; x, append to the left list</span></li> <li class=""li2""><span class=""s1"">else, append to the right list</span></li> </ul> <li class=""li2""><span class=""s1"">Merge left and right lists</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s5""><b>class</b></span><span class=""s1""> </span><span class=""s6"">MyLinkedList</span><span class=""s1"">(LinkedList):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">partition</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.head </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left = MyLinkedList(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right = MyLinkedList(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr = </span><span class=""s7"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Build the left and right lists</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> curr </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> curr.data </span><span class=""s3""><b>&lt;</b></span><span class=""s1""> data:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; left.append(curr.data)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>elif</b></span><span class=""s1""> curr.data </span><span class=""s3""><b>==</b></span><span class=""s1""> data:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; right.insert_to_front(curr.data)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; right.append(curr.data)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr = curr.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_left = left.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> curr_left </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> right</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Merge the two lists</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> curr_left.</span><span class=""s5"">next</span><span class=""s1""> </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_left = curr_left.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_left.</span><span class=""s5"">next</span><span class=""s1""> = right.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> left</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_partition.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s8""> </span><span class=""s1"">TestPartition</span><span class=""s8"">(</span><span class=""s5"">object</span><span class=""s8"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s8"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s8""> </span><span class=""s1"">test_partition</span><span class=""s8"">(</span><span class=""s7"">self</span><span class=""s8"">):</span></p> <p class=""p9""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: Empty list'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.partition(</span><span class=""s9"">10</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: One element list, left list empty'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(Node(</span><span class=""s9"">5</span><span class=""s1"">))</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.partition(</span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s9"">5</span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: Right list is empty'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(Node(</span><span class=""s9"">5</span><span class=""s1"">))</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.partition(</span><span class=""s9"">10</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s9"">5</span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Test: General case'</span><span class=""s8"">)</span></p> <p class=""p7""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Partition = 10</i></span></p> <p class=""p7""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Input: 4, 3, 13, 8, 10, 1, 14, 10, 12</i></span></p> <p class=""p7""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Output: 4, 3, 8, 1, 10, 10, 13, 14, 12</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list = MyLinkedList(Node(</span><span class=""s9"">12</span><span class=""s1"">))</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">10</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">14</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">10</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">8</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">13</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; partitioned_list = linked_list.partition(</span><span class=""s9"">10</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(partitioned_list.get_all_data(),</span></p> <p class=""p6""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">8</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">10</span><span class=""s1"">, </span><span class=""s9"">10</span><span class=""s1"">, </span><span class=""s9"">13</span><span class=""s1"">, </span><span class=""s9"">14</span><span class=""s1"">, </span><span class=""s9"">12</span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Success: test_partition'</span><span class=""s8"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestPartition()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_partition()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Remove duplicates from a linked list.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume this is a non-circular, singly linked list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can you insert None values in the list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a linked list class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we use additional data structures?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Implement both solutions</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Empty linked list -&gt; []</span></li> <li class=""li2""><span class=""s1"">One element linked list -&gt; [element]</span></li> <li class=""li2""><span class=""s1"">General case with no duplicates</span></li> <li class=""li2""><span class=""s1"">General case with duplicates</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm: Hash Map Lookup</b></span></p> <p class=""p2""><span class=""s1"">Loop through each node</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">For each node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the node's value is in the hash map</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Delete the node</span></li> </ul> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Add node's value to the hash map</span></li> </ul> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm: In-Place</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">For each node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Compare node with every other node</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Delete nodes that match current node</span></li> </ul> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n^2)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p2""><span class=""s1"">Note:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">We'll need to use a 'runner' to check every other node and compare it to the current node</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s5""><b>class</b></span><span class=""s1""> </span><span class=""s6"">MyLinkedList</span><span class=""s1"">(LinkedList):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s7""> </span><span class=""s1"">remove_dupes</span><span class=""s7"">(</span><span class=""s8"">self</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.head </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = </span><span class=""s8"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; seen_data = </span><span class=""s5"">set</span><span class=""s1"">()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.data </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>in</b></span><span class=""s1""> seen_data:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; seen_data.add(node.data)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prev = node</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = node.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prev.</span><span class=""s5"">next</span><span class=""s1""> = node.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = node.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s7""> </span><span class=""s1"">remove_dupes_single_pointer</span><span class=""s7"">(</span><span class=""s8"">self</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.head </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = </span><span class=""s8"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; seen_data = </span><span class=""s5"">set</span><span class=""s1"">({node.data})</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> node.</span><span class=""s5"">next</span><span class=""s1""> </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.</span><span class=""s5"">next</span><span class=""s1"">.data </span><span class=""s5""><b>in</b></span><span class=""s1""> seen_data:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.</span><span class=""s5"">next</span><span class=""s1""> = node.</span><span class=""s5"">next</span><span class=""s1"">.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; seen_data.add(node.</span><span class=""s5"">next</span><span class=""s1"">.data)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = node.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s7""> </span><span class=""s1"">remove_dupes_in_place</span><span class=""s7"">(</span><span class=""s8"">self</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr = </span><span class=""s8"">self</span><span class=""s1"">.head</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> curr </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; runner = curr</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> runner.</span><span class=""s5"">next</span><span class=""s1""> </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> runner.</span><span class=""s5"">next</span><span class=""s1"">.data </span><span class=""s3""><b>==</b></span><span class=""s1""> curr.data:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; runner.</span><span class=""s5"">next</span><span class=""s1""> = runner.</span><span class=""s5"">next</span><span class=""s1"">.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; runner = runner.</span><span class=""s5"">next</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr = curr.</span><span class=""s5"">next</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_remove_duplicates.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>class</b></span><span class=""s7""> </span><span class=""s1"">TestRemoveDupes</span><span class=""s7"">(</span><span class=""s5"">object</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">test_remove_dupes</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, linked_list):</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: Empty list'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.remove_dupes()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: One element list'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.remove_dupes()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s9"">2</span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: General case, duplicates'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.insert_to_front(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.remove_dupes()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Test: General case, no duplicates'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; linked_list.remove_dupes()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(linked_list.get_all_data(), [</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">])</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s7"">(</span><span class=""s1"">'Success: test_remove_dupes\n'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestRemoveDupes()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; linked_list = MyLinkedList(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_remove_dupes(linked_list)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement a binary search tree with an insert method.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s5 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s10 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s11 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we insert None values?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we are working with valid integers?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume all left descendents &lt;= n &lt; all right descendents?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we have to keep track of the parent nodes?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">This is optional</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <p class=""p4""><span class=""s1""><b><br /></b></span></p><p class=""p4""><span class=""s1""><b>Insert</b></span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Insert will be tested through the following traversal:</span></p> <p class=""p4""><span class=""s1""><b><br /></b></span></p><p class=""p4""><span class=""s1""><b>In-Order Traversal</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">5, 2, 8, 1, 3 -&gt; 1, 2, 3, 5, 8</span></li> <li class=""li2""><span class=""s1"">1, 2, 3, 4, 5 -&gt; 1, 2, 3, 4, 5</span></li> </ul> <p class=""p2""><span class=""s1"">If the </span><span class=""s3"">root</span><span class=""s1""> input is </span><span class=""s3"">None</span><span class=""s1"">, return a tree with the only element being the new root node.</span></p> <p class=""p2""><span class=""s1"">You do not have to code the in-order traversal, it is part of the unit test.</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p4""><span class=""s1""><b><br /></b></span></p><p class=""p4""><span class=""s1""><b>Insert</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the root is None, return Node(data)</span></li> <li class=""li2""><span class=""s1"">If the data is &lt;= the current node's data</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the current node's left child is None, set it to Node(data)</span></li> <li class=""li2""><span class=""s1"">Else, recursively call insert on the left child</span></li> </ul> <li class=""li2""><span class=""s1"">Else</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the current node's right child is None, set it to Node(data)</span></li> <li class=""li2""><span class=""s1"">Else, recursively call insert on the right child</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(h), where h is the height of the tree</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">In a balanced tree, the height is O(log(n))</span></li> <li class=""li2""><span class=""s1"">In the worst case we have a linked list structure with O(n)</span></li> </ul> <li class=""li2""><span class=""s1"">Space: O(m), where m is the recursion depth, or O(1) if using an iterative approach</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s4""><b>%%</b></span><span class=""s1"">writefile bst.py</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">Node</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.data = data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.left = </span><span class=""s7""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.right = </span><span class=""s7""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.parent = </span><span class=""s7""><b>None</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">__repr__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s7"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.data)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">Bst</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, root=</span><span class=""s7""><b>None</b></span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.root = root</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">insert</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> data </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s9"">'data cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.root </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.root = Node(data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.root</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style=""color: rgb(0, 128, 0);""><b>else</b></span>:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._insert(</span><span class=""s8"">self</span><span class=""s1"">.root, data)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">_insert</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, node, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> node </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> Node(data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> data </span><span class=""s4""><b>&lt;=</b></span><span class=""s1""> node.data:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> node.left </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.left = </span><span class=""s8"">self</span><span class=""s1"">._insert(node.left, data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.left.parent = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> node.left</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._insert(node.left, data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> node.right </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.right = </span><span class=""s8"">self</span><span class=""s1"">._insert(node.right, data)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.right.parent = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> node.right</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._insert(node.right, data)</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s4""><b>%%</b></span><span class=""s1"">writefile test_bst.py</span></p> <p class=""p7""><span class=""s7""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s7""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">TestTree</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.results = Results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s5""> </span><span class=""s1"">test_tree_one</span><span class=""s5"">(</span><span class=""s8"">self</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = Bst()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; in_order_traversal(bst.root, </span><span class=""s8"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s7"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.results), </span><span class=""s9"">'[1, 2, 3, 5, 8]'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.results.clear_results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s5""> </span><span class=""s1"">test_tree_two</span><span class=""s5"">(</span><span class=""s8"">self</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = Bst()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; in_order_traversal(bst.root, </span><span class=""s8"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s7"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.results), </span><span class=""s9"">'[1, 2, 3, 4, 5]'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">'Success: test_tree'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestTree()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_tree_one()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_tree_two()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s4""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Create a binary search tree with minimal height from a sorted array.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the array in increasing order?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are the array elements unique?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a Node class with an insert method?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">0, 1, 2, 3, 4, 5, 6 -&gt; height 3</span></li> <li class=""li2""><span class=""s1"">0, 1, 2, 3, 4, 5, 6, 7 -&gt; height 4</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">To create a bst with minimum height, we need to use the middle element as the root. We'll use recursion to divide the array in half and continue to pick the middle element from the left and right halves as the nodes to insert in the tree.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">create_min_bst(array, start, end)</span></li> <li class=""li2""><span class=""s1"">Base case: Stop when end &lt; start</span></li> <li class=""li2""><span class=""s1"">Create a node with the mid element</span></li> <li class=""li2""><span class=""s1"">Recursively build node.left by calling create_min_bst using the left sub array</span></li> <li class=""li2""><span class=""s1"">Recursively build node.right by calling create_min_bst using the right sub array</span></li> <li class=""li2""><span class=""s1"">Return the node</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(h), where h is the tree's height (since this is a tree with minimum height, h = log n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> __future__ </span><span class=""s5""><b>import</b></span><span class=""s1""> division</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s6""> </span><span class=""s7"">MinBst</span><span class=""s6"">(</span><span class=""s1"">object</span><span class=""s6"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">create_min_bst</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, array):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._create_min_bst(array, </span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s5"">len</span><span class=""s1"">(array)&nbsp;</span><span class=""s3""><b>-&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">_create_min_bst</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, array, start, end):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> end </span><span class=""s3""><b>&lt;</b></span><span class=""s1""> start:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mid = (start&nbsp;</span><span class=""s3""><b>+&nbsp;</b></span><span class=""s1"">end) </span><span class=""s3""><b>//</b></span><span class=""s1""> </span><span class=""s9"">2</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = Node(array[mid])</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node.left = </span><span class=""s8"">self</span><span class=""s1"">._create_min_bst(array, start, mid&nbsp;</span><span class=""s3""><b>-&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node.right = </span><span class=""s8"">self</span><span class=""s1"">._create_min_bst(array, mid&nbsp;</span><span class=""s3""><b>+&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">, end)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> node</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_bst_min.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">height</span><span class=""s1"">(node):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s9"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s3""><b>+</b></span><span class=""s1""> </span><span class=""s5"">max</span><span class=""s1"">(height(node.left),</span></p> <p class=""p6""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; height(node.right))</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s6""> </span><span class=""s7"">TestBstMin</span><span class=""s6"">(</span><span class=""s1"">object</span><span class=""s6"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_bst_min</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; min_bst = MinBst()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; root = min_bst.create_min_bst(array)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(height(root), </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; min_bst = MinBst()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; root = min_bst.create_min_bst(array)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(height(root), </span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_bst_min'</span><span class=""s6"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestBstMin()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_bst_min()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Find the second largest node in a binary search tree.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If this is called on a None input or a single node, should we raise an exception?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">None -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">Single node -&gt; ValueError</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a Node class with an insert method?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None or single node -&gt; Exception</span></li> </ul> <p class=""p4""><span class=""s1"">Input:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _10_</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _/&nbsp; &nbsp; \_ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; 15</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / \ &nbsp; &nbsp; &nbsp; / \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; 8 &nbsp; &nbsp; 12&nbsp; 20</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \ &nbsp; &nbsp; &nbsp; &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; 30</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Output: 20</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Input:</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / &nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / \</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; 7</span></p> <p class=""p4""><span class=""s1"">Output: 7</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">If there is no right node, the second largest is the right most left subtree:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / &nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / \</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; 7</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">If there is a right node and the right node has children, recurse to that right child:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _10_</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _/&nbsp; &nbsp; \_ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; 15</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / \ &nbsp; &nbsp; &nbsp; / \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; 8 &nbsp; &nbsp; 12&nbsp; 20</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \ &nbsp; &nbsp; &nbsp; &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; 30</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Eventually we'll get to the following scenario:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 20</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 30</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">If the right node has no children, the second largest is the current node.</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(h)</span></li> <li class=""li2""><span class=""s1"">Space: O(h), where h is the height of the tree</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">Solution</span><span class=""s6"">(Bst):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">_find_second_largest</span><span class=""s6"">(</span><span class=""s7"">self</span><span class=""s6"">, node):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.right </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.right.left </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> node.right.right </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">._find_second_largest(node.right)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; <font color=""#008000""><b>else:</b></font></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">._find_right_most_node(node.left)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">_find_right_most_node</span><span class=""s6"">(</span><span class=""s7"">self</span><span class=""s6"">, node):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.right </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">._find_right_most_node(node.right)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> node</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">find_second_largest</span><span class=""s6"">(</span><span class=""s7"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.root </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'root cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.root.right </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>and</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.root.left </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s6""> ValueError(</span><span class=""s1"">'root must have at least one child'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">._find_second_largest(</span><span class=""s7"">self</span><span class=""s1"">.root)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_bst_second_largest.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">TestBstSecondLargest</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_bst_second_largest</span><span class=""s6"">(</span><span class=""s7"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = Solution(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, bst.find_second_largest)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; root = Node(</span><span class=""s9"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = Solution(root)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node5 = bst.insert(</span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node15 = bst.insert(</span><span class=""s9"">15</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node3 = bst.insert(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node8 = bst.insert(</span><span class=""s9"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node12 = bst.insert(</span><span class=""s9"">12</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node20 = bst.insert(</span><span class=""s9"">20</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node2 = bst.insert(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node4 = bst.insert(</span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node30 = bst.insert(</span><span class=""s9"">30</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst.find_second_largest(), node20)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; root = Node(</span><span class=""s9"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = Solution(root)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node5 = bst.insert(</span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node3 = bst.insert(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node7 = bst.insert(</span><span class=""s9"">7</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst.find_second_largest(), node7)</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_bst_second_largest'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s10"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBstSecondLargest()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_bst_second_largest()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the in-order successor of a given node in a binary search tree.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If there is no successor, do we return None?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If the input is None, should we throw an exception?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a Node class that keeps track of parents?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _5_</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; 8</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \&nbsp; &nbsp; / &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; 2 &nbsp; 4&nbsp; 6&nbsp; &nbsp; 12</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; /&nbsp; &nbsp; &nbsp; &nbsp; \ &nbsp; / \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7 10&nbsp; 15</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 9</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">In: None&nbsp; Out: Exception</span></p> <p class=""p4""><span class=""s1"">In: 4 &nbsp; &nbsp; Out: 5</span></p> <p class=""p4""><span class=""s1"">In: 5 &nbsp; &nbsp; Out: 6</span></p> <p class=""p4""><span class=""s1"">In: 8 &nbsp; &nbsp; Out: 9</span></p> <p class=""p4""><span class=""s1"">In: 15&nbsp; &nbsp; Out: None</span></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the node has a right subtree, return the left-most node in the right subtree</span></li> <li class=""li2""><span class=""s1"">Else, go up until you find a node that is its parent's left node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If you get to the root (ie node.parent is None), return None</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">The original input node must be the largest in the tree</span></li> </ul> <li class=""li2""><span class=""s1"">Else, return the parent</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(h), where h is the height of the tree</span></li> <li class=""li2""><span class=""s1"">Space: O(h), where h is the recursion depth (tree height), or O(1) if using an iterative approach</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">BstSuccessor</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">get_next</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, node):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s9"">'node cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.right </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._left_most(node.right)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._next_ancestor(node)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">_left_most</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, node):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.left </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._left_most(node.left)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> node.data</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">_next_ancestor</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, node):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.parent </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.parent.data </span><span class=""s3""><b>&gt;</b></span><span class=""s1""> node.data:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> node.parent.data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._next_ancestor(node.parent)</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># We reached the root, the original input node</i></span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># must be the largest element in the tree.</i></span></p> <p class=""p10""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s6""> </span><span class=""s1""><b>None</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_bst_successor.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">TestBstSuccessor</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3"">@raises</span><span class=""s1"">(Exception)</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_bst_successor_empty</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst_successor = BstSuccessor()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst_successor.get_next(</span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_bst_successor</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes = {}</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = Node(</span><span class=""s10"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">5</span><span class=""s1"">] = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = Bst(nodes[</span><span class=""s10"">5</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">3</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">8</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">2</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">4</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">6</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">12</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">12</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">1</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">7</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">7</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">10</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">15</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">15</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes[</span><span class=""s10"">9</span><span class=""s1"">] = bst.insert(</span><span class=""s10"">9</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst_successor = BstSuccessor()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst_successor.get_next(nodes[</span><span class=""s10"">4</span><span class=""s1"">]), </span><span class=""s10"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst_successor.get_next(nodes[</span><span class=""s10"">5</span><span class=""s1"">]), </span><span class=""s10"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst_successor.get_next(nodes[</span><span class=""s10"">8</span><span class=""s1"">]), </span><span class=""s10"">9</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst_successor.get_next(nodes[</span><span class=""s10"">15</span><span class=""s1"">]), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_bst_successor'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBstSuccessor()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_bst_successor()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_bst_successor_empty()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Determine if a tree is a valid binary search tree.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can the tree have duplicates?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If this is called on a None input, should we raise an exception?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a Node class?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">None -&gt; exception</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">Valid:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; 5</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; / &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; 5 &nbsp; &nbsp; 8</span></p> <p class=""p4""><span class=""s1"">&nbsp; / \ &nbsp; /</span></p> <p class=""p4""><span class=""s1"">&nbsp;4 &nbsp; 6 7</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Invalid:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; 5</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; / &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; 5 &nbsp; &nbsp; 8</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; \&nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 20</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We'll use a recursive solution that valides left &lt;= current &lt; right, passing down the min and max values as we do a depth-first traversal.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the node is None, return True</span></li> <li class=""li2""><span class=""s1"">If min is set and the node's value &lt;= min, return False</span></li> <li class=""li2""><span class=""s1"">if max is set and the node's value &gt; max, return False</span></li> <li class=""li2""><span class=""s1"">Recursively call the validate function on node.left, updating max</span></li> <li class=""li2""><span class=""s1"">Recursively call the validate function on node.right, updating min</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(h), where h is the height of the tree</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>import</b></span><span class=""s5""> sys</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6""><b>class</b></span><span class=""s5""> </span><span class=""s1"">BstValidate</span><span class=""s5"">(Bst):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">validate</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.root </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s9"">'No root node'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._validate(</span><span class=""s8"">self</span><span class=""s1"">.root,</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; minimum=-sys.maxsize,</span></p><p class=""p7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maximum=sys.maxsize)</p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">_validate</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, node, minimum</span><span class=""s1"">, maximum):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> node </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>True</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> node.data </span><span class=""s3""><b>&lt;=</b></span><span class=""s1""> minimum </span><span class=""s6""><b>or</b></span><span class=""s1""> node.data </span><span class=""s3""><b>&gt;</b></span><span class=""s1""> maximum:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>False</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._validate(node.left, minimum, node.data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>False</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">._validate(node.right, node.data, maximum):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>False</b></span></p> <p class=""p8""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s5""> </span><span class=""s1""><b>True</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_bst_validate.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6""><b>class</b></span><span class=""s5""> </span><span class=""s1"">TestBstValidate</span><span class=""s5"">(</span><span class=""s6"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3"">@raises</span><span class=""s1"">(Exception)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s5""> </span><span class=""s1"">test_bst_validate_empty</span><span class=""s5"">(</span><span class=""s8"">self</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; validate_bst(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s5""> </span><span class=""s1"">test_bst_validate</span><span class=""s5"">(</span><span class=""s8"">self</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstValidate(Node(</span><span class=""s10"">5</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">7</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst.validate(), </span><span class=""s6""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstValidate(Node(</span><span class=""s10"">5</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left = Node(</span><span class=""s10"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right = Node(</span><span class=""s10"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; invalid = Node(</span><span class=""s10"">20</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.root.left = left</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.root.right = right</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.root.left.right = invalid</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst.validate(), </span><span class=""s6""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s5"">(</span><span class=""s1"">'Success: test_bst_validate'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBstValidate()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_bst_validate_empty()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_bst_validate()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Check if a binary tree is balanced.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s4 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s5 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s8 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s9 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s11 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is a balanced tree one where the heights of two sub trees of any node doesn't differ by more than 1?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If this is called on a None input, should we raise an exception?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a Node class with an insert method?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; No</span></li> <li class=""li2""><span class=""s1"">1 -&gt; Yes</span></li> <li class=""li2""><span class=""s1"">5, 3, 8, 1, 4 -&gt; Yes</span></li> <li class=""li2""><span class=""s1"">5, 3, 8, 9, 10 -&gt; No</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">The algorithm will be similar to where we get the height of a tree as seen in <a href=""http://nbviewer.ipython.org/github/donnemartin/interactive-coding-challenges/blob/master/graphs_trees/tree_height/height_solution.ipynb""><span class=""s3"">here</span></a>.</span></p> <p class=""p2""><span class=""s1"">However, we could check whether the tree is balanced while also checking for the heights.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Base case: If the root is None, return 0</span></li> <li class=""li2""><span class=""s1"">Recursively check whether the left sub tree is balanced, and get its height left_height</span></li> <li class=""li2""><span class=""s1"">Recursively check whether the right sub tree is balanced, and get its height right_height</span></li> <li class=""li2""><span class=""s1"">Compare left_height and right_height</span></li> <li class=""li2""><span class=""s1"">Return 1 + max(left_height, right_height)</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(h), where h is the height of the tree</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s6""><b>class</b></span><span class=""s7""> </span><span class=""s1"">BstBalance</span><span class=""s7"">(Bst):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">_check_balance</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, node):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> node </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s10"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left_height = </span><span class=""s9"">self</span><span class=""s1"">._check_balance(node.left)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> left_height </span><span class=""s4""><b>==</b></span><span class=""s1""> </span><span class=""s4""><b>-</b></span><span class=""s10"">1</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s4""><b>-</b></span><span class=""s10"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right_height = </span><span class=""s9"">self</span><span class=""s1"">._check_balance(node.right)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> right_height </span><span class=""s4""><b>==</b></span><span class=""s1""> </span><span class=""s4""><b>-</b></span><span class=""s10"">1</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s4""><b>-</b></span><span class=""s10"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; diff = </span><span class=""s6"">abs</span><span class=""s1"">(left_height&nbsp;</span><span class=""s4""><b>-&nbsp;</b></span><span class=""s1"">right_height)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> diff </span><span class=""s4""><b>&gt;</b></span><span class=""s1""> </span><span class=""s10"">1</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s4""><b>-</b></span><span class=""s10"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s10"">1</span><span class=""s1""> </span><span class=""s4""><b>+</b></span><span class=""s1""> </span><span class=""s6"">max</span><span class=""s1"">(left_height, right_height)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s7""> </span><span class=""s1"">check_balance</span><span class=""s7"">(</span><span class=""s9"">self</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.root </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s11"">'root cannot be None'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; height = </span><span class=""s9"">self</span><span class=""s1"">._check_balance(</span><span class=""s9"">self</span><span class=""s1"">.root)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> height </span><span class=""s4""><b>!=</b></span><span class=""s1""> </span><span class=""s4""><b>-</b></span><span class=""s10"">1</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s4""><b>%%</b></span><span class=""s1"">writefile test_check_balance.py</span></p> <p class=""p6""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> raises</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>class</b></span><span class=""s7""> </span><span class=""s1"">TestCheckBalance</span><span class=""s7"">(</span><span class=""s6"">object</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4"">@raises</span><span class=""s1"">(TypeError)</span></p> <p class=""p7""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s7""> </span><span class=""s1"">test_check_balance_empty</span><span class=""s7"">(</span><span class=""s9"">self</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstBalance(</span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.check_balance()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s7""> </span><span class=""s1"">test_check_balance</span><span class=""s7"">(</span><span class=""s9"">self</span><span class=""s7"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstBalance(Node(</span><span class=""s10"">5</span><span class=""s1"">))</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst.check_balance(), </span><span class=""s6""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">8</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">4</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst.check_balance(), </span><span class=""s6""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstBalance(Node(</span><span class=""s10"">5</span><span class=""s1"">))</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">8</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">9</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">10</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst.check_balance(), </span><span class=""s6""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstBalance(Node(</span><span class=""s10"">3</span><span class=""s1"">))</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">5</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">4</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">6</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">7</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst.check_balance(), </span><span class=""s6""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s7"">(</span><span class=""s1"">'Success: test_check_balance'</span><span class=""s7"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestCheckBalance()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_check_balance_empty()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_check_balance()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s4""><b>==</b></span><span class=""s1""> </span><span class=""s11"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement a graph.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier} span.s4 {font: 14.0px Courier; font-kerning: none} span.s5 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s8 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s11 {font-kerning: none; color: #408080; -webkit-text-stroke: 0px #408080} span.s12 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the graph directed?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Implement both</span></li> </ul> <li class=""li2""><span class=""s1"">Do the edges have weights?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can the graph have cycles?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If we try to add a node that already exists, do we just do nothing?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If we try to delete a node that doesn't exist, do we just do nothing?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <p class=""p2""><span class=""s1"">Input:</span></p> <ul class=""ul1""> <li class=""li4""><span class=""s1"">add_edge(source, destination, weight)</span></li> </ul> <p class=""p4""><span class=""s1"">graph.add_edge(0, 1, 5)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(0, 5, 2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(1, 2, 3)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(2, 3, 4)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(3, 4, 5)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(3, 5, 6)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(4, 0, 7)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(5, 4, 8)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(5, 2, 9)</span></p> <p class=""p2""><span class=""s1"">Result:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s4"">source</span><span class=""s1""> and </span><span class=""s4"">destination</span><span class=""s1""> nodes within </span><span class=""s4"">graph</span><span class=""s1""> are connected with specified </span><span class=""s4"">weight</span><span class=""s1"">.</span></li> </ul> <p class=""p2""><span class=""s1"">Note:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">The Graph class will be used as a building block for more complex graph challenges.</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1""><b>Node</b></span></p><p class=""p5""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Node will keep track of its:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">id</span></li> <li class=""li2""><span class=""s1"">visit state</span></li> <li class=""li2""><span class=""s1"">incoming edge count (useful for algorithms such as topological sort)</span></li> <li class=""li2""><span class=""s1"">adjacent nodes and edge weights</span></li> </ul> <p class=""p2""><span class=""s1""><b>add_neighhbor</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the neighbor doesn't already exist as an adjacent node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Update the adjancet nodes and edge weights</span></li> <li class=""li2""><span class=""s1"">Increment the neighbor's incoming edge count</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p2""><span class=""s1""><b>remove_neighhbor</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the neighbor exists as an adjacent node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Decrement the neighbor's incoming edge count</span></li> <li class=""li2""><span class=""s1"">Remove the neighbor as an adjacent node</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p5""><span class=""s1""><b>Graph</b></span></p><p class=""p5""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Graph will keep track of its:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">nodes</span></li> </ul> <p class=""p2""><span class=""s1""><b>add_node</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If node already exists, return it</span></li> <li class=""li2""><span class=""s1"">Create a node with the given id</span></li> <li class=""li2""><span class=""s1"">Add the newly created node to the collection of nodes</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p2""><span class=""s1""><b>add_edge</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the source node is not in the collection of nodes, add it</span></li> <li class=""li2""><span class=""s1"">If the dest node is not in the collection of nodes, add it</span></li> <li class=""li2""><span class=""s1"">Add a connection from the source node to the dest node with the given edge weight</span></li> </ul> <p class=""p2""><span class=""s1""><b>add_undirected_edge</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Call add_edge</span></li> <li class=""li2""><span class=""s1"">Also add a connection from the dest node to the source node with the given edge weight</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s5""><b>%%</b></span><span class=""s1"">writefile graph.py</span></p> <p class=""p9""><span class=""s6""><b>from</b></span><span class=""s7""> enum </span><span class=""s6""><b>import</b></span><span class=""s7""> Enum&nbsp; </span><span class=""s1""><i># Python 2 users: Run pip install enum34</i></span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6""><b>class</b></span><span class=""s1""> </span><span class=""s8"">State</span><span class=""s1"">(Enum):</span></p><p class=""p8""><span class=""s1""><br /></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; unvisited = </span><span class=""s9"">0</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; visiting = </span><span class=""s9"">1</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; visited = </span><span class=""s9"">2</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s1""><b>class</b></span><span class=""s7""> </span><span class=""s8"">Node</span><span class=""s7"">:</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__init__</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, key):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.key = key</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.visit_state = State.unvisited</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.incoming_edges = </span><span class=""s9"">0</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.adj_nodes = {}&nbsp; </span><span class=""s11""><i># Key = key, val = Node</i></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.adj_weights = {}&nbsp; </span><span class=""s11""><i># Key = key, val = weight</i></span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__repr__</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">.key)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__lt__</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, other):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.key </span><span class=""s5""><b>&lt;</b></span><span class=""s1""> other.key</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">add_neighbor</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, neighbor, weight=</span><span class=""s9"">0</span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> neighbor </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1""> </span><span class=""s6""><b>or</b></span><span class=""s1""> weight </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p11""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s7""> TypeError(</span><span class=""s1"">'neighbor or weight cannot be None'</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; neighbor.incoming_edges += </span><span class=""s9"">1</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.adj_weights[neighbor.key] = weight</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.adj_nodes[neighbor.key] = neighbor</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">remove_neighbor</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, neighbor):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> neighbor </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p11""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s7""> TypeError(</span><span class=""s1"">'neighbor cannot be None'</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> neighbor.key </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.adj_nodes:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> KeyError(</span><span class=""s12"">'neighbor not found'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; neighbor.incoming_edges -= </span><span class=""s9"">1</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>del</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.adj_weights[neighbor.key]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>del</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.adj_nodes[neighbor.key]</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s1""><b>class</b></span><span class=""s7""> </span><span class=""s8"">Graph</span><span class=""s7"">:</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__init__</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">):</span></p> <p class=""p9""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s7"">.nodes = {}&nbsp; </span><span class=""s1""><i># Key = key, val = Node</i></span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">add_node</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, key):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> key </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s12"">'key cannot be None'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> key </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.nodes:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.nodes[key] = Node(key)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.nodes[key]</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">add_edge</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, source_key, dest_key, weight=</span><span class=""s9"">0</span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> source_key </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1""> </span><span class=""s6""><b>or</b></span><span class=""s1""> dest_key </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> KeyError(</span><span class=""s12"">'Invalid key'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> source_key </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.nodes:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.add_node(source_key)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> dest_key </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.nodes:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.add_node(dest_key)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.nodes[source_key].add_neighbor(</span><span class=""s10"">self</span><span class=""s1"">.nodes[dest_key], weight)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">add_undirected_edge</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, src_key, dst_key, weight=</span><span class=""s9"">0</span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> src_key </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1""> </span><span class=""s6""><b>or</b></span><span class=""s1""> dst_key </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s12"">'key cannot be None'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.add_edge(src_key, dst_key, weight)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">.add_edge(dst_key, src_key, weight)</span></p> <p class=""p7""><span class=""s1""></span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s5""><b>%%</b></span><span class=""s1"">writefile test_graph.py</span></p> <p class=""p8""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s1""><b>class</b></span><span class=""s7""> </span><span class=""s8"">TestGraph</span><span class=""s7"">(</span><span class=""s1"">object</span><span class=""s7"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s7""> </span><span class=""s1"">create_graph</span><span class=""s7"">(</span><span class=""s10"">self</span><span class=""s7"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph = Graph()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>for</b></span><span class=""s1""> key </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s6"">range</span><span class=""s1"">(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; graph.add_node(key)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> graph</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s7""> </span><span class=""s1"">test_graph</span><span class=""s7"">(</span><span class=""s10"">self</span><span class=""s7"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph = </span><span class=""s10"">self</span><span class=""s1"">.create_graph()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, weight=</span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, weight=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, weight=</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, weight=</span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, weight=</span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, weight=</span><span class=""s9"">6</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">0</span><span class=""s1"">, weight=</span><span class=""s9"">7</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, weight=</span><span class=""s9"">8</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, weight=</span><span class=""s9"">9</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">0</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">1</span><span class=""s1"">].key], </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">0</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">5</span><span class=""s1"">].key], </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">1</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">2</span><span class=""s1"">].key], </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">2</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">3</span><span class=""s1"">].key], </span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">3</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">4</span><span class=""s1"">].key], </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">3</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">5</span><span class=""s1"">].key], </span><span class=""s9"">6</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">4</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">0</span><span class=""s1"">].key], </span><span class=""s9"">7</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">5</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">4</span><span class=""s1"">].key], </span><span class=""s9"">8</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">5</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">2</span><span class=""s1"">].key], </span><span class=""s9"">9</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">0</span><span class=""s1"">].incoming_edges, </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">1</span><span class=""s1"">].incoming_edges, </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">2</span><span class=""s1"">].incoming_edges, </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">3</span><span class=""s1"">].incoming_edges, </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">4</span><span class=""s1"">].incoming_edges, </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">5</span><span class=""s1"">].incoming_edges, </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.nodes[</span><span class=""s9"">0</span><span class=""s1"">].remove_neighbor(graph.nodes[</span><span class=""s9"">1</span><span class=""s1"">])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">1</span><span class=""s1"">].incoming_edges, </span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.nodes[</span><span class=""s9"">3</span><span class=""s1"">].remove_neighbor(graph.nodes[</span><span class=""s9"">4</span><span class=""s1"">])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">4</span><span class=""s1"">].incoming_edges, </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">0</span><span class=""s1"">] </span><span class=""s5""><b>&lt;</b></span><span class=""s1""> graph.nodes[</span><span class=""s9"">1</span><span class=""s1"">], </span><span class=""s6""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s7"">(</span><span class=""s1"">'Success: test_graph'</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s7""> </span><span class=""s1"">test_graph_undirected</span><span class=""s7"">(</span><span class=""s10"">self</span><span class=""s7"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph = </span><span class=""s10"">self</span><span class=""s1"">.create_graph()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_undirected_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, weight=</span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_undirected_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, weight=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_undirected_edge(</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, weight=</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">0</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">1</span><span class=""s1"">].key], </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">1</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">0</span><span class=""s1"">].key], </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">0</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">5</span><span class=""s1"">].key], </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">5</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">0</span><span class=""s1"">].key], </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">1</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">2</span><span class=""s1"">].key], </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.nodes[</span><span class=""s9"">2</span><span class=""s1"">].adj_weights[graph.nodes[</span><span class=""s9"">1</span><span class=""s1"">].key], </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s7"">(</span><span class=""s1"">'Success: test_graph_undirected'</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">main</span><span class=""s1"">():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test = TestGraph()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_graph()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_graph_undirected()</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s5""><b>==</b></span><span class=""s1""> </span><span class=""s12"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement breadth-first search on a graph.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s4 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s5 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s11 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the graph directed?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have Graph and Node classes?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Input:</span></p> <ul class=""ul1""> <li class=""li4""><span class=""s1"">add_edge(source, destination, weight)</span></li> </ul> <p class=""p4""><span class=""s1"">graph.add_edge(0, 1, 5)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(0, 4, 3)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(0, 5, 2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(1, 3, 5)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(1, 4, 4)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(2, 1, 6)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(3, 2, 7)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(3, 4, 8)</span></p> <p class=""p2""><span class=""s1"">Result:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Order of nodes visited: [0, 1, 4, 5, 3, 2]</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We generally use breadth-first search to determine the shortest path.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Add the current node to the queue and mark it as visited</span></li> <li class=""li2""><span class=""s1"">While the queue is not empty</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Dequeue a node and visit it</span></li> <li class=""li2""><span class=""s1"">Iterate through each adjacent node</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">If the node has not been visited, add it to the queue and mark it as visited</span></li> </ul> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(V + E), where V = number of vertices and E = number of edges</span></li> <li class=""li2""><span class=""s1"">Space: O(V)</span></li> </ul> <p class=""p2""><span class=""s1"">Note on space complexity from <a href=""https://en.wikipedia.org/wiki/Breadth-first_search""><span class=""s3"">Wikipedia</span></a>:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">When the number of vertices in the graph is known ahead of time, and additional data structures are used to determine which vertices have already been added to the queue, the space complexity can be expressed as O(V)</span></li> <li class=""li2""><span class=""s1"">If the graph is represented by an adjacency list it occupies O(V + E) space in memory</span></li> <li class=""li2""><span class=""s1"">If the graph is represented by an adjacency matrix representation, it occupies O(V^2)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> collections </span><span class=""s6""><b>import</b></span><span class=""s1""> deque</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>class</b></span><span class=""s1""> </span><span class=""s7"">GraphBfs</span><span class=""s1"">(Graph):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">bfs</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, root, visit_func):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> root </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue = deque()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue.append(root)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; root.visit_state = State.visited</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> queue:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = queue.popleft()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; visit_func(node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>for</b></span><span class=""s1""> adjacent_node </span><span class=""s6""><b>in</b></span><span class=""s1""> node.adj_nodes.values():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> adjacent_node.visit_state </span><span class=""s4""><b>==</b></span><span class=""s1""> State.unvisited:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; queue.append(adjacent_node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; adjacent_node.visit_state = State.visited</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s4""><b>%%</b></span><span class=""s1"">writefile test_bfs.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s9""> </span><span class=""s7"">TestBfs</span><span class=""s9"">(</span><span class=""s1"">object</span><span class=""s9"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.results = Results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">test_bfs</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph = GraphBfs()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>for</b></span><span class=""s1""> </span><span class=""s6"">id</span><span class=""s1""> </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s6"">range</span><span class=""s1"">(</span><span class=""s10"">0</span><span class=""s1"">, </span><span class=""s10"">6</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodes.append(graph.add_node(</span><span class=""s6"">id</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">0</span><span class=""s1"">, </span><span class=""s10"">1</span><span class=""s1"">, </span><span class=""s10"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">0</span><span class=""s1"">, </span><span class=""s10"">4</span><span class=""s1"">, </span><span class=""s10"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">0</span><span class=""s1"">, </span><span class=""s10"">5</span><span class=""s1"">, </span><span class=""s10"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">1</span><span class=""s1"">, </span><span class=""s10"">3</span><span class=""s1"">, </span><span class=""s10"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">1</span><span class=""s1"">, </span><span class=""s10"">4</span><span class=""s1"">, </span><span class=""s10"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">2</span><span class=""s1"">, </span><span class=""s10"">1</span><span class=""s1"">, </span><span class=""s10"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">3</span><span class=""s1"">, </span><span class=""s10"">2</span><span class=""s1"">, </span><span class=""s10"">7</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">3</span><span class=""s1"">, </span><span class=""s10"">4</span><span class=""s1"">, </span><span class=""s10"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.bfs(nodes[</span><span class=""s10"">0</span><span class=""s1"">], </span><span class=""s8"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.results), </span><span class=""s11"">""[0, 1, 4, 5, 3, 2]""</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s9"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s9"">(</span><span class=""s1"">'Success: test_bfs'</span><span class=""s9"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBfs()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_bfs()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s4""><b>==</b></span><span class=""s1""> </span><span class=""s11"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Find a build order given a list of projects and dependencies.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is it possible to have a cyclic graph as the input?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have Graph and Node classes?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">projects: a, b, c, d, e, f, g</span></li> <li class=""li2""><span class=""s1"">dependencies: (d, g), (f, c), (f, b), (f, a), (c, a), (b, a), (a, e), (b, e)</span></li> <li class=""li2""><span class=""s1"">output: d, f, c, b, g, a, e</span></li> </ul> <p class=""p2""><span class=""s1"">Note: Edge direction is down</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; f &nbsp; &nbsp; d</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; /|\&nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">&nbsp; c | b &nbsp; g</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; \|/|</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; a |</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; |/</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; e</span></p> <p class=""p2""><span class=""s1"">Test a graph with a cycle, output should be None</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We can determine the build order using a topological sort.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Build the graph with projects (nodes) and dependencies (directed edges)</span></li> <li class=""li2""><span class=""s1"">Add initially non-dependent nodes to processed_nodes</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If none exist, we have a circular dependency, return None</span></li> </ul> <li class=""li2""><span class=""s1"">While the length processed_nodes &lt; the length of graph nodes</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Remove outgoing edges from newly added items in processed_nodes</span></li> <li class=""li2""><span class=""s1"">Add non-dependent nodes to processed_nodes</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">If we didn't add any nodes, we have a circular dependency, return None</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Return processed_nodes</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(V + E)</span></li> <li class=""li2""><span class=""s1"">Space: O(V + E)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> collections </span><span class=""s3""><b>import</b></span><span class=""s1""> deque</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Dependency</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, node_key_before, node_key_after):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.node_key_before = node_key_before</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.node_key_after = node_key_after</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">BuildOrder</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, dependencies):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.dependencies = dependencies</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.graph = Graph()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">._build_graph()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">_build_graph</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> dependency </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.dependencies:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.graph.add_edge(dependency.node_key_before,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dependency.node_key_after)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">_find_start_nodes</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, processed_nodes):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes_to_process = {}</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> key, node </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.graph.nodes.items():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s1"">node.incoming_edges ==&nbsp;<span style=""color: rgb(0, 136, 0);"">0</span>&nbsp;</span><span class=""s3""><b>and</b></span><span class=""s1""> key </span><span class=""s3""><b>not</b></span><span class=""s1""> </span><span class=""s3""><b>in</b></span><span class=""s1""> processed_nodes:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodes_to_process[key] = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> nodes_to_process</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">_process_nodes</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, nodes_to_process, processed_nodes):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> node </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s1"">nodes_to_process.values():</span></p><p class=""p7""><span class=""s1""></span></p><p class=""p10"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(64, 128, 128); -webkit-text-stroke-color: rgb(64, 128, 128); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s4"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;</span><span class=""s1""><i># We'll need to iterate on copies since we'll need</i></span></p><p class=""p10"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(64, 128, 128); -webkit-text-stroke-color: rgb(64, 128, 128); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s4"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;</span><span class=""s1""><i># to change the dictionaries during iteration with</i></span></p><p class=""p10"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(64, 128, 128); -webkit-text-stroke-color: rgb(64, 128, 128); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s4"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;</span><span class=""s1""><i># the remove_neighbor call</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> adj_node </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">list</span><span class=""s1"">(node.adj_nodes.values()):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.remove_neighbor(adj_node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; processed_nodes[node.key] = node</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes_to_process = {}</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">find_build_order</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes_to_process = {}</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; processed_nodes = {}</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>while</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(result) </span><span class=""s7""><b>!=</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">.graph.nodes):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodes_to_process = </span><span class=""s6"">self</span><span class=""s1"">._find_start_nodes(processed_nodes)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> nodes_to_process:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.extend(nodes_to_process.values())</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">._process_nodes(nodes_to_process, processed_nodes)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> result</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_build_order.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_true</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestBuildOrder</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.dependencies = [</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dependency(</span><span class=""s9"">'d'</span><span class=""s1"">, </span><span class=""s9"">'g'</span><span class=""s1"">),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dependency(</span><span class=""s9"">'f'</span><span class=""s1"">, </span><span class=""s9"">'c'</span><span class=""s1"">),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dependency(</span><span class=""s9"">'f'</span><span class=""s1"">, </span><span class=""s9"">'b'</span><span class=""s1"">),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dependency(</span><span class=""s9"">'f'</span><span class=""s1"">, </span><span class=""s9"">'a'</span><span class=""s1"">),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dependency(</span><span class=""s9"">'c'</span><span class=""s1"">, </span><span class=""s9"">'a'</span><span class=""s1"">),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dependency(</span><span class=""s9"">'b'</span><span class=""s1"">, </span><span class=""s9"">'a'</span><span class=""s1"">),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dependency(</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'e'</span><span class=""s1"">),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dependency(</span><span class=""s9"">'b'</span><span class=""s1"">, </span><span class=""s9"">'e'</span><span class=""s1"">),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; ]</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_build_order</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; build_order = BuildOrder(</span><span class=""s6"">self</span><span class=""s1"">.dependencies)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; processed_nodes = build_order.find_build_order()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected_result0 = (</span><span class=""s9"">'d'</span><span class=""s1"">, </span><span class=""s9"">'f'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected_result1 = (</span><span class=""s9"">'c'</span><span class=""s1"">, </span><span class=""s9"">'b'</span><span class=""s1"">, </span><span class=""s9"">'g'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(processed_nodes[</span><span class=""s10"">0</span><span class=""s1"">].key </span><span class=""s3""><b>in</b></span><span class=""s1""> expected_result0)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(processed_nodes[</span><span class=""s10"">1</span><span class=""s1"">].key </span><span class=""s3""><b>in</b></span><span class=""s1""> expected_result0)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(processed_nodes[</span><span class=""s10"">2</span><span class=""s1"">].key </span><span class=""s3""><b>in</b></span><span class=""s1""> expected_result1)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(processed_nodes[</span><span class=""s10"">3</span><span class=""s1"">].key </span><span class=""s3""><b>in</b></span><span class=""s1""> expected_result1)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(processed_nodes[</span><span class=""s10"">4</span><span class=""s1"">].key </span><span class=""s3""><b>in</b></span><span class=""s1""> expected_result1)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(processed_nodes[</span><span class=""s10"">5</span><span class=""s1"">].key </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(processed_nodes[</span><span class=""s10"">6</span><span class=""s1"">].key </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s9"">'e'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_build_order'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_build_order_circular</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.dependencies.append(Dependency(</span><span class=""s9"">'e'</span><span class=""s1"">, </span><span class=""s9"">'f'</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; build_order = BuildOrder(</span><span class=""s6"">self</span><span class=""s1"">.dependencies)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; processed_nodes = build_order.find_build_order()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(processed_nodes </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_build_order_circular'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBuildOrder()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_build_order()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_build_order_circular()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement depth-first search on a graph.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the graph directed?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have Graph and Node classes?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s2""><b><br></b></span></p> <p class=""p2""><span class=""s1"">Input:</span></p> <ul class=""ul1""> <li class=""li4""><span class=""s1"">add_edge(source, destination, weight)</span></li> </ul> <p class=""p4""><span class=""s1"">graph.add_edge(0, 1, 5)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(0, 4, 3)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(0, 5, 2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(1, 3, 5)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(1, 4, 4)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(2, 1, 6)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(3, 2, 7)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(3, 4, 8)</span></p> <p class=""p2""><span class=""s1"">Result:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Order of nodes visited: [0, 1, 3, 2, 4, 5]</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">If we want to visit every node in a graph, we generally prefer depth-first search since it is simpler (no need to use a queue). For shortest path, we generally use breadth-first search.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Visit the current node and mark it visited</span></li> <li class=""li2""><span class=""s1"">Iterate through each adjacent node</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the node has not been visited, call dfs on it</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(V + E), where V = number of vertices and E = number of edges</span></li> <li class=""li2""><span class=""s1"">Space: O(V), for the recursion depth</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s5""><b>class</b></span><span class=""s1""> </span><span class=""s6"">GraphDfs</span><span class=""s1"">(Graph):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">dfs</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, root, visit_func):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> root </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; visit_func(root)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; root.visit_state = State.visited</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> node </span><span class=""s5""><b>in</b></span><span class=""s1""> root.adj_nodes.values():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.visit_state </span><span class=""s3""><b>==</b></span><span class=""s1""> State.unvisited:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.dfs(node, visit_func)</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_dfs.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s8""> </span><span class=""s6"">TestDfs</span><span class=""s8"">(</span><span class=""s1"">object</span><span class=""s8"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">__init__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.results = Results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">test_dfs</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph = GraphDfs()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> </span><span class=""s5"">id</span><span class=""s1""> </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodes.append(graph.add_node(</span><span class=""s5"">id</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.dfs(nodes[</span><span class=""s9"">0</span><span class=""s1"">], </span><span class=""s7"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s5"">str</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">.results), </span><span class=""s10"">""[0, 1, 3, 2, 4, 5]""</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s8"">(</span><span class=""s1"">'Success: test_dfs'</span><span class=""s8"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestDfs()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_dfs()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Determine whether there is a path between two nodes in a graph.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the graph directed?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have Graph and Node classes?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Input:</span></p> <ul class=""ul1""> <li class=""li4""><span class=""s1"">add_edge(source, destination, weight)</span></li> </ul> <p class=""p4""><span class=""s1"">graph.add_edge(0, 1, 5)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(0, 4, 3)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(0, 5, 2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(1, 3, 5)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(1, 4, 4)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(2, 1, 6)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(3, 2, 7)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(3, 4, 8)</span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Result:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">search_path(start=0, end=2) -&gt; True</span></li> <li class=""li2""><span class=""s1"">search_path(start=0, end=0) -&gt; True</span></li> <li class=""li2""><span class=""s1"">search_path(start=4, end=5) -&gt; False</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">To determine if there is a path, we can use either breadth-first or depth-first search.</span></p> <p class=""p2""><span class=""s1"">Breadth-first search can also be used to determine the shortest path. Depth-first search is easier to implement with just straight recursion, but often results in a longer path.</span></p> <p class=""p2""><span class=""s1"">We'll use a breadth-first search approach:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Add the start node to the queue and mark it as visited</span></li> <li class=""li2""><span class=""s1"">If the start node is the end node, return True</span></li> <li class=""li2""><span class=""s1"">While the queue is not empty</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Dequeue a node and visit it</span></li> <li class=""li2""><span class=""s1"">If the node is the end node, return True</span></li> <li class=""li2""><span class=""s1"">Iterate through each adjacent node</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">If the node has not been visited, add it to the queue and mark it as visited</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Return False</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(V + E), where V = number of vertices and E = number of edges</span></li> <li class=""li2""><span class=""s1"">Space: O(V + E)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> collections </span><span class=""s5""><b>import</b></span><span class=""s1""> deque</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">GraphPathExists</span><span class=""s6"">(Graph):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">path_exists</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, start, end):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> start </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> end </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>False</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> start </span><span class=""s5""><b>is</b></span><span class=""s1""> end:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>True</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue = deque()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue.append(start)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; start.visit_state = State.visited</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> queue:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = queue.popleft()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node </span><span class=""s5""><b>is</b></span><span class=""s1""> end:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>True</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> adj_node </span><span class=""s5""><b>in</b></span><span class=""s1""> node.adj_nodes.values():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> adj_node.visit_state </span><span class=""s3""><b>==</b></span><span class=""s1""> State.unvisited:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; queue.append(adj_node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; adj_node.visit_state = State.visited</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s6""> </span><span class=""s1""><b>False</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_path_exists.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">TestPathExists</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_path_exists</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph = GraphPathExists()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> </span><span class=""s5"">id</span><span class=""s1""> </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodes.append(graph.add_node(</span><span class=""s5"">id</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.path_exists(nodes[</span><span class=""s9"">0</span><span class=""s1"">], nodes[</span><span class=""s9"">2</span><span class=""s1"">]), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.path_exists(nodes[</span><span class=""s9"">0</span><span class=""s1"">], nodes[</span><span class=""s9"">0</span><span class=""s1"">]), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.path_exists(nodes[</span><span class=""s9"">4</span><span class=""s1"">], nodes[</span><span class=""s9"">5</span><span class=""s1"">]), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_path_exists'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestPathExists()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_path_exists()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the shortest path between two nodes in a graph.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 16.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s4 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s5 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s8 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s9 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s11 {font-kerning: none; color: #408080; -webkit-text-stroke: 0px #408080} span.s12 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is this a directional graph?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Could the graph have cycles?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> <li class=""li2""><span class=""s1"">Note: If the answer were no, this would be a DAG.</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">DAGs can be solved with a <a href=""http://www.geeksforgeeks.org/shortest-path-for-directed-acyclic-graphs/""><span class=""s3"">topological sort</span></a></span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Are the edges weighted?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> <li class=""li2""><span class=""s1"">Note: If the edges were not weighted, we could do a BFS</span></li> </ul> <li class=""li2""><span class=""s1"">Are the edges all non-negative numbers?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> <li class=""li2""><span class=""s1"">Note: Graphs with negative edges can be done with Bellman-Ford</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Graphs with negative cost cycles do not have a defined shortest path</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Do we have to check for non-negative edges?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a graph class?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a priority queue class?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">The constaints state we don't have to check for negative edges, so we test with the general case.</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">graph.add_edge('a', 'b', weight=5)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('a', 'c', weight=3)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('a', 'e', weight=2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('b', 'd', weight=2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('c', 'b', weight=1)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('c', 'd', weight=1)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('d', 'a', weight=1)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('d', 'g', weight=2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('d', 'h', weight=1)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('e', 'a', weight=1)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('e', 'h', weight=4)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('e', 'i', weight=7)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('f', 'b', weight=3)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('f', 'g', weight=1)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('g', 'c', weight=3)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('g', 'i', weight=2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('h', 'c', weight=2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('h', 'f', weight=2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge('h', 'g', weight=2)</span></p> <p class=""p4""><span class=""s1"">shortest_path = ShortestPath(graph)</span></p> <p class=""p4""><span class=""s1"">result = shortest_path.find_shortest_path('a', 'i')</span></p> <p class=""p4""><span class=""s1"">assert_equal(result, ['a', 'c', 'd', 'g', 'i'])</span></p> <p class=""p4""><span class=""s1"">assert_equal(shortest_path.path_weight['i'], 8)</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Wikipedia's animation:</span></p> <p class=""p5""><span class=""s1""></span><br /></p><p class=""p5""><img src=""dijkstra.gif"" /></p><p class=""p5""><br /></p> <p class=""p2""><span class=""s1"">Initialize the following:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">previous = {} # Key: node key, val: prev node key, shortest path</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Set each node's previous node key to None</span></li> </ul> <li class=""li2""><span class=""s1"">path_weight = {} # Key: node key, val: weight, shortest path</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Set each node's shortest path weight to infinity</span></li> </ul> <li class=""li2""><span class=""s1"">remaining = PriorityQueue() # Queue of node key, path weight</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Add each node's shortest path weight to the priority queue</span></li> </ul> <li class=""li2""><span class=""s1"">Set the start node's path_weight to 0 and update the value in remaining</span></li> <li class=""li2""><span class=""s1"">Loop while remaining still has items</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Extract the min node (node with minimum path weight) from remaining</span></li> <li class=""li2""><span class=""s1"">Loop through each adjacent node in the min node</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Calculate the new weight:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Adjacent node's edge weight + the min node's path_weight</span></li> </ul> <li class=""li2""><span class=""s1"">If the newly calculated path is less than the adjacent node's current path_weight:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Set the node's previous node key leading to the shortest path</span></li> <li class=""li2""><span class=""s1"">Update the adjacent node's shortest path and update the value in the priority queue</span></li> </ul> </ul> </ul> <li class=""li2""><span class=""s1"">Walk backwards to determine the shortest path:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Start at the end node, walk the previous dict to get to the start node</span></li> </ul> <li class=""li2""><span class=""s1"">Reverse the list and return it</span></li> </ul> <p class=""p6""><span class=""s1""><b>Complexity for array-based priority queue:</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(v^2), where v is the number of vertices</span></li> <li class=""li2""><span class=""s1"">Space: O(v^2)</span></li> </ul> <p class=""p2""><span class=""s1"">This might be better than the min-heap-based variant if the graph has a lot of edges.</span></p> <p class=""p2""><span class=""s1"">O(v^2) is better than O((v + v^2) log v).</span></p> <p class=""p6""><span class=""s1""><b><br /></b></span></p><p class=""p6""><span class=""s1""><b>Complexity for min-heap-based priority queue:</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O((v + e) log v), where v is the number of vertices, e is the number of edges</span></li> <li class=""li2""><span class=""s1"">Space: O((v + e) log v)</span></li> </ul> <p class=""p2""><span class=""s1"">This might be better than the array-based variant if the graph is sparse.</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b><br /></b></span></p><p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p8""><span class=""s1""></span></p> <p class=""p8""><span class=""s1""></span></p> <p class=""p8""><span class=""s1""></span><br /></p> <p class=""p9""><span class=""s1"">&nbsp;</span></p> <p class=""p10""><span class=""s1""><b>import</b></span><span class=""s6""> sys</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s7""><b>class</b></span><span class=""s6""> </span><span class=""s1"">ShortestPath</span><span class=""s6"">(</span><span class=""s7"">object</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__init__</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, graph):</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> graph </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s10"">'graph cannot be None'</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.graph = graph</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s6"">.previous = {}&nbsp; </span><span class=""s1""><i># Key: node key, val: prev node key, shortest path</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s6"">.path_weight = {}&nbsp; </span><span class=""s1""><i># Key: node key, val: weight, shortest path</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.remaining = PriorityQueue()&nbsp; </span><span class=""s11""><i># Queue of node key, path weight</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> key </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.graph.nodes.keys():</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Set each node's previous node key to None</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Set each node's shortest path weight to infinity</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Add each node's shortest path weight to the priority queue</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.previous[key] = </span><span class=""s7""><b>None</b></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.path_weight[key] = sys.maxsize</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.remaining.insert(</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PriorityQueueNode(key, </span><span class=""s9"">self</span><span class=""s1"">.path_weight[key]))</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">find_shortest_path</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, start_node_key, end_node_key):</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> start_node_key </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1""> </span><span class=""s7""><b>or</b></span><span class=""s1""> end_node_key </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p13""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s6""> TypeError(</span><span class=""s1"">'Input node keys cannot be None'</span><span class=""s6"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> (start_node_key </span><span class=""s7""><b>not</b></span><span class=""s1""> </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.graph.nodes </span><span class=""s7""><b>or</b></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end_node_key </span><span class=""s7""><b>not</b></span><span class=""s1""> </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.graph.nodes):</span></p> <p class=""p13""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s6""> ValueError(</span><span class=""s1"">'Invalid start or end node key'</span><span class=""s6"">)</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Set the start node's shortest path weight to 0</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># and update the value in the priority queue</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.path_weight[start_node_key] = </span><span class=""s12"">0</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.remaining.decrease_key(start_node_key, </span><span class=""s12"">0</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>while</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.remaining:</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Extract the min node (node with minimum path weight)</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># from the priority queue</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_node_key = </span><span class=""s9"">self</span><span class=""s1"">.remaining.extract_min().obj</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_node = </span><span class=""s9"">self</span><span class=""s1"">.graph.nodes[min_node_key]</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Loop through each adjacent node in the min node</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> adj_key </span><span class=""s7""><b>in</b></span><span class=""s1""> min_node.adj_nodes.keys():</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s11""><i># Node's path:</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Adjacent node's edge weight + the min node's</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># shortest path weight</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_weight = (min_node.adj_weights[adj_key] </span><span class=""s4""><b>+</b></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.path_weight[min_node_key])</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Only update if the newly calculated path is</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># less than the existing node's shortest path</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.path_weight[adj_key] </span><span class=""s4""><b>&gt;</b></span><span class=""s1""> new_weight:</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Set the node's previous node key leading to the shortest path</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Update the adjacent node's shortest path and</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># update the value in the priority queue</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.previous[adj_key] = min_node_key</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.path_weight[adj_key] = new_weight</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.remaining.decrease_key(adj_key, new_weight)</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Walk backwards to determine the shortest path:</i></span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Start at the end node, walk the previous dict to get to the start node</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = []</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; current_node_key = end_node_key</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>while</b></span><span class=""s1""> current_node_key </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>not</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.append(current_node_key)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current_node_key = </span><span class=""s9"">self</span><span class=""s1"">.previous[current_node_key]</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Reverse the list</i></span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> result[::</span><span class=""s4""><b>-</b></span><span class=""s12"">1</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p8""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1""></span><br /></p> <p class=""p9""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s4""><b>%%</b></span><span class=""s1"">writefile test_shortest_path.py</span></p> <p class=""p9""><span class=""s7""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s7""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s7""><b>class</b></span><span class=""s6""> </span><span class=""s1"">TestShortestPath</span><span class=""s6"">(</span><span class=""s7"">object</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_shortest_path</span><span class=""s6"">(</span><span class=""s9"">self</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph = Graph()</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s10"">'b'</span><span class=""s1"">, weight=</span><span class=""s12"">5</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s10"">'c'</span><span class=""s1"">, weight=</span><span class=""s12"">3</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s10"">'e'</span><span class=""s1"">, weight=</span><span class=""s12"">2</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'b'</span><span class=""s1"">, </span><span class=""s10"">'d'</span><span class=""s1"">, weight=</span><span class=""s12"">2</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'c'</span><span class=""s1"">, </span><span class=""s10"">'b'</span><span class=""s1"">, weight=</span><span class=""s12"">1</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'c'</span><span class=""s1"">, </span><span class=""s10"">'d'</span><span class=""s1"">, weight=</span><span class=""s12"">1</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'d'</span><span class=""s1"">, </span><span class=""s10"">'a'</span><span class=""s1"">, weight=</span><span class=""s12"">1</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'d'</span><span class=""s1"">, </span><span class=""s10"">'g'</span><span class=""s1"">, weight=</span><span class=""s12"">2</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'d'</span><span class=""s1"">, </span><span class=""s10"">'h'</span><span class=""s1"">, weight=</span><span class=""s12"">1</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'e'</span><span class=""s1"">, </span><span class=""s10"">'a'</span><span class=""s1"">, weight=</span><span class=""s12"">1</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'e'</span><span class=""s1"">, </span><span class=""s10"">'h'</span><span class=""s1"">, weight=</span><span class=""s12"">4</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'e'</span><span class=""s1"">, </span><span class=""s10"">'i'</span><span class=""s1"">, weight=</span><span class=""s12"">7</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'f'</span><span class=""s1"">, </span><span class=""s10"">'b'</span><span class=""s1"">, weight=</span><span class=""s12"">3</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'f'</span><span class=""s1"">, </span><span class=""s10"">'g'</span><span class=""s1"">, weight=</span><span class=""s12"">1</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'g'</span><span class=""s1"">, </span><span class=""s10"">'c'</span><span class=""s1"">, weight=</span><span class=""s12"">3</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'g'</span><span class=""s1"">, </span><span class=""s10"">'i'</span><span class=""s1"">, weight=</span><span class=""s12"">2</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'h'</span><span class=""s1"">, </span><span class=""s10"">'c'</span><span class=""s1"">, weight=</span><span class=""s12"">2</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'h'</span><span class=""s1"">, </span><span class=""s10"">'f'</span><span class=""s1"">, weight=</span><span class=""s12"">2</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s10"">'h'</span><span class=""s1"">, </span><span class=""s10"">'g'</span><span class=""s1"">, weight=</span><span class=""s12"">2</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; shortest_path = ShortestPath(graph)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = shortest_path.find_shortest_path(</span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s10"">'i'</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result, [</span><span class=""s10"">'a'</span><span class=""s1"">, </span><span class=""s10"">'c'</span><span class=""s1"">, </span><span class=""s10"">'d'</span><span class=""s1"">, </span><span class=""s10"">'g'</span><span class=""s1"">, </span><span class=""s10"">'i'</span><span class=""s1"">])</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(shortest_path.path_weight[</span><span class=""s10"">'i'</span><span class=""s1"">], </span><span class=""s12"">8</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p13""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_shortest_path'</span><span class=""s6"">)</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s8"">main</span><span class=""s1"">():</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; test = TestShortestPath()</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; test.test_shortest_path()</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s7""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s4""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Invert a binary tree.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">What does it mean to invert a binary tree?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Swap all left and right node pairs</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a Node class?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p4""><span class=""s1"">Input:</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; 5</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; / &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp; 2 &nbsp; &nbsp; 7</span></p> <p class=""p4""><span class=""s1"">&nbsp;/ \ &nbsp; / \</span></p> <p class=""p4""><span class=""s1"">1 &nbsp; 3 6 &nbsp; 9</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Output:</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; 5</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; / &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp; 7 &nbsp; &nbsp; 2</span></p> <p class=""p4""><span class=""s1"">&nbsp;/ \ &nbsp; / \</span></p> <p class=""p4""><span class=""s1"">9 &nbsp; 6 3 &nbsp; 1</span></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Base case</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the root is None, return</span></li> </ul> <li class=""li2""><span class=""s1"">Recursive case</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Recurse on the left node</span></li> <li class=""li2""><span class=""s1"">Recurse on the right node</span></li> <li class=""li2""><span class=""s1"">Swap left and right</span></li> </ul> <li class=""li2""><span class=""s1"">Return the node</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(h), where h is the height, for the recursion depth</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">InverseBst</span><span class=""s6"">(Bst):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">invert_tree</span><span class=""s6"">(</span><span class=""s7"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.root </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'root cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">._invert_tree(</span><span class=""s7"">self</span><span class=""s1"">.root)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s9"">_invert_tree</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, root):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> root </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">._invert_tree(root.left)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">._invert_tree(root.right)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; root.left, root.right = root.right, root.left</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> root</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_invert_tree.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">TestInvertTree</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_invert_tree</span><span class=""s6"">(</span><span class=""s7"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; root = Node(</span><span class=""s10"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = InverseBst(root)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node2 = bst.insert(</span><span class=""s10"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node3 = bst.insert(</span><span class=""s10"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node1 = bst.insert(</span><span class=""s10"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node7 = bst.insert(</span><span class=""s10"">7</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node6 = bst.insert(</span><span class=""s10"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node9 = bst.insert(</span><span class=""s10"">9</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = bst.invert_tree()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result, root)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result.left, node7)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result.right, node2)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result.left.left, node9)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result.left.right, node6)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result.right.left, node3)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result.right.right, node1)</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_invert_tree'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s9"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestInvertTree()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_invert_tree()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement breadth-first traversal on a binary tree.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s5 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s10 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s11 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume we already have a Node class with an insert method?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">What should we do with each node when we process it?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Call an input method </span><span class=""s3"">visit_func</span><span class=""s1""> on the node</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <p class=""p4""><span class=""s1""><b><br></b></span></p><p class=""p4""><span class=""s1""><b>Breadth-First Traversal</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">5, 2, 8, 1, 3 -&gt; 5, 2, 8, 1, 3</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Initialize queue with root</span></li> <li class=""li2""><span class=""s1"">While queue is not empty</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Dequeue and print the node</span></li> <li class=""li2""><span class=""s1"">Queue the left child</span></li> <li class=""li2""><span class=""s1"">Queue the right child</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n), extra space for the queue</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> collections </span><span class=""s6""><b>import</b></span><span class=""s1""> deque</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>class</b></span><span class=""s1""> </span><span class=""s7"">BstBfs</span><span class=""s1"">(Bst):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">bfs</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, visit_func):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s8"">self</span><span class=""s1"">.root </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s9"">'root is None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue = deque()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue.append(</span><span class=""s8"">self</span><span class=""s1"">.root)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> queue:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = queue.popleft()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; visit_func(node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> node.left </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; queue.append(node.left)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> node.right </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; queue.append(node.right)</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s4""><b>%%</b></span><span class=""s1"">writefile test_bfs.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s10""> </span><span class=""s7"">TestBfs</span><span class=""s10"">(</span><span class=""s1"">object</span><span class=""s10"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.results = Results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">test_bfs</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstBfs(Node(</span><span class=""s11"">5</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.bfs(</span><span class=""s8"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.results), </span><span class=""s9"">'[5, 2, 8, 1, 3]'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s10"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s10"">(</span><span class=""s1"">'Success: test_bfs'</span><span class=""s10"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBfs()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_bfs()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s4""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement depth-first traversals (in-order, pre-order, post-order) on a binary tree.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s5 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s11 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume we already have a Node class with an insert method?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">What should we do with each node when we process it?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Call an input method </span><span class=""s3"">visit_func</span><span class=""s1""> on the node</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits in memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p4""><span class=""s1""><b>In-Order Traversal</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">5, 2, 8, 1, 3 -&gt; 1, 2, 3, 5, 8</span></li> <li class=""li2""><span class=""s1"">1, 2, 3, 4, 5 -&gt; 1, 2, 3, 4, 5</span></li> </ul> <p class=""p4""><span class=""s1""><b>Pre-Order Traversal</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">5, 2, 8, 1, 3 -&gt; 5, 2, 1, 3, 8</span></li> <li class=""li2""><span class=""s1"">1, 2, 3, 4, 5 -&gt; 1, 2, 3, 4, 5</span></li> </ul> <p class=""p4""><span class=""s1""><b>Post-Order Traversal</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">5, 2, 8, 1, 3 -&gt; 1, 3, 2, 8, 5</span></li> <li class=""li2""><span class=""s1"">1, 2, 3, 4, 5 -&gt; 5, 4, 3, 2, 1</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p1""><span class=""s1""><b><br></b></span></p><p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Note:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">This following are all forms of depth-first traversals</span></li> </ul> <p class=""p4""><span class=""s1""><b>In-Order Traversal</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Recursively call in-order traversal on the left child</span></li> <li class=""li2""><span class=""s1"">Visit the current node</span></li> <li class=""li2""><span class=""s1"">Recursively call in-order traversal on the right child</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(m), where m is the recursion depth, or O(1) if using an iterative approach</span></li> </ul> <p class=""p4""><span class=""s1""><b>Pre-Order Traversal</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Visit the current node</span></li> <li class=""li2""><span class=""s1"">Recursively call pre-order traversal on the left child</span></li> <li class=""li2""><span class=""s1"">Recursively call pre-order traversal on the right child</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(m), where m is the recursion depth, or O(1) if using an iterative approach</span></li> </ul> <p class=""p4""><span class=""s1""><b>Post-Order Traversal</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Recursively call post-order traversal on the left child</span></li> <li class=""li2""><span class=""s1"">Recursively call post-order traversal on the right child</span></li> <li class=""li2""><span class=""s1"">Visit the current node</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(m), where m is the recursion depth, or O(1) if using an iterative approach</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s6""><b>class</b></span><span class=""s1""> </span><span class=""s7"">BstDfs</span><span class=""s1"">(Bst):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">in_order_traversal</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, node, visit_func):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> node </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.in_order_traversal(node.left, visit_func)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; visit_func(node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.in_order_traversal(node.right, visit_func)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">pre_order_traversal</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, node, visit_func):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> node </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; visit_func(node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.pre_order_traversal(node.left, visit_func)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.pre_order_traversal(node.right, visit_func)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">post_order_traversal</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, node, visit_func):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> node </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.post_order_traversal(node.left, visit_func)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.post_order_traversal(node.right, visit_func)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; visit_func(node)</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s4""><b>%%</b></span><span class=""s1"">writefile test_dfs.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s9""> </span><span class=""s7"">TestDfs</span><span class=""s9"">(</span><span class=""s1"">object</span><span class=""s9"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.results = Results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">test_dfs</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstDfs(Node(</span><span class=""s10"">5</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.in_order_traversal(bst.root, </span><span class=""s8"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.results), </span><span class=""s11"">""[1, 2, 3, 5, 8]""</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.results.clear_results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.pre_order_traversal(bst.root, </span><span class=""s8"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.results), </span><span class=""s11"">""[5, 2, 1, 3, 8]""</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.results.clear_results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.post_order_traversal(bst.root, </span><span class=""s8"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.results), </span><span class=""s11"">""[1, 3, 2, 8, 5]""</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.results.clear_results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstDfs(Node(</span><span class=""s10"">1</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s10"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.in_order_traversal(bst.root, </span><span class=""s8"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.results), </span><span class=""s11"">""[1, 2, 3, 4, 5]""</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.results.clear_results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.pre_order_traversal(bst.root, </span><span class=""s8"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.results), </span><span class=""s11"">""[1, 2, 3, 4, 5]""</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.results.clear_results()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.post_order_traversal(bst.root, </span><span class=""s8"">self</span><span class=""s1"">.results.add_result)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.results), </span><span class=""s11"">""[5, 4, 3, 2, 1]""</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s9"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s9"">(</span><span class=""s1"">'Success: test_dfs'</span><span class=""s9"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestDfs()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_dfs()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s4""><b>==</b></span><span class=""s1""> </span><span class=""s11"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Determine the height of a tree.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is this a binary tree?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a Node class with an insert method?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">5 -&gt; 1</span></li> <li class=""li2""><span class=""s1"">5, 2, 8, 1, 3 -&gt; 3</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">We'll use a recursive algorithm.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the current node is None, return 0</span></li> <li class=""li2""><span class=""s1"">Else, return 1 + the maximum height of the left or right children</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(h), where h is the height of the tree</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">BstHeight</span><span class=""s6"">(Bst):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">height</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, node):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s9"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s3""><b>+</b></span><span class=""s1""> </span><span class=""s5"">max</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">.height(node.left),</span></p> <p class=""p6""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.height(node.right))</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_height.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s6""> </span><span class=""s7"">TestHeight</span><span class=""s6"">(</span><span class=""s1"">object</span><span class=""s6"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_height</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstHeight(Node(</span><span class=""s9"">5</span><span class=""s1"">))</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst.height(bst.root), </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s9"">8</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bst.height(bst.root), </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_height'</span><span class=""s6"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestHeight()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_height()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the lowest common ancestor of two nodes in a binary tree.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is this a binary search tree?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the two nodes are in the tree?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _10_</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; /&nbsp; &nbsp; &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; 9</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \&nbsp; &nbsp; &nbsp; / \</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; 12&nbsp; 3&nbsp; &nbsp; 18&nbsp; 20</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / \ &nbsp; &nbsp; &nbsp; /</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 1 &nbsp; 8 &nbsp; &nbsp; 40</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">0, 5 -&gt; None</span></li> <li class=""li2""><span class=""s1"">5, 0 -&gt; None</span></li> <li class=""li2""><span class=""s1"">1, 8 -&gt; 3</span></li> <li class=""li2""><span class=""s1"">12, 8 -&gt; 5</span></li> <li class=""li2""><span class=""s1"">12, 40 -&gt; 10</span></li> <li class=""li2""><span class=""s1"">9, 20 -&gt; 9</span></li> <li class=""li2""><span class=""s1"">3, 5 -&gt; 5</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p><p class=""p1""><span class=""s1""><b><sup></sup></b></span></p><p class=""p1""></p><p class=""p1"">* Verify both nodes are in the tree</p><p class=""p1"">* Base cases</p><p class=""p1"">&nbsp; &nbsp; * If the root is None, return None</p><p class=""p1"">&nbsp; &nbsp; *&nbsp;If the root is either node, return the root</p><p class=""p1"">*&nbsp;Recursively search left and right</p><p class=""p1"">*&nbsp;If the left and right are both nodes</p><p class=""p1"">&nbsp; &nbsp; *&nbsp;The return the root</p><p class=""p1"">*&nbsp;Else, left or right, whichever is valid</p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(h), where h is the height of the tree</span></li> <li class=""li2""><span class=""s1"">Space: O(h), where h is the recursion depth</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Node</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">__init__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, key, left=</span><span class=""s5""><b>None</b></span><span class=""s1"">, right=</span><span class=""s5""><b>None</b></span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.key = key</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.left = left</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.right = right</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">__repr__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5"">str</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">.key)</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">BinaryTree</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">lca</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, root, node1, node2):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>in</b></span><span class=""s1""> (root, node1, node2):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> (</span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._node_in_tree(root, node1) </span><span class=""s5""><b>or</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._node_in_tree(root, node2)):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._lca(root, node1, node2)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">_node_in_tree</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, root, node):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> root </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>False</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> root </span><span class=""s5""><b>is</b></span><span class=""s1""> node:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>True</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left = </span><span class=""s6"">self</span><span class=""s1"">._node_in_tree(root.left, node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right = </span><span class=""s6"">self</span><span class=""s1"">._node_in_tree(root.right, node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> left </span><span class=""s5""><b>or</b></span><span class=""s1""> right</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">_lca</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, root, node1, node2):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> root </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> root </span><span class=""s5""><b>is</b></span><span class=""s1""> node1 </span><span class=""s5""><b>or</b></span><span class=""s1""> root </span><span class=""s5""><b>is</b></span><span class=""s1""> node2:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> root</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left_node = </span><span class=""s6"">self</span><span class=""s1"">._lca(root.left, node1, node2)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right_node = </span><span class=""s6"">self</span><span class=""s1"">._lca(root.right, node1, node2)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> left_node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>and</b></span><span class=""s1""> right_node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> root</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> left_node </span><span class=""s5""><b>if</b></span><span class=""s1""> left_node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>else</b></span><span class=""s1""> right_node</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">LcaResult</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">__init__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, node, is_ancestor):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.node = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.is_ancestor = is_ancestor</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">BinaryTreeOptimized</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">lca</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, root, node1, node2):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> root </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'root cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = </span><span class=""s6"">self</span><span class=""s1"">._lca(root, node1, node2)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> result.is_ancestor:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> result.node</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s3""> </span><span class=""s1""><b>None</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">_lca</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, curr_node, node1, node2):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> curr_node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> LcaResult(</span><span class=""s5""><b>None</b></span><span class=""s1"">, is_ancestor=</span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> curr_node </span><span class=""s5""><b>is</b></span><span class=""s1""> node1 </span><span class=""s5""><b>and</b></span><span class=""s1""> curr_node </span><span class=""s5""><b>is</b></span><span class=""s1""> node2:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> LcaResult(curr_node, is_ancestor=</span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left_result = </span><span class=""s6"">self</span><span class=""s1"">._lca(curr_node.left, node1, node2)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> left_result.is_ancestor:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> left_result</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right_result = </span><span class=""s6"">self</span><span class=""s1"">._lca(curr_node.right, node1, node2)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> right_result.is_ancestor:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> right_result</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> left_result.node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>and</b></span><span class=""s1""> right_result.node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> LcaResult(curr_node, is_ancestor=</span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>elif</b></span><span class=""s1""> curr_node </span><span class=""s5""><b>is</b></span><span class=""s1""> node1 </span><span class=""s5""><b>or</b></span><span class=""s1""> curr_node </span><span class=""s5""><b>is</b></span><span class=""s1""> node2:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; is_ancestor = left_result.node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> </span><span class=""s8"">\</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; right_result.node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> LcaResult(curr_node, is_ancestor)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> LcaResult(left_result.node </span><span class=""s5""><b>if</b></span><span class=""s1""> left_result.node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s8"">\</span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1""> right_result.node, is_ancestor=</span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_lca.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestLowestCommonAncestor</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">test_lca</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node10 = Node(</span><span class=""s10"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node5 = Node(</span><span class=""s10"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node12 = Node(</span><span class=""s10"">12</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node3 = Node(</span><span class=""s10"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node1 = Node(</span><span class=""s10"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node8 = Node(</span><span class=""s10"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node9 = Node(</span><span class=""s10"">9</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node18 = Node(</span><span class=""s10"">18</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node20 = Node(</span><span class=""s10"">20</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node40 = Node(</span><span class=""s10"">40</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node3.left = node1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node3.right = node8</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node5.left = node12</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node5.right = node3</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node20.left = node40</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node9.left = node18</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node9.right = node20</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node10.left = node5</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node10.right = node9</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; root = node10</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node0 = Node(</span><span class=""s10"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; binary_tree = BinaryTree()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(binary_tree.lca(root, node0, node5), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(binary_tree.lca(root, node5, node0), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(binary_tree.lca(root, node1, node8), node3)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(binary_tree.lca(root, node12, node8), node5)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(binary_tree.lca(root, node12, node40), node10)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(binary_tree.lca(root, node9, node20), node9)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(binary_tree.lca(root, node3, node5), node5)</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_lca'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestLowestCommonAncestor()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_lca()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Create a list for each level of a binary tree.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font: 14.0px 'Helvetica Neue'} span.s5 {font: 14.0px 'Helvetica Neue'; font-kerning: none} span.s6 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s7 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s8 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s9 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s10 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s11 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s12 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s13 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is this a binary search tree?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Should each level be a list of nodes?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have a Node class with an insert method?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">5, 3, 8, 2, 4, 1, 7, 6, 9, 10, 11 -&gt; [[5], [3, 8], [2, 4, 7, 9], [1, 6, 10], [11]]</span></li> </ul> <p class=""p2""><span class=""s1"">Note: Each number in the result is actually a node containing the number</span></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">We can use either a depth-first or a breadth-first search. Intuitively, it seems like a breadth-first search might be a better fit as we are creating a linked list for each level.</span></p> <p class=""p2""><span class=""s1"">We can use a modified breadth-first search that keeps track of parents as we build the linked list for the current level.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Append the root to the current level's linked list </span><span class=""s3"">current</span></li> <li class=""li2""><span class=""s1"">While the </span><span class=""s3"">current</span><span class=""s1""> is not empty:</span></li> <ul class=""ul2""> <li class=""li4""><span class=""s4""></span><span class=""s5"">Add </span><span class=""s1"">current</span><span class=""s5""> to </span><span class=""s1"">results</span></li> <li class=""li2""><span class=""s1"">Set </span><span class=""s3"">parents</span><span class=""s1""> to </span><span class=""s3"">current</span><span class=""s1""> to prepare to go one level deeper</span></li> <li class=""li2""><span class=""s1"">Clear </span><span class=""s3"">current</span><span class=""s1""> so it can hold the next level</span></li> <li class=""li2""><span class=""s1"">For each </span><span class=""s3"">parent</span><span class=""s1""> in </span><span class=""s3"">parents</span><span class=""s1"">, add the children to </span><span class=""s3"">current</span></li> </ul> <li class=""li2""><span class=""s1"">Return the results</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s8""><b>class</b></span><span class=""s9""> </span><span class=""s1"">BstLevelLists</span><span class=""s9"">(Bst):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s9"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s9""> </span><span class=""s1"">create_level_lists</span><span class=""s9"">(</span><span class=""s10"">self</span><span class=""s9"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s1""> </span><span class=""s10"">self</span><span class=""s1"">.root </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; current = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; parents = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; current.append(</span><span class=""s10"">self</span><span class=""s1"">.root)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>while</b></span><span class=""s1""> current:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(current)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parents = </span><span class=""s8"">list</span><span class=""s1"">(current)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s1""> parent </span><span class=""s8""><b>in</b></span><span class=""s1""> parents:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s1""> parent.left </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>not</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current.append(parent.left)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s1""> parent.right </span><span class=""s8""><b>is</b></span><span class=""s1""> </span><span class=""s8""><b>not</b></span><span class=""s1""> </span><span class=""s8""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current.append(parent.right)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s1""> results</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s6""><b>%%</b></span><span class=""s1"">writefile test_tree_level_lists.py</span></p> <p class=""p7""><span class=""s8""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s8""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s8""><b>class</b></span><span class=""s9""> </span><span class=""s1"">TestTreeLevelLists</span><span class=""s9"">(</span><span class=""s8"">object</span><span class=""s9"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s9"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s9""> </span><span class=""s1"">test_tree_level_lists</span><span class=""s9"">(</span><span class=""s10"">self</span><span class=""s9"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst = BstLevelLists(Node(</span><span class=""s11"">5</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">8</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">7</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">9</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bst.insert(</span><span class=""s11"">11</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; levels = bst.create_level_lists()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results_list = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s1""> level </span><span class=""s8""><b>in</b></span><span class=""s1""> levels:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results = Results()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s1""> node </span><span class=""s8""><b>in</b></span><span class=""s1""> level:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.add_result(node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results_list.append(results)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s8"">str</span><span class=""s1"">(results_list[</span><span class=""s11"">0</span><span class=""s1"">]), </span><span class=""s12"">'[5]'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s8"">str</span><span class=""s1"">(results_list[</span><span class=""s11"">1</span><span class=""s1"">]), </span><span class=""s12"">'[3, 8]'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s8"">str</span><span class=""s1"">(results_list[</span><span class=""s11"">2</span><span class=""s1"">]), </span><span class=""s12"">'[2, 4, 7, 9]'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s8"">str</span><span class=""s1"">(results_list[</span><span class=""s11"">3</span><span class=""s1"">]), </span><span class=""s12"">'[1, 6, 10]'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(</span><span class=""s8"">str</span><span class=""s1"">(results_list[</span><span class=""s11"">4</span><span class=""s1"">]), </span><span class=""s12"">'[11]'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s9"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">print</span><span class=""s9"">(</span><span class=""s1"">'Success: test_tree_level_lists'</span><span class=""s9"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s8""><b>def</b></span><span class=""s1""> </span><span class=""s13"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestTreeLevelLists()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_tree_level_lists()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s8""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s6""><b>==</b></span><span class=""s1""> </span><span class=""s12"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement a trie with find, insert, remove, and list_words methods.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7; min-height: 17.0px} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s10 {font-kerning: none; color: #408080; -webkit-text-stroke: 0px #408080} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume we are working with strings?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are the strings in ASCII?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Should </span><span class=""s3"">find</span><span class=""s1""> only match exact words with a terminating character?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Should </span><span class=""s3"">list_words</span><span class=""s1""> only return words with a terminating character?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">root node is denoted by ''</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; ''</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; /&nbsp; |&nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; h &nbsp; a*&nbsp; m</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; / \ &nbsp; \ &nbsp; \</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; a &nbsp; e*&nbsp; t*&nbsp; e*</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; / \ &nbsp; &nbsp; &nbsp; &nbsp; / \</span></p> <p class=""p4""><span class=""s1"">&nbsp; s*&nbsp; t*&nbsp; &nbsp; &nbsp; n*&nbsp; t*</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s*</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">find</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">* Find on an empty trie</span></p> <p class=""p4""><span class=""s1"">* Find non-matching</span></p> <p class=""p4""><span class=""s1"">* Find matching</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">insert</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">* Insert on empty trie</span></p> <p class=""p4""><span class=""s1"">* Insert to make a leaf terminator char</span></p> <p class=""p4""><span class=""s1"">* Insert to extend an existing terminator char</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">remove</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">* Remove me</span></p> <p class=""p4""><span class=""s1"">* Remove mens</span></p> <p class=""p4""><span class=""s1"">* Remove a</span></p> <p class=""p4""><span class=""s1"">* Remove has</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">list_words</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">* List empty</span></p> <p class=""p4""><span class=""s1"">* List general case</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p6""><span class=""s1""><b><br /></b></span></p><p class=""p6""><span class=""s1""><b>find</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Set node to the root</span></li> <li class=""li2""><span class=""s1"">For each char in the input word</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Check the current node's children to see if it contains the char</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">If a child has the char, set node to the child</span></li> <li class=""li2""><span class=""s1"">Else, return None</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Return the last child node if it has a terminator, else None</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(m), where m is the length of the word</span></li> <li class=""li2""><span class=""s1"">Space: O(h) for the recursion depth (tree height), or O(1) if using an iterative approach</span></li> </ul> <p class=""p6""><span class=""s1""><b>insert</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">set node to the root</span></li> <li class=""li2""><span class=""s1"">For each char in the input word</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Check the current node's children to see if it contains the char</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">If a child has the char, set node to the child</span></li> <li class=""li2""><span class=""s1"">Else, insert a new node with the char</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Update children and parents</span></li> </ul> </ul> </ul> <li class=""li2""><span class=""s1"">Set the last node as a terminating node</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(m), where m is the length of the word</span></li> <li class=""li2""><span class=""s1"">Space: O(h) for the recursion depth (tree height), or O(1) if using an iterative approach</span></li> </ul> <p class=""p6""><span class=""s1""><b>remove</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Determine the matching terminating node by calling the find method</span></li> <li class=""li2""><span class=""s1"">If the matching node has children, remove the terminator to prevent orphaning its children</span></li> <li class=""li2""><span class=""s1"">Set the parent node to the matching node's parent</span></li> <li class=""li2""><span class=""s1"">We'll be looping up the parent chain to propagate the delete</span></li> <li class=""li2""><span class=""s1"">While the parent is valid</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the node has children</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Return to prevent orphaning its remaining children</span></li> </ul> <li class=""li2""><span class=""s1"">If the node is a terminating node and it isn't the original matching node from the find call</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Return to prevent deleting this additional valid word</span></li> </ul> <li class=""li2""><span class=""s1"">Remove the parent node's child entry matching the node</span></li> <li class=""li2""><span class=""s1"">Set the node to the parent</span></li> <li class=""li2""><span class=""s1"">Set the parent to the parent's parent</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(m+h), where where m is the length of the word and h is the tree height</span></li> <li class=""li2""><span class=""s1"">Space: O(h) for the recursion depth (tree height), or O(1) if using an iterative approach</span></li> </ul> <p class=""p6""><span class=""s1""><b>list_words</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Do a pre-order traversal, passing down the current word</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">When you reach a terminating node, add it to the list of results</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(h) for the recursion depth (tree height), or O(1) if using an iterative approach</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s4""><b>%%</b></span><span class=""s1"">writefile trie.py</span></p> <p class=""p8""><span class=""s5""><b>from</b></span><span class=""s1""> collections </span><span class=""s5""><b>import</b></span><span class=""s1""> OrderedDict</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s6""> </span><span class=""s7"">Node</span><span class=""s6"">(</span><span class=""s1"">object</span><span class=""s6"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, key, parent=</span><span class=""s5""><b>None</b></span><span class=""s1"">, terminates=</span><span class=""s5""><b>False</b></span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.key = key</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.terminates = </span><span class=""s5""><b>False</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.parent = parent</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.children = {}</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s6""> </span><span class=""s7"">Trie</span><span class=""s6"">(</span><span class=""s1"">object</span><span class=""s6"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">__init__</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.root = Node(</span><span class=""s9"">''</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">find</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, word):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> word </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s9"">'word cannot be None'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = </span><span class=""s8"">self</span><span class=""s1"">.root</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> word:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> node.children:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = node.children[char]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> node </span><span class=""s5""><b>if</b></span><span class=""s1""> node.terminates </span><span class=""s5""><b>else</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">insert</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, word):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> word </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s9"">'word cannot be None'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = </span><span class=""s8"">self</span><span class=""s1"">.root</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; parent = </span><span class=""s5""><b>None</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> word:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> node.children:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = node.children[char]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node.children[char] = Node(char, parent=node)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = node.children[char]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node.terminates = </span><span class=""s5""><b>True</b></span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">remove</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, word):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> word </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s9"">'word cannot be None'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node = </span><span class=""s8"">self</span><span class=""s1"">.find(word)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> KeyError(</span><span class=""s9"">'word does not exist'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; node.terminates = </span><span class=""s5""><b>False</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; parent = node.parent</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> parent </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p10""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># As we are propagating the delete up the&nbsp;</i></span></p> <p class=""p10""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># parents, if this node has children, stop</i></span></p> <p class=""p10""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># here to prevent orphaning its children.</i></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><i># Or</i></span></p> <p class=""p10""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># if this node is a terminating node that is</i></span></p> <p class=""p10""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># not the terminating node of the input word,&nbsp;</i></span></p> <p class=""p10""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># stop to prevent removing the associated word.</i></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.children </span><span class=""s5""><b>or</b></span><span class=""s1""> node.terminates:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>del</b></span><span class=""s1""> parent.children[node.key]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = parent</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parent = parent.parent</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">list_words</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = []</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_word = </span><span class=""s9"">''</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">._list_words(</span><span class=""s8"">self</span><span class=""s1"">.root, curr_word, result)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> result</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">_list_words</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, node, curr_word, result):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> key, child </span><span class=""s5""><b>in</b></span><span class=""s1""> node.children.items():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> child.terminates:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.append(curr_word&nbsp;</span><span class=""s4""><b>+&nbsp;</b></span><span class=""s1"">key)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">._list_words(child, curr_word&nbsp;</span><span class=""s4""><b>+&nbsp;</b></span><span class=""s1"">key, result)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s4""><b>%%</b></span><span class=""s1"">writefile test_trie.py</span></p> <p class=""p8""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_true</span></p> <p class=""p8""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> raises</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s1""> </span><span class=""s7"">TestTrie</span><span class=""s1"">(</span><span class=""s5"">object</span><span class=""s1"">):&nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_trie</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; trie = Trie()</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Insert'</span><span class=""s6"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; words = [</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'at'</span><span class=""s1"">, </span><span class=""s9"">'has'</span><span class=""s1"">, </span><span class=""s9"">'hat'</span><span class=""s1"">, </span><span class=""s9"">'he'</span><span class=""s1"">,</span></p> <p class=""p8""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">'me'</span><span class=""s1"">, </span><span class=""s9"">'men'</span><span class=""s1"">, </span><span class=""s9"">'mens'</span><span class=""s1"">, </span><span class=""s9"">'met'</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> word </span><span class=""s5""><b>in</b></span><span class=""s1""> words:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; trie.insert(word)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> word </span><span class=""s5""><b>in</b></span><span class=""s1""> trie.list_words():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert_true(trie.find(word) </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p13""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Remove me'</span><span class=""s6"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; trie.remove(</span><span class=""s9"">'me'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; words_removed = [</span><span class=""s9"">'me'</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; words = [</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'at'</span><span class=""s1"">, </span><span class=""s9"">'has'</span><span class=""s1"">, </span><span class=""s9"">'hat'</span><span class=""s1"">, </span><span class=""s9"">'he'</span><span class=""s1"">,</span></p> <p class=""p8""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">'men'</span><span class=""s1"">, </span><span class=""s9"">'mens'</span><span class=""s1"">, </span><span class=""s9"">'met'</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> word </span><span class=""s5""><b>in</b></span><span class=""s1""> words:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert_true(trie.find(word) </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> word </span><span class=""s5""><b>in</b></span><span class=""s1""> words_removed:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert_true(trie.find(word) </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Remove mens'</span><span class=""s6"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; trie.remove(</span><span class=""s9"">'mens'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; words_removed = [</span><span class=""s9"">'me'</span><span class=""s1"">, </span><span class=""s9"">'mens'</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; words = [</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'at'</span><span class=""s1"">, </span><span class=""s9"">'has'</span><span class=""s1"">, </span><span class=""s9"">'hat'</span><span class=""s1"">, </span><span class=""s9"">'he'</span><span class=""s1"">,</span></p> <p class=""p8""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">'men'</span><span class=""s1"">, </span><span class=""s9"">'met'</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> word </span><span class=""s5""><b>in</b></span><span class=""s1""> words:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert_true(trie.find(word) </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> word </span><span class=""s5""><b>in</b></span><span class=""s1""> words_removed:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert_true(trie.find(word) </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Remove a'</span><span class=""s6"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; trie.remove(</span><span class=""s9"">'a'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; words_removed = [</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'me'</span><span class=""s1"">, </span><span class=""s9"">'mens'</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; words = [</span><span class=""s9"">'at'</span><span class=""s1"">, </span><span class=""s9"">'has'</span><span class=""s1"">, </span><span class=""s9"">'hat'</span><span class=""s1"">, </span><span class=""s9"">'he'</span><span class=""s1"">,</span></p> <p class=""p8""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">'men'</span><span class=""s1"">, </span><span class=""s9"">'met'</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> word </span><span class=""s5""><b>in</b></span><span class=""s1""> words:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert_true(trie.find(word) </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> word </span><span class=""s5""><b>in</b></span><span class=""s1""> words_removed:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert_true(trie.find(word) </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Remove has'</span><span class=""s6"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; trie.remove(</span><span class=""s9"">'has'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; words_removed = [</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'has'</span><span class=""s1"">, </span><span class=""s9"">'me'</span><span class=""s1"">, </span><span class=""s9"">'mens'</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; words = [</span><span class=""s9"">'at'</span><span class=""s1"">, </span><span class=""s9"">'hat'</span><span class=""s1"">, </span><span class=""s9"">'he'</span><span class=""s1"">,</span></p> <p class=""p8""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">'men'</span><span class=""s1"">, </span><span class=""s9"">'met'</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> word </span><span class=""s5""><b>in</b></span><span class=""s1""> words:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert_true(trie.find(word) </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> word </span><span class=""s5""><b>in</b></span><span class=""s1""> words_removed:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert_true(trie.find(word) </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_trie'</span><span class=""s6"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4"">@raises</span><span class=""s1"">(Exception)</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_trie_remove_invalid</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Test: Remove from empty trie'</span><span class=""s6"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; trie = Trie()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(trie.remove(</span><span class=""s9"">'foo'</span><span class=""s1"">) </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">)&nbsp;</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test = TestTrie()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_trie()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_trie_remove_invalid()</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s4""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement common bit manipulation operations: get_bit, set_bit, clear_bit, clear_bits_msb_to_index, clear_bits_msb_to_lsb, update_bit.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #aa22ff; -webkit-text-stroke: #aa22ff; background-color: #f7f7f7} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s5 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None as a number input -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">Negative index -&gt; Exception</span></li> </ul> <p class=""p4""><span class=""s1""><b>get_bit</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">number &nbsp; = 0b10001110, index = 3</span></p> <p class=""p5""><span class=""s1"">expected = True</span></p><p class=""p5""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1""><b>set_bit</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">number &nbsp; = 0b10001110, index = 4</span></p> <p class=""p5""><span class=""s1"">expected = 0b10011110</span></p><p class=""p5""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1""><b>clear_bit</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">number &nbsp; = 0b10001110, index = 3</span></p> <p class=""p5""><span class=""s1"">expected = 0b10000110</span></p><p class=""p5""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1""><b>clear_bits_msb_to_index</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">number &nbsp; = 0b10001110, index = 3</span></p> <p class=""p5""><span class=""s1"">expected = 0b00000110</span></p><p class=""p5""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1""><b>clear_bits_index_to_lsb</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">number &nbsp; = 0b10001110, index = 3</span></p> <p class=""p5""><span class=""s1"">expected = 0b10000000</span></p><p class=""p5""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1""><b>update_bit</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">number &nbsp; = 0b10001110, index = 3, value = 1</span></p> <p class=""p5""><span class=""s1"">expected = 0b10001110</span></p> <p class=""p5""><span class=""s1"">number &nbsp; = 0b10001110, index = 3, value = 0</span></p> <p class=""p5""><span class=""s1"">expected = 0b10000110</span></p> <p class=""p5""><span class=""s1"">number &nbsp; = 0b10001110, index = 0, value = 1</span></p> <p class=""p5""><span class=""s1"">expected = 0b10001111</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1""><b>get_bit</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">indices&nbsp; 7 6 5 4&nbsp; 3 2 1 0&nbsp; index = 3</span></p> <p class=""p5""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p5""><span class=""s1"">input&nbsp; &nbsp; 1 0 0 0&nbsp; 1 1 1 0&nbsp; 0b10001110</span></p> <p class=""p5""><span class=""s1"">mask &nbsp; &nbsp; 0 0 0 0&nbsp; 1 0 0 0&nbsp; 1 &lt;&lt; index</span></p> <p class=""p5""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p5""><span class=""s1"">result &nbsp; 0 0 0 0&nbsp; 1 0 0 0&nbsp; number &amp; mask != 0</span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b)</span></li> <li class=""li2""><span class=""s1"">Space: O(b)</span></li> </ul> <p class=""p4""><span class=""s1""><b>set_bit</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">indices&nbsp; 7 6 5 4&nbsp; 3 2 1 0&nbsp; index = 4</span></p> <p class=""p5""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p5""><span class=""s1"">input&nbsp; &nbsp; 1 0 0 0&nbsp; 1 1 1 0&nbsp; 0b10001110</span></p> <p class=""p5""><span class=""s1"">mask &nbsp; &nbsp; 0 0 0 1&nbsp; 0 0 0 0&nbsp; 1 &lt;&lt; index</span></p> <p class=""p5""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p5""><span class=""s1"">result &nbsp; 1 0 0 1&nbsp; 1 1 1 0&nbsp; number | mask</span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b)</span></li> <li class=""li2""><span class=""s1"">Space: O(b)</span></li> </ul> <p class=""p4""><span class=""s1""><b>clear_bit</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">indices&nbsp; 7 6 5 4&nbsp; 3 2 1 0&nbsp; index = 3</span></p> <p class=""p5""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p5""><span class=""s1"">input&nbsp; &nbsp; 1 0 0 0&nbsp; 1 1 1 0&nbsp; 0b10001110</span></p> <p class=""p5""><span class=""s1"">mask &nbsp; &nbsp; 0 0 0 0&nbsp; 1 0 0 0&nbsp; 1 &lt;&lt; index</span></p> <p class=""p5""><span class=""s1"">mask &nbsp; &nbsp; 1 1 1 1&nbsp; 0 1 1 1&nbsp; ~(1 &lt;&lt; index)</span></p> <p class=""p5""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p5""><span class=""s1"">result &nbsp; 1 0 0 0&nbsp; 0 1 1 0&nbsp; number &amp; mask</span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b)</span></li> <li class=""li2""><span class=""s1"">Space: O(b)</span></li> </ul> <p class=""p4""><span class=""s1""><b>clear_bits_msb_to_index</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">indices&nbsp; 7 6 5 4&nbsp; 3 2 1 0&nbsp; index = 3</span></p> <p class=""p5""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p5""><span class=""s1"">input&nbsp; &nbsp; 1 0 0 0&nbsp; 1 1 1 0&nbsp; 0b10001110</span></p> <p class=""p5""><span class=""s1"">mask &nbsp; &nbsp; 0 0 0 0&nbsp; 1 0 0 0&nbsp; 1 &lt;&lt; index</span></p> <p class=""p5""><span class=""s1"">mask &nbsp; &nbsp; 0 0 0 0&nbsp; 0 1 1 1&nbsp; (1 &lt;&lt; index) - 1</span></p> <p class=""p5""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p5""><span class=""s1"">result &nbsp; 0 0 0 0&nbsp; 0 1 1 1&nbsp; number &amp; mask</span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b)</span></li> <li class=""li2""><span class=""s1"">Space: O(b)</span></li> </ul> <p class=""p4""><span class=""s1""><b>clear_bits_index_to_lsb</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">indices&nbsp; 7 6 5 4&nbsp; 3 2 1 0&nbsp; index = 3</span></p> <p class=""p5""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p5""><span class=""s1"">input&nbsp; &nbsp; 1 0 0 0&nbsp; 1 1 1 0&nbsp; 0b10001110</span></p> <p class=""p5""><span class=""s1"">mask &nbsp; &nbsp; 0 0 0 1&nbsp; 0 0 0 0&nbsp; 1 &lt;&lt; index + 1</span></p> <p class=""p5""><span class=""s1"">mask &nbsp; &nbsp; 0 0 0 0&nbsp; 1 1 1 1&nbsp; (1 &lt;&lt; index + 1) - 1</span></p> <p class=""p5""><span class=""s1"">mask &nbsp; &nbsp; 1 1 1 1&nbsp; 0 0 0 0&nbsp; ~((1 &lt;&lt; index + 1) - 1)</span></p> <p class=""p5""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p5""><span class=""s1"">result &nbsp; 1 0 0 0&nbsp; 0 0 0 0&nbsp; number &amp; mask</span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b)</span></li> <li class=""li2""><span class=""s1"">Space: O(b)</span></li> </ul> <p class=""p4""><span class=""s1""><b>update_bit</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Use </span><span class=""s3"">get_bit</span><span class=""s1""> to see if the value is already set or cleared</span></li> <li class=""li2""><span class=""s1"">If not, use </span><span class=""s3"">set_bit</span><span class=""s1""> if setting the value or </span><span class=""s3"">clear_bit</span><span class=""s1""> if clearing the value</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b)</span></li> <li class=""li2""><span class=""s1"">Space: O(b)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s4""><b>def</b></span><span class=""s5""> </span><span class=""s1"">validate_index</span><span class=""s5"">(func):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">validate_index_wrapper</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, </span><span class=""s8""><b>*</b></span><span class=""s1"">args, </span><span class=""s8""><b>**</b></span><span class=""s1"">kwargs):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>for</b></span><span class=""s1""> arg </span><span class=""s4""><b>in</b></span><span class=""s1""> args:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> arg </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>raise</b></span><span class=""s1""> IndexError(</span><span class=""s10"">'Invalid index'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> func(</span><span class=""s7"">self</span><span class=""s1"">, </span><span class=""s8""><b>*</b></span><span class=""s1"">args, </span><span class=""s8""><b>**</b></span><span class=""s1"">kwargs)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> validate_index_wrapper</span></p> <p class=""p7""><span class=""s1""></span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p10""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">Bit</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">__init__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, number):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> number </span><span class=""s4""><b>is</b></span><span class=""s1""> </span><span class=""s4""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s10"">'number cannot be None'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.number = number</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s1"">@validate_index</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">get_bit</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, index):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mask = </span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> index</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.number </span><span class=""s8""><b>&amp;</b></span><span class=""s1""> mask </span><span class=""s8""><b>!=</b></span><span class=""s1""> </span><span class=""s9"">0</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s1"">@validate_index</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">set_bit</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, index):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mask = </span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> index</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.number |= mask</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.number</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s1"">@validate_index</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">clear_bit</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, index):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mask = </span><span class=""s8""><b>~</b></span><span class=""s1"">(</span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> index)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.number &amp;= mask</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.number</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s1"">@validate_index</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s5""> </span><span class=""s1"">clear_bits_msb_to_index</span><span class=""s5"">(</span><span class=""s7"">self</span><span class=""s5"">, index):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mask = (</span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> index) </span><span class=""s8""><b>-</b></span><span class=""s1""> </span><span class=""s9"">1</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.number &amp;= mask</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.number</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s1"">@validate_index</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s5""> </span><span class=""s1"">clear_bits_index_to_lsb</span><span class=""s5"">(</span><span class=""s7"">self</span><span class=""s5"">, index):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mask = </span><span class=""s8""><b>~</b></span><span class=""s1"">((</span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> index&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">) </span><span class=""s8""><b>-</b></span><span class=""s1""> </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.number &amp;= mask</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.number</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s1"">@validate_index</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">update_bit</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, index, value):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> value </span><span class=""s4""><b>is</b></span><span class=""s1""> </span><span class=""s4""><b>None</b></span><span class=""s1""> </span><span class=""s4""><b>or</b></span><span class=""s1""> value </span><span class=""s4""><b>not</b></span><span class=""s1""> </span><span class=""s4""><b>in</b></span><span class=""s1""> (</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>raise</b></span><span class=""s1""> Exception(</span><span class=""s10"">'Invalid value'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.get_bit(index) </span><span class=""s8""><b>==</b></span><span class=""s1""> value:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.number</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> value:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.set_bit(index)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.clear_bit(index)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.number</span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_bit.py</span></p> <p class=""p8""><span class=""s4""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s4""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">TestBit</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">test_bit</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; number = </span><span class=""s4"">int</span><span class=""s1"">(</span><span class=""s10"">'10001110'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bit = Bit(number)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.get_bit(index=</span><span class=""s9"">3</span><span class=""s1"">), </span><span class=""s4""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s4"">int</span><span class=""s1"">(</span><span class=""s10"">'10011110'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.set_bit(index=</span><span class=""s9"">4</span><span class=""s1"">), expected)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bit = Bit(number)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s4"">int</span><span class=""s1"">(</span><span class=""s10"">'10000110'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.clear_bit(index=</span><span class=""s9"">3</span><span class=""s1"">), expected)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bit = Bit(number)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s4"">int</span><span class=""s1"">(</span><span class=""s10"">'00000110'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.clear_bits_msb_to_index(index=</span><span class=""s9"">3</span><span class=""s1"">), expected)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bit = Bit(number)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s4"">int</span><span class=""s1"">(</span><span class=""s10"">'10000000'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.clear_bits_index_to_lsb(index=</span><span class=""s9"">3</span><span class=""s1"">), expected)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bit = Bit(number)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.update_bit(index=</span><span class=""s9"">3</span><span class=""s1"">, value=</span><span class=""s9"">1</span><span class=""s1"">), number)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bit = Bit(number)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s4"">int</span><span class=""s1"">(</span><span class=""s10"">'10000110'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.update_bit(index=</span><span class=""s9"">3</span><span class=""s1"">, value=</span><span class=""s9"">0</span><span class=""s1"">), expected)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bit = Bit(number)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s4"">int</span><span class=""s1"">(</span><span class=""s10"">'10001111'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.update_bit(index=</span><span class=""s9"">0</span><span class=""s1"">, value=</span><span class=""s9"">1</span><span class=""s1"">), expected)</span></p> <p class=""p12""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">print</span><span class=""s5"">(</span><span class=""s1"">'Success: test_bit'</span><span class=""s5"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test = TestBit()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_bit()</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Determine the number of bits to flip to convert int a to int b.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume A and B are always ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output an int?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume A and B are always the same number of bits?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid (not None)?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">A or B is None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">General case </span><span class=""s3"">&nbsp; A = 11101</span></li> <li class=""li4""><span class=""s1"">&nbsp; B = 01111</span></li> <li class=""li4""><span class=""s1"">&nbsp; Result: 2<br /> </span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We can use the xor operator to determine the bit differences between a and b</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Set count to 0</span></li> <li class=""li2""><span class=""s1"">Set c to a xor b</span></li> <li class=""li2""><span class=""s1"">Loop while c != 0:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Increment count if the LSB in c is a 1</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">We can check this by using a mask of 1</span></li> </ul> <li class=""li2""><span class=""s1"">Right shift c by 1</span></li> </ul> <li class=""li2""><span class=""s1"">Return the count</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b), where b is the number of bits</span></li> <li class=""li2""><span class=""s1"">Space: O(b), where b is the number of bits</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Bits</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">bits_to_flip</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, a, b):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> a </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1""> </span><span class=""s6""><b>or</b></span><span class=""s1""> b </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'a or b cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; count = </span><span class=""s9"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; c = a </span><span class=""s10""><b>^</b></span><span class=""s1""> b</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> c:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count += c </span><span class=""s10""><b>&amp;</b></span><span class=""s1""> </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c &gt;&gt;= </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> count</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s10""><b>%%</b></span><span class=""s1"">writefile test_bits_to_flip.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">TestBits</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_bits_to_flip</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bits = Bits()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; a = </span><span class=""s6"">int</span><span class=""s1"">(</span><span class=""s8"">'11101'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; b = </span><span class=""s6"">int</span><span class=""s1"">(</span><span class=""s8"">'01111'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s9"">2</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.bits_to_flip(a, b), expected)</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_bits_to_flip'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBits()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_bits_to_flip()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s10""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement the method draw_line(screen, width, x1, x2) where screen is a list of bytes, width is divisible by 8, and x1, x2 are absolute pixel positions.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">For the output, do we set corresponding bits in screen?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Invalid inputs -&gt; Exception</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">screen is empty</span></li> <li class=""li2""><span class=""s1"">width = 0</span></li> <li class=""li2""><span class=""s1"">any input param is None</span></li> <li class=""li2""><span class=""s1"">x1 or x2 is out of bounds</span></li> </ul> <li class=""li2""><span class=""s1"">General case for len(screen) = 20, width = 32:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">x1 = 2, x2 = 6</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">screen[0] = int('00111110', base=2)</span></li> </ul> <li class=""li2""><span class=""s1"">x1 = 68, x2 = 80</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">screen[8], int('00001111', base=2)</span></li> <li class=""li2""><span class=""s1"">screen[9], int('11111111', base=2)</span></li> <li class=""li2""><span class=""s1"">screen[10], int('10000000', base=2)</span></li> </ul> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Set start offset to x1 % 8</span></li> <li class=""li2""><span class=""s1"">Set end offset to x2 % 8</span></li> <li class=""li2""><span class=""s1"">Determine where the first and last full bytes are</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">First full byte = x1 // 8</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Increment by 1 if start offset != 0</span></li> </ul> <li class=""li2""><span class=""s1"">Last full byte = x2 // 8</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Decrement by 1 if end offset != 7</span></li> </ul> <li class=""li2""><span class=""s1"">Fill the bytes with 1111 1111</span></li> </ul> <li class=""li2""><span class=""s1"">If x1 and x2 are in the same byte</span></li> </ul> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; x1 = 2</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; x2 = 6</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; index&nbsp; 0123 4567</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; byte &nbsp; 0011 1110</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; We want to build left and right masks such that:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; left &nbsp; 0011 1111</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; right&nbsp; 1111 1110</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; ----------------</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0011 1110&nbsp; left &amp; right</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; Build the left mask:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; left &nbsp; 0000 0001&nbsp; 1</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0100 0000&nbsp; 1 &lt;&lt; (8 - x1)</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0011 1111&nbsp; (1 &lt;&lt; (8 - x1)) - 1</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; Build the right mask:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; right&nbsp; 0000 0000&nbsp; 1</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0000 0010&nbsp; 1 &lt;&lt; (8 - x2 - 1)</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0000 0001&nbsp; (1 &lt;&lt; (8 - x2 - 1) - 1</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1111 1110&nbsp; ~((1 &lt;&lt; (8 - x2 - 1) - 1)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; Combine the left and right masks:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; left &nbsp; 0011 1111</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; right&nbsp; 1111 1110</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; ----------------</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0011 1110&nbsp; left &amp; right</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; Set screen[x1//8] or screen[x2//8] |= mask</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;* Else</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; If our starting partial byte is:</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0000 1111</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; Build start mask:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; start&nbsp; 0000 0001&nbsp; 1</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0001 0000&nbsp; 1 &lt;&lt; 1 &lt;&lt; start offset</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0000 1111&nbsp; (1 &lt;&lt; 1 &lt;&lt; start offset) - 1</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; If our ending partial byte is:</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1111 1100</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; Build end mask:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; end&nbsp; &nbsp; 1000 0000&nbsp; 0x10000000</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1111 1100&nbsp; 0x10000000 &gt;&gt; end offset</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; Set screen[x1//8] |= start mask</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; Set screen[x2//8] |= end mask</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(length of screen)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">BitsScreen</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">draw_line</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, screen, width, x1, x2):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>in</b></span><span class=""s1""> (screen, width, x1, x2):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'Invalid argument: None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> screen </span><span class=""s5""><b>or</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> width:</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> ValueError(</span><span class=""s1"">'Invalid arg: Empty screen or width'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; MAX_BIT_VALUE = </span><span class=""s5"">len</span><span class=""s1"">(screen) </span><span class=""s8""><b>*</b></span><span class=""s1""> </span><span class=""s9"">8</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> x1 </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> x2 </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> x1 </span><span class=""s8""><b>&gt;=</b></span><span class=""s1""> MAX_BIT_VALUE </span><span class=""s5""><b>or</b></span><span class=""s1""> x2 </span><span class=""s8""><b>&gt;=</b></span><span class=""s1""> MAX_BIT_VALUE:</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> ValueError(</span><span class=""s1"">'Invalid arg: x1 or x2 out of bounds'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; start_bit = x1 </span><span class=""s8""><b>%</b></span><span class=""s1""> </span><span class=""s9"">8</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; end_bit = x2 </span><span class=""s8""><b>%</b></span><span class=""s1""> </span><span class=""s9"">8</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; first_full_byte = x1 </span><span class=""s8""><b>//</b></span><span class=""s1""> </span><span class=""s9"">8</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> start_bit </span><span class=""s8""><b>!=</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; first_full_byte += </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; last_full_byte = x2 </span><span class=""s8""><b>//</b></span><span class=""s1""> </span><span class=""s9"">8</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> end_bit </span><span class=""s8""><b>!=</b></span><span class=""s1""> (</span><span class=""s9"">8&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; last_full_byte -= </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> byte </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(first_full_byte, last_full_byte&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; screen[byte] = </span><span class=""s5"">int</span><span class=""s1"">(</span><span class=""s7"">'11111111'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; start_byte = x1 </span><span class=""s8""><b>//</b></span><span class=""s1""> </span><span class=""s9"">8</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; end_byte = x2 </span><span class=""s8""><b>//</b></span><span class=""s1""> </span><span class=""s9"">8</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> start_byte </span><span class=""s8""><b>==</b></span><span class=""s1""> end_byte:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; left_mask = (</span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> (</span><span class=""s9"">8&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s1"">start_bit)) </span><span class=""s8""><b>-</b></span><span class=""s1""> </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; right_mask = </span><span class=""s8""><b>~</b></span><span class=""s1"">((</span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> (</span><span class=""s9"">8&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s1"">end_bit&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">))&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mask = left_mask </span><span class=""s8""><b>&amp;</b></span><span class=""s1""> right_mask</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; screen[start_byte] |= mask</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start_mask = (</span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> (</span><span class=""s9"">8&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s1"">start_bit)) </span><span class=""s8""><b>-</b></span><span class=""s1""> </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end_mask = </span><span class=""s9"">1</span><span class=""s1""> </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> (</span><span class=""s9"">8&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s1"">end_bit&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; screen[start_byte] |= start_mask</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; screen[end_byte] |= end_mask</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_draw_line.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestBitsScreen</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_draw_line</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bits_screen = BitsScreen()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; screen = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> _ </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s9"">20</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; screen.append(</span><span class=""s5"">int</span><span class=""s1"">(</span><span class=""s7"">'00000000'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bits_screen.draw_line(screen, width=</span><span class=""s9"">32</span><span class=""s1"">, x1=</span><span class=""s9"">68</span><span class=""s1"">, x2=</span><span class=""s9"">80</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(screen[</span><span class=""s9"">8</span><span class=""s1"">], </span><span class=""s5"">int</span><span class=""s1"">(</span><span class=""s7"">'00001111'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(screen[</span><span class=""s9"">9</span><span class=""s1"">], </span><span class=""s5"">int</span><span class=""s1"">(</span><span class=""s7"">'11111111'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(screen[</span><span class=""s9"">10</span><span class=""s1"">], </span><span class=""s5"">int</span><span class=""s1"">(</span><span class=""s7"">'10000000'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bits_screen.draw_line(screen, width=</span><span class=""s9"">32</span><span class=""s1"">, x1=</span><span class=""s9"">2</span><span class=""s1"">, x2=</span><span class=""s9"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(screen[</span><span class=""s9"">0</span><span class=""s1"">], </span><span class=""s5"">int</span><span class=""s1"">(</span><span class=""s7"">'00111110'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bits_screen.draw_line(screen, width=</span><span class=""s9"">32</span><span class=""s1"">, x1=</span><span class=""s9"">10</span><span class=""s1"">, x2=</span><span class=""s9"">13</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(screen[</span><span class=""s9"">1</span><span class=""s1"">], </span><span class=""s5"">int</span><span class=""s1"">(</span><span class=""s7"">'00111100'</span><span class=""s1"">, base=</span><span class=""s9"">2</span><span class=""s1"">))</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_draw_line'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBitsScreen()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_draw_line()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Flip one bit from 0 to 1 to maximize the longest sequence of 1s.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7; min-height: 17.0px} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s10 {font-kerning: none; color: #408080; -webkit-text-stroke: 0px #408080} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the input an int, base 2?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the input is a 32 bit number?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we have to validate the length of the input?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output an int?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we are using a positive number since Python doesn't have an &gt;&gt;&gt; operator?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">All 1's -&gt; Count of 1s</span></li> <li class=""li2""><span class=""s1"">All 0's -&gt; 1</span></li> <li class=""li2""><span class=""s1"">General case</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Trailing zeroes</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">0000 1111 1101 1101 1111 0011 1111 0000 -&gt; 10 (ten)</span></li> </ul> <li class=""li2""><span class=""s1"">Trailing ones</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">0000 1001 1101 1101 1111 0001 1111 0111 -&gt; 9</span></li> </ul> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">seen = []</span></li> <li class=""li2""><span class=""s1"">Build a list of sequence counts</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Look for 0's</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">This will be 0 length if the input has trailing ones</span></li> <li class=""li2""><span class=""s1"">Add sequence length to seen</span></li> </ul> <li class=""li2""><span class=""s1"">Look for 1's</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Add sequence length to seen</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Find the largest sequence of ones looking at seen</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Loop through seen</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">On each iteration of the loop, flip what we are looking for from 0 to 1 and vice versa</span></li> <li class=""li2""><span class=""s1"">If seen[i] represents 1's, continue, we only want to process 0's</span></li> <li class=""li2""><span class=""s1"">If this is our first iteration:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">max_result = seen[i+1] + 1 if seen[i] &gt; 0</span></li> <li class=""li2""><span class=""s1"">continue</span></li> </ul> <li class=""li2""><span class=""s1"">If we are looking at leading zeroes (i == len(seen)-1):</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">result = seen[i-1] + 1</span></li> </ul> <li class=""li2""><span class=""s1"">If we are looking at one zero:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">result = seen[i+1] + seen[i-1] + 1</span></li> </ul> <li class=""li2""><span class=""s1"">If we are looking at multiple zeroes:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">result = max(seen[i+1], seen[i-1]) + 1</span></li> </ul> <li class=""li2""><span class=""s1"">Update max_result based on result</span></li> </ul> </ul> </ul> <p class=""p2""><span class=""s1"">We should make a note that Python does not have a logical right shift operator built in. We can either use a positive number or implement one for a 32 bit number:</span></p> <p class=""p4""><span class=""s1""><br /></span></p><p class=""p4""><span class=""s1"">num % 0x100000000 &gt;&gt; n</span></p><p class=""p4""><span class=""s1""><br /></span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b)</span></li> <li class=""li2""><span class=""s1"">Space: O(b)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Bits</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; MAX_BITS = </span><span class=""s5"">32</span></p> <p class=""p9""><span class=""s1"">&nbsp;&nbsp; &nbsp;</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s3""> </span><span class=""s1"">_build_seen_list</span><span class=""s3"">(</span><span class=""s7"">self</span><span class=""s3"">, num):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; seen = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; looking_for = </span><span class=""s5"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; count = </span><span class=""s5"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>for</b></span><span class=""s1""> _ </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s6"">range</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">.MAX_BITS):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s8""><b>&amp;</b></span><span class=""s1""> </span><span class=""s5"">1</span><span class=""s1""> </span><span class=""s8""><b>!=</b></span><span class=""s1""> looking_for:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; seen.append(count)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; looking_for = </span><span class=""s6""><b>not</b></span><span class=""s1""> looking_for</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count = </span><span class=""s5"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count += </span><span class=""s5"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num &gt;&gt;= </span><span class=""s5"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; seen.append(count)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> seen</span></p> <p class=""p9""><span class=""s1"">&nbsp;&nbsp; &nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s4"">flip_bit</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, num):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s9"">'num cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s8""><b>-</b></span><span class=""s5"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.MAX_BITS</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s5"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s5"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; seen = </span><span class=""s7"">self</span><span class=""s1"">._build_seen_list(num)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_result = </span><span class=""s5"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; looking_for = </span><span class=""s5"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>for</b></span><span class=""s1""> index, count </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s6"">enumerate</span><span class=""s1"">(seen):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = </span><span class=""s5"">0</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Only look for zeroes</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> looking_for </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s5"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; looking_for = </span><span class=""s6""><b>not</b></span><span class=""s1""> looking_for</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>continue</b></span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># First iteration, take trailing zeroes</i></span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># or trailing ones into account</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1"">&nbsp;index&nbsp;</span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s5"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> count </span><span class=""s8""><b>!=</b></span><span class=""s1""> </span><span class=""s5"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><i># Trailing zeroes</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>try</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = seen[index&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s5"">1</span><span class=""s1"">] </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s5"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>except</b></span><span class=""s1""> IndexError:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = </span><span class=""s5"">1</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Last iteration</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>elif</b></span><span class=""s1"">&nbsp;index&nbsp;</span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s6"">len</span><span class=""s1"">(seen) </span><span class=""s8""><b>-</b></span><span class=""s1""> </span><span class=""s5"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = </span><span class=""s5"">1</span><span class=""s1""> </span><span class=""s8""><b>+</b></span><span class=""s1""> seen[index&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s5"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><i># One zero</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> count </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s5"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = seen[index&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s5"">1</span><span class=""s1"">] </span><span class=""s8""><b>+</b></span><span class=""s1""> seen[index&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s5"">1</span><span class=""s1"">] </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s5"">1</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Multiple zeroes</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = </span><span class=""s6"">max</span><span class=""s1"">(seen[index&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s5"">1</span><span class=""s1"">], seen[index&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s5"">1</span><span class=""s1"">]) </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s5"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> result </span><span class=""s8""><b>&gt;</b></span><span class=""s1""> max_result:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_result = result</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; looking_for = </span><span class=""s6""><b>not</b></span><span class=""s1""> looking_for</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> max_result</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_flip_bit.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">TestBits</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_flip_bit</span><span class=""s3"">(</span><span class=""s7"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bits = Bits()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, bits.flip_bit, </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.flip_bit(</span><span class=""s5"">0</span><span class=""s1"">), </span><span class=""s5"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.flip_bit(</span><span class=""s8""><b>-</b></span><span class=""s5"">1</span><span class=""s1"">), bits.MAX_BITS)</span></p> <p class=""p12""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; num = </span><span class=""s6"">int</span><span class=""s3"">(</span><span class=""s1"">'00001111110111011110001111110000'</span><span class=""s3"">, base=</span><span class=""s5"">2</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s5"">10</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.flip_bit(num), expected)</span></p> <p class=""p12""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; num = </span><span class=""s6"">int</span><span class=""s3"">(</span><span class=""s1"">'00000100111011101111100011111011'</span><span class=""s3"">, base=</span><span class=""s5"">2</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s5"">9</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.flip_bit(num), expected)</span></p> <p class=""p12""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; num = </span><span class=""s6"">int</span><span class=""s3"">(</span><span class=""s1"">'00010011101110111110001111101111'</span><span class=""s3"">, base=</span><span class=""s5"">2</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s5"">10</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.flip_bit(num), expected)</span></p> <p class=""p12""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_print_binary'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBits()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_flip_bit()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Given two 16 bit numbers, n and m, and two indices i, j, insert m into n such that m starts at bit j and ends at bit i.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume j &gt; i?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume i through j have enough space for m?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None as an input -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">Negative index for i or j -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">General case</span></li> </ul> <p class=""p4""><span class=""s1"">i = 2, j = 6</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j&nbsp; &nbsp; i</span></p> <p class=""p4""><span class=""s1"">n&nbsp; &nbsp; &nbsp; = 0000 0100 0011 1101</span></p> <p class=""p4""><span class=""s1"">m&nbsp; &nbsp; &nbsp; = 0000 0000 0001 0011</span></p> <p class=""p4""><span class=""s1"">result = 0000 0100 0100 1101</span></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j&nbsp; &nbsp; i</span></p> <p class=""p4""><span class=""s1"">n&nbsp; &nbsp; &nbsp; = 0000 0100 0011 1101</span></p> <p class=""p4""><span class=""s1"">m&nbsp; &nbsp; &nbsp; = 0000 0000 0001 0011</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">lmask&nbsp; = 1111 1111 1111 1111&nbsp; -1</span></p> <p class=""p4""><span class=""s1"">lmask&nbsp; = 1111 1111 1000 0000&nbsp; -1 &lt;&lt; (j + 1)</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">rmask&nbsp; = 0000 0000 0000 0001 &nbsp; 1</span></p> <p class=""p4""><span class=""s1"">rmask&nbsp; = 0000 0000 0000 0100 &nbsp; 1 &lt;&lt; i</span></p> <p class=""p4""><span class=""s1"">rmask&nbsp; = 0000 0000 0000 0011 &nbsp; (1 &lt;&lt; i) -1</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">mask &nbsp; = 1111 1111 1000 0011 &nbsp; lmask | rmask</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">n&nbsp; &nbsp; &nbsp; = 0000 0100 0011 1101</span></p> <p class=""p4""><span class=""s1"">mask &nbsp; = 1111 1111 1000 0011 &nbsp; n &amp; mask&nbsp;</span></p> <p class=""p4""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p4""><span class=""s1"">n2 &nbsp; &nbsp; = 0000 0100 0000 0001</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">n2 &nbsp; &nbsp; = 0000 0100 0000 0001</span></p> <p class=""p4""><span class=""s1"">mask2&nbsp; = 0000 0000 0100 1100 &nbsp; m &lt;&lt; i</span></p> <p class=""p4""><span class=""s1"">--------------------------------------------------</span></p> <p class=""p4""><span class=""s1"">result = 0000 0100 0100 1101 &nbsp; n2 | mask2</span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b), where b is the number of bits</span></li> <li class=""li2""><span class=""s1"">Space: O(b), where b is the number of bits</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Bits</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">insert_m_into_n</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, m, n, i, j):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>in</b></span><span class=""s1""> (m, n, i, j):</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'Argument cannot be None'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> i </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> j </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> ValueError(</span><span class=""s1"">'Index cannot be negative'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left_mask = </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1""> </span><span class=""s7""><b>&lt;&lt;</b></span><span class=""s1""> (j </span><span class=""s7""><b>+</b></span><span class=""s1""> </span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right_mask = (</span><span class=""s8"">1</span><span class=""s1""> </span><span class=""s7""><b>&lt;&lt;</b></span><span class=""s1""> i) </span><span class=""s7""><b>-</b></span><span class=""s1""> </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; n_mask = left_mask </span><span class=""s7""><b>|</b></span><span class=""s1""> right_mask</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Clear bits from j to i, inclusive</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; n_cleared = n </span><span class=""s7""><b>&amp;</b></span><span class=""s1""> n_mask</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Shift m into place before inserting it into n</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; m_mask = m </span><span class=""s7""><b>&lt;&lt;</b></span><span class=""s1""> i</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> n_cleared </span><span class=""s7""><b>|</b></span><span class=""s1""> m_mask</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_insert_m_into_n.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">TestBit</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_insert_m_into_n</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; n = </span><span class=""s5"">int</span><span class=""s1"">(</span><span class=""s9"">'0000010000111101'</span><span class=""s1"">, base=</span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; m = </span><span class=""s5"">int</span><span class=""s1"">(</span><span class=""s9"">'0000000000010011'</span><span class=""s1"">, base=</span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s5"">int</span><span class=""s1"">(</span><span class=""s9"">'0000010001001101'</span><span class=""s1"">, base=</span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bits = Bits()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.insert_m_into_n(m, n, i=</span><span class=""s8"">2</span><span class=""s1"">, j=</span><span class=""s8"">6</span><span class=""s1"">), expected)</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_insert_m_into_n'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBit()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_insert_m_into_n()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Swap the odd and even bits of a positive integer with as few operations as possible.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7; min-height: 17.0px} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'} span.s4 {font: 14.0px 'Helvetica Neue'; font-kerning: none} span.s5 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s10 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s11 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the input is always a positive int?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we're working with 32 bits?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output an int?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid (not None)?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">0 -&gt; 0</span></li> <li class=""li2""><span class=""s1"">-1 -&gt; -1</span></li> <li class=""li4""><span class=""s3""></span><span class=""s4"">General case </span><span class=""s1"">&nbsp; input&nbsp; = 0000 1001 1111 0110</span></li> <li class=""li4""><span class=""s1"">&nbsp; result = 0000 0110 1111 1001<br> </span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p4""><span class=""s1"">* Isolate the odd bits with a mask:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 0000 1001 1111 0110&nbsp; num</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 1010 1010 1010 1010&nbsp; mask</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; --------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 0000 1000 1010 0010&nbsp; num &amp; mask</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">* Shift the odd bits right:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 0000 0100 0101 0001&nbsp; odd</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">* Isolate the even bits with a mask:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 0000 1001 1111 0110&nbsp; num</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 0101 0101 0101 0101&nbsp; mask</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; --------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 0000 0001 0101 0100&nbsp; num &amp; mask</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">* Shift the even bits left:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 0000 0010 1010 1000&nbsp; even</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">* Return even | odd</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 0000 0100 0101 0001&nbsp; odd</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 0000 0010 1010 1000&nbsp; even</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; --------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 0000 0110 1111 1001&nbsp; odd | even</span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b), where b is the number of bits</span></li> <li class=""li2""><span class=""s1"">Space: O(b), where b is the number of bits</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">Bits</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">pairwise_swap</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, num):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> num </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s9"">'num cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> num </span><span class=""s10""><b>==</b></span><span class=""s1""> </span><span class=""s11"">0</span><span class=""s1""> </span><span class=""s7""><b>or</b></span><span class=""s1""> num </span><span class=""s10""><b>==</b></span><span class=""s1""> </span><span class=""s11"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> num</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; odd = (num </span><span class=""s10""><b>&amp;</b></span><span class=""s1""> </span><span class=""s7"">int</span><span class=""s1"">(</span><span class=""s9"">'1010101010101010'</span><span class=""s1"">, base=</span><span class=""s11"">2</span><span class=""s1"">)) </span><span class=""s10""><b>&gt;&gt;</b></span><span class=""s1""> </span><span class=""s11"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; even = (num </span><span class=""s10""><b>&amp;</b></span><span class=""s1""> </span><span class=""s7"">int</span><span class=""s1"">(</span><span class=""s9"">'0101010101010101'</span><span class=""s1"">, base=</span><span class=""s11"">2</span><span class=""s1"">)) </span><span class=""s10""><b>&lt;&lt;</b></span><span class=""s1""> </span><span class=""s11"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> odd </span><span class=""s10""><b>|</b></span><span class=""s1""> even</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s10""><b>%%</b></span><span class=""s1"">writefile test_pairwise_swap.py</span></p> <p class=""p7""><span class=""s7""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s7""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">TestBits</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s5""> </span><span class=""s1"">test_pairwise_swap</span><span class=""s5"">(</span><span class=""s8"">self</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bits = Bits()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.pairwise_swap(</span><span class=""s11"">0</span><span class=""s1"">), </span><span class=""s11"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.pairwise_swap(</span><span class=""s11"">1</span><span class=""s1"">), </span><span class=""s11"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num = </span><span class=""s7"">int</span><span class=""s1"">(</span><span class=""s9"">'0000100111110110'</span><span class=""s1"">, base=</span><span class=""s11"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s7"">int</span><span class=""s1"">(</span><span class=""s9"">'0000011011111001'</span><span class=""s1"">, base=</span><span class=""s11"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.pairwise_swap(num), expected)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, bits.pairwise_swap, </span><span class=""s7""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">'Success: test_pairwise_swap'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBits()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_pairwise_swap()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s7""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s10""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Given a real number between 0 and 1, print the binary representation. If the length of the representation is &gt; 32, return 'ERROR'.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the input a float?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output a string?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is 0 and 1 inclusive?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Does the result include a trailing zero and decimal point?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the leading zero and decimal point counted in the 32 char limit?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; 'ERROR'</span></li> <li class=""li2""><span class=""s1"">Out of bounds (0, 1) -&gt; 'ERROR'</span></li> <li class=""li2""><span class=""s1"">General case</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">0.625 -&gt; 0.101</span></li> <li class=""li2""><span class=""s1"">0.987654321 -&gt; 'ERROR'</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Set the result to '0.'</span></li> <li class=""li2""><span class=""s1"">Start with a fraction of 0.5, which is 0.1 in base 2</span></li> <li class=""li2""><span class=""s1"">Loop while num &gt; 0</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Check num versus fraction</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">If num &gt; fraction, add a 1 to the result, num -= fraction</span></li> <li class=""li2""><span class=""s1"">Else, add a 0 to the result</span></li> <li class=""li2""><span class=""s1"">If the len(result) &gt; 32, return 'ERROR'</span></li> </ul> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>from</b></span><span class=""s1""> __future__ </span><span class=""s3""><b>import</b></span><span class=""s1""> division</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Bits</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p><p class=""p7""><span class=""s4""><br /></span></p><p class=""p7""><span class=""s4"">&nbsp; &nbsp; MAX_BITS = 32</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">print_binary</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, num):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> num </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> num </span><span class=""s7""><b>&gt;=</b></span><span class=""s1""> </span><span class=""s8"">1</span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> num </span><span class=""s7""><b>&lt;=</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s9"">'ERROR'</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = [</span><span class=""s9"">'0', '.']</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; fraction = </span><span class=""s8"">0.5</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>while</b></span><span class=""s1""> num:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> num </span><span class=""s7""><b>&gt;=</b></span><span class=""s1""> fraction:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.append(</span><span class=""s9"">'1')</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num -= fraction</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.append(</span><span class=""s9"">'0')</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(result) </span><span class=""s7""><b>&gt;</b></span><span class=""s1""> </span><span class=""s8"">self.MAX_BITS</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s9"">'ERROR'</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fraction /= </span><span class=""s8"">2</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> ''.join(result)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_print_binary.py</span></p> <p class=""p6""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">TestBits</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_print_binary</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bit = Bits()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.print_binary(</span><span class=""s3""><b>None</b></span><span class=""s1"">), </span><span class=""s9"">'ERROR'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.print_binary(</span><span class=""s8"">0</span><span class=""s1"">), </span><span class=""s9"">'ERROR'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.print_binary(</span><span class=""s8"">1</span><span class=""s1"">), </span><span class=""s9"">'ERROR'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num = </span><span class=""s8"">0.625</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s9"">'0.101'</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.print_binary(num), expected)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num = </span><span class=""s8"">0.987654321</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bit.print_binary(num), </span><span class=""s9"">'ERROR'</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_print_binary'</span><span class=""s4"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestBits()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_print_binary()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Check if a number is prime.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is it correct that 1 is not considered a prime number?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">Not an int -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">Less than 2 -&gt; False</span></li> <li class=""li2""><span class=""s1"">General case</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">For a number to be prime, it must be 2 or greater and cannot be divisible by another number other than itself (and 1).</span></p> <p class=""p2""><span class=""s1"">We'll check by dividing all numbers from 2 to the input number to determine if the number is prime.</span></p> <p class=""p2""><span class=""s1"">As an optimization, we can divide from 2 to the square root of the input number. For each value that divides the input number evenly, there is a complement b where a * b = n. If a &gt; sqrt(n) then b &lt; sqrt(n) because sqrt(n^2) = n.</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n) where n is the value of the input number</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Sieve of Eratosthenes</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">The Sieve of Eratosthenes provides a more efficient way of computing and generating primes. See the challenge </span><span class=""s3"">""Generate a list of primes""</span><span class=""s1""> for more details.</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>import</b></span><span class=""s4""> math</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Math</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">check_prime</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, num):</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>if</b></span><span class=""s4""> num </span><span class=""s1""><b>is</b></span><span class=""s4""> </span><span class=""s1""><b>None</b></span><span class=""s4""> </span><span class=""s1""><b>or</b></span><span class=""s4""> </span><span class=""s1""><b>not</b></span><span class=""s4""> </span><span class=""s1"">isinstance</span><span class=""s4"">(num, </span><span class=""s1"">int</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'num must be an int'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">2</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>False</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>for</b></span><span class=""s1""> i </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s6"">range</span><span class=""s1"">(</span><span class=""s10"">2</span><span class=""s1"">, num):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s9""><b>%</b></span><span class=""s1""> i </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>False</b></span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s4""> </span><span class=""s1""><b>True</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">check_prime_optimized</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">, num):</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>if</b></span><span class=""s4""> num </span><span class=""s1""><b>is</b></span><span class=""s4""> </span><span class=""s1""><b>None</b></span><span class=""s4""> </span><span class=""s1""><b>or</b></span><span class=""s4""> </span><span class=""s1""><b>not</b></span><span class=""s4""> </span><span class=""s1"">isinstance</span><span class=""s4"">(num, </span><span class=""s1"">int</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'num must be an int'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">2</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>False</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>for</b></span><span class=""s1""> i </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s6"">range</span><span class=""s1"">(</span><span class=""s10"">2</span><span class=""s1"">, </span><span class=""s6"">int</span><span class=""s1"">(math.sqrt(num)</span><span class=""s9""><b>+</b></span><span class=""s10"">1</span><span class=""s1"">)):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s9""><b>%</b></span><span class=""s1""> i </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>False</b></span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s4""> </span><span class=""s1""><b>True</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_check_prime.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">TestMath</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_check_prime</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; math = Math()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, math.check_prime, </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, math.check_prime, </span><span class=""s10"">98.6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(math.check_prime(</span><span class=""s10"">0</span><span class=""s1"">), </span><span class=""s6""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(math.check_prime(</span><span class=""s10"">1</span><span class=""s1"">), </span><span class=""s6""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(math.check_prime(</span><span class=""s10"">97</span><span class=""s1"">), </span><span class=""s6""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_check_prime'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestMath()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_check_prime()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Generate a list of primes.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 16.0px} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is it correct that 1 is not considered a prime number?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">Not an int -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">20 -&gt; 2, 3, 5, 7, 11, 13, 17, 19</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">For a number to be prime, it must be 2 or greater and cannot be divisible by another number other than itself (and 1).</span></p> <p class=""p2""><span class=""s1"">We'll use the Sieve of Eratosthenes. All non-prime numbers are divisible by a prime number.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Use an array (or bit array, bit vector) to keep track of each integer up to the max</span></li> <li class=""li2""><span class=""s1"">Start at 2, end at sqrt(max)</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">We can use sqrt(max) instead of max because:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">For each value that divides the input number evenly, there is a complement b where a * b = n</span></li> <li class=""li2""><span class=""s1"">If a &gt; sqrt(n) then b &lt; sqrt(n) because sqrt(n^2) = n</span></li> </ul> <li class=""li2""><span class=""s1"">""Cross off"" all numbers divisible by 2, 3, 5, 7, ... by setting array[index] to False</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n log log n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p2""><span class=""s1"">Wikipedia's animation:</span></p> <p class=""p4""><span class=""s1""></span><br /></p><p class=""p4""><img src=""eratosthenes.gif"" /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>import</b></span><span class=""s3""> math</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4""><b>class</b></span><span class=""s3""> </span><span class=""s1"">PrimeGenerator</span><span class=""s3"">(</span><span class=""s4"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s5"">generate_primes</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, max_num):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> max_num </span><span class=""s4""><b>is</b></span><span class=""s1""> </span><span class=""s4""><b>None</b></span><span class=""s1""> </span><span class=""s4""><b>or</b></span><span class=""s1""> </span><span class=""s4""><b>not</b></span><span class=""s1""> </span><span class=""s4"">isinstance</span><span class=""s1"">(max_num, </span><span class=""s4"">int</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'max_num must be an int'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s4""><b>True</b></span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> max_num</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array[</span><span class=""s9"">0</span><span class=""s1"">] = </span><span class=""s4""><b>False</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array[</span><span class=""s9"">1</span><span class=""s1"">] = </span><span class=""s4""><b>False</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; prime = </span><span class=""s9"">2</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>while</b></span><span class=""s1""> prime </span><span class=""s8""><b>&lt;=</b></span><span class=""s1""> math.sqrt(max_num):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">._cross_off(array, prime)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prime = </span><span class=""s6"">self</span><span class=""s1"">._next_prime(array, prime)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> array</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s5"">_cross_off</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, array, prime):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>for</b></span><span class=""s1""> index </span><span class=""s4""><b>in</b></span><span class=""s1""> </span><span class=""s4"">range</span><span class=""s1"">(prime</span><span class=""s8""><b>*</b></span><span class=""s1"">prime, </span><span class=""s4"">len</span><span class=""s1"">(array), prime):</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Start with prime*prime because if we have a k*prime</i></span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># where k &lt; prime, this value would have already been</i></span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># previously crossed off</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array[index] = </span><span class=""s4""><b>False</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s5"">_next_prime</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, array, prime):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">next</span><span class=""s1""> = prime </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>while</b></span><span class=""s1""> </span><span class=""s4"">next</span><span class=""s1""> </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s4"">len</span><span class=""s1"">(array) </span><span class=""s4""><b>and</b></span><span class=""s1""> </span><span class=""s4""><b>not</b></span><span class=""s1""> array[</span><span class=""s4"">next</span><span class=""s1"">]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">next</span><span class=""s1""> += </span><span class=""s9"">1</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s3""> </span><span class=""s1"">next</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_generate_primes.py</span></p> <p class=""p7""><span class=""s4""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s4""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s5"">TestMath</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_generate_primes</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; prime_generator = PrimeGenerator()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, prime_generator.generate_primes, </span><span class=""s4""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, prime_generator.generate_primes, </span><span class=""s9"">98.6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(prime_generator.generate_primes(</span><span class=""s9"">20</span><span class=""s1"">), [</span><span class=""s4""><b>False</b></span><span class=""s1"">, </span><span class=""s4""><b>False</b></span><span class=""s1"">, </span><span class=""s4""><b>True</b></span><span class=""s1"">,&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>True</b></span><span class=""s1"">, </span><span class=""s4""><b>False</b></span><span class=""s1"">, </span><span class=""s4""><b>True</b></span><span class=""s1"">,&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>False</b></span><span class=""s1"">, </span><span class=""s4""><b>True</b></span><span class=""s1"">, </span><span class=""s4""><b>False</b></span><span class=""s1"">,&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>False</b></span><span class=""s1"">, </span><span class=""s4""><b>False</b></span><span class=""s1"">, </span><span class=""s4""><b>True</b></span><span class=""s1"">,&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>False</b></span><span class=""s1"">, </span><span class=""s4""><b>True</b></span><span class=""s1"">, </span><span class=""s4""><b>False</b></span><span class=""s1"">,&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>False</b></span><span class=""s1"">, </span><span class=""s4""><b>False</b></span><span class=""s1"">, </span><span class=""s4""><b>True</b></span><span class=""s1"">,&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>False</b></span><span class=""s1"">, </span><span class=""s4""><b>True</b></span><span class=""s1"">])</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: generate_primes'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestMath()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_generate_primes()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Determine the total number of unique ways to make n cents, given coins of denominations less than n cents.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Do the coins have to reach exactly n cents?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we have an infinite number of coins to make n cents?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we need to report the combination(s) of coins that represent the minimum?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the coin denominations are given in sorted order?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">coins: None or n: None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">coins: [] or n: 0 -&gt; 0</span></li> <li class=""li2""><span class=""s1"">coins: [1, 2, 3], n: 5 -&gt; 5</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We'll use a bottom-up dynamic programming approach.</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">The rows (i) represent the coin values.</span></p> <p class=""p4""><span class=""s1"">The columns (j) represent the totals.</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; -------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; | 0 | 1 | 2 | 3 | 4 | 5 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; -------------------------</span></p> <p class=""p4""><span class=""s1"">0 | 1 | 0 | 0 | 0 | 0 | 0 |</span></p> <p class=""p4""><span class=""s1"">1 | 1 | 1 | 1 | 1 | 1 | 1 |</span></p> <p class=""p4""><span class=""s1"">2 | 1 | 1 | 2 | 2 | 3 | 3 |</span></p> <p class=""p4""><span class=""s1"">3 | 1 | 1 | 2 | 3 | 4 | 5 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; -------------------------</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Number of ways to get total n with coin[n] equals:</span></p> <p class=""p4""><span class=""s1"">* Number of ways to get total n with coin[n - 1] plus</span></p> <p class=""p4""><span class=""s1"">* Number of ways to get total n - coin[n]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">if j == 0:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; T[i][j] = 1</span></p> <p class=""p4""><span class=""s1"">if row == 0:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; T[i][j] = 0</span></p> <p class=""p4""><span class=""s1"">if coins[i] &gt;= j</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; T[i][j] = T[i - 1][j] + T[i][j - coins[i]]</span></p> <p class=""p4""><span class=""s1"">else:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; T[i][j] = T[i - 1][j]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">The answer will be in the bottom right corner of the matrix.</span></p><p class=""p4""><span class=""s1""><br /></span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(i * j)</span></li> <li class=""li2""><span class=""s1"">Space: O(i * j)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">CoinChanger</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">make_change</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, coins, total):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> coins </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> total </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> coins </span><span class=""s3""><b>or</b></span><span class=""s1""> total </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; coins = [</span><span class=""s8"">0</span><span class=""s1"">] </span><span class=""s7""><b>+</b></span><span class=""s1""> coins</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_rows = </span><span class=""s3"">len</span><span class=""s1"">(coins)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_cols = total </span><span class=""s7""><b>+</b></span><span class=""s1""> </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; T = [[</span><span class=""s3""><b>None</b></span><span class=""s1"">] </span><span class=""s7""><b>*</b></span><span class=""s1""> num_cols </span><span class=""s3""><b>for</b></span><span class=""s1""> _ </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_rows)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> i </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_rows):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> j </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_cols):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> i </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>continue</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> j </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>continue</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> coins[i] </span><span class=""s7""><b>&lt;=</b></span><span class=""s1""> j:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = T[i&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">][j] </span><span class=""s7""><b>+</b></span><span class=""s1""> T[i][j&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s1"">coins[i]]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = T[i&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">][j]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> T[num_rows&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">][num_cols&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_coin_change.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Challenge</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_coin_change</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; coin_changer = CoinChanger()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(coin_changer.make_change([</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">], </span><span class=""s8"">0</span><span class=""s1"">), </span><span class=""s8"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(coin_changer.make_change([</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">], </span><span class=""s8"">5</span><span class=""s1"">), </span><span class=""s8"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(coin_changer.make_change([</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">5</span><span class=""s1"">, </span><span class=""s8"">25</span><span class=""s1"">, </span><span class=""s8"">50</span><span class=""s1"">], </span><span class=""s8"">10</span><span class=""s1"">), </span><span class=""s8"">3</span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_coin_change'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = Challenge()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_coin_change()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Determine the minimum number of ways to make n cents, given coins of denominations less than n cents.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Do the coins have to reach exactly n cents?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we have an infinite number of coins to make n cents?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we need to report the combination(s) of coins that represent the minimum?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the coin denominations are given in sorted order?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">coins: None or n: None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">coins: [] or n: 0 -&gt; 0</span></li> <li class=""li2""><span class=""s1"">coins: [1, 2, 3] or [3, 2, 1], n: 5 -&gt; 2</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We'll use top down dynamic programming with memoization.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Base case: If the total is 0, return 0</span></li> <li class=""li2""><span class=""s1"">If the total is already in the memo, return it</span></li> <li class=""li2""><span class=""s1"">For each coin denomination:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If this coin &gt; total, continue</span></li> <li class=""li2""><span class=""s1"">Recurse, decreasing total by the coin denomination, keeping track of the min return</span></li> </ul> <li class=""li2""><span class=""s1"">Set memo[total] to the min value + 1</span></li> <li class=""li2""><span class=""s1"">Return the memo[total]</span></li> </ul> <p class=""p4""><span class=""s1"">total: 5</span></p> <p class=""p4""><span class=""s1"">coins: [1,2,3]</span></p> <p class=""p4""><span class=""s1"">memo key: total value: min ways</span></p> <p class=""p4""><span class=""s1"">memo = {</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 1: 1,</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 2: 1,</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 3: 1,</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 4: 2,</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 5: 2</span></p> <p class=""p4""><span class=""s1"">}</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1, 2, 3</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1, 2, 3</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1,&nbsp; &nbsp; 2,&nbsp; &nbsp; 3</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; &nbsp; \ &nbsp; &nbsp; \____</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; &nbsp; 0</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 1, 2, 3 &nbsp; 1, 2, 3</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; |</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; 0</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 1, 2, 3</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; /</span></p> <p class=""p4""><span class=""s1"">&nbsp; 0</span></p><p class=""p4""><span class=""s1""><br /></span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(t * n), where t is the total and n is the number of coin denominations</span></li> <li class=""li2""><span class=""s1"">Space: O(t) for the recursion depth</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>import</b></span><span class=""s3""> sys</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4""><b>class</b></span><span class=""s3""> </span><span class=""s1"">CoinChanger</span><span class=""s3"">(</span><span class=""s4"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s5"">make_change</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, coins, total):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> coins </span><span class=""s4""><b>is</b></span><span class=""s1""> </span><span class=""s4""><b>None</b></span><span class=""s1""> </span><span class=""s4""><b>or</b></span><span class=""s1""> total </span><span class=""s4""><b>is</b></span><span class=""s1""> </span><span class=""s4""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'coins or total cannot be None'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> </span><span class=""s4""><b>not</b></span><span class=""s1""> coins </span><span class=""s4""><b>or</b></span><span class=""s1""> total </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cache = {}</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._make_change(coins, total, cache)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s5"">_make_change</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, coins, total, cache):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> total </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> total </span><span class=""s4""><b>in</b></span><span class=""s1""> cache:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> cache[total]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; min_ways = sys.maxsize</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>for</b></span><span class=""s1""> coin </span><span class=""s4""><b>in</b></span><span class=""s1""> coins:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> total </span><span class=""s7""><b>-</b></span><span class=""s1""> coin </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>continue</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ways = </span><span class=""s6"">self</span><span class=""s1"">._make_change(coins, total&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s1"">coin, cache)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> ways </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> min_ways:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_ways = ways</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cache[total] = min_ways </span><span class=""s7""><b>+</b></span><span class=""s1""> </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> cache[total]</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_coin_change_min.py</span></p> <p class=""p7""><span class=""s4""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s4""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestCoinChange</span><span class=""s3"">(</span><span class=""s4"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_coin_change</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; coin_changer = CoinChanger()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, coin_changer.make_change, </span><span class=""s4""><b>None</b></span><span class=""s1"">, </span><span class=""s4""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(coin_changer.make_change([], </span><span class=""s8"">0</span><span class=""s1"">), </span><span class=""s8"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(coin_changer.make_change([</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">], </span><span class=""s8"">5</span><span class=""s1"">), </span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(coin_changer.make_change([</span><span class=""s8"">3</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">], </span><span class=""s8"">5</span><span class=""s1"">), </span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(coin_changer.make_change([</span><span class=""s8"">3</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">], </span><span class=""s8"">8</span><span class=""s1"">), </span><span class=""s8"">3</span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_coin_change'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestCoinChange()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_coin_change()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement fibonacci recursively, dynamically, and iteratively.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Does the sequence start at 0 or 1?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">0</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid non-negative ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are you looking for a recursive or iterative solution?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Either</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">n = 0 -&gt; 0</span></li> <li class=""li2""><span class=""s1"">n = 1 -&gt; 1</span></li> <li class=""li2""><span class=""s1"">n = 6 -&gt; 8</span></li> <li class=""li2""><span class=""s1"">Fib sequence: 0, 1, 1, 2, 3, 5, 8, 13, 21, 34...</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">Recursive:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Fibonacci is as follows: 0, 1, 1, 2, 3, 5, 8, 13, 21, 34...</span></li> <li class=""li2""><span class=""s1"">If n = 0 or 1, return n</span></li> <li class=""li2""><span class=""s1"">Else return fib(n-1) + fib(n+2)</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(2^n) if recursive or iterative, O(n) if dynamic</span></li> <li class=""li2""><span class=""s1"">Space: O(n) if recursive, O(1) if iterative, O(n) if dynamic</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Math</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">fib_iterative</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">, n):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; a = </span><span class=""s7"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; b = </span><span class=""s7"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> _ </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(n):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; a, b = b, a </span><span class=""s8""><b>+</b></span><span class=""s1""> b</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> a</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">fib_recursive</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">, n):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> n </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> n </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">1</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> n</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.fib_recursive(n</span><span class=""s8""><b>-</b></span><span class=""s7"">1</span><span class=""s1"">) </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.fib_recursive(n</span><span class=""s8""><b>-</b></span><span class=""s7"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">fib_dynamic</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, n):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cache = {}</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._fib_dynamic(n, cache)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">_fib_dynamic</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, n, cache):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> n </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> n </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">1</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> n</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> n </span><span class=""s5""><b>in</b></span><span class=""s1""> cache:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> cache[n]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cache[n] = </span><span class=""s6"">self</span><span class=""s1"">._fib_dynamic(n</span><span class=""s8""><b>-</b></span><span class=""s7"">1</span><span class=""s1"">, cache) </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._fib_dynamic(n</span><span class=""s8""><b>-</b></span><span class=""s7"">2</span><span class=""s1"">, cache)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> cache[n]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_fibonacci.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">TestFib</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">test_fib</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, func):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = []</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s7"">0</span><span class=""s1"">, </span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s7"">2</span><span class=""s1"">, </span><span class=""s7"">3</span><span class=""s1"">, </span><span class=""s7"">5</span><span class=""s1"">, </span><span class=""s7"">8</span><span class=""s1"">, </span><span class=""s7"">13</span><span class=""s1"">, </span><span class=""s7"">21</span><span class=""s1"">, </span><span class=""s7"">34</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> i </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s5"">len</span><span class=""s1"">(expected)):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.append(func(i))</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result, expected)</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_fib'</span><span class=""s3"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestFib()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; math = Math()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_fib(math.fib_recursive)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_fib(math.fib_dynamic)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_fib(math.fib_iterative)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement an algorithm to have a robot move from the upper left corner to the bottom right corner of a grid.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Are there restrictions to how the robot moves?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">The robot can only move right and down</span></li> </ul> <li class=""li2""><span class=""s1"">Are some cells invalid (off limits)?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the starting and ending cells are valid cells?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is this a rectangular grid? i.e. the grid is not jagged?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Will there always be a valid way for the robot to get to the bottom right?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No, return None</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">o = valid cell</span></p> <p class=""p4""><span class=""s1"">x = invalid cell</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; 0&nbsp; 1&nbsp; 2&nbsp; 3</span></p> <p class=""p4""><span class=""s1"">0&nbsp; o&nbsp; o&nbsp; o&nbsp; o</span></p> <p class=""p4""><span class=""s1"">1&nbsp; o&nbsp; x&nbsp; o&nbsp; o</span></p> <p class=""p4""><span class=""s1"">2&nbsp; o&nbsp; o&nbsp; x&nbsp; o</span></p> <p class=""p4""><span class=""s1"">3&nbsp; x&nbsp; o&nbsp; o&nbsp; o</span></p> <p class=""p4""><span class=""s1"">4&nbsp; o&nbsp; o&nbsp; x&nbsp; o</span></p> <p class=""p4""><span class=""s1"">5&nbsp; o&nbsp; o&nbsp; o&nbsp; x</span></p> <p class=""p4""><span class=""s1"">6&nbsp; o&nbsp; x&nbsp; o&nbsp; x</span></p> <p class=""p4""><span class=""s1"">7&nbsp; o&nbsp; x&nbsp; o&nbsp; o</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">General case</span></li> </ul> <p class=""p4""><span class=""s1"">expected = [(0, 0), (1, 0), (2, 0),</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (2, 1), (3, 1), (4, 1),</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (5, 1), (5, 2), (6, 2),&nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (7, 2), (7, 3)]</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">No valid path, say row 7, col 2 is invalid</span></li> <li class=""li2""><span class=""s1"">None input</span></li> <li class=""li2""><span class=""s1"">Empty matrix</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">To get to row r and column c [r, c], we will need to have gone:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Right from [r, c-1] if this is a valid cell - [Path 1]</span></li> <li class=""li2""><span class=""s1"">Down from [r-1, c] if this is a valid cell - [Path 2]</span></li> </ul> <p class=""p2""><span class=""s1"">If we look at [Path 1], to get to [r, c-1], we will need to have gone:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Right from [r, c-2] if this is a valid cell</span></li> <li class=""li2""><span class=""s1"">Down from [r-1, c-1] if this is a valid cell</span></li> </ul> <p class=""p2""><span class=""s1"">Continue this process until we reach the start cell or until we find that there is no path.</span></p> <p class=""p2""><span class=""s1"">Base case:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If the input row or col are &lt; 0, or if [row, col] is not a valid cell</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return False</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Recursive case:</span></p> <p class=""p2""><span class=""s1"">We'll memoize the solution to improve performance.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Use the memo to see if we've already processed the current cell</span></li> <li class=""li2""><span class=""s1"">If any of the following is True, append the current cell to the path and set our result to True:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">We are at the start cell</span></li> <li class=""li2""><span class=""s1"">We get a True result from a recursive call on:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">[row, col-1]</span></li> <li class=""li2""><span class=""s1"">[row-1, col]</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Update the memo</span></li> <li class=""li2""><span class=""s1"">Return the result</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(row * col)</span></li> <li class=""li2""><span class=""s1"">Space: O(row * col) for the recursion depth</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Grid</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">find_path</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, matrix):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> matrix </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> matrix:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cache = {}</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; path = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._find_path(matrix, </span><span class=""s5"">len</span><span class=""s1"">(matrix)&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">,&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">len</span><span class=""s1"">(matrix[</span><span class=""s8"">0</span><span class=""s1"">])&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">, cache, path):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> path</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">_find_path</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, matrix, row, col, cache, path):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> row </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> col </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> matrix[row][col]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>False</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cell = (row, col)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> cell </span><span class=""s5""><b>in</b></span><span class=""s1""> cache:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> cache[cell]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cache[cell] = (row </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1""> </span><span class=""s5""><b>and</b></span><span class=""s1""> col </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">._find_path(matrix, row, col&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">, cache, path) </span><span class=""s5""><b>or</b></span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">._find_path(matrix, row&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">, col, cache, path))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> cache[cell]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; path.append(cell)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> cache[cell]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_grid_path.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestGridPath</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_grid_path</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; grid = Grid()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(grid.find_path(</span><span class=""s5""><b>None</b></span><span class=""s1"">), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(grid.find_path([[]]), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_rows = </span><span class=""s8"">8</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_cols = </span><span class=""s8"">4</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix = [[</span><span class=""s8"">1</span><span class=""s1"">] </span><span class=""s7""><b>*</b></span><span class=""s1""> max_cols </span><span class=""s5""><b>for</b></span><span class=""s1""> _ </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(max_rows)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix[</span><span class=""s8"">1</span><span class=""s1"">][</span><span class=""s8"">1</span><span class=""s1"">] = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix[</span><span class=""s8"">2</span><span class=""s1"">][</span><span class=""s8"">2</span><span class=""s1"">] = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix[</span><span class=""s8"">3</span><span class=""s1"">][</span><span class=""s8"">0</span><span class=""s1"">] = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix[</span><span class=""s8"">4</span><span class=""s1"">][</span><span class=""s8"">2</span><span class=""s1"">] = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix[</span><span class=""s8"">5</span><span class=""s1"">][</span><span class=""s8"">3</span><span class=""s1"">] = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix[</span><span class=""s8"">6</span><span class=""s1"">][</span><span class=""s8"">1</span><span class=""s1"">] = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix[</span><span class=""s8"">6</span><span class=""s1"">][</span><span class=""s8"">3</span><span class=""s1"">] = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix[</span><span class=""s8"">7</span><span class=""s1"">][</span><span class=""s8"">1</span><span class=""s1"">] = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = grid.find_path(matrix)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [(</span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">), (</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">), (</span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">), (</span><span class=""s8"">3</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">), (</span><span class=""s8"">4</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class=""s8"">5</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">), (</span><span class=""s8"">5</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">), (</span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">),&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class=""s8"">7</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">), (</span><span class=""s8"">7</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result, expected)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix[</span><span class=""s8"">7</span><span class=""s1"">][</span><span class=""s8"">2</span><span class=""s1"">] = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = grid.find_path(matrix)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_grid_path'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestGridPath()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_grid_path()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement the </b><a href=""http://en.wikipedia.org/wiki/Tower_of_Hanoi""><span class=""s2""><b>Towers of Hanoi</b></span></a><b> with 3 towers and N disks.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume we already have a stack class that can be used for this problem?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None tower(s) -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">0 disks -&gt; None</span></li> <li class=""li2""><span class=""s1"">1 disk</span></li> <li class=""li2""><span class=""s1"">2 or more disks</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Create three stacks to represent each tower</span></li> <li class=""li2""><span class=""s1"">def hanoi(n, src, dest, buffer):</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If 0 disks return</span></li> <li class=""li2""><span class=""s1"">hanoi(n-1, src, buffer, dest)</span></li> <li class=""li2""><span class=""s1"">Move remaining element from src to dest</span></li> <li class=""li2""><span class=""s1"">hanoi(n-1, buffer, dest, src)</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(2^n)</span></li> <li class=""li2""><span class=""s1"">Space: O(m) where m is the number of recursion levels</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">Hanoi</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">move_disks</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, num_disks, src, dest, buff):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> src </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1""> </span><span class=""s7""><b>or</b></span><span class=""s1""> dest </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1""> </span><span class=""s7""><b>or</b></span><span class=""s1""> buff </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s5""> TypeError(</span><span class=""s1"">'Cannot have a None input'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">._move_disks(num_disks, src, dest, buff)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">_move_disks</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, num_disks, src, dest, buff):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> num_disks </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.move_disks(num_disks </span><span class=""s3""><b>-&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">, src, buff, dest)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; dest.push(src.pop())</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.move_disks(num_disks&nbsp;</span><span class=""s3""><b>-&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">, buff, dest, src)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_hanoi.py</span></p> <p class=""p6""><span class=""s7""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s7""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">TestHanoi</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s5""> </span><span class=""s1"">test_hanoi</span><span class=""s5"">(</span><span class=""s8"">self</span><span class=""s5"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hanoi = Hanoi()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_disks = </span><span class=""s9"">3</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; src = Stack()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; buff = Stack()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; dest = Stack()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">'Test: None towers'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, hanoi.move_disks, num_disks, </span><span class=""s7""><b>None</b></span><span class=""s1"">, </span><span class=""s7""><b>None</b></span><span class=""s1"">, </span><span class=""s7""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">'Test: 0 disks'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hanoi.move_disks(num_disks, src, dest, buff)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(dest.pop(), </span><span class=""s7""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">'Test: 1 disk'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; src.push(</span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hanoi.move_disks(num_disks, src, dest, buff)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(dest.pop(), </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">'Test: 2 or more disks'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> disk_index </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s7"">range</span><span class=""s1"">(num_disks, </span><span class=""s3""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s3""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; src.push(disk_index)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; hanoi.move_disks(num_disks, src, dest, buff)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> disk_index </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s7"">range</span><span class=""s1"">(</span><span class=""s9"">0</span><span class=""s1"">, num_disks):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert_equal(dest.pop(), disk_index)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">'Success: test_hanoi'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestHanoi()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_hanoi()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s7""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the longest increasing subsequence.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s6 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Are duplicates possible?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are integers?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Do we expect the result to be an array of the longest increasing subsequence?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">[] -&gt; []</span></li> <li class=""li2""><span class=""s1"">[3, 4, -1, 0, 6, 2, 3] -&gt; [-1, 0, 2, 3]</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">We'll use bottom up dynamic programming to build a table.</span></p> <p class=""p4""><span class=""s1"">Init a temp array of size len(input) to 1. &nbsp;</span></p> <p class=""p4""><span class=""s1"">We'll use l and r to iterate through the input.</span></p> <p class=""p4""><span class=""s1"">Array prev will hold the index of the prior smaller value, used to reconstruct the final sequence.</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">if input[l] &lt; input[r]:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; if temp[r] &lt; temp[l] + 1:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; temp[r] = temp[l] + 1</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; prev[r] = l</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; l&nbsp; r</span></p> <p class=""p4""><span class=""s1"">index:&nbsp; 0&nbsp; 1&nbsp; 2&nbsp; 3&nbsp; 4&nbsp; 5&nbsp; 6</span></p> <p class=""p4""><span class=""s1"">---------------------------</span></p> <p class=""p4""><span class=""s1"">input:&nbsp; 3&nbsp; 4 -1&nbsp; 0&nbsp; 6&nbsp; 2&nbsp; 3</span></p> <p class=""p4""><span class=""s1"">temp: &nbsp; 1&nbsp; 2&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1</span></p> <p class=""p4""><span class=""s1"">prev: &nbsp; x&nbsp; x&nbsp; x&nbsp; x&nbsp; x&nbsp; x&nbsp; x</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">End result:</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">index:&nbsp; 0&nbsp; 1&nbsp; 2&nbsp; 3&nbsp; 4&nbsp; 5&nbsp; 6</span></p> <p class=""p4""><span class=""s1"">---------------------------</span></p> <p class=""p4""><span class=""s1"">input:&nbsp; 3&nbsp; 4 -1&nbsp; 0&nbsp; 6&nbsp; 2&nbsp; 3</span></p> <p class=""p4""><span class=""s1"">temp: &nbsp; 1&nbsp; 2&nbsp; 1&nbsp; 2&nbsp; 3&nbsp; 3&nbsp; 4</span></p> <p class=""p4""><span class=""s1"">prev: &nbsp; x&nbsp; 0&nbsp; x&nbsp; 2&nbsp; 1&nbsp; 3&nbsp; 5</span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n^2)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">Subsequence</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">longest_inc_subseq</span><span class=""s4"">(</span><span class=""s5"">self</span><span class=""s4"">, seq):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> seq </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s6"">'seq cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> seq:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; temp = [</span><span class=""s7"">1</span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(seq)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; prev = [</span><span class=""s3""><b>None</b></span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(seq)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> r </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(</span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s3"">len</span><span class=""s1"">(seq)):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> l </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(r):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> seq[l] </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> seq[r]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> temp[r] </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> temp[l] </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s7"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; temp[r] = temp[l] </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prev[r] = l</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_val = </span><span class=""s7"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_index = </span><span class=""s8""><b>-</b></span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> index, value </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">enumerate</span><span class=""s1"">(temp):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> value </span><span class=""s8""><b>&gt;</b></span><span class=""s1""> max_val:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_val = value</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_index = index</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_index = max_index</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>while</b></span><span class=""s1""> curr_index </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(seq[curr_index])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_index = prev[curr_index]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> results[::</span><span class=""s8""><b>-</b></span><span class=""s7"">1</span><span class=""s1"">]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_longest_increasing_subseq.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestLongestIncreasingSubseq</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_longest_increasing_subseq</span><span class=""s4"">(</span><span class=""s5"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; subseq = Subsequence()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, subseq.longest_inc_subseq, </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(subseq.longest_inc_subseq([]), [])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; seq = [</span><span class=""s7"">3</span><span class=""s1"">, </span><span class=""s7"">4</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s7"">0</span><span class=""s1"">, </span><span class=""s7"">6</span><span class=""s1"">, </span><span class=""s7"">2</span><span class=""s1"">, </span><span class=""s7"">3</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s8""><b>-</b></span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s7"">0</span><span class=""s1"">, </span><span class=""s7"">2</span><span class=""s1"">, </span><span class=""s7"">3</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(subseq.longest_inc_subseq(seq), expected)</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_longest_increasing_subseq'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s9"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestLongestIncreasingSubseq()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_longest_increasing_subseq()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s6"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Given two strings, find the longest common substring.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s6 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the strings are ASCII?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is this case sensitive?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is a substring a contiguous block of chars?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we expect a string as a result?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">str0 or str1 is None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">str0 or str1 equals 0 -&gt; ''</span></li> <li class=""li2""><span class=""s1"">General case</span></li> </ul> <p class=""p2""><span class=""s1"">str0 = 'ABCDEFGHIJ' str1 = 'FOOBCDBCDE'</span></p> <p class=""p2""><span class=""s1"">result: 'BCDE'</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We'll use bottom up dynamic programming to build a table.</span></p> <p class=""p4""><span class=""s1"">The rows (i) represent str0.</span></p> <p class=""p4""><span class=""s1"">The columns (j) represent str1.</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str1</span></p> <p class=""p4""><span class=""s1"">&nbsp; -------------------------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; | &nbsp; | &nbsp; | A | B | C | D | E | F | G | H | I | J |</span></p> <p class=""p4""><span class=""s1"">&nbsp; -------------------------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; | &nbsp; | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; | F | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 1 | 1 | 1 | 1 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; | O | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 1 | 1 | 1 | 1 |</span></p> <p class=""p4""><span class=""s1"">s | O | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 1 | 1 | 1 | 1 |</span></p> <p class=""p4""><span class=""s1"">t | B | 0 | 0 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |</span></p> <p class=""p4""><span class=""s1"">r | C | 0 | 0 | 1 | 2 | 2 | 2 | 2 | 2 | 2 | 2 | 2 |</span></p> <p class=""p4""><span class=""s1"">0 | D | 0 | 0 | 1 | 2 | 3 | 3 | 3 | 3 | 3 | 3 | 3 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; | B | 0 | 0 | 1 | 2 | 3 | 3 | 3 | 3 | 3 | 3 | 3 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; | C | 0 | 0 | 1 | 2 | 3 | 3 | 3 | 3 | 3 | 3 | 3 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; | D | 0 | 0 | 1 | 2 | 3 | 3 | 3 | 3 | 3 | 3 | 3 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; | E | 0 | 0 | 1 | 2 | 3 | 4 | 4 | 4 | 4 | 4 | 4 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; -------------------------------------------------</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">if str1[j] != str0[i]:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; T[i][j] = max(</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; T[i][j - 1],</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; T[i - 1][j])</span></p> <p class=""p4""><span class=""s1"">else:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; T[i][j] = T[i - 1][j - 1] + 1</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(m * n), where m is the length of str0 and n is the length of str1</span></li> <li class=""li2""><span class=""s1"">Space: O(m * n), where m is the length of str0 and n is the length of str1</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">StringCompare</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">longest_common_substr</span><span class=""s4"">(</span><span class=""s5"">self</span><span class=""s4"">, str0, str1):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> str0 </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> str1 </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s4""> TypeError(</span><span class=""s1"">'str input cannot be None'</span><span class=""s4"">)</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Add one to number of rows and cols for the dp table's</i></span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># first row of 0's and first col of 0's</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_rows = </span><span class=""s3"">len</span><span class=""s1"">(str0) </span><span class=""s6""><b>+</b></span><span class=""s1""> </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_cols = </span><span class=""s3"">len</span><span class=""s1"">(str1) </span><span class=""s6""><b>+</b></span><span class=""s1""> </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; T = [[</span><span class=""s3""><b>None</b></span><span class=""s1"">] </span><span class=""s6""><b>*</b></span><span class=""s1""> num_cols </span><span class=""s3""><b>for</b></span><span class=""s1""> _ </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_rows)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> i </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_rows):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> j </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_cols):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> i </span><span class=""s6""><b>==</b></span><span class=""s1""> </span><span class=""s7"">0</span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> j </span><span class=""s6""><b>==</b></span><span class=""s1""> </span><span class=""s7"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = </span><span class=""s7"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>elif</b></span><span class=""s1""> str0[j&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">] </span><span class=""s6""><b>!=</b></span><span class=""s1""> str1[i&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = </span><span class=""s3"">max</span><span class=""s1"">(T[i][j&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">],</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">][j])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = T[i&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">][j&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">] </span><span class=""s6""><b>+</b></span><span class=""s1""> </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results = </span><span class=""s8"">''</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; i = num_rows </span><span class=""s6""><b>-</b></span><span class=""s1""> </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; j = num_cols </span><span class=""s6""><b>-</b></span><span class=""s1""> </span><span class=""s7"">1</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Walk backwards to determine the substring</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>while</b></span><span class=""s1""> T[i][j]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> T[i][j] </span><span class=""s6""><b>==</b></span><span class=""s1""> T[i][j&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j -= </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>elif</b></span><span class=""s1""> T[i][j] </span><span class=""s6""><b>==</b></span><span class=""s1""> T[i&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">][j]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i -= </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>elif</b></span><span class=""s1""> T[i][j] </span><span class=""s6""><b>==</b></span><span class=""s1""> T[i&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">][j&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">] </span><span class=""s6""><b>+</b></span><span class=""s1""> </span><span class=""s7"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results += str1[i&nbsp;</span><span class=""s6""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i -= </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j -= </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s1""> Exception(</span><span class=""s8"">'Error constructing table'</span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Walking backwards results in a string in reverse order</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> results[::</span><span class=""s6""><b>-</b></span><span class=""s7"">1</span><span class=""s1"">] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s6""><b>%%</b></span><span class=""s1"">writefile test_longest_common_substr.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestLongestCommonSubstr</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_longest_common_substr</span><span class=""s4"">(</span><span class=""s5"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; str_comp = StringCompare()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, str_comp.longest_common_substr, </span><span class=""s3""><b>None</b></span><span class=""s1"">, </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(str_comp.longest_common_substr(</span><span class=""s8"">''</span><span class=""s1"">, </span><span class=""s8"">''</span><span class=""s1"">), </span><span class=""s8"">''</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; str0 = </span><span class=""s8"">'ABCDEFGHIJ'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; str1 = </span><span class=""s8"">'FOOBCDBCDE'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s8"">'BCDE'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(str_comp.longest_common_substr(str0, str1), expected)</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_longest_common_substr'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s9"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestLongestCommonSubstr()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_longest_common_substr()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s6""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the magic index in an array, where array[i] = i.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the array sorted?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are the elements in the array distinct?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Does a magic index always exist?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">If there is no magic index, do we just return -1?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are negative values allowed in the array?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If there are multiple magic values, what do we return?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return the left-most one</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None input -&gt; -1</span></li> <li class=""li2""><span class=""s1"">Empty array -&gt; -1</span></li> </ul> <p class=""p4""><span class=""s1"">a[i]&nbsp; -4 -2&nbsp; 2&nbsp; 6&nbsp; 6&nbsp; 6&nbsp; 6 10</span></p> <p class=""p4""><span class=""s1"">&nbsp; i&nbsp; &nbsp; 0&nbsp; 1&nbsp; 2&nbsp; 3&nbsp; 4&nbsp; 5&nbsp; 6&nbsp; 7</span></p> <p class=""p2""><span class=""s1"">Result: 2</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">a[i]&nbsp; -4 -2&nbsp; 1&nbsp; 6&nbsp; 6&nbsp; 6&nbsp; 6 10</span></p> <p class=""p4""><span class=""s1"">&nbsp; i&nbsp; &nbsp; 0&nbsp; 1&nbsp; 2&nbsp; 3&nbsp; 4&nbsp; 5&nbsp; 6&nbsp; 7</span></p> <p class=""p2""><span class=""s1"">Result: 6</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">a[i]&nbsp; -4 -2&nbsp; 1&nbsp; 6&nbsp; 6&nbsp; 6&nbsp; 7 10</span></p> <p class=""p4""><span class=""s1"">&nbsp; i&nbsp; &nbsp; 0&nbsp; 1&nbsp; 2&nbsp; 3&nbsp; 4&nbsp; 5&nbsp; 6&nbsp; 7</span></p> <p class=""p2""><span class=""s1"">Result: -1</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We'll use a binary search to split the search space in half on each iteration. To obtain more efficiency, we can do a little better than a naive left and half split.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">In the example below, we see that i == 5 cannot be the magic index, otherwise a[5] would have to equal 5 (note a[4] == 6).</span></p> <p class=""p4""><span class=""s1""><br /></span></p><p class=""p4""><span class=""s1"">a[i]&nbsp; -4 -2&nbsp; 2&nbsp; 6&nbsp; 6&nbsp; 6&nbsp; 6 10</span></p> <p class=""p4""><span class=""s1"">&nbsp; i&nbsp; &nbsp; 0&nbsp; 1&nbsp; 1&nbsp; 3&nbsp; 4&nbsp; 5&nbsp; 6&nbsp; 7</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mid</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Similarly, in the example below we can further trim the left search space.</span></p> <p class=""p4""><span class=""s1"">a[i]&nbsp; -4 -2&nbsp; 2&nbsp; 2&nbsp; 2&nbsp; 6&nbsp; 6 10</span></p> <p class=""p4""><span class=""s1"">&nbsp; i&nbsp; &nbsp; 0&nbsp; 1&nbsp; 2&nbsp; 3&nbsp; 4&nbsp; 5&nbsp; 6&nbsp; 7</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mid</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Calculate mid</span></li> <li class=""li2""><span class=""s1"">If mid == array[mid], return mid</span></li> <li class=""li2""><span class=""s1"">Recurse on the left side of the array</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">start: 0</span></li> <li class=""li2""><span class=""s1"">end: min(mid-1, array[mid]</span></li> </ul> <li class=""li2""><span class=""s1"">Recurse on the right side of the array</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">start: max(mid+1, array[mid]</span></li> <li class=""li2""><span class=""s1"">end: end</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(log(n))</span></li> <li class=""li2""><span class=""s1"">Space: O(log(n))</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> __future__ </span><span class=""s3""><b>import</b></span><span class=""s1""> division</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">MagicIndex</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">find_magic_index</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">, array):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> array </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> array:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._find_magic_index(array, </span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s3"">len</span><span class=""s1"">(array)&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">_find_magic_index</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, array, start, end):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> end </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> start </span><span class=""s3""><b>or</b></span><span class=""s1""> start </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> end </span><span class=""s7""><b>&gt;=</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(array):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mid = (start&nbsp;</span><span class=""s7""><b>+&nbsp;</b></span><span class=""s1"">end) </span><span class=""s7""><b>//</b></span><span class=""s1""> </span><span class=""s8"">2</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> mid </span><span class=""s7""><b>==</b></span><span class=""s1""> array[mid]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> mid</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left_end = </span><span class=""s3"">min</span><span class=""s1"">(mid&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">, array[mid])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left_result = </span><span class=""s6"">self</span><span class=""s1"">._find_magic_index(array, start, end=left_end)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> left_result </span><span class=""s7""><b>!=</b></span><span class=""s1""> </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> left_result</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right_start = </span><span class=""s3"">max</span><span class=""s1"">(mid&nbsp;</span><span class=""s7""><b>+&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">, array[mid])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right_result = </span><span class=""s6"">self</span><span class=""s1"">._find_magic_index(array, start=right_start, end=end)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> right_result </span><span class=""s7""><b>!=</b></span><span class=""s1""> </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> right_result</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_find_magic_index.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestFindMagicIndex</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_find_magic_index</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; magic_index = MagicIndex()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(magic_index.find_magic_index(</span><span class=""s3""><b>None</b></span><span class=""s1"">), </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(magic_index.find_magic_index([]), </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s7""><b>-</b></span><span class=""s8"">4</span><span class=""s1"">, </span><span class=""s7""><b>-</b></span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">10</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(magic_index.find_magic_index(array), </span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s7""><b>-</b></span><span class=""s8"">4</span><span class=""s1"">, </span><span class=""s7""><b>-</b></span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">10</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(magic_index.find_magic_index(array), </span><span class=""s8"">6</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s7""><b>-</b></span><span class=""s8"">4</span><span class=""s1"">, </span><span class=""s7""><b>-</b></span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">7</span><span class=""s1"">, </span><span class=""s8"">10</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(magic_index.find_magic_index(array), </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_find_magic'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestFindMagicIndex()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_find_magic_index()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Given a list of 2x2 matrices, minimize the cost of matrix multiplication.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Do we just want to calculate the cost and not list the actual order of operations?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">[] -&gt; 0</span></li> <li class=""li2""><span class=""s1"">[Matrix(2, 3), Matrix(3, 6), Matrix(6, 4), Matrix(4, 5)] -&gt; 124</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">We'll use bottom up dynamic programming to build a table.</span></p><p class=""p2""><span class=""s1""><br></span></p> <p class=""p4""><span class=""s1"">&nbsp; 0&nbsp; &nbsp; 1&nbsp; &nbsp; 2&nbsp; &nbsp; 3</span></p> <p class=""p4""><span class=""s1"">[2,3][3,6][6,4][4,5]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Case: 0 * 1</span></p> <p class=""p4""><span class=""s1"">2 * 3 * 6 = 36</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Case: 1 * 2</span></p> <p class=""p4""><span class=""s1"">3 * 6 * 4 = 72</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Case: 2 * 3</span></p> <p class=""p4""><span class=""s1"">6 * 4 * 5 = 120</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Case: 0 * 1 * 2</span></p> <p class=""p4""><span class=""s1"">0 * (1 * 2) = 2 * 3 * 4 + 72 = 96</span></p> <p class=""p4""><span class=""s1"">(0 * 1) * 2 = 36 + 2 * 6 * 4 = 84</span></p> <p class=""p4""><span class=""s1"">min: 84</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Case: 1 * 2 * 3</span></p> <p class=""p4""><span class=""s1"">1 * (2 * 3) = 3 * 6 * 5 + 120 = 210</span></p> <p class=""p4""><span class=""s1"">(1 * 2) * 3 = 72 + 3 * 4 * 5 = 132</span></p> <p class=""p4""><span class=""s1"">min: 132</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Case: 0 * 1 * 2 * 3</span></p> <p class=""p4""><span class=""s1"">0 * (1 * 2 * 3) = 2 * 3 * 5 + 132 = 162</span></p> <p class=""p4""><span class=""s1"">(0 * 1) * (2 * 3) = 36 + 120 + 2 * 6 * 5 = 216</span></p> <p class=""p4""><span class=""s1"">(0 * 1 * 2) * 3 = 84 + 2 * 4 * 5 = 124</span></p> <p class=""p4""><span class=""s1"">min: 124</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">&nbsp; ---------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; | 0 |&nbsp; 1 |&nbsp; 2 | &nbsp; 3 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; ---------------------</span></p> <p class=""p4""><span class=""s1"">0 | 0 | 36 | 84 | 124 |</span></p> <p class=""p4""><span class=""s1"">1 | x |&nbsp; 0 | 72 | 132 |</span></p> <p class=""p4""><span class=""s1"">2 | x |&nbsp; x |&nbsp; 0 | 120 |</span></p> <p class=""p4""><span class=""s1"">3 | x |&nbsp; x |&nbsp; x | &nbsp; 0 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; ---------------------</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">min cost = T[0][cols-1] = 124</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">for k in range(i, j):</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; T[i][j] = minimum of (T[i][k] + T[k+1][j] +</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; m[i].first * m[k].second * m[j].second) for all k</span></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""><b>Explanation of k</b></span></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">&nbsp; 0&nbsp; &nbsp; 1&nbsp; &nbsp; 2&nbsp; &nbsp; 3</span></p> <p class=""p4""><span class=""s1"">[2,3][3,6][6,4][4,5]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Fill in the missing cell, where i = 0, j = 3</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">&nbsp; ---------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; | 0 |&nbsp; 1 |&nbsp; 2 | &nbsp; 3 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; ---------------------</span></p> <p class=""p4""><span class=""s1"">0 | 0 | 36 | 84 | ??? |</span></p> <p class=""p4""><span class=""s1"">1 | x |&nbsp; 0 | 72 | 132 |</span></p> <p class=""p4""><span class=""s1"">2 | x |&nbsp; x |&nbsp; 0 | 120 |</span></p> <p class=""p4""><span class=""s1"">3 | x |&nbsp; x |&nbsp; x | &nbsp; 0 |</span></p> <p class=""p4""><span class=""s1"">&nbsp; ---------------------</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Case: 0 * (1 * 2 * 3), k = 0</span></p> <p class=""p4""><span class=""s1"">i = 0, j = 3</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">0 * (1 * 2 * 3) = 2 * 3 * 5 + 132 = 162</span></p> <p class=""p4""><span class=""s1"">T[i][k] + T[k+1][j] + m[i].first * m[k].second * m[j].second</span></p> <p class=""p4""><span class=""s1"">T[0][0] + T[1][3] + 2 * 3 * 5</span></p> <p class=""p4""><span class=""s1"">0 + 132 + 30 = 162</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Case: (0 * 1) * (2 * 3), k = 1</span></p> <p class=""p4""><span class=""s1"">i = 0, j = 3</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">(0 * 1) * (2 * 3) = 36 + 120 + 2 * 6 * 5 = 216</span></p> <p class=""p4""><span class=""s1"">T[i][k] + T[k+1][j] + m[i].first * m[k].second * m[j].second</span></p> <p class=""p4""><span class=""s1"">T[0][1] + T[2][3] + 2 * 6 * 5</span></p> <p class=""p4""><span class=""s1"">36 + 120 + 60 = 216</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">Case: (0 * 1 * 2) * 3, k = 2</span></p> <p class=""p4""><span class=""s1"">i = 0, j = 3</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">(0 * 1 * 2) * 3 = 84 + 2 * 4 * 5 = 124</span></p> <p class=""p4""><span class=""s1"">T[i][k] + T[k+1][j] + m[i].first * m[k].second * m[j].second</span></p> <p class=""p4""><span class=""s1"">T[0][2] + T[3][3] + 2 * 4 * 5</span></p> <p class=""p4""><span class=""s1"">84 + 0 + 40 = 124</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n^3)</span></li> <li class=""li2""><span class=""s1"">Space: O(n^2)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Matrix</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">__init__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, first, second):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.first = first</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.second = second</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s1""><b>import</b></span><span class=""s3""> sys</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">MatrixMultiplicationCost</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">find_min_cost</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, matrices):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> matrices </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'matrices cannot be None'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> matrices:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s7"">0</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; size = </span><span class=""s5"">len</span><span class=""s1"">(matrices)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; T = [[</span><span class=""s7"">0</span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> size </span><span class=""s5""><b>for</b></span><span class=""s1""> _ </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(size)]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> offset </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s7"">1</span><span class=""s1"">, size):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> i </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(size</span><span class=""s8""><b>-</b></span><span class=""s1"">offset):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j = i </span><span class=""s8""><b>+</b></span><span class=""s1""> offset</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_cost = sys.maxsize</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> k </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(i, j):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cost = (T[i][k] </span><span class=""s8""><b>+</b></span><span class=""s1""> T[k</span><span class=""s8""><b>+</b></span><span class=""s7"">1</span><span class=""s1"">][j] </span><span class=""s8""><b>+</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; matrices[i].first </span><span class=""s8""><b>*</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; matrices[k].second </span><span class=""s8""><b>*</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; matrices[j].second)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> cost </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> min_cost:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_cost = cost</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = min_cost</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> T[</span><span class=""s7"">0</span><span class=""s1"">][size</span><span class=""s8""><b>-</b></span><span class=""s7"">1</span><span class=""s1"">]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_find_min_cost.py</span></p> <p class=""p8""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestMatrixMultiplicationCost</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_find_min_cost</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix_mult_cost = MatrixMultiplicationCost()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, matrix_mult_cost.find_min_cost, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(matrix_mult_cost.find_min_cost([]), </span><span class=""s7"">0</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrices = [Matrix(</span><span class=""s7"">2</span><span class=""s1"">, </span><span class=""s7"">3</span><span class=""s1"">),</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Matrix(</span><span class=""s7"">3</span><span class=""s1"">, </span><span class=""s7"">6</span><span class=""s1"">),</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Matrix(</span><span class=""s7"">6</span><span class=""s1"">, </span><span class=""s7"">4</span><span class=""s1"">),</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Matrix(</span><span class=""s7"">4</span><span class=""s1"">, </span><span class=""s7"">5</span><span class=""s1"">)]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected_cost = </span><span class=""s7"">124</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(matrix_mult_cost.find_min_cost(matrices), expected_cost)</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_find_min_cost'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test = TestMatrixMultiplicationCost()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_find_min_cost()</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Given a list of stock prices on each consecutive day, determine the max profits with k transactions.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is k the number of sell transactions?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the prices input is an array of ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">If the prices are all decreasing and there is no opportunity to make a profit, do we just return 0?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Should the output be the max profit and days to buy and sell?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* Prices: None or k: None -&gt; None</span></p> <p class=""p4""><span class=""s1"">* Prices: [] or k &lt;= 0 -&gt; []</span></p> <p class=""p4""><span class=""s1"">* Prices: [0, -1, -2, -3, -4, -5]</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; * (max profit, list of transactions)</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; * (0, [])</span></p> <p class=""p4""><span class=""s1"">* Prices: [2, 5, 7, 1, 4, 3, 1, 3] k: 3</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; * (max profit, list of transactions)</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; * (10, [Type.SELL day: 7 price: 3,&nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Type.BUY&nbsp; day: 6 price: 1,&nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Type.SELL day: 4 price: 4,&nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Type.BUY&nbsp; day: 3 price: 1,&nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Type.SELL day: 2 price: 7,&nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Type.BUY&nbsp; day: 0 price: 2])</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We'll use bottom up dynamic programming to build a table.</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">The rows (i) represent the prices.</span></p> <p class=""p4""><span class=""s1"">The columns (j) represent the number of transactions (k).</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">T[i][j] = max(T[i][j - 1],</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prices[j] - price[m] + T[i - 1][m])</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">m = 0...j-1</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; 0 &nbsp; 1 &nbsp; 2 &nbsp; 3 &nbsp; 4 &nbsp; 5 &nbsp; 6 &nbsp; 7</span></p> <p class=""p4""><span class=""s1"">--------------------------------------</span></p> <p class=""p4""><span class=""s1"">| &nbsp; | 2 | 5 | 7 | 1 | 4 | 3 | 1 | 3&nbsp; |</span></p> <p class=""p4""><span class=""s1"">--------------------------------------</span></p> <p class=""p4""><span class=""s1"">| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0&nbsp; |</span></p> <p class=""p4""><span class=""s1"">| 1 | 0 | 3 | 5 | 5 | 5 | 5 | 5 | 5&nbsp; |</span></p> <p class=""p4""><span class=""s1"">| 2 | 0 | 3 | 5 | 5 | 8 | 8 | 8 | 8&nbsp; |</span></p> <p class=""p4""><span class=""s1"">| 3 | 0 | 3 | 5 | 5 | 8 | 8 | 8 | 10 |</span></p> <p class=""p4""><span class=""s1"">--------------------------------------</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Optimization:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">max_diff = max(max_diff,</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i - 1][j - 1] - prices[j - 1])</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">T[i][j] = max(T[i][j - 1],</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prices[j] + max_diff)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n * k)</span></li> <li class=""li2""><span class=""s1"">Space: O(n * k)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s3""><b>from</b></span><span class=""s4""> enum </span><span class=""s3""><b>import</b></span><span class=""s4""> Enum&nbsp; </span><span class=""s1""><i># Python 2 users: Run pip install enum34</i></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>class</b></span><span class=""s1""> </span><span class=""s5"">Type</span><span class=""s1"">(Enum):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; SELL = </span><span class=""s6"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; BUY = </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">Transaction</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, </span><span class=""s3"">type</span><span class=""s1"">, day, price):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.</span><span class=""s3"">type</span><span class=""s1""> = </span><span class=""s3"">type</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.day = day</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.price = price</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__eq__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, other):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.</span><span class=""s3"">type</span><span class=""s1""> </span><span class=""s8""><b>==</b></span><span class=""s1""> other.</span><span class=""s3"">type</span><span class=""s1""> </span><span class=""s3""><b>and</b></span><span class=""s1""> </span><span class=""s9"">\</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.day </span><span class=""s8""><b>==</b></span><span class=""s1""> other.day </span><span class=""s3""><b>and</b></span><span class=""s1""> </span><span class=""s9"">\</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">.price </span><span class=""s8""><b>==</b></span><span class=""s1""> other.price</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__repr__</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s3"">str</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">.</span><span class=""s3"">type</span><span class=""s1"">) </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s10"">' day: '</span><span class=""s1""> </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s9"">\</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">str</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">.day) </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s10"">' price: '</span><span class=""s1""> </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s9"">\</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">str</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">.price)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">StockTrader</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">find_max_profit</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, prices, k):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> prices </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> k </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s4""> TypeError(</span><span class=""s1"">'prices or k cannot be None'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> prices </span><span class=""s3""><b>or</b></span><span class=""s1""> k </span><span class=""s8""><b>&lt;=</b></span><span class=""s1""> </span><span class=""s6"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> []</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; num_rows = k </span><span class=""s8""><b>+</b></span><span class=""s4""> </span><span class=""s6"">1</span><span class=""s4"">&nbsp; </span><span class=""s1""><i># 0th transaction for dp table</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_cols = </span><span class=""s3"">len</span><span class=""s1"">(prices)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; T = [[</span><span class=""s3""><b>None</b></span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> num_cols </span><span class=""s3""><b>for</b></span><span class=""s1""> _ </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_rows)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> i </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_rows):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> j </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_cols):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> i </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s6"">0</span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> j </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s6"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = </span><span class=""s6"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>continue</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_profit = </span><span class=""s3""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> m </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(j):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; profit = prices[j] </span><span class=""s8""><b>-</b></span><span class=""s1""> prices[m] </span><span class=""s8""><b>+</b></span><span class=""s1""> T[i&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s6"">1</span><span class=""s1"">][m]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> max_profit </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> profit </span><span class=""s8""><b>&gt;</b></span><span class=""s1""> max_profit:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_profit = profit</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = </span><span class=""s3"">max</span><span class=""s1"">(T[i][j&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s6"">1</span><span class=""s1"">], max_profit)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">._find_max_profit_transactions(T, prices)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">find_max_profit_optimized</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">, prices, k):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> prices </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> k </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s4""> TypeError(</span><span class=""s1"">'prices or k cannot be None'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> prices </span><span class=""s3""><b>or</b></span><span class=""s1""> k </span><span class=""s8""><b>&lt;=</b></span><span class=""s1""> </span><span class=""s6"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_rows = k </span><span class=""s8""><b>+</b></span><span class=""s1""> </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_cols = </span><span class=""s3"">len</span><span class=""s1"">(prices)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; T = [[</span><span class=""s3""><b>None</b></span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> num_cols </span><span class=""s3""><b>for</b></span><span class=""s1""> _ </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_rows)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> i </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_rows):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_diff = prices[</span><span class=""s6"">0</span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> </span><span class=""s8""><b>-</b></span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> j </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(num_cols):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> i </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s6"">0</span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> j </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s6"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = </span><span class=""s6"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>continue</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_diff = </span><span class=""s3"">max</span><span class=""s1"">(</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_diff,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s6"">1</span><span class=""s1"">][j&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s6"">1</span><span class=""s1"">]&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s1"">prices[j&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s6"">1</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = </span><span class=""s3"">max</span><span class=""s1"">(</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s6"">1</span><span class=""s1"">],</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prices[j]&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s1"">max_diff)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">._find_max_profit_transactions(T, prices)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">_find_max_profit_transactions</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">, T, prices):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; i = </span><span class=""s3"">len</span><span class=""s1"">(T) </span><span class=""s8""><b>-</b></span><span class=""s1""> </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; j = </span><span class=""s3"">len</span><span class=""s1"">(T[</span><span class=""s6"">0</span><span class=""s1"">]) </span><span class=""s8""><b>-</b></span><span class=""s1""> </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_profit = T[i][j]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>while</b></span><span class=""s1""> i </span><span class=""s8""><b>!=</b></span><span class=""s1""> </span><span class=""s6"">0</span><span class=""s1""> </span><span class=""s3""><b>and</b></span><span class=""s1""> j </span><span class=""s8""><b>!=</b></span><span class=""s1""> </span><span class=""s6"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> T[i][j] </span><span class=""s8""><b>==</b></span><span class=""s1""> T[i][j&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s6"">1</span><span class=""s1"">]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j -= </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sell_price = prices[j]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(Transaction(Type.SELL, j, sell_price))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; profit = T[i][j] </span><span class=""s8""><b>-</b></span><span class=""s1""> T[i&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s6"">1</span><span class=""s1"">][j&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s6"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i -= </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j -= </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> m </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(j&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s6"">1</span><span class=""s1"">)[::</span><span class=""s8""><b>-</b></span><span class=""s6"">1</span><span class=""s1"">]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> sell_price </span><span class=""s8""><b>-</b></span><span class=""s1""> prices[m] </span><span class=""s8""><b>==</b></span><span class=""s1""> profit:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(Transaction(Type.BUY, m, prices[m]))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>break</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> (max_profit, results)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_max_profit.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_raises</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_true</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestMaxProfit</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_max_profit</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; stock_trader = StockTrader()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, stock_trader.find_max_profit, </span><span class=""s3""><b>None</b></span><span class=""s1"">, </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stock_trader.find_max_profit(prices=[], k=</span><span class=""s6"">0</span><span class=""s1"">), [])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; prices = [</span><span class=""s6"">5</span><span class=""s1"">, </span><span class=""s6"">4</span><span class=""s1"">, </span><span class=""s6"">3</span><span class=""s1"">, </span><span class=""s6"">2</span><span class=""s1"">, </span><span class=""s6"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; k = </span><span class=""s6"">3</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(stock_trader.find_max_profit(prices, k), (</span><span class=""s6"">0</span><span class=""s1"">, []))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; prices = [</span><span class=""s6"">2</span><span class=""s1"">, </span><span class=""s6"">5</span><span class=""s1"">, </span><span class=""s6"">7</span><span class=""s1"">, </span><span class=""s6"">1</span><span class=""s1"">, </span><span class=""s6"">4</span><span class=""s1"">, </span><span class=""s6"">3</span><span class=""s1"">, </span><span class=""s6"">1</span><span class=""s1"">, </span><span class=""s6"">3</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; profit, transactions = stock_trader.find_max_profit(prices, k)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(profit, </span><span class=""s6"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(Transaction(Type.SELL,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; day=</span><span class=""s6"">7</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; price=</span><span class=""s6"">3</span><span class=""s1"">) </span><span class=""s3""><b>in</b></span><span class=""s1""> transactions)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(Transaction(Type.BUY,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; day=</span><span class=""s6"">6</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; price=</span><span class=""s6"">1</span><span class=""s1"">) </span><span class=""s3""><b>in</b></span><span class=""s1""> transactions)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(Transaction(Type.SELL,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; day=</span><span class=""s6"">4</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; price=</span><span class=""s6"">4</span><span class=""s1"">) </span><span class=""s3""><b>in</b></span><span class=""s1""> transactions)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(Transaction(Type.BUY,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; day=</span><span class=""s6"">3</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; price=</span><span class=""s6"">1</span><span class=""s1"">) </span><span class=""s3""><b>in</b></span><span class=""s1""> transactions)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(Transaction(Type.SELL,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; day=</span><span class=""s6"">2</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; price=</span><span class=""s6"">7</span><span class=""s1"">) </span><span class=""s3""><b>in</b></span><span class=""s1""> transactions)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(Transaction(Type.BUY,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; day=</span><span class=""s6"">0</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; price=</span><span class=""s6"">2</span><span class=""s1"">) </span><span class=""s3""><b>in</b></span><span class=""s1""> transactions)</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_max_profit'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestMaxProfit()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_max_profit()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find all valid combinations of n-pairs of parentheses.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 26.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font: 14.0px 'Helvetica Neue'} span.s5 {font: 14.0px 'Helvetica Neue'; font-kerning: none} span.s6 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s7 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s8 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s9 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s10 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s11 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s12 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s13 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the input an integer representing the number of pairs?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output a list of valid combinations?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Should the output have duplicates?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p4""><span class=""s1"">* None -&gt; Exception</span></p> <p class=""p4""><span class=""s1"">* Negative -&gt; Exception</span></p> <p class=""p4""><span class=""s1"">* 0 -&gt; []</span></p> <p class=""p4""><span class=""s1"">* 1 -&gt; ['()']</span></p> <p class=""p4""><span class=""s1"">* 2 -&gt; ['(())', '()()']</span></p> <p class=""p4""><span class=""s1"">* 3 -&gt; ['((()))', '(()())', '(())()', '()(())', '()()()']</span></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""><b>Algorithm</b></span></p><p class=""p5""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">Let </span><span class=""s3"">l</span><span class=""s1""> and </span><span class=""s3"">r</span><span class=""s1""> denote the number of left and right parentheses remaining at any given point. The algorithm makes use of the following conditions applied recursively:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Left braces can be inserted any time, as long as we do not exhaust them i.e. </span><span class=""s3"">l &gt; 0</span><span class=""s1"">.</span></li> <li class=""li2""><span class=""s1"">Right braces can be inserted, as long as the number of right braces remaining is greater than the left braces remaining i.e. </span><span class=""s3"">r &gt; l</span><span class=""s1"">. Violation of the aforementioned condition produces an unbalanced string of parentheses.</span></li> <li class=""li2""><span class=""s1"">If both left and right braces have been exhausted i.e. </span><span class=""s3"">l = 0 and r = 0</span><span class=""s1"">, then the resultant string produced is balanced.</span></li> </ul> <p class=""p2""><span class=""s1"">The algorithm can be rephrased as:</span></p> <ul class=""ul1""> <li class=""li4""><span class=""s4""></span><span class=""s5"">Base case: </span><span class=""s1"">l = 0 and r = 0</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Add the string generated to the result set</span></li> </ul> <li class=""li2""><span class=""s1"">Case 1: </span><span class=""s3"">l &gt; 0</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Add a left parenthesis to the parentheses string.</span></li> <li class=""li2""><span class=""s1"">Recurse (l - 1, r, new_string, result_set)</span></li> </ul> <li class=""li2""><span class=""s1"">Case 2: </span><span class=""s3"">r &gt; l</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Add a right parenthesis to the parentheses string.</span></li> <li class=""li2""><span class=""s1"">Recurse (l, r - 1, new_string, result_set)</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: </span><span class=""s3"">O(4^n/n^(3/2))</span><span class=""s1"">, see <a href=""https://en.wikipedia.org/wiki/Catalan_number#Applications_in_combinatorics""><span class=""s6"">Catalan numbers</span></a> - 1, 1, 2, 5, 14, 42, 132...</span></li> <li class=""li2""><span class=""s1"">Space complexity: </span><span class=""s3"">O(n)</span><span class=""s1"">, due to the implicit call stack storing a maximum of 2n function calls)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p7""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1""></span><br></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s7""><b>class</b></span><span class=""s8""> </span><span class=""s1"">Parentheses</span><span class=""s8"">(</span><span class=""s7"">object</span><span class=""s8"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s9"">find_pair</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, num_pairs):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> num_pairs </span><span class=""s7""><b>is</b></span><span class=""s1""> </span><span class=""s7""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p10""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s8""> TypeError(</span><span class=""s1"">'num_pairs cannot be None'</span><span class=""s8"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> num_pairs </span><span class=""s11""><b>&lt;</b></span><span class=""s1""> </span><span class=""s12"">0</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s1""> ValueError(</span><span class=""s13"">'num_pairs cannot be &lt; 0'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> </span><span class=""s7""><b>not</b></span><span class=""s1""> num_pairs:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> []</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results = []</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_results = []</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">._find_pair(num_pairs, num_pairs, curr_results, results)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> results</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s9"">_find_pair</span><span class=""s1"">(</span><span class=""s10"">self</span><span class=""s1"">, nleft, nright, curr_results, results):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> nleft </span><span class=""s11""><b>==</b></span><span class=""s1""> </span><span class=""s12"">0</span><span class=""s1""> </span><span class=""s7""><b>and</b></span><span class=""s1""> nright </span><span class=""s11""><b>==</b></span><span class=""s1""> </span><span class=""s12"">0</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(</span><span class=""s13"">''</span><span class=""s1"">.join(curr_results))</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> nleft </span><span class=""s11""><b>&gt;=</b></span><span class=""s1""> </span><span class=""s12"">0</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">._find_pair(nleft</span><span class=""s11""><b>-</b></span><span class=""s12"">1</span><span class=""s1"">, nright, curr_results</span><span class=""s11""><b>+</b></span><span class=""s1"">[</span><span class=""s13"">'('</span><span class=""s1"">], results)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> nright </span><span class=""s11""><b>&gt;</b></span><span class=""s1""> nleft:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">self</span><span class=""s1"">._find_pair(nleft, nright</span><span class=""s11""><b>-</b></span><span class=""s12"">1</span><span class=""s1"">, curr_results</span><span class=""s11""><b>+</b></span><span class=""s1"">[</span><span class=""s13"">')'</span><span class=""s1"">], results)</span></p> <p class=""p7""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p7""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1""></span><br></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s11""><b>%%</b></span><span class=""s1"">writefile test_n_pairs_parentheses.py</span></p> <p class=""p8""><span class=""s7""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s7""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s7""><b>class</b></span><span class=""s8""> </span><span class=""s1"">TestPairParentheses</span><span class=""s8"">(</span><span class=""s7"">object</span><span class=""s8"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s8"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s8""> </span><span class=""s1"">test_pair_parentheses</span><span class=""s8"">(</span><span class=""s10"">self</span><span class=""s8"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; parentheses = Parentheses()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, parentheses.find_pair, </span><span class=""s7""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(ValueError, parentheses.find_pair, </span><span class=""s11""><b>-</b></span><span class=""s12"">1</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(parentheses.find_pair(</span><span class=""s12"">0</span><span class=""s1"">), [])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(parentheses.find_pair(</span><span class=""s12"">1</span><span class=""s1"">), [</span><span class=""s13"">'()'</span><span class=""s1"">])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(parentheses.find_pair(</span><span class=""s12"">2</span><span class=""s1"">), [</span><span class=""s13"">'(())'</span><span class=""s1"">,</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s13"">'()()'</span><span class=""s1"">])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(parentheses.find_pair(</span><span class=""s12"">3</span><span class=""s1"">), [</span><span class=""s13"">'((()))'</span><span class=""s1"">,</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s13"">'(()())'</span><span class=""s1"">,</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s13"">'(())()'</span><span class=""s1"">,</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s13"">'()(())'</span><span class=""s1"">,</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s13"">'()()()'</span><span class=""s1"">])</span></p> <p class=""p10""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s8"">(</span><span class=""s1"">'Success: test_pair_parentheses'</span><span class=""s8"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s9"">main</span><span class=""s1"">():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test = TestPairParentheses()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_pair_parentheses()</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s7""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s11""><b>==</b></span><span class=""s1""> </span><span class=""s13"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find all permutations of an input string.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s6 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can the input have duplicates?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can the output have duplicates?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output a list of strings?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we have to output the results in sorted order?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* None -&gt; None</span></p> <p class=""p4""><span class=""s1"">* '' -&gt; ''</span></p> <p class=""p4""><span class=""s1"">* 'AABC' -&gt; ['AABC', 'AACB', 'ABAC', 'ABCA',</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'ACAB', 'ACBA', 'BAAC', 'BACA',</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'BCAA', 'CAAB', 'CABA', 'CBAA']</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Build a dictionary of { chars: counts } where counts is the number of times each char is found in the input</span></li> <li class=""li2""><span class=""s1"">Loop through each item in the dictionary</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the counts is 0, continue</span></li> <li class=""li2""><span class=""s1"">Add the current char to the current results</span></li> <li class=""li2""><span class=""s1"">Decrement the current char's count in the dictionary</span></li> <li class=""li2""><span class=""s1"">If the current result is the same length as the input, add it to the results</span></li> <li class=""li2""><span class=""s1"">Else, recurse</span></li> <li class=""li2""><span class=""s1"">Backtrack by:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Incrementing the current char's acount in the dictionary</span></li> <li class=""li2""><span class=""s1"">Removing the just added current char from the current results</span></li> </ul> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n!)</span></li> <li class=""li2""><span class=""s1"">Space: O(n!) since we are storing the results in an array</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> collections </span><span class=""s3""><b>import</b></span><span class=""s1""> OrderedDict</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">Permutations</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">_build_counts_map</span><span class=""s4"">(</span><span class=""s5"">self</span><span class=""s4"">, string):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; counts_map = OrderedDict()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> char </span><span class=""s3""><b>in</b></span><span class=""s1""> string:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> char </span><span class=""s3""><b>in</b></span><span class=""s1""> counts_map:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; counts_map[char] += </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; counts_map[char] = </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> counts_map</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">find_permutations</span><span class=""s4"">(</span><span class=""s5"">self</span><span class=""s4"">, string):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> string </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> string </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">''</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> string</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; counts_map = </span><span class=""s5"">self</span><span class=""s1"">._build_counts_map(string)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_results = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">self</span><span class=""s1"">._find_permutations(counts_map, curr_results, results, </span><span class=""s3"">len</span><span class=""s1"">(string))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> results</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s9"">_find_permutations</span><span class=""s1"">(</span><span class=""s5"">self</span><span class=""s1"">, counts_map, curr_result,</span></p> <p class=""p7""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results, input_length):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> char&nbsp;</span><span class=""s3""><b>in</b></span><span class=""s1""> counts_map:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> counts_map[char] </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s6"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>continue</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_result.append(char)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; counts_map[char] -= </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(curr_result) </span><span class=""s7""><b>==</b></span><span class=""s1""> input_length:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(</span><span class=""s8"">''</span><span class=""s1"">.join(curr_result))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">self</span><span class=""s1"">._find_permutations(counts_map, curr_result,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results, input_length)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; counts_map[char] += </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_result.pop()</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_permutations.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestPermutations</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_permutations</span><span class=""s4"">(</span><span class=""s5"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; permutations = Permutations()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(permutations.find_permutations(</span><span class=""s3""><b>None</b></span><span class=""s1"">), </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(permutations.find_permutations(</span><span class=""s8"">''</span><span class=""s1"">), </span><span class=""s8"">''</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; string = </span><span class=""s8"">'AABC'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1"">'AABC'</span><span class=""s4"">, </span><span class=""s1"">'AACB'</span><span class=""s4"">, </span><span class=""s1"">'ABAC'</span><span class=""s4"">, </span><span class=""s1"">'ABCA'</span><span class=""s4"">,</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1"">'ACAB'</span><span class=""s4"">, </span><span class=""s1"">'ACBA'</span><span class=""s4"">, </span><span class=""s1"">'BAAC'</span><span class=""s4"">, </span><span class=""s1"">'BACA'</span><span class=""s4"">,</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1"">'BCAA'</span><span class=""s4"">, </span><span class=""s1"">'CAAB'</span><span class=""s4"">, </span><span class=""s1"">'CABA'</span><span class=""s4"">, </span><span class=""s1"">'CBAA'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; ]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(permutations.find_permutations(string), expected)</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_permutations'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s9"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestPermutations()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_permutations()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Return all subsets of a set.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s6 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s10 {font-kerning: none; color: #00ff00; -webkit-text-stroke: 0px #00ff00} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Should the resulting subsets be unique?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes, treat 'ab' and 'bc' as the same</span></li> </ul> <li class=""li2""><span class=""s1"">Is the empty set included as a subset?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are the inputs unique?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* None -&gt; None</span></p> <p class=""p4""><span class=""s1"">* '' -&gt; ['']</span></p> <p class=""p4""><span class=""s1"">* 'a' -&gt; ['a', '']</span></p> <p class=""p4""><span class=""s1"">* 'ab' -&gt; ['a', 'ab', 'b', '']</span></p> <p class=""p4""><span class=""s1"">* 'abc' -&gt; ['a', 'ab', 'abc', 'ac',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'b', 'bc', 'c', '']</span></p> <p class=""p4""><span class=""s1"">* 'aabc' -&gt; ['a', 'aa', 'aab', 'aabc',&nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'aac', 'ab', 'abc', 'ac',&nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'b', 'bc', 'c', '']</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Build a dictionary of {chars: counts} where counts is the number of times each char is found in the input</span></li> <li class=""li2""><span class=""s1"">Loop through each item in the dictionary</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Keep track of the current index (first item will have current index 0)</span></li> <li class=""li2""><span class=""s1"">If the char's count is 0, continue</span></li> <li class=""li2""><span class=""s1"">Decrement the current char's count in the dictionary</span></li> <li class=""li2""><span class=""s1"">Add the current char to the current results</span></li> <li class=""li2""><span class=""s1"">Add the current result to the results</span></li> <li class=""li2""><span class=""s1"">Recurse, passing in the current index as the new starting point index</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">When we recurse, we'll check if current index &lt; starting point index, and if so, continue</span></li> <li class=""li2""><span class=""s1"">This avoids duplicate results such as 'ab' and 'bc'</span></li> </ul> <li class=""li2""><span class=""s1"">Backtrack by:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Removing the just added current char from the current results</span></li> <li class=""li2""><span class=""s1"">Incrementing the current char's acount in the dictionary</span></li> </ul> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(2^n)</span></li> <li class=""li2""><span class=""s1"">Space: O(2^n) if we are saving each result, or O(n) if we are just printing each result</span></li> </ul> <p class=""p2""><span class=""s1"">We are doubling the number of operations every time we add an element to the results: O(2^n).</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Note, you could also use the following method to solve this problem:</span></p> <p class=""p4""><span class=""s1""><br /></span></p><p class=""p4""><span class=""s1"">number binary&nbsp; subset</span></p> <p class=""p4""><span class=""s1"">0&nbsp; &nbsp; &nbsp; 000&nbsp; &nbsp; &nbsp; {}</span></p> <p class=""p4""><span class=""s1"">1&nbsp; &nbsp; &nbsp; 001&nbsp; &nbsp; &nbsp; {c}</span></p> <p class=""p4""><span class=""s1"">2&nbsp; &nbsp; &nbsp; 010&nbsp; &nbsp; &nbsp; {b}</span></p> <p class=""p4""><span class=""s1"">3&nbsp; &nbsp; &nbsp; 011&nbsp; &nbsp; &nbsp; {b,c}</span></p> <p class=""p4""><span class=""s1"">4&nbsp; &nbsp; &nbsp; 100&nbsp; &nbsp; &nbsp; {a}</span></p> <p class=""p4""><span class=""s1"">5&nbsp; &nbsp; &nbsp; 101&nbsp; &nbsp; &nbsp; {a,c}</span></p> <p class=""p4""><span class=""s1"">6&nbsp; &nbsp; &nbsp; 110&nbsp; &nbsp; &nbsp; {a,b}</span></p> <p class=""p4""><span class=""s1"">7&nbsp; &nbsp; &nbsp; 111&nbsp; &nbsp; &nbsp; {a,b,c}</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> collections </span><span class=""s3""><b>import</b></span><span class=""s1""> OrderedDict</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">Combinatoric</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">_build_counts_map</span><span class=""s4"">(</span><span class=""s5"">self</span><span class=""s4"">, string):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; counts_map = OrderedDict()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> char </span><span class=""s3""><b>in</b></span><span class=""s1""> string:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> char </span><span class=""s3""><b>in</b></span><span class=""s1""> counts_map:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; counts_map[char] += </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; counts_map[char] = </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> counts_map</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s7"">find_power_set</span><span class=""s1"">(</span><span class=""s5"">self</span><span class=""s1"">, string):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> string </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> string</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> string </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">''</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> [</span><span class=""s9"">''</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; counts_map = </span><span class=""s5"">self</span><span class=""s1"">._build_counts_map(string)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_results = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">self</span><span class=""s1"">._find_power_set(counts_map, curr_results,&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=""s1"">results, index=</span><span class=""s6"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results.append(</span><span class=""s9"">''</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> results</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s7"">_find_power_set</span><span class=""s1"">(</span><span class=""s5"">self</span><span class=""s1"">, counts_map, curr_result,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results, index):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> curr_index, char </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">enumerate</span><span class=""s1"">(counts_map):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> curr_index </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> index </span><span class=""s3""><b>or</b></span><span class=""s1""> counts_map[char] </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s6"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>continue</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_result.append(char)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; counts_map[char] -= </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(</span><span class=""s9"">''</span><span class=""s1"">.join(curr_result))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">self</span><span class=""s1"">._find_power_set(counts_map, curr_result,&nbsp;</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;results,&nbsp;curr_index)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; counts_map[char] += </span><span class=""s6"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_result.pop()</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_power_set.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestPowerSet</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_power_set</span><span class=""s4"">(</span><span class=""s5"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; input_set = </span><span class=""s9"">''</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s9"">''</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">self</span><span class=""s1"">.run_test</span><span class=""s10"">(</span><span class=""s1"">input_set, expected</span><span class=""s10"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; input_set = </span><span class=""s9"">'a'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">''</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">self</span><span class=""s1"">.run_test(input_set, expected)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; input_set = </span><span class=""s9"">'ab'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'ab'</span><span class=""s1"">, </span><span class=""s9"">'b'</span><span class=""s1"">, </span><span class=""s9"">''</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">self</span><span class=""s1"">.run_test(input_set, expected)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; input_set = </span><span class=""s9"">'abc'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'ab'</span><span class=""s1"">, </span><span class=""s9"">'abc'</span><span class=""s1"">, </span><span class=""s9"">'ac'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">'b'</span><span class=""s1"">, </span><span class=""s9"">'bc'</span><span class=""s1"">, </span><span class=""s9"">'c'</span><span class=""s1"">, </span><span class=""s9"">''</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">self</span><span class=""s1"">.run_test(input_set, expected)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; input_set = </span><span class=""s9"">'aabc'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'aa'</span><span class=""s1"">, </span><span class=""s9"">'aab'</span><span class=""s1"">, </span><span class=""s9"">'aabc'</span><span class=""s1"">,&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">'aac'</span><span class=""s1"">, </span><span class=""s9"">'ab'</span><span class=""s1"">, </span><span class=""s9"">'abc'</span><span class=""s1"">, </span><span class=""s9"">'ac'</span><span class=""s1"">,&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">'b'</span><span class=""s1"">, </span><span class=""s9"">'bc'</span><span class=""s1"">, </span><span class=""s9"">'c'</span><span class=""s1"">, </span><span class=""s9"">''</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">self</span><span class=""s1"">.run_test(input_set, expected)</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_power_set'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s7"">run_test</span><span class=""s1"">(</span><span class=""s5"">self</span><span class=""s1"">, input_set, expected):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; combinatoric = Combinatoric()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = combinatoric.find_power_set(input_set)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(result, expected)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestPowerSet()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_power_set()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: You are running up n steps. If you can take a single, double, or triple step, how many possible ways are there to run up to the nth step?</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If n == 0, what should the result be?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Go with 1, but discuss different approaches</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None or negative input -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">n == 0 -&gt; 1</span></li> <li class=""li2""><span class=""s1"">n == 1 -&gt; 1</span></li> <li class=""li2""><span class=""s1"">n == 2 -&gt; 2</span></li> <li class=""li2""><span class=""s1"">n == 3 -&gt; 4</span></li> <li class=""li2""><span class=""s1"">n == 4 -&gt; 7</span></li> <li class=""li2""><span class=""s1"">n == 10 -&gt; 274</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">To get to step n, we will need to have gone:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">One step from n-1</span></li> <li class=""li2""><span class=""s1"">Two steps from n-2</span></li> <li class=""li2""><span class=""s1"">Three steps from n-3</span></li> </ul> <p class=""p2""><span class=""s1"">If we go the one step route above, we'll be at n-1 before taking the last step. To get to step n-1, we will need to have gone:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">One step from n-1-1</span></li> <li class=""li2""><span class=""s1"">Two steps from n-1-2</span></li> <li class=""li2""><span class=""s1"">Three steps from n-1-2</span></li> </ul> <p class=""p2""><span class=""s1"">Continue this process until we reach the start.</span></p> <p class=""p2""><span class=""s1"">Base case:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If n &lt; 0: return 0</span></li> <li class=""li2""><span class=""s1"">If n == 0: return 1</span></li> </ul> <p class=""p2""><span class=""s1"">Note, if we had chosen n == 0 to return 0 instead, we would need to add additional base cases. Otherwise we'd be adding multiple 0's once we hit the base cases and not get any result &gt; 0.</span></p> <p class=""p2""><span class=""s1"">Recursive case:</span></p> <p class=""p2""><span class=""s1"">We'll memoize the solution to improve performance.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Use the memo if we've already processed the current step.</span></li> <li class=""li2""><span class=""s1"">Update the memo by adding the recursive calls to step(n-1), step(n-2), step(n-3)</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n), if using memoization</span></li> <li class=""li2""><span class=""s1"">Space: O(n), where n is the recursion depth</span></li> </ul> <p class=""p2""><span class=""s1"">Note: The number of ways will quickly overflow the bounds of an integer.</span></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Steps</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">count_ways</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, num_steps):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> num_steps </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> num_steps </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'num_steps cannot be None or negative'</span><span class=""s3"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cache = {}</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._count_ways(num_steps, cache)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">_count_ways</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, num_steps, cache):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> num_steps </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> num_steps </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> num_steps </span><span class=""s5""><b>in</b></span><span class=""s1""> cache:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> cache[num_steps]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cache[num_steps] = (</span><span class=""s6"">self</span><span class=""s1"">._count_ways(num_steps</span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">, cache) </span><span class=""s7""><b>+</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">._count_ways(num_steps</span><span class=""s7""><b>-</b></span><span class=""s8"">2</span><span class=""s1"">, cache) </span><span class=""s7""><b>+</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">._count_ways(num_steps</span><span class=""s7""><b>-</b></span><span class=""s8"">3</span><span class=""s1"">, cache))</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> cache[num_steps]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_steps.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">TestSteps</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_steps</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; steps = Steps()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, steps.count_ways, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, steps.count_ways, </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(steps.count_ways(</span><span class=""s8"">0</span><span class=""s1"">), </span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(steps.count_ways(</span><span class=""s8"">1</span><span class=""s1"">), </span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(steps.count_ways(</span><span class=""s8"">2</span><span class=""s1"">), </span><span class=""s8"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(steps.count_ways(</span><span class=""s8"">3</span><span class=""s1"">), </span><span class=""s8"">4</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(steps.count_ways(</span><span class=""s8"">4</span><span class=""s1"">), </span><span class=""s8"">7</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(steps.count_ways(</span><span class=""s8"">10</span><span class=""s1"">), </span><span class=""s8"">274</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_steps'</span><span class=""s3"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestSteps()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_steps()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Sort an array of strings so all anagrams are next to each other.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Are there any other sorting requirements other than the grouping of anagrams?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">[] -&gt; []</span></li> <li class=""li2""><span class=""s1"">General case</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Input: ['ram', 'act', 'arm', 'bat', 'cat', 'tab']</span></li> <li class=""li2""><span class=""s1"">Result: ['arm', 'ram', 'act', 'cat', 'bat', 'tab']</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">Input: ['ram', 'act', 'arm', 'bat', 'cat', 'tab']</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Sort the chars for each item:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">'ram' -&gt; 'amr'</span></p> <p class=""p4""><span class=""s1"">'act' -&gt; 'act'</span></p> <p class=""p4""><span class=""s1"">'arm' -&gt; 'amr'</span></p> <p class=""p4""><span class=""s1"">'abt' -&gt; 'bat'</span></p> <p class=""p4""><span class=""s1"">'cat' -&gt; 'act'</span></p> <p class=""p4""><span class=""s1"">'abt' -&gt; 'tab'</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Use a map of sorted chars to each item to group anagrams:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">{</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 'amr': ['ram', 'arm'],&nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 'act': ['act', 'cat'],&nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 'abt': ['bat', 'tab']</span></p> <p class=""p4""><span class=""s1"">}</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Result: ['arm', 'ram', 'act', 'cat', 'bat', 'tab']</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(k * n), due to the modified bucket sort</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> collections </span><span class=""s3""><b>import</b></span><span class=""s1""> OrderedDict</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Anagram</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">group_anagrams</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, items):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> items </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'items cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> items:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> items</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; anagram_map = OrderedDict()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> item </span><span class=""s3""><b>in</b></span><span class=""s1""> items:</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Use a tuple, which is hashable and</i></span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># serves as the key in anagram_map</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sorted_chars = </span><span class=""s3"">tuple</span><span class=""s1"">(</span><span class=""s3"">sorted</span><span class=""s1"">(item))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> sorted_chars </span><span class=""s3""><b>in</b></span><span class=""s1""> anagram_map:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; anagram_map[sorted_chars].append(item)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; anagram_map[sorted_chars] = [item]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> value </span><span class=""s3""><b>in</b></span><span class=""s1""> anagram_map.values():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.extend(value)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> result</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_anagrams.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestAnagrams</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_group_anagrams</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; anagram = Anagram()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, anagram.group_anagrams, </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; data = [</span><span class=""s1"">'ram'</span><span class=""s4"">, </span><span class=""s1"">'act'</span><span class=""s4"">, </span><span class=""s1"">'arm'</span><span class=""s4"">, </span><span class=""s1"">'bat'</span><span class=""s4"">, </span><span class=""s1"">'cat'</span><span class=""s4"">, </span><span class=""s1"">'tab'</span><span class=""s4"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s7"">'ram'</span><span class=""s1"">, </span><span class=""s7"">'arm'</span><span class=""s1"">, </span><span class=""s7"">'act'</span><span class=""s1"">, </span><span class=""s7"">'cat'</span><span class=""s1"">, </span><span class=""s7"">'bat'</span><span class=""s1"">, </span><span class=""s7"">'tab'</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(anagram.group_anagrams(data), expected)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_group_anagrams'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestAnagrams()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_group_anagrams()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement insertion sort.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 16.0px} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is a naive solution sufficient?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are duplicates allowed?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the input is valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">Empty input -&gt; []</span></li> <li class=""li2""><span class=""s1"">One element -&gt; [element]</span></li> <li class=""li2""><span class=""s1"">Two or more elements</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Wikipedia's animation:</span></p> <p class=""p4""><span class=""s1""></span><br /></p><p class=""p4""><img src=""insertion_sort.gif"" /></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">For each value index 1 to n - 1</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Compare with all elements to the left of the current value to determine new insertion point</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Hold current value in temp variable</span></li> <li class=""li2""><span class=""s1"">Shift elements from new insertion point right</span></li> <li class=""li2""><span class=""s1"">Insert value in temp variable</span></li> <li class=""li2""><span class=""s1"">Break</span></li> </ul> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n^2) avarage, worst. O(1) best if input is already sorted.</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li><li class=""li2"">In-place<span class=""s1""></span></li><li class=""li2"">Stable</li> </ul> <p class=""p3""><font color=""#000000""><span class=""s1""></span>Insertion sort works well for very small datasets where most of the input is already sorted.</font></p><p class=""p3""><br /></p><p class=""p3""><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">InsertionSort</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">sort</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> data </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'data cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(data) </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s9"">2</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1"">&nbsp;r&nbsp;</span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(1,&nbsp;</span><span class=""s3"">len</span><span class=""s1"">(data)</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1"">&nbsp;l&nbsp;</span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(r</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> data[r] </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> data[l]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; temp = data[r]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data[l</span><span class=""s8""><b>+</b></span><span class=""s9"">1</span><span class=""s1"">:r</span><span class=""s8""><b>+</b></span><span class=""s9"">1</span><span class=""s1"">] = data[l:r]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data[l] = temp</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_insertion_sort.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestInsertionSort</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_insertion_sort</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; insertion_sort = InsertionSort()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'None input'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, insertion_sort.sort, </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Empty input'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(insertion_sort.sort([]), [])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'One element'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(insertion_sort.sort([</span><span class=""s9"">5</span><span class=""s1"">]), [</span><span class=""s9"">5</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Two or more elements'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(insertion_sort.sort(data), </span><span class=""s3"">sorted</span><span class=""s1"">(data))</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_insertion_sort'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestInsertionSort()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_insertion_sort()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Given sorted arrays A, B, merge B into A in sorted order.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Does A have enough space for B?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can the inputs have duplicate array items?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Does the inputs also include the actual size of A and B?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">A or B is None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">index of last A or B &lt; 0 -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">A or B is empty</span></li> <li class=""li2""><span class=""s1"">General case</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">A = [1, 3, 5, 7, 9, None, None, None]</span></li> <li class=""li2""><span class=""s1"">B = [4, 5, 6]</span></li> <li class=""li2""><span class=""s1"">A = [1, 3, 4, 5, 5, 6, 7, 9]</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; k</span></p> <p class=""p4""><span class=""s1"">A = [1,&nbsp; 3,&nbsp; 5,&nbsp; 7,&nbsp; 9,&nbsp; None,&nbsp; None,&nbsp; None]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j</span></p> <p class=""p4""><span class=""s1"">B = [4,&nbsp; 5,&nbsp; 6]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">---</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">A[k] = max(A[i], B[j])</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; k</span></p> <p class=""p4""><span class=""s1"">A = [1,&nbsp; 3,&nbsp; 5,&nbsp; 7,&nbsp; 9,&nbsp; None,&nbsp; None,&nbsp; 9]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j</span></p> <p class=""p4""><span class=""s1"">B = [4,&nbsp; 5,&nbsp; 6]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">---</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">A[k] = max(A[i], B[j])</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; k&nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">A = [1,&nbsp; 3,&nbsp; 5,&nbsp; 7,&nbsp; 9,&nbsp; None,&nbsp; 7,&nbsp; 9]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j</span></p> <p class=""p4""><span class=""s1"">B = [4,&nbsp; 5,&nbsp; 6]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">---</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">A[k] = max(A[i], B[j])</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; k &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">A = [1,&nbsp; 3,&nbsp; 5,&nbsp; 7,&nbsp; 9,&nbsp; 6,&nbsp; 7,&nbsp; 9]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j</span></p> <p class=""p4""><span class=""s1"">B = [4,&nbsp; 5,&nbsp; 6]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">---</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">A[k] = max(A[i], B[j])</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i &nbsp; &nbsp; &nbsp; k &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">A = [1,&nbsp; 3,&nbsp; 5,&nbsp; 7,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 9]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; j &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">B = [4,&nbsp; 5,&nbsp; 6]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">---</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">A[k] = max(A[i], B[j])</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; i &nbsp; &nbsp; &nbsp; k &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">A = [1,&nbsp; 3,&nbsp; 5,&nbsp; 5,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 9]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; j &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">B = [4,&nbsp; 5,&nbsp; 6]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">---</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">A[k] = max(A[i], B[j])</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; i &nbsp; k &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">A = [1,&nbsp; 3,&nbsp; 4,&nbsp; 5,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 9]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; j &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">B = [4,&nbsp; 5,&nbsp; 6]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">---</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">A[k] = max(A[i], B[j])</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; ik &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">A = [1,&nbsp; 3,&nbsp; 4,&nbsp; 5,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 9]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">B = [4,&nbsp; 5,&nbsp; 6]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">---</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">A = [1, 3, 4, 5, 5, 6, 7, 9]</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(m + n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Array</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">merge_into</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, source, dest, source_end_index, dest_end_index):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> source </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> dest </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'source or dest cannot be None'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> source_end_index </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> dest_end_index </span><span class=""s7""><b>&lt;</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> ValueError(</span><span class=""s1"">'end indices must be &gt;= 0'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> source:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> dest</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> dest:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> source</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; source_index = source_end_index </span><span class=""s7""><b>-</b></span><span class=""s1""> </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; dest_index = dest_end_index </span><span class=""s7""><b>-</b></span><span class=""s1""> </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; insert_index = source_end_index </span><span class=""s7""><b>+</b></span><span class=""s1""> dest_end_index </span><span class=""s7""><b>-</b></span><span class=""s1""> </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> dest_index </span><span class=""s7""><b>&gt;=</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> source[source_index] </span><span class=""s7""><b>&gt;</b></span><span class=""s1""> dest[dest_index]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; source[insert_index] = source[source_index]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; source_index -= </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; source[insert_index] = dest[dest_index]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dest_index -= </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; insert_index -= </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> source</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_merge_into.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">TestArray</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_merge_into</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = Array()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, array.merge_into, </span><span class=""s5""><b>None</b></span><span class=""s1"">, </span><span class=""s5""><b>None</b></span><span class=""s1"">, </span><span class=""s5""><b>None</b></span><span class=""s1"">, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(ValueError, array.merge_into, [</span><span class=""s8"">1</span><span class=""s1"">], [</span><span class=""s8"">2</span><span class=""s1"">], </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s7""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; a = [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array.merge_into(a, [], </span><span class=""s5"">len</span><span class=""s1"">(a), </span><span class=""s8"">0</span><span class=""s1"">), [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; a = [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array.merge_into(a, [], </span><span class=""s5"">len</span><span class=""s1"">(a), </span><span class=""s8"">0</span><span class=""s1"">), [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; a = [</span><span class=""s8"">1</span><span class=""s1"">,&nbsp; </span><span class=""s8"">3</span><span class=""s1"">,&nbsp; </span><span class=""s8"">5</span><span class=""s1"">,&nbsp; </span><span class=""s8"">7</span><span class=""s1"">,&nbsp; </span><span class=""s8"">9</span><span class=""s1"">,&nbsp; </span><span class=""s5""><b>None</b></span><span class=""s1"">,&nbsp; </span><span class=""s5""><b>None</b></span><span class=""s1"">,&nbsp; </span><span class=""s5""><b>None</b></span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; b = [</span><span class=""s8"">4</span><span class=""s1"">,&nbsp; </span><span class=""s8"">5</span><span class=""s1"">,&nbsp; </span><span class=""s8"">6</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">, </span><span class=""s8"">4</span><span class=""s1"">, </span><span class=""s8"">5</span><span class=""s1"">, </span><span class=""s8"">5</span><span class=""s1"">, </span><span class=""s8"">6</span><span class=""s1"">, </span><span class=""s8"">7</span><span class=""s1"">, </span><span class=""s8"">9</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array.merge_into(a, b, </span><span class=""s8"">5</span><span class=""s1"">, </span><span class=""s5"">len</span><span class=""s1"">(b)), expected)</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_merge_into'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestArray()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_merge_into()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement merge sort.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 16.0px} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is a naive solution sufficient?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are duplicates allowed?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the input is valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">Empty input -&gt; []</span></li> <li class=""li2""><span class=""s1"">One element -&gt; [element]</span></li> <li class=""li2""><span class=""s1"">Two or more elements</span></li> <li class=""li2""><span class=""s1"">Left and right subarrays of different lengths</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Wikipedia's animation:</span></p> <p class=""p4""><span class=""s1""></span><br /></p><p class=""p4""><img src=""merge_sort.gif"" /></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Recursively split array into left and right halves</span></li> <li class=""li2""><span class=""s1"">Merge split arrays</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Using two pointers, one for each half starting at index 0</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Add the smaller element to the result array</span></li> <li class=""li2""><span class=""s1"">Inrement pointer where smaller element exists</span></li> </ul> <li class=""li2""><span class=""s1"">Copy remaining elements to the result array</span></li> <li class=""li2""><span class=""s1"">Return result array</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n log(n))</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p2""></p><p class=""p2"">Misc:</p><p class=""p2""><br /></p><p class=""p2"">* Not in-place</p><p class=""p2"">* Most implementations are stable</p><p class=""p2""><br /></p><p class=""p2"">Merge sort can be a good choice for data sets that are too large to fit in memory, as large chunks of data can be read and written to disk.</p><p class=""p2""><br /></p><p class=""p2"">Unlike many other sorting algorithms, merge sort is not done in-place.</p><p class=""p2""><br /></p><p class=""p2"">See: Quicksort vs merge sort:&nbsp;http://stackoverflow.com/a/90477</p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> __future__ </span><span class=""s3""><b>import</b></span><span class=""s1""> division</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">MergeSort</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">sort</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> data </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'data cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._sort(data)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">_sort</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(data) </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s9"">2</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mid = </span><span class=""s3"">len</span><span class=""s1"">(data) </span><span class=""s8""><b>//</b></span><span class=""s1""> </span><span class=""s9"">2</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left = data[:mid]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right = data[mid:]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left = </span><span class=""s6"">self</span><span class=""s1"">._sort(left)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right = </span><span class=""s6"">self</span><span class=""s1"">._sort(right)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._merge(left, right)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">_merge</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, left, right):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; l = </span><span class=""s9"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; r = </span><span class=""s9"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>while</b></span><span class=""s1""> l </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(left) </span><span class=""s3""><b>and</b></span><span class=""s1""> r </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(right):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> left[l] </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> right[r]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.append(left[l])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; l += </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.append(right[r])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; r += </span><span class=""s9"">1</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Copy remaining elements</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>while</b></span><span class=""s1""> l </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(left):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.append(left[l])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; l += </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>while</b></span><span class=""s1""> r </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(right):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.append(right[r])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; r += </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> result</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_merge_sort.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestMergeSort</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_merge_sort</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; merge_sort = MergeSort()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'None input'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, merge_sort.sort, </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Empty input'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(merge_sort.sort([]), [])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'One element'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(merge_sort.sort([</span><span class=""s9"">5</span><span class=""s1"">]), [</span><span class=""s9"">5</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Two or more elements'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(merge_sort.sort(data), </span><span class=""s3"">sorted</span><span class=""s1"">(data))</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_merge_sort'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestMergeSort()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_merge_sort()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Given an array of n integers, generate an int not in the input. Use a minimal amount of memory.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Are we working with non-negative ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">What is the range of the integers?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Discuss the approach for 4 billion integers</span></li> <li class=""li2""><span class=""s1"">Implement for 32 integers</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li></ul><ul class=""ul2""> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">[] -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">General case</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">There is an int excluded from the input -&gt; int</span></li> <li class=""li2""><span class=""s1"">There isn't an int excluded from the input -&gt; None</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">The problem states to use a minimal amount of memory. We'll use a bit vector to keep track of the inputs.</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p2""><span class=""s1"">Say we are given 4 billion integers, which is 2^32 integers. The number of non-negative integers would be 2^31. With a bit vector, we'll need 4 billion bits to map each integer to a bit. Say we had only 1 GB of memory or 2^32 bytes. This would leave us with 8 billion bits.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">To simplify this exercise, we'll work with an input of up to 32 ints that we'll map to a bit vector of 32 bits.</span></p> <p class=""p4""><span class=""s1"">input = [0, 1, 2, 3, 4...28, 29, 31]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">bytes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [ &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]&nbsp; [&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; ] [&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] [&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]</span></p> <p class=""p4""><span class=""s1"">index &nbsp; &nbsp; &nbsp; =&nbsp; 0&nbsp; 1&nbsp; 2&nbsp; 3&nbsp; 4&nbsp; 5&nbsp; 6&nbsp; 7&nbsp; 8&nbsp; 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31</span></p> <p class=""p4""><span class=""s1"">bit_vector&nbsp; =&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 1&nbsp; 0&nbsp; 1</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">result = 30</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">* Loop through each item in the input, setting bit_vector[item] = True.</span></p> <p class=""p4""><span class=""s1"">* Loop through the bit_vector, return the first index where bit_vector[item] == False.</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b), where b is the number of bits</span></li> <li class=""li2""><span class=""s1"">Space: O(b)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s3""><b>from</b></span><span class=""s4""> bitstring </span><span class=""s3""><b>import</b></span><span class=""s4""> BitArray&nbsp; </span><span class=""s1""><i># Run pip install bitstring</i></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Bits</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">new_int</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, array, max_size):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> array:</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s4""> TypeError(</span><span class=""s1"">'array cannot be None or empty'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bit_vector = BitArray(max_size)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> item </span><span class=""s3""><b>in</b></span><span class=""s1""> array:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bit_vector[item] = </span><span class=""s3""><b>True</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> index, item </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">enumerate</span><span class=""s1"">(bit_vector):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3""><b>not</b></span><span class=""s1""> item:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> index</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s4""> </span><span class=""s1""><b>None</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_new_int.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">TestBits</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_new_int</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; bits = Bits()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_size = </span><span class=""s8"">32</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, bits.new_int, </span><span class=""s3""><b>None</b></span><span class=""s1"">, max_size)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, bits.new_int, [], max_size)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [item </span><span class=""s3""><b>for</b></span><span class=""s1""> item </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(</span><span class=""s8"">30</span><span class=""s1"">)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data.append(</span><span class=""s8"">31</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.new_int(data, max_size), </span><span class=""s8"">30</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [item </span><span class=""s3""><b>for</b></span><span class=""s1""> item </span><span class=""s3""><b>in</b></span><span class=""s1""> </span><span class=""s3"">range</span><span class=""s1"">(</span><span class=""s8"">32</span><span class=""s1"">)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.new_int(data, max_size), </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_find_int_excluded_from_input'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestBits()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_new_int()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement quick sort.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 16.0px} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is a naive solution sufficient (ie not in-place)?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are duplicates allowed?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the input is valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">Empty input -&gt; []</span></li> <li class=""li2""><span class=""s1"">One element -&gt; [element]</span></li> <li class=""li2""><span class=""s1"">Two or more elements</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Wikipedia's animation:</span></p> <p class=""p4""><span class=""s1""></span><br /></p><p class=""p4""><img src=""quicksort_wikipedia.gif"" /></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Set pivot to the middle element in the data</span></li> <li class=""li2""><span class=""s1"">For each element:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If current element is the pivot, continue</span></li> <li class=""li2""><span class=""s1"">If the element is less than the pivot, add to left array</span></li> <li class=""li2""><span class=""s1"">Else, add to right array</span></li> </ul> <li class=""li2""><span class=""s1"">Recursively apply quicksort to the left array</span></li> <li class=""li2""><span class=""s1"">Recursively apply quicksort to the right array</span></li> <li class=""li2""><span class=""s1"">Merge the left array + pivot + right array</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n log(n)) average, best, O(n^2) worst</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li></ul> <p class=""p3""><font color=""#000000""><span class=""s1""></span></font></p><p class=""p3""><font color=""#000000"">Misc:</font></p><p class=""p3""><font color=""#000000""><br /></font></p><p class=""p3""><font color=""#000000"">* More sophisticated implementations are in-place, although they still take up recursion depth space</font></p><p class=""p3""><font color=""#000000"">* Most implementations are not stable</font></p><p class=""p3""><font color=""#000000""><br /></font></p><p class=""p3""><font color=""#000000"">See Quicksort on wikipedia:</font></p><p class=""p3""><font color=""#000000""><br /></font></p><p class=""p3""><font color=""#000000"">Typically, quicksort is significantly faster in practice than other Θ(nlogn) algorithms, because its inner loop can be efficiently implemented on most architectures [presumably because it has good cache locality], and in most real-world data, it is possible to make design choices which minimize the probability of requiring quadratic time.</font></p><p class=""p3""><font color=""#000000""><br /></font></p><p class=""p3""><font color=""#000000"">See: Quicksort vs merge sort:&nbsp;http://stackoverflow.com/a/90477</font></p><p class=""p3""><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> __future__ </span><span class=""s3""><b>import</b></span><span class=""s1""> division</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">QuickSort</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">sort</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> data </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'data cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._sort(data)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">_sort</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(data) </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s9"">2</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; equal = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; pivot_index = </span><span class=""s3"">len</span><span class=""s1"">(data) </span><span class=""s8""><b>//</b></span><span class=""s1""> </span><span class=""s9"">2</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; pivot_value = data[pivot_index]</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Build the left and right partitions</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>for</b></span><span class=""s1""> item </span><span class=""s3""><b>in</b></span><span class=""s1""> data:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> item </span><span class=""s8""><b>==</b></span><span class=""s1""> pivot_value:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; equal.append(item)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>elif</b></span><span class=""s1""> item </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> pivot_value:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; left.append(item)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; right.append(item)</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Recursively apply quick_sort</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left_ = </span><span class=""s6"">self</span><span class=""s1"">._sort(left)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right_ = </span><span class=""s6"">self</span><span class=""s1"">._sort(right)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> left_ </span><span class=""s8""><b>+</b></span><span class=""s1""> equal </span><span class=""s8""><b>+</b></span><span class=""s1""> right_</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_quick_sort.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestQuickSort</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_quick_sort</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; quick_sort = QuickSort()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'None input'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, quick_sort.sort, </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Empty input'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(quick_sort.sort([]), [])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'One element'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(quick_sort.sort([</span><span class=""s9"">5</span><span class=""s1"">]), [</span><span class=""s9"">5</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Two or more elements'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(quick_sort.sort(data), </span><span class=""s3"">sorted</span><span class=""s1"">(data))</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_quick_sort\n'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestQuickSort()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_quick_sort()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Implement radix sort.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the input a list?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Check for None in place of an array</span></li> <li class=""li2""><span class=""s1"">Assume array elements are ints</span></li> </ul> <li class=""li2""><span class=""s1"">Do we know the max digits to handle?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Are the digits base 10?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">[] -&gt; []</span></li> <li class=""li2""><span class=""s1"">[128, 256, 164, 8, 2, 148, 212, 242, 244] -&gt; [2, 8, 128, 148, 164, 212, 242, 244, 256]</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Sample input: [1, 220, 122, 112]</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">We'll evaluate each digit starting with the ones position</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">[<b>1</b>, 22<b>0</b>, 12<b>2</b>, 11<b>2</b>]</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Bucket 0: 220</span></li> <li class=""li2""><span class=""s1"">Bucket 1: 1</span></li> <li class=""li2""><span class=""s1"">Bucket 2: 122, 112</span></li> <li class=""li2""><span class=""s1"">Result: [220, 1, 122, 112]</span></li> </ul> <li class=""li2""><span class=""s1"">[2<b>2</b>0, 1, 1<b>2</b>2, 1<b>1</b>2]</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Bucket 0: 1</span></li> <li class=""li2""><span class=""s1"">Bucket 1: 112</span></li> <li class=""li2""><span class=""s1"">Bucket 2: 220, 122</span></li> <li class=""li2""><span class=""s1"">Result: [1, 112, 220, 122]</span></li> </ul> <li class=""li2""><span class=""s1"">[1, <b>1</b>12, <b>2</b>20, <b>1</b>22]</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Bucket 0: 1</span></li> <li class=""li2""><span class=""s1"">Bucket 1: 112, 122</span></li> <li class=""li2""><span class=""s1"">Bucket 2: 220</span></li> <li class=""li2""><span class=""s1"">Result: [1, 112, 122, 220]</span></li> </ul> </ul> </ul> <p class=""p2""><span class=""s1"">Bucketing example: 123</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Ones</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">12<b>3</b> // 10^0 = 123</span></li> <li class=""li2""><span class=""s1"">123 % 10 = 3</span></li> </ul> <li class=""li2""><span class=""s1"">Tens</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">1<b>2</b>3 // 10^1 = 12</span></li> <li class=""li2""><span class=""s1"">12 % 10 = 2</span></li> </ul> <li class=""li2""><span class=""s1"">Hundreds</span></li> <ul class=""ul2""> <li class=""li2""><b></b><span class=""s1""><b>1</b>23 // 10^2 = 1</span></li> <li class=""li2""><span class=""s1"">1 % 10 = 1</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(k*n), where n is the number of items and k is the number of digits in the largest item</span></li> <li class=""li2""><span class=""s1"">Space: O(k+n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p><p class=""p3""><font color=""#000000""></font></p><p class=""p3"">Misc:</p><p class=""p3""><br /></p><p class=""p3"">* Not in-place</p><p class=""p3"">* Most implementations are stable</p><p class=""p3""><br /></p><p class=""p3"">If k (the number of digits) is less than log(n), radix sort can be faster than algorithms such as quicksort.</p><p class=""p3""><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">RadixSort</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">sort</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, array, base=</span><span class=""s7"">10</span><span class=""s1"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'array cannot be None'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> array:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> []</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_element = </span><span class=""s5"">max</span><span class=""s1"">(array)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_digits = </span><span class=""s5"">len</span><span class=""s1"">(</span><span class=""s5"">str</span><span class=""s1"">(</span><span class=""s5"">abs</span><span class=""s1"">(max_element)))</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_array = array</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> digit </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(max_digits):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buckets = [[] </span><span class=""s5""><b>for</b></span><span class=""s1""> _ </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(base)]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> item </span><span class=""s5""><b>in</b></span><span class=""s1""> curr_array:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buckets[(item</span><span class=""s9""><b>//</b></span><span class=""s1"">(base</span><span class=""s9""><b>**</b></span><span class=""s1"">digit))</span><span class=""s9""><b>%</b></span><span class=""s1"">base].append(item)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_array = []</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> bucket </span><span class=""s5""><b>in</b></span><span class=""s1""> buckets:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_array.extend(bucket)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> curr_array</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_radix_sort.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestRadixSort</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_sort</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; radix_sort = RadixSort()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, radix_sort.sort, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(radix_sort.sort([]), [])</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s7"">128</span><span class=""s1"">, </span><span class=""s7"">256</span><span class=""s1"">, </span><span class=""s7"">164</span><span class=""s1"">, </span><span class=""s7"">8</span><span class=""s1"">, </span><span class=""s7"">2</span><span class=""s1"">, </span><span class=""s7"">148</span><span class=""s1"">, </span><span class=""s7"">212</span><span class=""s1"">, </span><span class=""s7"">242</span><span class=""s1"">, </span><span class=""s7"">244</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s7"">2</span><span class=""s1"">, </span><span class=""s7"">8</span><span class=""s1"">, </span><span class=""s7"">128</span><span class=""s1"">, </span><span class=""s7"">148</span><span class=""s1"">, </span><span class=""s7"">164</span><span class=""s1"">, </span><span class=""s7"">212</span><span class=""s1"">, </span><span class=""s7"">242</span><span class=""s1"">, </span><span class=""s7"">244</span><span class=""s1"">, </span><span class=""s7"">256</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(radix_sort.sort(array), expected)</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_sort'</span><span class=""s3"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestRadixSort()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_sort()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Find an element in a sorted array that has been rotated a number of times.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the input an array of ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can the input have duplicates?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we know how many times the array was rotated?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Was the array originally sorted in increasing or decreasing order?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Increasing</span></li> </ul> <li class=""li2""><span class=""s1"">For the output, do we return the index?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">[] -&gt; None</span></li> <li class=""li2""><span class=""s1"">Not found -&gt; None</span></li> <li class=""li2""><span class=""s1"">General case with duplicates</span></li> <li class=""li2""><span class=""s1"">General case without duplicates</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1""><b>General case without dupes</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">index &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; 1 &nbsp; 2 &nbsp; 3 &nbsp; 4 &nbsp; 5 &nbsp; 6 &nbsp; 7 &nbsp; 8 &nbsp; 9</span></p> <p class=""p5""><span class=""s1"">input &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [ 1,&nbsp; 3,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 8,&nbsp; 9, 10, 12, 14]</span></p> <p class=""p5""><span class=""s1"">input rotated 1x&nbsp; &nbsp; &nbsp; [10, 12, 14,&nbsp; 1,&nbsp; 3,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 8,&nbsp; 9]</span></p> <p class=""p5""><span class=""s1"">input rotated 2x&nbsp; &nbsp; &nbsp; [ 5,&nbsp; 6,&nbsp; 7,&nbsp; 8,&nbsp; 9, 10, 12, 14,&nbsp; 1,&nbsp; 3]</span></p> <p class=""p5""><span class=""s1"">input rotated 3x&nbsp; &nbsp; &nbsp; [10, 12, 14,&nbsp; 1,&nbsp; 3,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 8,&nbsp; 9]</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">find 1</span></p> <p class=""p5""><span class=""s1"">len = 10</span></p> <p class=""p5""><span class=""s1"">mid = 10 // 2 = 5</span></p> <p class=""p5""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; m &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e</span></p> <p class=""p5""><span class=""s1"">index &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; 1 &nbsp; 2 &nbsp; 3 &nbsp; 4 &nbsp; 5 &nbsp; 6 &nbsp; 7 &nbsp; 8 &nbsp; 9</span></p> <p class=""p5""><span class=""s1"">input &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [10, 12, 14,&nbsp; 1,&nbsp; 3,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 8,&nbsp; 9]</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">input[start] &gt; input[mid]: Left half is rotated</span></p> <p class=""p5""><span class=""s1"">input[end] &gt;= input[mid]: Right half is sorted</span></p> <p class=""p5""><span class=""s1"">1 is not within input[mid+1] to input[end] on the right side, go left</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s &nbsp; &nbsp; &nbsp; m &nbsp; &nbsp; &nbsp; e</span></p> <p class=""p5""><span class=""s1"">index &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; 1 &nbsp; 2 &nbsp; 3 &nbsp; 4 &nbsp; 5 &nbsp; 6 &nbsp; 7 &nbsp; 8 &nbsp; 9</span></p> <p class=""p5""><span class=""s1"">input &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [10, 12, 14,&nbsp; 1,&nbsp; 3,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 8,&nbsp; 9]</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">input[start] &lt;= input[mid]: Right half is rotated</span></p> <p class=""p5""><span class=""s1"">input[end] &gt;= input[mid]: Left half is sorted</span></p> <p class=""p5""><span class=""s1"">1 is not within input[left] to input[mid-1] on the left side, go right</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1""><b>General case with dupes</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; m &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e</span></p> <p class=""p5""><span class=""s1"">index &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; 1 &nbsp; 2 &nbsp; 3 &nbsp; 4 &nbsp; 5 &nbsp; 6 &nbsp; 7 &nbsp; 8 &nbsp; 9</span></p> <p class=""p5""><span class=""s1"">input &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [ 1,&nbsp; 1,&nbsp; 1,&nbsp; 1,&nbsp; 1,&nbsp; 1,&nbsp; 1,&nbsp; 1,&nbsp; 1,&nbsp; 2]</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">input[start] == input[mid], input[mid] != input[end], go right</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">input rotated 1x&nbsp; &nbsp; &nbsp; [ 1,&nbsp; 1,&nbsp; 2,&nbsp; 1,&nbsp; 1,&nbsp; 1,&nbsp; 1,&nbsp; 1,&nbsp; 1,&nbsp; 1]</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">input[start] == input[mid] == input[end], search both sides</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(log n) if there are no duplicates, else O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(m), where m is the recursion depth</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Array</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">search_sorted_array</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, array, val):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> val </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'array or val cannot be None'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> array:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._search_sorted_array(array, val, start=</span><span class=""s7"">0</span><span class=""s1"">, end=</span><span class=""s5"">len</span><span class=""s1"">(array)&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">_search_sorted_array</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, array, val, start, end):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> end </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> start:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mid = (start&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s1"">end) </span><span class=""s8""><b>//</b></span><span class=""s1""> </span><span class=""s7"">2</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array[mid] </span><span class=""s8""><b>==</b></span><span class=""s1""> val:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> mid</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Left side is sorted</i></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array[start] </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> array[mid]:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array[start] </span><span class=""s8""><b>&lt;=</b></span><span class=""s1""> val </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> array[mid]:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._search_sorted_array(array, val, start, mid&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._search_sorted_array(array, val, mid&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">, end)</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Right side is sorted</i></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>elif</b></span><span class=""s1""> array[start] </span><span class=""s8""><b>&gt;</b></span><span class=""s1""> array[mid]:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array[mid] </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> val </span><span class=""s8""><b>&lt;=</b></span><span class=""s1""> array[end]:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._search_sorted_array(array, val, mid&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">, end)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._search_sorted_array(array, val, start, mid&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">)</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Duplicates</i></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array[mid] </span><span class=""s8""><b>!=</b></span><span class=""s1""> array[end]:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._search_sorted_array(array, val, mid&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">, end)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = </span><span class=""s6"">self</span><span class=""s1"">._search_sorted_array(array, val, start, mid&nbsp;</span><span class=""s8""><b>-&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> result </span><span class=""s8""><b>!=</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> result</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">._search_sorted_array(array, val, mid&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">, end)</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_search_sorted_array.py</span></p> <p class=""p8""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">TestArray</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_search_sorted_array</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = Array()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, array.search_sorted_array, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array.search_sorted_array([</span><span class=""s7"">3</span><span class=""s1"">, </span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s7"">2</span><span class=""s1"">], </span><span class=""s7"">0</span><span class=""s1"">), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array.search_sorted_array([</span><span class=""s7"">3</span><span class=""s1"">, </span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s7"">2</span><span class=""s1"">], </span><span class=""s7"">0</span><span class=""s1"">), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [</span><span class=""s7"">10</span><span class=""s1"">, </span><span class=""s7"">12</span><span class=""s1"">, </span><span class=""s7"">14</span><span class=""s1"">,&nbsp; </span><span class=""s7"">1</span><span class=""s1"">,&nbsp; </span><span class=""s7"">3</span><span class=""s1"">,&nbsp; </span><span class=""s7"">5</span><span class=""s1"">,&nbsp; </span><span class=""s7"">6</span><span class=""s1"">,&nbsp; </span><span class=""s7"">7</span><span class=""s1"">,&nbsp; </span><span class=""s7"">8</span><span class=""s1"">,&nbsp; </span><span class=""s7"">9</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array.search_sorted_array(data, val=</span><span class=""s7"">1</span><span class=""s1"">), </span><span class=""s7"">3</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [ </span><span class=""s7"">1</span><span class=""s1"">,&nbsp; </span><span class=""s7"">1</span><span class=""s1"">,&nbsp; </span><span class=""s7"">2</span><span class=""s1"">,&nbsp; </span><span class=""s7"">1</span><span class=""s1"">,&nbsp; </span><span class=""s7"">1</span><span class=""s1"">,&nbsp; </span><span class=""s7"">1</span><span class=""s1"">,&nbsp; </span><span class=""s7"">1</span><span class=""s1"">,&nbsp; </span><span class=""s7"">1</span><span class=""s1"">,&nbsp; </span><span class=""s7"">1</span><span class=""s1"">,&nbsp; </span><span class=""s7"">1</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array.search_sorted_array(data, val=</span><span class=""s7"">2</span><span class=""s1"">), </span><span class=""s7"">2</span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_search_sorted_array'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test = TestArray()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_search_sorted_array()</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Search a sorted matrix for an item.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Are items in each row sorted?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are items in each column sorted?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the sorting in ascending or descending order?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Ascending</span></li> </ul> <li class=""li2""><span class=""s1"">Is the matrix a rectangle? Not jagged?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the matrix square?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Not necessarily</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output a tuple (row, col)?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the item you are searching for always in the matrix?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">General case</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Item found -&gt; (row, col)</span></li> <li class=""li2""><span class=""s1"">Item not found -&gt; None</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">Find 60 (val = 60)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp;20&nbsp; 40&nbsp; 63 &nbsp; 80</span></p> <p class=""p4""><span class=""s1"">&nbsp;30&nbsp; 50&nbsp; 80 &nbsp; 90</span></p> <p class=""p4""><span class=""s1"">&nbsp;40&nbsp; 60&nbsp; 100 110</span></p> <p class=""p4""><span class=""s1"">&nbsp;50&nbsp; 65&nbsp; 105 150</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">* If the start of a col &gt; val, look left</span></p> <p class=""p4""><span class=""s1"">* If the end of a col &lt; val, look right</span></p> <p class=""p4""><span class=""s1"">* If the start of row &gt; val, look up</span></p> <p class=""p4""><span class=""s1"">* If the end of a row &lt; val, look down</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">If we start at the upper right corner, we just need to use these cases:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">* If the start of a col &gt; val, look left</span></p> <p class=""p4""><span class=""s1"">* If the end of a row &lt; val, look down</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n + m), where n and m are the matrix dimensions</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">SortedMatrix</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">find_val</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, matrix, val):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> matrix </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> val </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s4""> TypeError(</span><span class=""s1"">'matrix and val cannot be None'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; row = </span><span class=""s7"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; col = </span><span class=""s3"">len</span><span class=""s1"">(matrix[</span><span class=""s7"">0</span><span class=""s1"">]) </span><span class=""s8""><b>-</b></span><span class=""s1""> </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>while</b></span><span class=""s1""> row </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s3"">len</span><span class=""s1"">(matrix) </span><span class=""s3""><b>and</b></span><span class=""s1""> col </span><span class=""s8""><b>&gt;=</b></span><span class=""s1""> </span><span class=""s7"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> matrix[row][col] </span><span class=""s8""><b>==</b></span><span class=""s1""> val:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>return</b></span><span class=""s1""> (row, col)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>elif</b></span><span class=""s1""> matrix[row][col] </span><span class=""s8""><b>&gt;</b></span><span class=""s1""> val:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; col -= </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; row += </span><span class=""s7"">1</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s4""> </span><span class=""s1""><b>None</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_search_sorted_matrix.py</span></p> <p class=""p7""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestSortedMatrix</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_find_val</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; matrix = [[</span><span class=""s7"">20</span><span class=""s1"">, </span><span class=""s7"">40</span><span class=""s1"">, </span><span class=""s7"">63</span><span class=""s1"">, </span><span class=""s7"">80</span><span class=""s1"">],</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s7"">30</span><span class=""s1"">, </span><span class=""s7"">50</span><span class=""s1"">, </span><span class=""s7"">80</span><span class=""s1"">, </span><span class=""s7"">90</span><span class=""s1"">],</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s7"">40</span><span class=""s1"">, </span><span class=""s7"">60</span><span class=""s1"">, </span><span class=""s7"">110</span><span class=""s1"">, </span><span class=""s7"">110</span><span class=""s1"">],</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s7"">50</span><span class=""s1"">, </span><span class=""s7"">65</span><span class=""s1"">, </span><span class=""s7"">105</span><span class=""s1"">, </span><span class=""s7"">150</span><span class=""s1"">]]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sorted_matrix = SortedMatrix()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, sorted_matrix.find_val, </span><span class=""s3""><b>None</b></span><span class=""s1"">, </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(sorted_matrix.find_val(matrix, </span><span class=""s7"">1000</span><span class=""s1"">), </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(sorted_matrix.find_val(matrix, </span><span class=""s7"">60</span><span class=""s1"">), (</span><span class=""s7"">2</span><span class=""s1"">, </span><span class=""s7"">1</span><span class=""s1"">))</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_find_val'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestSortedMatrix()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_find_val()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement selection sort.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 16.0px} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s4 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s5 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is a naiive solution sufficient (ie not stable, not based on a heap)?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are duplicates allowed?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the input is valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">[] -&gt; []</span></li> <li class=""li2""><span class=""s1"">One element -&gt; [element]</span></li> <li class=""li2""><span class=""s1"">Two or more elements</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Wikipedia's animation:</span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1""><img src=""selection_sort.gif"" /></span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p2""><span class=""s1"">We can do this recursively or iteratively. Iteratively will be more efficient as it doesn't require the extra space overhead with the recursive calls.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">For each element</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Check every element to the right to find the min</span></li> <li class=""li2""><span class=""s1"">If min &lt; current element, swap</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n^2) average, worst, best</span></li> <li class=""li2""><span class=""s1"">Space: O(1) iterative, O(m) recursive where m is the recursion depth (unless tail-call elimination is available, then O(1)), generally not stable</span></li><li class=""li2""><span class=""s1"">Note: Tail call elimination is not inherently available in Python. See the following&nbsp;<a href=""http://stackoverflow.com/a/13592002""><span class=""s3"" style=""font: normal normal normal 14px/normal 'Helvetica Neue'; text-decoration: underline; color: rgb(51, 122, 183); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(51, 122, 183); "">StackOverflow post</span></a>.</span></li><li class=""li2"">In-place<span class=""s1""></span></li><li class=""li2"">Most implementations are generally not stable</li> </ul> <p class=""p3""><font color=""#000000""><span class=""s1""></span></font></p><p class=""p3""><font color=""#000000"">Selection sort might be a good option if moving elements is more expensive than comparing them, as it requires at most n-1 swaps.</font></p><p class=""p3""><font color=""#000000""><br /></font></p><p class=""p3""><font color=""#000000"">The finding of a minimum element can be done with a min heap, which would change the worst-case run time to O(n log(n)) and increase the space to O(n). This is called a heap sort.</font></p><p class=""p3""><br /></p><p class=""p3""><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s4""><b>class</b></span><span class=""s5""> </span><span class=""s1"">SelectionSort</span><span class=""s5"">(</span><span class=""s4"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">sort</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> data </span><span class=""s4""><b>is</b></span><span class=""s1""> </span><span class=""s4""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'data cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> </span><span class=""s4"">len</span><span class=""s1"">(data) </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">2</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>for</b></span><span class=""s1""> i </span><span class=""s4""><b>in</b></span><span class=""s1""> </span><span class=""s4"">range</span><span class=""s1"">(</span><span class=""s4"">len</span><span class=""s1"">(data)&nbsp;</span><span class=""s9""><b>-&nbsp;</b></span><span class=""s10"">1</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_index = i</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>for</b></span><span class=""s1""> j </span><span class=""s4""><b>in</b></span><span class=""s1""> </span><span class=""s4"">range</span><span class=""s1"">(i&nbsp;</span><span class=""s9""><b>+&nbsp;</b></span><span class=""s10"">1</span><span class=""s1"">, </span><span class=""s4"">len</span><span class=""s1"">(data)):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> data[j] </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> data[min_index]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_index = j</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> data[min_index] </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> data[i]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data[i], data[min_index] = data[min_index], data[i]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s5""> </span><span class=""s1"">sort_iterative_alt</span><span class=""s5"">(</span><span class=""s7"">self</span><span class=""s5"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> data </span><span class=""s4""><b>is</b></span><span class=""s1""> </span><span class=""s4""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'data cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> </span><span class=""s4"">len</span><span class=""s1"">(data) </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">2</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>for</b></span><span class=""s1""> i </span><span class=""s4""><b>in</b></span><span class=""s1""> </span><span class=""s4"">range</span><span class=""s1"">(</span><span class=""s4"">len</span><span class=""s1"">(data)&nbsp;</span><span class=""s9""><b>-&nbsp;</b></span><span class=""s10"">1</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">._swap(data, i, </span><span class=""s7"">self</span><span class=""s1"">._find_min_index(data, i))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">sort_recursive</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data, start</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> data </span><span class=""s4""><b>is</b></span><span class=""s1""> </span><span class=""s4""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'data cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> </span><span class=""s4"">len</span><span class=""s1"">(data) </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">2</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">._sort_recursive(data, start=0)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">_sort_recursive</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data, start):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> data </span><span class=""s4""><b>is</b></span><span class=""s1""> </span><span class=""s4""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> start </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s4"">len</span><span class=""s1"">(data) </span><span class=""s9""><b>-</b></span><span class=""s1""> </span><span class=""s10"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; swap(data, start, </span><span class=""s7"">self</span><span class=""s1"">._find_min_index(data, start))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">self</span><span class=""s1"">._sort_recursive(data, start&nbsp;</span><span class=""s9""><b>+&nbsp;</b></span><span class=""s10"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">_find_min_index</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data, start):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; min_index = start</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>for</b></span><span class=""s1""> i </span><span class=""s4""><b>in</b></span><span class=""s1""> </span><span class=""s4"">range</span><span class=""s1"">(start&nbsp;</span><span class=""s9""><b>+&nbsp;</b></span><span class=""s10"">1</span><span class=""s1"">, </span><span class=""s4"">len</span><span class=""s1"">(data)):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> data[i] </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> data[min_index]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_index = i</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> min_index</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">_swap</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, data, i, j):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>if</b></span><span class=""s1""> i </span><span class=""s9""><b>!=</b></span><span class=""s1""> j:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data[i], data[j] = data[j], data[i]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>return</b></span><span class=""s1""> data</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_selection_sort.py</span></p> <p class=""p7""><span class=""s4""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s4""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s4""><b>class</b></span><span class=""s5""> </span><span class=""s1"">TestSelectionSort</span><span class=""s5"">(</span><span class=""s4"">object</span><span class=""s5"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s4""><b>def</b></span><span class=""s5""> </span><span class=""s1"">test_selection_sort</span><span class=""s5"">(</span><span class=""s7"">self</span><span class=""s5"">, func):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">print</span><span class=""s5"">(</span><span class=""s1"">'None input'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, func, </span><span class=""s4""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">print</span><span class=""s5"">(</span><span class=""s1"">'Empty input'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func([]), [])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">print</span><span class=""s5"">(</span><span class=""s1"">'One element'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func([</span><span class=""s10"">5</span><span class=""s1"">]), [</span><span class=""s10"">5</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">print</span><span class=""s5"">(</span><span class=""s1"">'Two or more elements'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [</span><span class=""s10"">5</span><span class=""s1"">, </span><span class=""s10"">1</span><span class=""s1"">, </span><span class=""s10"">7</span><span class=""s1"">, </span><span class=""s10"">2</span><span class=""s1"">, </span><span class=""s10"">6</span><span class=""s1"">, </span><span class=""s9""><b>-</b></span><span class=""s10"">3</span><span class=""s1"">, </span><span class=""s10"">5</span><span class=""s1"">, </span><span class=""s10"">7</span><span class=""s1"">, </span><span class=""s9""><b>-</b></span><span class=""s10"">10</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(data), </span><span class=""s4"">sorted</span><span class=""s1"">(data))</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4"">print</span><span class=""s5"">(</span><span class=""s1"">'Success: test_selection_sort\n'</span><span class=""s5"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestSelectionSort()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; selection_sort = SelectionSort()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_selection_sort(selection_sort.sort)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>try</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; test.test_selection_sort(selection_sort.sort_recursive)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; test.test_selection_sort(selection_sort.sor_iterative_alt)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s4""><b>except</b></span><span class=""s1""> NameError:</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Alternate solutions are only defined</i></span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># in the solutions file</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s4""><b>pass</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s4""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Implement Fizz Buzz.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">What is fizz buzz?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Return the string representation of numbers from 1 to n</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Multiples of 3 -&gt; 'Fizz'</span></li> <li class=""li2""><span class=""s1"">Multiples of 5 -&gt; 'Buzz'</span></li> <li class=""li2""><span class=""s1"">Multiples of 3 and 5 -&gt; 'FizzBuzz'</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* None -&gt; Exception</span></p> <p class=""p4""><span class=""s1"">* &lt; 1 -&gt; Exception</span></p> <p class=""p4""><span class=""s1"">* 15 -&gt;</span></p> <p class=""p4""><span class=""s1"">[</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; '1',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; '2',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 'Fizz',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; '4',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 'Buzz',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 'Fizz',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; '7',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; '8',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 'Fizz',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 'Buzz',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; '11',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 'Fizz',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; '13',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; '14',</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; 'FizzBuzz'</span></p> <p class=""p4""><span class=""s1"">]</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">There is no fancy algorithm to solve fizz buzz.</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Iterate from 1 through n</span></li> <li class=""li2""><span class=""s1"">Use the mod operator to determine if the current iteration is divisible by:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">3 and 5 -&gt; 'FizzBuzz'</span></li> <li class=""li2""><span class=""s1"">3 -&gt; 'Fizz'</span></li> <li class=""li2""><span class=""s1"">5 -&gt; 'Buzz'</span></li> <li class=""li2""><span class=""s1"">else -&gt; string of current iteration</span></li> </ul> <li class=""li2""><span class=""s1"">return the results</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">fizz_buzz</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, num):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> num </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'num cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> num </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s9"">1</span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> ValueError(</span><span class=""s1"">'num cannot be less than one'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> i </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s9"">1</span><span class=""s1"">, num&nbsp;</span><span class=""s8""><b>+&nbsp;</b></span><span class=""s9"">1</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> i </span><span class=""s8""><b>%</b></span><span class=""s1""> </span><span class=""s9"">3</span><span class=""s1""> </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1""> </span><span class=""s5""><b>and</b></span><span class=""s1""> i </span><span class=""s8""><b>%</b></span><span class=""s1""> </span><span class=""s9"">5</span><span class=""s1""> </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(</span><span class=""s7"">'FizzBuzz'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>elif</b></span><span class=""s1""> i </span><span class=""s8""><b>%</b></span><span class=""s1""> </span><span class=""s9"">3</span><span class=""s1""> </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(</span><span class=""s7"">'Fizz'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>elif</b></span><span class=""s1""> i </span><span class=""s8""><b>%</b></span><span class=""s1""> </span><span class=""s9"">5</span><span class=""s1""> </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(</span><span class=""s7"">'Buzz'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(</span><span class=""s5"">str</span><span class=""s1"">(i))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> results</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_fizz_buzz.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestFizzBuzz</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_fizz_buzz</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.fizz_buzz, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(ValueError, solution.fizz_buzz, </span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'1'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'2'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'Fizz'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'4'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'Buzz'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'Fizz'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'7'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'8'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'Fizz'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'Buzz'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'11'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'Fizz'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'13'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'14'</span><span class=""s1"">,</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">'FizzBuzz'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; ]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.fizz_buzz(</span><span class=""s9"">15</span><span class=""s1"">), expected)</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_fizz_buzz'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestFizzBuzz()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_fizz_buzz()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Create a class with an insert method to insert an int to a list. It should also support calculating the max, min, mean, and mode in O(1).</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #408080; -webkit-text-stroke: 0px #408080} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Is there a range of inputs?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">0 &lt;= item &lt;= 100</span></li> </ul> <li class=""li2""><span class=""s1"">Should mean return a float?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Should the other results return an int?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If there are multiple modes, what do we return?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Any of the modes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">[] -&gt; ValueError</span></li> <li class=""li2""><span class=""s1"">[5, 2, 7, 9, 9, 2, 9, 4, 3, 3, 2]</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">max: 9</span></li> <li class=""li2""><span class=""s1"">min: 2</span></li> <li class=""li2""><span class=""s1"">mean: 55</span></li> <li class=""li2""><span class=""s1"">mode: 9 or 2</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">We'll init our max and min to None. Alternatively, we can init them to -sys.maxsize and sys.maxsize, respectively.</span></li> <li class=""li2""><span class=""s1"">For mean, we'll keep track of the number of items we have inserted so far, as well as the running sum.</span></li> <li class=""li2""><span class=""s1"">For mode, we'll keep track of the current mode and an array with the size of the given upper limit</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Each element in the array will be init to 0</span></li> <li class=""li2""><span class=""s1"">Each time we insert, we'll increment the element corresponding to the inserted item's value</span></li> </ul> <li class=""li2""><span class=""s1"">On each insert:</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Update the max and min</span></li> <li class=""li2""><span class=""s1"">Update the mean by calculating running_sum / num_items</span></li> <li class=""li2""><span class=""s1"">Update the mode by comparing the mode array's value with the current mode</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1), we are treating the 101 element array as a constant O(1), we could also see this as O(k)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s3""><b>from</b></span><span class=""s1""> __future__ </span><span class=""s3""><b>import</b></span><span class=""s1""> division</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Solution</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">__init__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, upper_limit=</span><span class=""s7"">100</span><span class=""s1"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.</span><span class=""s3"">max</span><span class=""s1""> = </span><span class=""s3""><b>None</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.</span><span class=""s3"">min</span><span class=""s1""> = </span><span class=""s3""><b>None</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><i># Mean</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.num_items = </span><span class=""s7"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.running_sum = </span><span class=""s7"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.mean = </span><span class=""s3""><b>None</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><i># Mode</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.array = [</span><span class=""s7"">0</span><span class=""s1"">] </span><span class=""s9""><b>*</b></span><span class=""s1""> (upper_limit&nbsp;</span><span class=""s9""><b>+&nbsp;</b></span><span class=""s7"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.mode_ocurrences = </span><span class=""s7"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.mode = </span><span class=""s3""><b>None</b></span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">insert</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, val):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> val </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s10"">'val cannot be None'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.</span><span class=""s3"">max</span><span class=""s1""> </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> val </span><span class=""s9""><b>&gt;</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.</span><span class=""s3"">max</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.</span><span class=""s3"">max</span><span class=""s1""> = val</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.</span><span class=""s3"">min</span><span class=""s1""> </span><span class=""s3""><b>is</b></span><span class=""s1""> </span><span class=""s3""><b>None</b></span><span class=""s1""> </span><span class=""s3""><b>or</b></span><span class=""s1""> val </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.</span><span class=""s3"">min</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.</span><span class=""s3"">min</span><span class=""s1""> = val</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Calculate the mean</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.num_items += </span><span class=""s7"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.running_sum += val</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.mean = </span><span class=""s6"">self</span><span class=""s1"">.running_sum </span><span class=""s9""><b>/</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.num_items</span></p> <p class=""p8""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Calculate the mode</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.array[val] += </span><span class=""s7"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3""><b>if</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.array[val] </span><span class=""s9""><b>&gt;</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.mode_ocurrences:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.mode_ocurrences = </span><span class=""s6"">self</span><span class=""s1"">.array[val]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.mode = val</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_math_ops.py</span></p> <p class=""p6""><span class=""s3""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s3""><b>import</b></span><span class=""s1""> assert_equal, assert_true, assert_raises</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestMathOps</span><span class=""s4"">(</span><span class=""s3"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s3""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_math_ops</span><span class=""s4"">(</span><span class=""s6"">self</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.insert, </span><span class=""s3""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">5</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">7</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">9</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">9</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">9</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">4</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">3</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.insert(</span><span class=""s7"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.</span><span class=""s3"">max</span><span class=""s1"">, </span><span class=""s7"">9</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.</span><span class=""s3"">min</span><span class=""s1"">, </span><span class=""s7"">2</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.mean, </span><span class=""s7"">5</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_true(solution.mode </span><span class=""s3""><b>in</b></span><span class=""s1""> (</span><span class=""s7"">2</span><span class=""s1"">, </span><span class=""s7"">9</span><span class=""s1"">))</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s3"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_math_ops'</span><span class=""s4"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s3""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestMathOps()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_math_ops()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s3""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Given a list of stock prices, find the max profit from 1 buy and 1 sell.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">Are all prices positive ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output an int?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If profit is negative, do we return the smallest negative loss?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If there are less than two prices, what do we return?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Exception</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul><p class=""p3""><span class=""s1""></span><br></p><p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">Zero or one price -&gt; ValueError</span></li> <li class=""li2""><span class=""s1"">No profit</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">[8, 5, 3, 2, 1] -&gt; -1</span></li> </ul> <li class=""li2""><span class=""s1"">General case</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">[5, 3, 7, 4, 2, 6, 9] -&gt; 7</span></li> </ul> </ul><p class=""p3""><span class=""s1""></span><br></p><p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p><p class=""p2""><span class=""s1"">We'll use a greedy approach and iterate through the prices once.</span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">Loop through the prices</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Update current profit (price = min_price)</span></li> <li class=""li2""><span class=""s1"">Update the min price</span></li> <li class=""li2""><span class=""s1"">Update the max profit</span></li> </ul> <li class=""li2""><span class=""s1"">Return max profit</span></li> </ul><p class=""p2""><span class=""s1"">Complexity:</span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul><p class=""p3""><span class=""s1""></span><br></p><p class=""p1""><span class=""s1""><b>Code</b></span></p><p class=""p5""><span class=""s1""></span><br></p><p class=""p5""><span class=""s1""></span><br></p><p class=""p5""><span class=""s1""></span><br></p><p class=""p5""><span class=""s1""></span><br></p><p class=""p6""><span class=""s1"">&nbsp;</span></p><p class=""p7""><span class=""s1""><b>import</b></span><span class=""s3""> sys</span></p><p class=""p6""><span class=""s1"">​</span></p><p class=""p6""><span class=""s1"">​</span></p><p class=""p7""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p><p class=""p6""><span class=""s1"">​</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">find_max_profit</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, prices):</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> prices </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'prices cannot be None'</span><span class=""s1"">)</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5"">len</span><span class=""s1"">(prices) </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s9"">2</span><span class=""s1"">:</span></p><p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> ValueError(</span><span class=""s1"">'prices must have at least two values'</span><span class=""s3"">)</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; min_price = prices[</span><span class=""s9"">0</span><span class=""s1"">]</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_profit = </span><span class=""s8""><b>-</b></span><span class=""s1"">sys.maxsize</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> index, price </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">enumerate</span><span class=""s1"">(prices):</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> index </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>continue</b></span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; profit = price </span><span class=""s8""><b>-</b></span><span class=""s1""> min_price</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_price = </span><span class=""s5"">min</span><span class=""s1"">(price, min_price)</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_profit = </span><span class=""s5"">max</span><span class=""s1"">(profit, max_profit)</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> max_profit</span></p><p class=""p5""><span class=""s1""></span><br></p><p class=""p5""><span class=""s1""></span><br></p><p class=""p3""><span class=""s1""></span><br></p><p class=""p1""><span class=""s1""><b>Unit Test</b></span></p><p class=""p5""><span class=""s1""></span><br></p><p class=""p5""><span class=""s1""></span><br></p><p class=""p5""><span class=""s1""></span><br></p><p class=""p5""><span class=""s1""></span><br></p><p class=""p6""><span class=""s1"">&nbsp;</span></p><p class=""p6""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_max_profit.py</span></p><p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p><p class=""p6""><span class=""s1"">​</span></p><p class=""p6""><span class=""s1"">​</span></p><p class=""p9""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestMaxProfit</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p><p class=""p6""><span class=""s1"">​</span></p><p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_max_profit</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.find_max_profit, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(ValueError, solution.find_max_profit, [])</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.find_max_profit([</span><span class=""s9"">8</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">]), </span><span class=""s8""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">)</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.find_max_profit([</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">, </span><span class=""s9"">9</span><span class=""s1"">]), </span><span class=""s9"">7</span><span class=""s1"">)</span></p><p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_max_profit'</span><span class=""s3"">)</span></p><p class=""p6""><span class=""s1"">​</span></p><p class=""p6""><span class=""s1"">​</span></p><p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestMaxProfit()</span></p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_max_profit()</span></p><p class=""p6""><span class=""s1"">​</span></p><p class=""p6""><span class=""s1"">​</span></p><p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p><p class=""p1"">     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>                                                                        </p><p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} </style> <p class=""p1""><span class=""s1""><b>Problem: Given a list of tuples representing ranges, condense the ranges.</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Example: [(2, 3), (3, 5), (7, 9), (8, 10)] -&gt; [(2, 5), (7, 10)]</span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Are the tuples in sorted order?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Are the tuples ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Will all tuples have the first element less than the second?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is there an upper bound on the input range?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output a list of tuples?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output a new array?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No, check for None</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* None input -&gt; TypeError</span></p> <p class=""p4""><span class=""s1"">* [] - []</span></p> <p class=""p4""><span class=""s1"">* [(2, 3), (7, 9)] -&gt; [(2, 3), (7, 9)]</span></p> <p class=""p4""><span class=""s1"">* [(2, 3), (3, 5), (7, 9), (8, 10)] -&gt; [(2, 5), (7, 10)]</span></p> <p class=""p4""><span class=""s1"">* [(2, 3), (3, 5), (7, 9), (8, 10), (1, 11)] -&gt; [(1, 11)]</span></p> <p class=""p4""><span class=""s1"">* [(2, 3), (3, 8), (7, 9), (8, 10)] -&gt; [(2, 10)]</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Sort the tuples based on start time</span></li> <li class=""li2""><span class=""s1"">Check each adjacent tuple to see if they can be merged</span></li> </ul> <p class=""p4""><span class=""s1"">Case: * [(2, 3), (3, 8), (7, 9), (8, 10)] -&gt; [(2, 10)]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">* Sort by start time (already sorted)</span></p> <p class=""p4""><span class=""s1"">* Add the first tuple to the merged_array</span></p> <p class=""p4""><span class=""s1"">* Loop through each item in sorted_array starting at index 1</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; * If there is no overlap</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; * Add the current item to merged_array</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; * Else</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; * Update the last item in merged_array</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * The end time will be the max of merged_array[-1][1] and sorted_array[i][1]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Start:</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; 3</span></p> <p class=""p4""><span class=""s1"">sorted_array = [(2, 3), (3, 8), (7, 9), (8, 10)]</span></p> <p class=""p4""><span class=""s1"">merged_array = [(2, 3)]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Overlap with (2, 3), (3, 8):</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; 3</span></p> <p class=""p4""><span class=""s1"">sorted_array = [(2, 3), (3, 8), (7, 9), (8, 10)]</span></p> <p class=""p4""><span class=""s1"">merged_array = [(2, 8)]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Overlap with (2, 8), (7, 9):</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; 3</span></p> <p class=""p4""><span class=""s1"">sorted_array = [(2, 3), (3, 8), (7, 9), (8, 10)]</span></p> <p class=""p4""><span class=""s1"">merged_array = [(2, 9)]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Overlap with (2, 9) (8, 10):</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; 3</span></p> <p class=""p4""><span class=""s1"">sorted_array = [(2, 3), (3, 8), (7, 9), (8, 10)]</span></p> <p class=""p4""><span class=""s1"">merged_array = [(2, 10)]</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n log(n))</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">merge_ranges</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, array):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'array cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> array:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> array</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sorted_array = </span><span class=""s5"">sorted</span><span class=""s1"">(array)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; merged_array = [sorted_array[</span><span class=""s8"">0</span><span class=""s1"">]]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1"">&nbsp;index, item </span><span class=""s5""><b>in</b></span><span class=""s1"">&nbsp;enumerate(sorted_array)</span><span class=""s1"">:</span></p><p class=""p7""><span class=""s1""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style=""color: rgb(0, 128, 0);""><b>if</b></span>&nbsp;index == 0:</span></span></p><p class=""p7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue</p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start_prev, end_prev = merged_array[</span><span class=""s9""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start_curr, end_curr = item</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> end_prev </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> start_curr:</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># No overlap, add the entry</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; merged_array.append(item)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Overlap, update the previous entry's end value</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; merged_array[</span><span class=""s9""><b>-</b></span><span class=""s8"">1</span><span class=""s1"">] = (start_prev, </span><span class=""s5"">max</span><span class=""s1"">(end_prev, end_curr))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> merged_array</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_merge_ranges.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestMergeRanges</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_merge_ranges</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.merge_ranges, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.merge_ranges([]), [])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [(</span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">), (</span><span class=""s8"">7</span><span class=""s1"">, </span><span class=""s8"">9</span><span class=""s1"">)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [(</span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">), (</span><span class=""s8"">7</span><span class=""s1"">, </span><span class=""s8"">9</span><span class=""s1"">)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.merge_ranges(array), expected)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [(</span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">), (</span><span class=""s8"">3</span><span class=""s1"">, </span><span class=""s8"">5</span><span class=""s1"">), (</span><span class=""s8"">7</span><span class=""s1"">, </span><span class=""s8"">9</span><span class=""s1"">), (</span><span class=""s8"">8</span><span class=""s1"">, </span><span class=""s8"">10</span><span class=""s1"">)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [(</span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">5</span><span class=""s1"">), (</span><span class=""s8"">7</span><span class=""s1"">, </span><span class=""s8"">10</span><span class=""s1"">)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.merge_ranges(array), expected)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [(</span><span class=""s8"">2</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">), (</span><span class=""s8"">3</span><span class=""s1"">, </span><span class=""s8"">5</span><span class=""s1"">), (</span><span class=""s8"">7</span><span class=""s1"">, </span><span class=""s8"">9</span><span class=""s1"">), (</span><span class=""s8"">8</span><span class=""s1"">, </span><span class=""s8"">10</span><span class=""s1"">), (</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">11</span><span class=""s1"">)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [(</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">11</span><span class=""s1"">)]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.merge_ranges(array), expected)</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_merge_ranges'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestMergeRanges()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_merge_ranges()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Given a list of ints, find the products of every other int for each index.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we use division?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output a list of ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* None -&gt; TypeError</span></p> <p class=""p4""><span class=""s1"">* [] -&gt; []</span></p> <p class=""p4""><span class=""s1"">* [0] -&gt; []</span></p> <p class=""p4""><span class=""s1"">* [0, 1] -&gt; [1, 0]</span></p> <p class=""p4""><span class=""s1"">* [0, 1, 2] -&gt; [2, 0, 0]</span></p> <p class=""p4""><span class=""s1"">* [1, 2, 3, 4] -&gt; [24, 12, 8, 6]</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p5""><span class=""s1""><b><br /></b></span></p><p class=""p5""><span class=""s1""><b>Brute force:</b></span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">sum = 1</span></p> <p class=""p4""><span class=""s1"">&nbsp;|</span></p> <p class=""p4""><span class=""s1"">[1, 2, 3, 4]</span></p> <p class=""p4""><span class=""s1"">&nbsp;^</span></p> <p class=""p4""><span class=""s1"">skip if both pointers are pointing to the same spot</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">[1, 2, 3, 4]</span></p> <p class=""p4""><span class=""s1"">&nbsp;^</span></p> <p class=""p4""><span class=""s1"">sum *= 2</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">[1, 2, 3, 4]</span></p> <p class=""p4""><span class=""s1"">&nbsp;^</span></p> <p class=""p4""><span class=""s1"">sum *= 3</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">[1, 2, 3, 4]</span></p> <p class=""p4""><span class=""s1"">&nbsp;^</span></p> <p class=""p4""><span class=""s1"">sum *= 4</span></p> <p class=""p4""><span class=""s1"">results.append(sum)</span></p> <p class=""p4""><span class=""s1"">results = [24]</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">repeat for every element in the input list to obtain:</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">[24, 12, 8, 6]</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n^2)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p5""><span class=""s1""><b>Greedy</b></span></p><p class=""p5""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">input&nbsp; = [1, 2, 3, 4]</span></p> <p class=""p4""><span class=""s1"">result = [2*3*4, 1*3*4, 1*2*4, 1*2*3]</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Note we are duplicating multiplications with the brute force approach.</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">We'll calculate all products before an index, and all products after an index.</span></p> <p class=""p4""><span class=""s1"">We'll then multiple these two together to form the result.</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">input&nbsp; = [1, &nbsp; &nbsp; &nbsp; &nbsp; 2, &nbsp; &nbsp; 3, &nbsp; &nbsp; 4]</span></p> <p class=""p4""><span class=""s1"">before = [1, &nbsp; &nbsp; &nbsp; &nbsp; 1, &nbsp; 1*2, 1*2*3]</span></p> <p class=""p4""><span class=""s1"">after&nbsp; = [2*3*4, 1*3*4, 1*2*4, &nbsp; &nbsp; 1]</span></p> <p class=""p4""><span class=""s1"">result = [ &nbsp; 24,&nbsp; &nbsp; 12, &nbsp; &nbsp; 8, &nbsp; &nbsp; 6]&nbsp;</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">mult_other_numbers_brute</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">, array):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'array cannot be None'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> array:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> array</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5"">len</span><span class=""s1"">(array) </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">1</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> []</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = []</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> i </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s5"">len</span><span class=""s1"">(array)):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_sum = </span><span class=""s9"">1</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> j </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s5"">len</span><span class=""s1"">(array)):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> i </span><span class=""s8""><b>==</b></span><span class=""s1""> j:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>continue</b></span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_sum *= array[j]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result.append(curr_sum)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> result</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">mult_other_numbers</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">, array):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'array cannot be None'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> array:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> array</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5"">len</span><span class=""s1"">(array) </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">1</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> []</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = [</span><span class=""s5""><b>None</b></span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> </span><span class=""s5"">len</span><span class=""s1"">(array)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_product = </span><span class=""s9"">1</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> i </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s5"">len</span><span class=""s1"">(array)):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result[i] = curr_product</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_product *= array[i]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_product = </span><span class=""s9"">1</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> i </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s5"">len</span><span class=""s1"">(array))[::</span><span class=""s8""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">]:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result[i] *= curr_product</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_product *= array[i]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> result</span></p><p class=""p8""><span class=""s1""><br /></span></p><p class=""p8""><span class=""s1""></span></p><p class=""p8""><br /></p><p class=""p8""><b><br /></b></p><p class=""p8""><b></b></p><p class=""p1"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 22px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b><br /></b></span></p><p class=""p1"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 22px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b>Unit Test</b></span></p><p class=""p6"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p8""><br /></p><p class=""p8"">%%writefile test_prod_three.py</p><p class=""p8"">from nose.tools import assert_equal, assert_raises</p><p class=""p8"">​</p><p class=""p8"">​</p><p class=""p8"">class TestProdThree(object):</p><p class=""p8"">​</p><p class=""p8"">&nbsp; &nbsp; def test_prod_three(self):</p><p class=""p8"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</p><p class=""p8"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.max_prod_three, None)</p><p class=""p8"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(ValueError, solution.max_prod_three, [1, 2])</p><p class=""p8"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.max_prod_three([5, -2, 3]), -30)</p><p class=""p8"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.max_prod_three([5, -2, 3, 1, -1, 4]), 60)</p><p class=""p8"">&nbsp; &nbsp; &nbsp; &nbsp; print('Success: test_prod_three')</p><p class=""p8"">​</p><p class=""p8"">​</p><p class=""p8"">def main():</p><p class=""p8"">&nbsp; &nbsp; test = TestProdThree()</p><p class=""p8"">&nbsp; &nbsp; test.test_prod_three()</p><p class=""p8"">​</p><p class=""p8"">​</p><p class=""p8"">if __name__ == '__main__':</p><p class=""p8"">&nbsp; &nbsp; main()</p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Find the highest product of three numbers in a list.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the input a list of integers?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we get negative inputs?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can there be duplicate entires in the input?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Will there always be at least three integers?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No, check for None input</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">Less than three ints -&gt; ValueError</span></li> <li class=""li2""><span class=""s1"">[5, -2, 3] -&gt; -30</span></li> <li class=""li2""><span class=""s1"">[5, -2, 3, 1, -1, 4] -&gt; 60</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p4""><span class=""s1""><b><br /></b></span></p><p class=""p4""><span class=""s1""><b>Brute force:</b></span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Use three loops and multiple each numbers.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n^3)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Sorting:</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">Sort the list, multiply the last three elements.</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n log(n))</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Greedy:</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">&nbsp;0 &nbsp; 1&nbsp; 2&nbsp; 3 &nbsp; 4&nbsp; 5</span></p> <p class=""p5""><span class=""s1"">[5, -2, 3, 1, -1, 4] -&gt; 60</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">max_prod_of_three = -30</span></p> <p class=""p5""><span class=""s1"">max_prod_of_two = -10</span></p> <p class=""p5""><span class=""s1"">max_num = 5</span></p> <p class=""p5""><span class=""s1"">min_prod_of_two = -10</span></p> <p class=""p5""><span class=""s1"">min_num = -2</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">&nbsp;0 &nbsp; 1&nbsp; 2&nbsp; 3 &nbsp; 4&nbsp; 5</span></p> <p class=""p5""><span class=""s1"">[5, -2, 3, 1, -1, 4] -&gt; 60</span></p> <p class=""p5""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p5""><span class=""s1"">max_prod_of_three = -30</span></p> <p class=""p5""><span class=""s1"">max_prod_of_two = 15</span></p> <p class=""p5""><span class=""s1"">max_num = 5</span></p> <p class=""p5""><span class=""s1"">min_prod_of_two = -10</span></p> <p class=""p5""><span class=""s1"">min_num = -2</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">&nbsp;0 &nbsp; 1&nbsp; 2&nbsp; 3 &nbsp; 4&nbsp; 5</span></p> <p class=""p5""><span class=""s1"">[5, -2, 3, 1, -1, 4] -&gt; 60</span></p> <p class=""p5""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p5""><span class=""s1"">max_prod_of_three = 15</span></p> <p class=""p5""><span class=""s1"">max_prod_of_two = 15</span></p> <p class=""p5""><span class=""s1"">max_num = 5</span></p> <p class=""p5""><span class=""s1"">min_prod_of_two = -10</span></p> <p class=""p5""><span class=""s1"">min_num = -2</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">&nbsp;0 &nbsp; 1&nbsp; 2&nbsp; 3 &nbsp; 4&nbsp; 5</span></p> <p class=""p5""><span class=""s1"">[5, -2, 3, 1, -1, 4] -&gt; 60</span></p> <p class=""p5""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p5""><span class=""s1"">max_prod_of_three = 15</span></p> <p class=""p5""><span class=""s1"">max_prod_of_two = 15</span></p> <p class=""p5""><span class=""s1"">max_num = 5</span></p> <p class=""p5""><span class=""s1"">min_prod_of_two = -10</span></p> <p class=""p5""><span class=""s1"">min_num = -2</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">&nbsp;0 &nbsp; 1&nbsp; 2&nbsp; 3 &nbsp; 4&nbsp; 5</span></p> <p class=""p5""><span class=""s1"">[5, -2, 3, 1, -1, 4] -&gt; 60</span></p> <p class=""p5""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p5""><span class=""s1"">max_prod_of_three = 60</span></p> <p class=""p5""><span class=""s1"">max_prod_of_two = 15</span></p> <p class=""p5""><span class=""s1"">max_num = 5</span></p> <p class=""p5""><span class=""s1"">min_prod_of_two = -10</span></p> <p class=""p5""><span class=""s1"">min_num = -2</span></p><p class=""p5""><span class=""s1""><br /></span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">max_prod_three_nlogn</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">, array):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'array cannot be None'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5"">len</span><span class=""s1"">(array) </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s9"">3</span><span class=""s1"">:</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> ValueError(</span><span class=""s1"">'array must have 3 or more ints'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array.sort()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; product = </span><span class=""s9"">1</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> item </span><span class=""s5""><b>in</b></span><span class=""s1""> array[</span><span class=""s8""><b>-</b></span><span class=""s9"">3</span><span class=""s1"">:]:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; product *= item</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> product</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">max_prod_three</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, array):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> array </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'array cannot be None'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5"">len</span><span class=""s1"">(array) </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s9"">3</span><span class=""s1"">:</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> ValueError(</span><span class=""s1"">'array must have 3 or more ints'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_max_prod_three = array[</span><span class=""s9"">0</span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> array[</span><span class=""s9"">1</span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> array[</span><span class=""s9"">2</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_prod_two = array[</span><span class=""s9"">0</span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> array[</span><span class=""s9"">1</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; min_prod_two = array[</span><span class=""s9"">0</span><span class=""s1"">] </span><span class=""s8""><b>*</b></span><span class=""s1""> array[</span><span class=""s9"">1</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_num = </span><span class=""s5"">max</span><span class=""s1"">(array[</span><span class=""s9"">0</span><span class=""s1"">], array[</span><span class=""s9"">1</span><span class=""s1"">])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; min_num = </span><span class=""s5"">min</span><span class=""s1"">(array[</span><span class=""s9"">0</span><span class=""s1"">], array[</span><span class=""s9"">1</span><span class=""s1"">])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> i </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s5"">len</span><span class=""s1"">(array)):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_max_prod_three = </span><span class=""s5"">max</span><span class=""s1"">(curr_max_prod_three,</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_prod_two&nbsp;</span><span class=""s8""><b>*&nbsp;</b></span><span class=""s1"">array[i],</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_prod_two&nbsp;</span><span class=""s8""><b>*&nbsp;</b></span><span class=""s1"">array[i])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_prod_two = </span><span class=""s5"">max</span><span class=""s1"">(max_prod_two,</span></p> <p class=""p8""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_num&nbsp;</span><span class=""s8""><b>*&nbsp;</b></span><span class=""s1"">array[i],</span></p> <p class=""p8""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_num&nbsp;</span><span class=""s8""><b>*&nbsp;</b></span><span class=""s1"">array[i])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_prod_two = </span><span class=""s5"">min</span><span class=""s1"">(min_prod_two,</span></p> <p class=""p8""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_num&nbsp;</span><span class=""s8""><b>*&nbsp;</b></span><span class=""s1"">array[i],</span></p> <p class=""p8""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_num&nbsp;</span><span class=""s8""><b>*&nbsp;</b></span><span class=""s1"">array[i])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_num = </span><span class=""s5"">max</span><span class=""s1"">(max_num, array[i])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min_num = </span><span class=""s5"">min</span><span class=""s1"">(min_num, array[i])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> curr_max_prod_three</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_prod_three.py</span></p> <p class=""p8""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestProdThree</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_prod_three</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.max_prod_three, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(ValueError, solution.max_prod_three, [</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.max_prod_three([</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">]), </span><span class=""s8""><b>-</b></span><span class=""s9"">30</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.max_prod_three([</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">]), </span><span class=""s9"">60</span><span class=""s1"">)</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_prod_three'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test = TestProdThree()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_prod_three()</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Given a positive integer, get the next largest number and the next smallest number with the same number of 1's as the given number.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #000080; -webkit-text-stroke: #000080; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #000080; -webkit-text-stroke: #000080} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; min-height: 17.0px} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080} p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none; background-color: #ffffff} span.s2 {font-kerning: none; color: #337ab7; background-color: #ffffff; -webkit-text-stroke: 0px #337ab7} span.s3 {background-color: #ffffff} span.s4 {font-kerning: none} span.s5 {font: 14.0px 'Helvetica Neue'} span.s6 {font: 14.0px 'Helvetica Neue'; font-kerning: none} span.s7 {font-kerning: none; background-color: #f7f7f7} span.s8 {font-kerning: none; color: #000000; background-color: #f7f7f7; -webkit-text-stroke: 0px #000000} span.s9 {font-kerning: none; color: #0000ff; background-color: #f7f7f7; -webkit-text-stroke: 0px #0000ff} span.s10 {font-kerning: none; color: #008000; background-color: #f7f7f7; -webkit-text-stroke: 0px #008000} span.s11 {font-kerning: none; color: #1a1a1a; background-color: #f7f7f7; -webkit-text-stroke: 0px #1a1a1a} span.s12 {font-kerning: none; color: #ba2121; background-color: #f7f7f7; -webkit-text-stroke: 0px #ba2121} span.s13 {font-kerning: none; color: #aa22ff; background-color: #f7f7f7; -webkit-text-stroke: 0px #aa22ff} span.s14 {font-kerning: none; color: #008800; background-color: #f7f7f7; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Is the output a positive int?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s3""></span><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s3""></span><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">0 -&gt; Exception</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">negative int -&gt; Exception</span></li> <li class=""li4""><span class=""s5""></span><span class=""s6"">General case:</span><span class=""s4"">&nbsp;&nbsp;</span></li><li class=""li4""><span class=""s4"">&nbsp; * Input: &nbsp; &nbsp; &nbsp; &nbsp; 0000 0000 1101 0111</span></li> <li class=""li4""><span class=""s4"">&nbsp; * Next largest:&nbsp; 0000 0000 1101 1011</span></li> <li class=""li4""><span class=""s4"">&nbsp; * Next smallest: 0000 0000 1100 1111</span></li> <li class=""li2""></li> </ul> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p5""><span class=""s1""><b><br></b></span></p><p class=""p5""><span class=""s1""><b>get_next_largest</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Find the right-most non trailing zero, call this index</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">We'll use a mask of 1 and do a logical right shift on a copy of num to examine each bit starting from the right</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">Count the number of zeroes to the right of index</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s3""></span><span class=""s1"">While num &amp; 1 == 0 and num_copy != 0:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Increment number of zeroes</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">Logical shift right num_copy</span></li> </ul> </ul> <li class=""li2""><span class=""s3""></span><span class=""s1"">Count the number of ones to the right of index</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s3""></span><span class=""s1"">While num &amp; 1 == 1 and num_copy != 0:</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Increment number of ones</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">Logical shift right num_copy</span></li> </ul> </ul> <li class=""li2""><span class=""s3""></span><span class=""s1"">The index will be the sum of number of ones and number of zeroes</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">Set the index bit</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">Clear all bits to the right of index</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">Set bits starting from 0</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Only set (number of ones - 1) bits because we set index to 1</span></li> </ul> </ul> </ul> <p class=""p2""><span class=""s1"">We should make a note that Python does not have a logical right shift operator built in. We can either use a positive number of implement one for a 32 bit number:</span></p><p class=""p2""><span class=""s1""><br></span></p> <p class=""p4""><span class=""s4"">num % 0x100000000 &gt;&gt; n</span></p> <p class=""p5""><span class=""s1""><b><br></b></span></p><p class=""p5""><span class=""s1""><b>get_next_smallest</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s1"">The algorithm for finding the next smallest number is very similar to finding the next largest number</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Instead of finding the right-most non-trailing zero, we'll find the right most non-trailing one and clear it</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">Clear all bits to the right of index</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">Set bits starting at 0 to the number of ones to the right of index, plus one</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Time: O(b), where b is the number of bits in num</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">Space: O(b), where b is the number of bits in num</span></li> </ul> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p7""><span class=""s4""></span><br></p> <p class=""p7""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s7"">&nbsp;</span></p> <p class=""p9""><span class=""s7""><b>class</b></span><span class=""s8""> </span><span class=""s9"">Bits</span><span class=""s8"">(</span><span class=""s7"">object</span><span class=""s8"">):</span></p> <p class=""p8""><span class=""s7"">​</span></p> <p class=""p10""><span class=""s8"">&nbsp; &nbsp; </span><span class=""s10""><b>def</b></span><span class=""s8""> </span><span class=""s7"">get_next_largest</span><span class=""s8"">(</span><span class=""s11"">self</span><span class=""s8"">, num):</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>if</b></span><span class=""s7""> num </span><span class=""s10""><b>is</b></span><span class=""s7""> </span><span class=""s10""><b>None</b></span><span class=""s7"">:</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>raise</b></span><span class=""s7""> TypeError(</span><span class=""s12"">'num cannot be None'</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>if</b></span><span class=""s7""> num </span><span class=""s13""><b>&lt;=</b></span><span class=""s7""> </span><span class=""s14"">0</span><span class=""s7"">:</span></p> <p class=""p11""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>raise</b></span><span class=""s8""> ValueError(</span><span class=""s7"">'num cannot be 0 or negative'</span><span class=""s8"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num_ones = </span><span class=""s14"">0</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num_zeroes = </span><span class=""s14"">0</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num_copy = num</span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># We'll look for index, which is the right-most non-trailing zero</i></span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># Count number of zeroes to the right of index</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>while</b></span><span class=""s7""> num_copy </span><span class=""s13""><b>!=</b></span><span class=""s7""> </span><span class=""s14"">0</span><span class=""s7""> </span><span class=""s10""><b>and</b></span><span class=""s7""> num_copy </span><span class=""s13""><b>&amp;</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7""> </span><span class=""s13""><b>==</b></span><span class=""s7""> </span><span class=""s14"">0</span><span class=""s7"">:</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_zeroes += </span><span class=""s14"">1</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_copy &gt;&gt;= </span><span class=""s14"">1</span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># Count number of ones to the right of index</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>while</b></span><span class=""s7""> num_copy </span><span class=""s13""><b>!=</b></span><span class=""s7""> </span><span class=""s14"">0</span><span class=""s7""> </span><span class=""s10""><b>and</b></span><span class=""s7""> num_copy </span><span class=""s13""><b>&amp;</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7""> </span><span class=""s13""><b>==</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7"">:</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_ones += </span><span class=""s14"">1</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_copy &gt;&gt;= </span><span class=""s14"">1</span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># Determine index and set the bit</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; index = num_zeroes </span><span class=""s13""><b>+</b></span><span class=""s7""> num_ones</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num |= </span><span class=""s14"">1</span><span class=""s7""> </span><span class=""s13""><b>&lt;&lt;</b></span><span class=""s7""> index</span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># Clear all bits to the right of index</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num &amp;= </span><span class=""s13""><b>~</b></span><span class=""s7"">((</span><span class=""s14"">1</span><span class=""s7""> </span><span class=""s13""><b>&lt;&lt;</b></span><span class=""s7""> index) </span><span class=""s13""><b>-</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7"">)</span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># Set bits starting from 0</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num |= ((</span><span class=""s14"">1</span><span class=""s7""> </span><span class=""s13""><b>&lt;&lt;</b></span><span class=""s7""> num_ones </span><span class=""s13""><b>-</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7"">) </span><span class=""s13""><b>-</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>return</b></span><span class=""s7""> num</span></p> <p class=""p8""><span class=""s7"">​</span></p> <p class=""p10""><span class=""s8"">&nbsp; &nbsp; </span><span class=""s10""><b>def</b></span><span class=""s8""> </span><span class=""s7"">get_next_smallest</span><span class=""s8"">(</span><span class=""s11"">self</span><span class=""s8"">, num):</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>if</b></span><span class=""s7""> num </span><span class=""s10""><b>is</b></span><span class=""s7""> </span><span class=""s10""><b>None</b></span><span class=""s7"">:</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>raise</b></span><span class=""s7""> TypeError(</span><span class=""s12"">'num cannot be None'</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>if</b></span><span class=""s7""> num </span><span class=""s13""><b>&lt;=</b></span><span class=""s7""> </span><span class=""s14"">0</span><span class=""s7"">:</span></p> <p class=""p11""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>raise</b></span><span class=""s8""> ValueError(</span><span class=""s7"">'num cannot be 0 or negative'</span><span class=""s8"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num_ones = </span><span class=""s14"">0</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num_zeroes = </span><span class=""s14"">0</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num_copy = num</span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># We'll look for index, which is the right-most non-trailing one</i></span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># Count number of zeroes to the right of index</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>while</b></span><span class=""s7""> num_copy </span><span class=""s13""><b>!=</b></span><span class=""s7""> </span><span class=""s14"">0</span><span class=""s7""> </span><span class=""s10""><b>and</b></span><span class=""s7""> num_copy </span><span class=""s13""><b>&amp;</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7""> </span><span class=""s13""><b>==</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7"">:</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_ones += </span><span class=""s14"">1</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_copy &gt;&gt;= </span><span class=""s14"">1</span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># Count number of zeroes to the right of index</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>while</b></span><span class=""s7""> num_copy </span><span class=""s13""><b>!=</b></span><span class=""s7""> </span><span class=""s14"">0</span><span class=""s7""> </span><span class=""s10""><b>and</b></span><span class=""s7""> num_copy </span><span class=""s13""><b>&amp;</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7""> </span><span class=""s13""><b>==</b></span><span class=""s7""> </span><span class=""s14"">0</span><span class=""s7"">:</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_zeroes += </span><span class=""s14"">1</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_copy &gt;&gt;= </span><span class=""s14"">1</span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># Determine index and clear the bit</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; index = num_zeroes </span><span class=""s13""><b>+</b></span><span class=""s7""> num_ones</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num &amp;= </span><span class=""s13""><b>~</b></span><span class=""s7"">(</span><span class=""s14"">1</span><span class=""s7""> </span><span class=""s13""><b>&lt;&lt;</b></span><span class=""s7""> index)</span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># Clear all bits to the right of index</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num &amp;= </span><span class=""s13""><b>~</b></span><span class=""s7"">((</span><span class=""s14"">1</span><span class=""s7""> </span><span class=""s13""><b>&lt;&lt;</b></span><span class=""s7""> index) </span><span class=""s13""><b>-</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7"">)</span></p> <p class=""p12""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><i># Set bits starting from 0</i></span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num |= (</span><span class=""s14"">1</span><span class=""s7""> </span><span class=""s13""><b>&lt;&lt;</b></span><span class=""s7""> num_ones </span><span class=""s13""><b>+</b></span><span class=""s7""> </span><span class=""s14"">1</span><span class=""s7"">) </span><span class=""s13""><b>-</b></span><span class=""s7""> </span><span class=""s14"">1</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><b>return</b></span><span class=""s7""> num</span></p> <p class=""p7""><span class=""s4""></span><br></p> <p class=""p7""><span class=""s4""></span><br></p> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p7""><span class=""s4""></span><br></p> <p class=""p7""><span class=""s4""></span><br></p> <p class=""p7""><span class=""s4""></span><br></p> <p class=""p7""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s7"">&nbsp;</span></p> <p class=""p8""><span class=""s13""><b>%%</b></span><span class=""s7"">writefile test_get_next_largest.py</span></p> <p class=""p8""><span class=""s10""><b>from</b></span><span class=""s7""> nose.tools </span><span class=""s10""><b>import</b></span><span class=""s7""> assert_equal, assert_raises</span></p> <p class=""p8""><span class=""s7"">​</span></p> <p class=""p8""><span class=""s7"">​</span></p> <p class=""p9""><span class=""s7""><b>class</b></span><span class=""s8""> </span><span class=""s9"">TestBits</span><span class=""s8"">(</span><span class=""s7"">object</span><span class=""s8"">):</span></p> <p class=""p8""><span class=""s7"">​</span></p> <p class=""p10""><span class=""s8"">&nbsp; &nbsp; </span><span class=""s10""><b>def</b></span><span class=""s8""> </span><span class=""s7"">test_get_next_largest</span><span class=""s8"">(</span><span class=""s11"">self</span><span class=""s8"">):</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; bits = Bits()</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(Exception, bits.get_next_largest, </span><span class=""s10""><b>None</b></span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(Exception, bits.get_next_largest, </span><span class=""s14"">0</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(Exception, bits.get_next_largest, </span><span class=""s13""><b>-</b></span><span class=""s14"">1</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num = </span><span class=""s10"">int</span><span class=""s7"">(</span><span class=""s12"">'011010111'</span><span class=""s7"">, base=</span><span class=""s14"">2</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s10"">int</span><span class=""s7"">(</span><span class=""s12"">'011011011'</span><span class=""s7"">, base=</span><span class=""s14"">2</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.get_next_largest(num), expected)</span></p> <p class=""p11""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">print</span><span class=""s8"">(</span><span class=""s7"">'Success: test_get_next_largest'</span><span class=""s8"">)</span></p> <p class=""p8""><span class=""s7"">​</span></p> <p class=""p10""><span class=""s8"">&nbsp; &nbsp; </span><span class=""s10""><b>def</b></span><span class=""s8""> </span><span class=""s7"">test_get_next_smallest</span><span class=""s8"">(</span><span class=""s11"">self</span><span class=""s8"">):</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; bits = Bits()</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(Exception, bits.get_next_smallest, </span><span class=""s10""><b>None</b></span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(Exception, bits.get_next_smallest, </span><span class=""s14"">0</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(Exception, bits.get_next_smallest, </span><span class=""s13""><b>-</b></span><span class=""s14"">1</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; num = </span><span class=""s10"">int</span><span class=""s7"">(</span><span class=""s12"">'011010111'</span><span class=""s7"">, base=</span><span class=""s14"">2</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s10"">int</span><span class=""s7"">(</span><span class=""s12"">'011001111'</span><span class=""s7"">, base=</span><span class=""s14"">2</span><span class=""s7"">)</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(bits.get_next_smallest(num), expected)</span></p> <p class=""p11""><span class=""s8"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10"">print</span><span class=""s8"">(</span><span class=""s7"">'Success: test_get_next_smallest'</span><span class=""s8"">)</span></p> <p class=""p8""><span class=""s7"">​</span></p> <p class=""p8""><span class=""s10""><b>def</b></span><span class=""s7""> </span><span class=""s9"">main</span><span class=""s7"">():</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; test = TestBits()</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; test.test_get_next_largest()</span></p> <p class=""p8""><span class=""s7"">&nbsp; &nbsp; test.test_get_next_smallest()</span></p> <p class=""p8""><span class=""s7"">​</span></p> <p class=""p8""><span class=""s7"">​</span></p> <p class=""p8""><span class=""s10""><b>if</b></span><span class=""s7""> __name__ </span><span class=""s13""><b>==</b></span><span class=""s7""> </span><span class=""s12"">'__main__'</span><span class=""s7"">:</span></p> <p class=""p13""><span class=""s4"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} </style> <p class=""p1""><span class=""s1""><b>Problem: Assign Cookies.</b></span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">See the <a href=""https://leetcode.com/problems/assign-cookies/""><span class=""s3"">LeetCode</span></a> problem page.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Assume you are an awesome parent and want to give your children some cookies. But, you should give each child at most one cookie. Each child i has a greed factor gi, which is the minimum size of a cookie that the child will be content with; and each cookie j has a size sj. If sj &gt;= gi, we can assign the cookie j to the child i, and the child i will be content. Your goal is to maximize the number of your content children and output the maximum number.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Note: You may assume the greed factor is always positive. You cannot assign more than one cookie to one child.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Example 1: Input: [1,2,3], [1,1]</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Output: 1</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Explanation: You have 3 children and 2 cookies. The greed factors of 3 children are 1, 2, 3. And even though you have 2 cookies, since their size is both 1, you could only make the child whose greed factor is 1 content. You need to output 1. Example 2: Input: [1,2], [1,2,3]</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Output: 2</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Explanation: You have 2 children and 3 cookies. The greed factors of 2 children are 1, 2. You have 3 cookies and their sizes are big enough to gratify all of the children, You need to output 2.</span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Are the inputs two list(int), one for greed factor and the other for cookie size?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are the inputs are sorted increasing order?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we change inputs themselves, or do we need to make a copy?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">You can change them</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output an int?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the greed factor always &gt;= 1?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No, check for None</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* None input -&gt; TypeError</span></p> <p class=""p4""><span class=""s1"">[1, 2, 3], [1, 1] -&gt; 1</span></p> <p class=""p4""><span class=""s1"">[1, 2], [1, 2, 3] -&gt; 2</span></p> <p class=""p4""><span class=""s1"">[7, 8, 9, 10], [5, 6, 7, 8] -&gt; 2</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Sort the inputs</span></li> <li class=""li2""><span class=""s1"">We'll keep an index to the current greed factor</span></li> <li class=""li2""><span class=""s1"">For each cookie</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Assign it to a child if its size &gt;= the child's greed factor</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Increment result counter</span></li> <li class=""li2""><span class=""s1"">Increment the index to the greed factor</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">Careful of this index going out of bounds</span></li> </ul> </ul> </ul> <li class=""li2""><span class=""s1"">Return the result counter</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n log n) for the sort</span></li> <li class=""li2""><span class=""s1"">Space: O(1), assuming the sort is in-place</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">find_content_children</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, greed_indices, cookie_sizes):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> greed_indices </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> cookie_sizes </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'greed_indices or cookie_sizes cannot be None'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> greed_indices </span><span class=""s5""><b>or</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> cookie_sizes:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s7"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; greed_indices.sort()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cookie_sizes.sort()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; greed_index = </span><span class=""s7"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_children = </span><span class=""s7"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> size </span><span class=""s5""><b>in</b></span><span class=""s1""> cookie_sizes:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> greed_index </span><span class=""s8""><b>&gt;=</b></span><span class=""s1""> </span><span class=""s5"">len</span><span class=""s1"">(greed_indices):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>break</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> size </span><span class=""s8""><b>&gt;=</b></span><span class=""s1""> greed_indices[greed_index]:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_children += </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; greed_index += </span><span class=""s7"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> num_children</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_assign_cookie.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestAssignCookie</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_assign_cookie</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.find_content_children, </span><span class=""s5""><b>None</b></span><span class=""s1"">, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.find_content_children([</span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s7"">2</span><span class=""s1"">, </span><span class=""s7"">3</span><span class=""s1"">],&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s7"">1</span><span class=""s1"">]), </span><span class=""s7"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.find_content_children([</span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s7"">2</span><span class=""s1"">],&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s7"">1</span><span class=""s1"">, </span><span class=""s7"">2</span><span class=""s1"">, </span><span class=""s7"">3</span><span class=""s1"">]), </span><span class=""s7"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.find_content_children([</span><span class=""s7"">7</span><span class=""s1"">, </span><span class=""s7"">8</span><span class=""s1"">, </span><span class=""s7"">9</span><span class=""s1"">, </span><span class=""s7"">10</span><span class=""s1"">],&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s7"">5</span><span class=""s1"">, </span><span class=""s7"">6</span><span class=""s1"">, </span><span class=""s7"">7</span><span class=""s1"">, </span><span class=""s7"">8</span><span class=""s1"">]), </span><span class=""s7"">2</span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_find_content_children'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestAssignCookie()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_assign_cookie()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the single different char between two strings.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the strings are ASCII?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is case important?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">The strings are lower case</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No, check for None</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul><p class=""p3""><span class=""s1""></span><br></p><p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">None input -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">'abcd', 'abcde' -&gt; 'e'</span></li> <li class=""li2""><span class=""s1"">'aaabbcdd', 'abdbacade' -&gt; 'e'</span></li> </ul><p class=""p3""><span class=""s1""></span><br></p><p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p><p class=""p4""><span class=""s1""><b>Dictionary</b></span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">Keep a dictionary of seen values in s</span></li> <li class=""li2""><span class=""s1"">Loop through t, decrementing the seen values</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the char is not there or if the decrement results in a negative value, return the char</span></li> </ul> </ul><p class=""p2""><span class=""s1"">Complexity:</span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(m+n), where m and n are the lengths of s, t</span></li> <li class=""li2""><span class=""s1"">Space: O(h), for the dict, where h is the unique chars in s</span></li> </ul><p class=""p4""><span class=""s1""><b>XOR</b></span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">XOR the two strings, which will isolate the differing char</span></li> </ul><p class=""p2""><span class=""s1"">Complexity:</span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(m+n), where m and n are the lengths of s, t</span></li> <li class=""li2""><span class=""s1"">Space: O(1), for the dict, where h is the unique chars in s</span></li> </ul><p class=""p3""><span class=""s1""></span><br></p><p class=""p1""><span class=""s1""><b>Code</b></span></p><p class=""p6""><span class=""s1""></span><br></p><p class=""p6""><span class=""s1""></span><br></p><p class=""p6""><span class=""s1""></span><br></p><p class=""p6""><span class=""s1""></span><br></p><p class=""p7""><span class=""s1"">&nbsp;</span></p><p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">find_diff</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, str1, str2):</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> str1 </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> str2 </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p><p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'str1 or str2 cannot be None'</span><span class=""s3"">)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; seen = {}</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> str1:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> seen:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; seen[char] += </span><span class=""s7"">1</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; seen[char] = </span><span class=""s7"">1</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> str2:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>try</b></span><span class=""s1"">:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; seen[char] -= </span><span class=""s7"">1</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>except</b></span><span class=""s1""> KeyError:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> char</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> seen[char] </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s7"">0</span><span class=""s1"">:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> char</span></p><p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s3""> </span><span class=""s1""><b>None</b></span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">find_diff_xor</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, str1, str2):</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> str1 </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> str2 </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p><p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'str1 or str2 cannot be None'</span><span class=""s3"">)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = </span><span class=""s7"">0</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> str1:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result ^= </span><span class=""s5"">ord</span><span class=""s1"">(char)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> str2:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result ^= </span><span class=""s5"">ord</span><span class=""s1"">(char)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5"">chr</span><span class=""s1"">(result)</span></p><p class=""p6""><span class=""s1""></span><br></p><p class=""p6""><span class=""s1""></span><br></p><p class=""p3""><span class=""s1""></span><br></p><p class=""p1""><span class=""s1""><b>Unit Test</b></span></p><p class=""p6""><span class=""s1""></span><br></p><p class=""p6""><span class=""s1""></span><br></p><p class=""p6""><span class=""s1""></span><br></p><p class=""p6""><span class=""s1""></span><br></p><p class=""p7""><span class=""s1"">&nbsp;</span></p><p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_str_diff.py</span></p><p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p10""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestFindDiff</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p10""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_find_diff</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.find_diff, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.find_diff(</span><span class=""s9"">'abcd'</span><span class=""s1"">, </span><span class=""s9"">'abcde'</span><span class=""s1"">), </span><span class=""s9"">'e'</span><span class=""s1"">)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.find_diff(</span><span class=""s9"">'aaabbcdd'</span><span class=""s1"">, </span><span class=""s9"">'abdbacade'</span><span class=""s1"">), </span><span class=""s9"">'e'</span><span class=""s1"">)</span></p><p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_find_diff'</span><span class=""s3"">)</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestFindDiff()</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_find_diff()</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p><p class=""p1"">     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>                                                                                     </p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} </style> <p class=""p1""><span class=""s1""><b>Problem: Island Perimeter.</b></span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">See the <a href=""https://leetcode.com/problems/island-perimeter/""><span class=""s3"">LeetCode</span></a> problem page.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">You are given a map in form of a two-dimensional integer grid where 1 represents land and 0 represents water. Grid cells are connected horizontally/vertically (not diagonally). The grid is completely surrounded by water, and there is exactly one island (i.e., one or more connected land cells). The island doesn't have ""lakes"" (water inside that isn't connected to the water around the island). One cell is a square with side length 1. The grid is rectangular, width and height don't exceed 100. Determine the perimeter of the island.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Example:</span></p> <p class=""p3""><span class=""s1""><br /></span></p><p class=""p3""><span class=""s1"">[[0,1,0,0],</span></p> <p class=""p3""><span class=""s1"">&nbsp;[1,1,1,0],</span></p> <p class=""p3""><span class=""s1"">&nbsp;[0,1,0,0],</span></p> <p class=""p3""><span class=""s1"">&nbsp;[1,1,0,0]]</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Answer: 16</span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s10 {font-kerning: none; color: #408080; -webkit-text-stroke: 0px #408080} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No, check for None</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* None -&gt; TypeError</span></p> <p class=""p4""><span class=""s1"">* [[1, 0]] -&gt; 4</span></p> <p class=""p4""><span class=""s1"">* [[0, 1, 0, 0],</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; [1, 1, 1, 0],</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; [0, 1, 0, 0],</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; [1, 1, 0, 0]] -&gt; 16</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">For each cell in the grid:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Check left, right, up, down</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">For each check, if we are at the edge or the cell we are checking is land, increment sides</span></li> </ul> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(rows * cols)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">island_perimeter</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">, grid):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> grid </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'grid cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sides = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_rows = </span><span class=""s5"">len</span><span class=""s1"">(grid)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_cols = </span><span class=""s5"">len</span><span class=""s1"">(grid[</span><span class=""s8"">0</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> i </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(num_rows):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> j </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(num_cols):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> grid[i][j] </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><i># Check left</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> j </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> grid[i][j&nbsp;</span><span class=""s9""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">] </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sides += </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><i># Check right</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> j </span><span class=""s9""><b>==</b></span><span class=""s1""> num_cols </span><span class=""s9""><b>-</b></span><span class=""s1""> </span><span class=""s8"">1</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> grid[i][j&nbsp;</span><span class=""s9""><b>+&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">] </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sides += </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><i># Check up</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> i </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> grid[i&nbsp;</span><span class=""s9""><b>-&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">][j] </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sides += </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s10""><i># Check down</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> i </span><span class=""s9""><b>==</b></span><span class=""s1""> num_rows </span><span class=""s9""><b>-</b></span><span class=""s1""> </span><span class=""s8"">1</span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> grid[i&nbsp;</span><span class=""s9""><b>+&nbsp;</b></span><span class=""s8"">1</span><span class=""s1"">][j] </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sides += </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> sides</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_island_perimeter.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestIslandPerimeter</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_island_perimeter</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.island_perimeter, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [[</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">]]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s8"">4</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.island_perimeter(data), expected)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [[</span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">],</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">],</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">],</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">]]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s8"">16</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.island_perimeter(data), expected)</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_island_perimeter'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestIslandPerimeter()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_island_perimeter()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the difference of two integers without using the + or - sign.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No, check for None</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* None input -&gt; TypeError</span></p> <p class=""p4""><span class=""s1"">* 7, 5 -&gt; 2</span></p> <p class=""p4""><span class=""s1"">* -5, -7 -&gt; 2</span></p> <p class=""p4""><span class=""s1"">* -5, 7 -&gt; -12</span></p> <p class=""p4""><span class=""s1"">* 5, -7 -&gt; 12</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We'll look at the following example, subtracting a and b:</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">a 0110 = 6&nbsp;</span></p> <p class=""p4""><span class=""s1"">b 0101 = 5</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">First, subtract a and b, without worrying about the borrow (0-0=0, 0-1=1, 1-1=0):</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">result = a ^ b = 0011</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Next, calculate the borrow (0-1=1). We'll need to left shift one to prepare for the next iteration when we move to the next most significant bit:</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">~a = 1001 b = 0101 ~a &amp; b = 0001</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">borrow = (~a&amp;b) &lt;&lt; 1 = 0010</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">If the borrow is not zero, we'll need to subtract the borrow from the result. Recusively call the function, passing in result and borrow.</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b), where b is the number of bits</span></li> <li class=""li2""><span class=""s1"">Space: O(b), where b is the number of bits</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">sub_two</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, a, b):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> a </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> b </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'a or b cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = a </span><span class=""s8""><b>^</b></span><span class=""s1""> b;</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; borrow = (</span><span class=""s8""><b>~</b></span><span class=""s1"">a&nbsp;</span><span class=""s8""><b>&amp;&nbsp;</b></span><span class=""s1"">b) </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> </span><span class=""s9"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> borrow </span><span class=""s8""><b>!=</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.sub_two(result, borrow)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> result;</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_sub_two.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">TestSubTwo</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_sub_two</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.sub_two, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.sub_two(</span><span class=""s9"">7</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">), </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.sub_two(</span><span class=""s8""><b>-</b></span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">7</span><span class=""s1"">), </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.sub_two(</span><span class=""s8""><b>-</b></span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">), </span><span class=""s8""><b>-</b></span><span class=""s9"">12</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.sub_two(</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">7</span><span class=""s1"">), </span><span class=""s9"">12</span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_sub_two'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestSubTwo()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_sub_two()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the sum of two integers without using the + or - sign.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p><ul class=""ul1""> <li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Can we assume we are working with 32 bit numbers?</span></li><ul class=""ul2"" style=""list-style-type: square; ""><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Yes</span></li></ul><li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No, check for None</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul><p class=""p3""><span class=""s1""></span><br /></p><p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p><p class=""p4""><span class=""s1"">* None input -&gt; TypeError</span></p><p class=""p4""><span class=""s1"">* 5, 7 -&gt; 12</span></p><p class=""p4""><span class=""s1"">* -5, -7 -&gt; -12</span></p><p class=""p4""><span class=""s1"">* 5, -7 -&gt; -2</span></p><p class=""p4""><span class=""s1"">* -1, 1 -&gt; 0</span></p><p class=""p3""><span class=""s1""></span><br /></p><p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">We'll look at the following example, adding a and b:</span></p><p class=""p4""><span class=""s1""><br /></span></p><p class=""p4""><span class=""s1"">a 0111&nbsp;</span></p><p class=""p4""><span class=""s1"">b 0101</span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">First, add a and b, without worrying about the carry (0+0=0, 0+1=1, 1+1=0):</span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">result = a ^ b = 0010</span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Next, calculate the carry (1+1=2). We'll need to left shift one to prepare for the next iteration when we move to the next most&nbsp;</span><span style=""-webkit-text-stroke-width: initial;"">significant bit:</span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">carry = (a&amp;b) &lt;&lt; 1 = 1010</span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">If the carry is not zero, we'll need to add the carry to the result. Recusively call the function, passing in result and carry.</span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Below are the values of a, b, and the carry of a = 7 and b = 5, producing the result of 12.</span></p><p class=""p4""><span class=""s1""><br /></span></p><p class=""p4""><span class=""s1"">a 0111&nbsp;</span></p><p class=""p4""><span class=""s1"">b 0101&nbsp;</span></p><p class=""p4""><span class=""s1"">-----&nbsp;</span></p><p class=""p4""><span class=""s1"">c 0101&nbsp;</span></p><p class=""p4""><span class=""s1"">a 0010&nbsp;</span></p><p class=""p4""><span class=""s1"">b 1010&nbsp;</span></p><p class=""p4""><span class=""s1"">-----&nbsp;</span></p><p class=""p4""><span class=""s1"">c 0010&nbsp;</span></p><p class=""p4""><span class=""s1"">a 1000&nbsp;</span></p><p class=""p4""><span class=""s1"">b 0100&nbsp;</span></p><p class=""p4""><span class=""s1"">-----&nbsp;</span></p><p class=""p4""><span class=""s1"">c 0000&nbsp;</span></p><p class=""p4""><span class=""s1"">a 1100&nbsp;</span></p><p class=""p4""><span class=""s1"">b 0000</span></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p4""><span class=""s1"">c = carry = 0, return the result 1100</span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p><ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(b), where b is the number of bits</span></li> <li class=""li2""><span class=""s1"">Space: O(b), where b is the number of bits</span></li> </ul><p class=""p2""><span class=""s1"">Note: Doing this in Python is more complicated than say, a Java implementation.</span></p><p class=""p3""><span class=""s1""></span><br /></p><p class=""p1""><span class=""s1""><b>Code</b></span></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p7""><span class=""s1"">&nbsp;</span></p><p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">sum_of_two_bugged</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">, a, b):</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> a </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> b </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p><p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError</span><span class=""s7"">(</span><span class=""s1"">'a or b cannot be None'</span><span class=""s7"">)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = a </span><span class=""s8""><b>^</b></span><span class=""s1""> b;</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; carry = (a </span><span class=""s8""><b>&amp;</b></span><span class=""s1""> b) </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> </span><span class=""s9"">1</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> carry </span><span class=""s8""><b>!=</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.sum_of_two(result, carry)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> result;</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">sum_of_two</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, a, b):</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> a </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> b </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s10"">'a or b cannot be None'</span><span class=""s1"">)</span></p><p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; MAX = </span><span class=""s9"">0x7FFFFFFF</span><span class=""s3"">&nbsp; </span><span class=""s1""><i># 32 bit integer max valid value</i></span></p><p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; MASK = </span><span class=""s9"">0xFFFFFFFF</span><span class=""s3"">&nbsp; </span><span class=""s1""><i># Get the last 32 bits</i></span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; result = (a </span><span class=""s8""><b>^</b></span><span class=""s1""> b) </span><span class=""s8""><b>&amp;</b></span><span class=""s1""> MASK</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; carry = ((a </span><span class=""s8""><b>&amp;</b></span><span class=""s1""> b) </span><span class=""s8""><b>&lt;&lt;</b></span><span class=""s1""> </span><span class=""s9"">1</span><span class=""s1"">) </span><span class=""s8""><b>&amp;</b></span><span class=""s1""> MASK</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> carry </span><span class=""s8""><b>!=</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.sum_of_two(result, carry)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> result </span><span class=""s8""><b>&lt;=</b></span><span class=""s1""> MAX:</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> result</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p><p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Get the 32-bit positive complement with ^</i></span></p><p class=""p11""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># and convert to the Python complement with ~</i></span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s8""><b>~</b></span><span class=""s1"">(result </span><span class=""s8""><b>^</b></span><span class=""s1""> MASK)</span></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p3""><span class=""s1""></span><br /></p><p class=""p1""><span class=""s1""><b>Unit Test</b></span></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p5""><span class=""s1""></span><br /></p><p class=""p7""><span class=""s1"">&nbsp;</span></p><p class=""p7""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_sum_of_two.py</span></p><p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p9""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestSumOfTwo</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_sum_of_two</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.sum_of_two, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.sum_of_two(</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s9"">7</span><span class=""s1"">), </span><span class=""s9"">12</span><span class=""s1"">)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.sum_of_two(</span><span class=""s8""><b>-</b></span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">7</span><span class=""s1"">), </span><span class=""s8""><b>-</b></span><span class=""s9"">12</span><span class=""s1"">)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.sum_of_two(</span><span class=""s9"">5</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">7</span><span class=""s1"">), </span><span class=""s8""><b>-</b></span><span class=""s9"">2</span><span class=""s1"">)</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.sum_of_two(</span><span class=""s8""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">), </span><span class=""s9"">0</span><span class=""s1"">)</span></p><p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_sum_of_two'</span><span class=""s3"">)</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestSumOfTwo()</span></p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_sum_of_two()</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s1"">​</span></p><p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p><p class=""p1""> <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #00ff00; -webkit-text-stroke: 0px #00ff00} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> </p><p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Given an int, repeatedly add its digits until the result is one digit.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume num is not negative?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* None input -&gt; TypeError</span></p> <p class=""p4""><span class=""s1"">* negative input -&gt; ValueError</span></p> <p class=""p4""><span class=""s1"">* 9 -&gt; 9</span></p> <p class=""p4""><span class=""s1"">* 138 -&gt; 3</span></p> <p class=""p4""><span class=""s1"">* 65536 -&gt; 7</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">The naive solution simply isolates each digit with with modulo and integer division. We'll add each isolated digit to a list and sum the values.</span></p> <p class=""p4""><span class=""s1""><br /></span></p><p class=""p4""><span class=""s1"">138 % 10 = 8 -&gt; isolated</span></p> <p class=""p4""><span class=""s1"">138 // 10 = 13</span></p> <p class=""p4""><span class=""s1"">13 % 10 = 3 -&gt; isolated</span></p> <p class=""p4""><span class=""s1"">13 // 10 = 1</span></p> <p class=""p4""><span class=""s1"">1 % 10 = 1 -&gt; isolated</span></p><p class=""p4""><span class=""s1""><br /></span></p> <p class=""p2""><span class=""s1"">A more optimal solution exists, by recognizing this is a digital root. See the <a href=""https://en.wikipedia.org/wiki/Digital_root""><span class=""s3"">Wikipedia article</span></a> for more information.</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Solution</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">add_digits</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, num):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'num cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> ValueError(</span><span class=""s8"">'num cannot be negative'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; digits = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>while</b></span><span class=""s1""> num </span><span class=""s9""><b>!=</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; digits.append(num&nbsp;</span><span class=""s9""><b>%&nbsp;</b></span><span class=""s10"">10</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num //= </span><span class=""s10"">10</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; digits_sum = </span><span class=""s6"">sum</span><span class=""s1"">(digits)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> digits_sum </span><span class=""s9""><b>&gt;=</b></span><span class=""s1""> </span><span class=""s10"">10</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s7"">self</span><span class=""s1"">.add_digits(digits_sum)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> digits_sum</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">add_digits_optimized</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">, num):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'num cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> ValueError(</span><span class=""s8"">'num cannot be negative'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> num </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s10"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>elif</b></span><span class=""s1""> num </span><span class=""s9""><b>%</b></span><span class=""s1""> </span><span class=""s10"">9</span><span class=""s1""> </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s10"">9</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> num </span><span class=""s9""><b>%</b></span><span class=""s1""> </span><span class=""s10"">9</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_add_digits.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestAddDigits</span><span class=""s4"">(</span><span class=""s6"">object</span><span class=""s4"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_add_digits</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">, func):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, func, </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(ValueError, func, </span><span class=""s9""><b>-</b></span><span class=""s10"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s10"">0</span><span class=""s1"">), </span><span class=""s10"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s10"">9</span><span class=""s1"">), </span><span class=""s10"">9</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s10"">138</span><span class=""s1"">), </span><span class=""s10"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(func(</span><span class=""s10"">65536</span><span class=""s1"">), </span><span class=""s10"">7</span><span class=""s1"">)&nbsp;</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_add_digits'</span><span class=""s4"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestAddDigits()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; solution = Solution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_add_digits(solution.add_digits)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>try</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; test.test_add_digits(solution.add_digits_optimized)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>except</b></span><span class=""s1""> NameError:</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># Alternate solutions are only defined</i></span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># in the solutions file</i></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>pass</b></span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Move all zeroes in a list to the end.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the input an array of ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output a new array of ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No, do this in-place</span></li> </ul> <li class=""li2""><span class=""s1"">Do we need to maintain ordering of non-zero values?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p4""><span class=""s1"">* None -&gt; TypeError</span></p> <p class=""p4""><span class=""s1"">* [0, 1, 0, 3, 12] -&gt; [1, 3, 12, 0, 0]</span></p> <p class=""p4""><span class=""s1"">* [1, 0] -&gt; [1, 0]</span></p> <p class=""p4""><span class=""s1"">* [0, 1] -&gt; [1, 0]</span></p> <p class=""p4""><span class=""s1"">* [0] -&gt; [0]</span></p> <p class=""p4""><span class=""s1"">* [1] -&gt; [1]</span></p> <p class=""p4""><span class=""s1"">* [1, 1] -&gt; [1, 1]</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">pos = 0</span></li> <li class=""li2""><span class=""s1"">Loop through each item in the input</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the item != 0, set input[pos] = item</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">pos++</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">Fill input[pos:] with zeroes</span></li> </ul> <p class=""p4""><span class=""s1"">&nbsp;|</span></p> <p class=""p4""><span class=""s1"">[0, 1, 0, 3, 12]</span></p> <p class=""p4""><span class=""s1"">&nbsp;^</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">[0, 1, 0, 3, 12]</span></p> <p class=""p4""><span class=""s1"">&nbsp;^</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">[1, 1, 0, 3, 12]</span></p> <p class=""p4""><span class=""s1"">&nbsp;^</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">[1, 1, 0, 3, 12]</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; ^</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">[1, 1, 0, 3, 12]</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; ^</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">[1, 3, 0, 3, 12]</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; ^</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">[1, 3, 0, 3, 12]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></p> <p class=""p4""><span class=""s1"">[1, 3, 12, 3, 12]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">Fill right with zeroes:</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">[1, 3, 12, 3, 12]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p4""><span class=""s1"">[1, 3, 12, 0, 12]</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p4""><span class=""s1"">[1, 3, 12, 0, 0]</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">move_zeroes</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, nums):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> nums </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s7"">'nums cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; pos = </span><span class=""s8"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1"">&nbsp;num </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s1"">nums:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> num </span><span class=""s9""><b>!=</b></span><span class=""s1""> </span><span class=""s8"">0</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nums[pos] = num</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pos += </span><span class=""s8"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> pos </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s5"">len</span><span class=""s1"">(nums):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nums[pos:] = [</span><span class=""s8"">0</span><span class=""s1"">] </span><span class=""s9""><b>*</b></span><span class=""s1""> (</span><span class=""s5"">len</span><span class=""s1"">(nums)&nbsp;</span><span class=""s9""><b>-&nbsp;</b></span><span class=""s1"">pos)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_move_zeroes.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestMoveZeroes</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_move_zeroes</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.move_zeroes, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">, </span><span class=""s8"">12</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.move_zeroes(array)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array, [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">3</span><span class=""s1"">, </span><span class=""s8"">12</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.move_zeroes(array)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array, [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s8"">0</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.move_zeroes(array)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array, [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">0</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s8"">0</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.move_zeroes(array)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array, [</span><span class=""s8"">0</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s8"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.move_zeroes(array)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array, [</span><span class=""s8"">1</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; array = [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution.move_zeroes(array)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(array, [</span><span class=""s8"">1</span><span class=""s1"">, </span><span class=""s8"">1</span><span class=""s1"">])</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_move_zeroes'</span><span class=""s3"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestMoveZeroes()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_move_zeroes()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Performance vs scalability</h2>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A service is&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">scalable</span>&nbsp;if it results in increased&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">performance</span>&nbsp;in a manner proportional to resources added. Generally, increasing performance means serving more units of work, but it can also be to handle larger units of work, such as when datasets grow.<span style=""box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;""><a href=""http://www.allthingsdistributed.com/2006/03/a_word_on_scalability.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">1</a></span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Another way to look at performance vs scalability:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">If you have a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">performance</span>&nbsp;problem, your system is slow for a single user.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">If you have a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">scalability</span>&nbsp;problem, your system is fast for a single user but slow under heavy load.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-1"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-1"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://www.allthingsdistributed.com/2006/03/a_word_on_scalability.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">A word on scalability</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.slideshare.net/jboner/scalability-availability-stability-patterns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scalability, availability, stability, patterns</a></li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Latency vs throughput</h2>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Latency</span>&nbsp;is the time to perform some action or to produce some result.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Throughput</span>&nbsp;is the number of such actions or results per unit of time.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Generally, you should aim for&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">maximal throughput</span>&nbsp;with&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">acceptable latency</span>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-2"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-2"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://community.cadence.com/cadence_blogs_8/b/sd/archive/2010/09/13/understanding-latency-vs-throughput"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Understanding latency vs throughput</a></li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Consistency patterns</h2>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">With multiple copies of the same data, we are faced with options on how to synchronize them so clients have a consistent view of the data. Recall the definition of consistency from the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#cap-theorem"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CAP theorem</a>&nbsp;- Every read receives the most recent write or an error.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-weak-consistency"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#weak-consistency"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Weak consistency</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">After a write, reads may or may not see it. A best effort approach is taken.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">This approach is seen in systems such as memcached. Weak consistency works well in real time use cases such as VoIP, video chat, and realtime multiplayer games. For example, if you are on a phone call and lose reception for a few seconds, when you regain connection you do not hear what was spoken during connection loss.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-eventual-consistency"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#eventual-consistency"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Eventual consistency</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">After a write, reads will eventually see it (typically within milliseconds). Data is replicated asynchronously.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">This approach is seen in systems such as DNS and email. Eventual consistency works well in highly available systems.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-strong-consistency"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#strong-consistency"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Strong consistency</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">After a write, reads will see it. Data is replicated synchronously.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">This approach is seen in file systems and RDBMSes. Strong consistency works well in systems that need transactions.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-4"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-4"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://snarfed.org/transactions_across_datacenters_io.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Transactions across data centers</a></li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Availability patterns</h2>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">There are two main patterns to support high availability:&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">fail-over</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">replication</span>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-fail-over"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#fail-over"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Fail-over</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-active-passive"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#active-passive"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Active-passive</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">With active-passive fail-over, heartbeats are sent between the active and the passive server on standby. If the heartbeat is interrupted, the passive server takes over the active's IP address and resumes service.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The length of downtime is determined by whether the passive server is already running in 'hot' standy or whether it needs to start up from 'cold' standby. Only the active server handles traffic.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Active-passive failover can also be referred to as master-slave failover.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-active-active"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#active-active"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Active-active</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">In active-active, both servers are managing traffic, spreading the load between them.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">If the servers are public-facing, the DNS would need to know about the public IPs of both servers. If the servers are internal-facing, application logic would need to know about both servers.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Active-active failover can also be referred to as master-master failover.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-failover"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-failover"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): failover</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Fail-over adds more hardware and additional complexity.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">There is a potential for loss of data if the active system fails before any newly written data can be replicated to the passive.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-replication"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#replication"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Replication</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Master-slave replication</h4><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-master-slave-and-master-master"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#master-slave-and-master-master"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a><p style=""box-sizing: border-box; margin-bottom: 16px; font-weight: normal;"">The master serves reads and writes, replicating writes to one or more slaves, which serve only reads. Slaves can also replicate to additional slaves in a tree-like fashion. If the master goes offline, the system can continue to operate in read-only mode until a slave is promoted to a master or a new master is provisioned.</p><p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; font-weight: normal;""><a href=""https://camo.githubusercontent.com/6a097809b9690236258747d969b1d3e0d93bb8ca/687474703a2f2f692e696d6775722e636f6d2f4339696f47746e2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/6a097809b9690236258747d969b1d3e0d93bb8ca/687474703a2f2f692e696d6775722e636f6d2f4339696f47746e2e706e67"" data-canonical-src=""http://i.imgur.com/C9ioGtn.png"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.slideshare.net/jboner/scalability-availability-stability-patterns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Scalability, availability, stability, patterns</a></i></p></h4><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-master-slave-replication"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-master-slave-replication"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): master-slave replication</h5><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; font-weight: normal;""><li style=""box-sizing: border-box;"">Additional logic is needed to promote a slave to a master.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#disadvantages-replication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Disadvantage(s): replication</a>&nbsp;for points related to&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">both</span>&nbsp;master-slave and master-master.</li></ul></h4><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-master-master-replication"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#master-master-replication"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Master-master replication</h4><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><p style=""box-sizing: border-box; margin-bottom: 16px; font-weight: normal;"">Both masters serve reads and writes and coordinate with each other on writes. If either master goes down, the system can continue to operate with both reads and writes.</p><p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; font-weight: normal;""><a href=""https://camo.githubusercontent.com/5862604b102ee97d85f86f89edda44bde85a5b7f/687474703a2f2f692e696d6775722e636f6d2f6b7241484c47672e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/5862604b102ee97d85f86f89edda44bde85a5b7f/687474703a2f2f692e696d6775722e636f6d2f6b7241484c47672e706e67"" data-canonical-src=""http://i.imgur.com/krAHLGg.png"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.slideshare.net/jboner/scalability-availability-stability-patterns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Scalability, availability, stability, patterns</a></i></p></h4><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-master-master-replication"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-master-master-replication"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): master-master replication</h5><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; font-weight: normal;""><li style=""box-sizing: border-box;"">You'll need a load balancer or you'll need to make changes to your application logic to determine where to write.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Most master-master systems are either loosely consistent (violating ACID) or have increased write latency due to synchronization.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Conflict resolution comes more into play as more write nodes are added and as latency increases.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#disadvantages-replication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Disadvantage(s): replication</a>&nbsp;for points related to&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">both</span>&nbsp;master-slave and master-master.</li></ul></h4><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-replication"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-replication"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): replication</h5><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; font-weight: normal;""><li style=""box-sizing: border-box;"">There is a potential for loss of data if the master fails before any newly written data can be replicated to other nodes.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Writes are replayed to the read replicas. If there are a lot of writes, the read replicas can get bogged down with replaying writes and can't do as many reads.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The more read slaves, the more you have to replicate, which leads to greater replication lag.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">On some systems, writing to the master can spawn multiple threads to write in parallel, whereas read replicas only support writing sequentially with a single thread.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Replication adds more hardware and additional complexity.</li></ul></h4><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-replication"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-replication"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: replication</h5><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; font-weight: normal;""><li style=""box-sizing: border-box;""><a href=""http://www.slideshare.net/jboner/scalability-availability-stability-patterns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scalability, availability, stability, patterns</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Multi-master_replication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Multi-master replication</a></li></ul></h4>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Availability vs consistency</h2>"	"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">CAP theorem</h3><p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/13719354da7dcd34cd79ff5f8b6306a67bc18261/687474703a2f2f692e696d6775722e636f6d2f62674c4d4932752e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/13719354da7dcd34cd79ff5f8b6306a67bc18261/687474703a2f2f692e696d6775722e636f6d2f62674c4d4932752e706e67"" data-canonical-src=""http://i.imgur.com/bgLMI2u.png"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://robertgreiner.com/2014/08/cap-theorem-revisited"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: CAP theorem revisited</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">In a distributed computer system, you can only support two of the following guarantees:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Consistency</span>&nbsp;- Every read receives the most recent write or an error</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Availability</span>&nbsp;- Every request receives a response, without guarantee that it contains the most recent version of the information</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Partition Tolerance</span>&nbsp;- The system continues to operate despite arbitrary partitioning due to network failures</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Networks aren't reliable, so you'll need to support partition tolerance. You'll need to make a software tradeoff between consistency and availability.</em></p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-cp---consistency-and-partition-tolerance"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#cp---consistency-and-partition-tolerance"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>CP - consistency and partition tolerance</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Waiting for a response from the partitioned node might result in a timeout error. CP is a good choice if your business needs require atomic reads and writes.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-ap---availability-and-partition-tolerance"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#ap---availability-and-partition-tolerance"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>AP - availability and partition tolerance</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Responses return the most recent version of the data, which might not be the latest. Writes might take some time to propagate when the partition is resolved.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">AP is a good choice if the business needs allow for&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#eventual-consistency"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">eventual consistency</a>&nbsp;or when the system needs to continue working despite external errors.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-3"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-3"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://robertgreiner.com/2014/08/cap-theorem-revisited/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CAP theorem revisited</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://ksat.me/a-plain-english-introduction-to-cap-theorem/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">A plain english introduction to CAP theorem</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/henryr/cap-faq"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CAP FAQ</a></li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Domain name system</h2>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/fae27d1291ed38dd120595d692eacd2505cd3a9c/687474703a2f2f692e696d6775722e636f6d2f494f794c6a34692e6a7067"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/fae27d1291ed38dd120595d692eacd2505cd3a9c/687474703a2f2f692e696d6775722e636f6d2f494f794c6a34692e6a7067"" data-canonical-src=""http://i.imgur.com/IOyLj4i.jpg"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.slideshare.net/srikrupa5/dns-security-presentation-issa"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: DNS security presentation</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A Domain Name System (DNS) translates a domain name such as&nbsp;<a href=""http://www.example.com/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">www.example.com</a>&nbsp;to an IP address.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">DNS is hierarchical, with a few authoritative servers at the top level. Your router or ISP provides information about which DNS server(s) to contact when doing a lookup. Lower level DNS servers cache mappings, which could become stale due to DNS propagation delays. DNS results can also be cached by your browser or OS for a certain period of time, determined by the&nbsp;<a href=""https://en.wikipedia.org/wiki/Time_to_live"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">time to live (TTL)</a>.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">NS record (name server)</span>&nbsp;- Specifies the DNS servers for your domain/subdomain.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">MX record (mail exchange)</span>&nbsp;- Specifies the mail servers for accepting messages.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">A record (address)</span>&nbsp;- Points a name to an IP address.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">CNAME (canonical)</span>&nbsp;- Points a name to another name or&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">CNAME</code>&nbsp;(example.com to&nbsp;<a href=""http://www.example.com/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">www.example.com</a>) or to an&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">A</code>record.</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Services such as&nbsp;<a href=""https://www.cloudflare.com/dns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CloudFlare</a>&nbsp;and&nbsp;<a href=""https://aws.amazon.com/route53/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Route 53</a>&nbsp;provide managed DNS services. Some DNS services can route traffic through various methods:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://g33kinfo.com/info/archives/2657"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Weighted round robin</a><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Prevent traffic from going to servers under maintenance</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Balance between varying cluster sizes</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">A/B testing</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Latency-based</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Geolocation-based</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-dns"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-dns"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): DNS</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Accessing a DNS server introduces a slight delay, although mitigated by caching described above.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">DNS server management could be complex, although they are generally managed by&nbsp;<a href=""http://superuser.com/questions/472695/who-controls-the-dns-servers/472729"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">governments, ISPs, and large companies</a>.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">DNS services have recently come under DDoS attack, preventing users from accessing websites such as Twitter without knowing Twitter's IP address(es).</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-5"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-5"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://technet.microsoft.com/en-us/library/dd197427(v=ws.10).aspx"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DNS architecture</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Domain_Name_System"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wikipedia</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://support.dnsimple.com/categories/dns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DNS articles</a></li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Content delivery network</h2>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/853a8603651149c686bf3c504769fc594ff08849/687474703a2f2f692e696d6775722e636f6d2f683954417547492e6a7067"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/853a8603651149c686bf3c504769fc594ff08849/687474703a2f2f692e696d6775722e636f6d2f683954417547492e6a7067"" data-canonical-src=""http://i.imgur.com/h9TAuGI.jpg"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""https://www.creative-artworks.eu/why-use-a-content-delivery-network-cdn/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Why use a CDN</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A content delivery network (CDN) is a globally distributed network of proxy servers, serving content from locations closer to the user. Generally, static files such as HTML/CSS/JSS, photos, and videos are served from CDN, although some CDNs such as Amazon's CloudFront support dynamic content. The site's DNS resolution will tell clients which server to contact.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Serving content from CDNs can significantly improve performance in two ways:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Users receive content at data centers close to them</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Your servers do not have to serve requests that the CDN fulfills</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-push-cdns"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#push-cdns"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Push CDNs</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Push CDNs receive new content whenever changes occur on your server. You take full responsibility for providing content, uploading directly to the CDN and rewriting URLs to point to the CDN. You can configure when content expires and when it is updated. Content is uploaded only when it is new or changed, minimizing traffic, but maximizing storage.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Sites with a small amount of traffic or sites with content that isn't often updated work well with push CDNs. Content is placed on the CDNs once, instead of being re-pulled at regular intervals.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-pull-cdns"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#pull-cdns"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Pull CDNs</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Pull CDNs grab new content from your server when the first user requests the content. You leave the content on your server and rewrite URLs to point to the CDN. This results in a slower request until the content is cached on the server.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A&nbsp;<a href=""https://en.wikipedia.org/wiki/Time_to_live"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">time-to-live (TTL)</a>&nbsp;determines how long content is cached. Pull CDNs minimize storage space on the CDN, but can create redundant traffic if files expire and are pulled before they have actually changed.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Sites with heavy traffic work well with pull CDNs, as traffic is spread out more evenly with only recently-requested content remaining on the CDN.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-cdn"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-cdn"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): CDN</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">CDN costs could be significant depending on traffic, although this should be weighed with additional costs you would incur not using a CDN.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Content might be stale if it is updated before the TTL expires it.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">CDNs require changing URLs for static content to point to the CDN.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-6"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-6"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://repository.cmu.edu/cgi/viewcontent.cgi?article=2112&amp;context=compsci"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Globally distributed content delivery</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.travelblogadvice.com/technical/the-differences-between-push-and-pull-cdns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">The differences between push and pull CDNs</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Content_delivery_network"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wikipedia</a></li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Load balancer</h2>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/21caea3d7f67f451630012f657ae59a56709365c/687474703a2f2f692e696d6775722e636f6d2f6838316e39694b2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/21caea3d7f67f451630012f657ae59a56709365c/687474703a2f2f692e696d6775722e636f6d2f6838316e39694b2e706e67"" data-canonical-src=""http://i.imgur.com/h81n9iK.png"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Scalable system design patterns</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Load balancers distribute incoming client requests to computing resources such as application servers and databases. In each case, the load balancer returns the response from the computing resource to the appropriate client. Load balancers are effective at:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Preventing requests from going to unhealthy servers</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Preventing overloading resources</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Helping eliminate single points of failure</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Load balancers can be implemented with hardware (expensive) or with software such as HAProxy.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Additional benefits include:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">SSL termination</span>&nbsp;- Decrypt incoming requests and encrypt server responses so backend servers do not have to perform these potentially expensive operations<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Removes the need to install&nbsp;<a href=""https://en.wikipedia.org/wiki/X.509"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">X.509 certificates</a>&nbsp;on each server</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Session persistence</span>&nbsp;- Issue cookies and route a specific client's requests to same instance if the web apps do not keep track of sessions</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To protect against failures, it's common to set up multiple load balancers, either in&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#active-passive"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">active-passive</a>&nbsp;or&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#active-active"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">active-active</a>&nbsp;mode.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Load balancers can route traffic based on various metrics, including:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Random</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Least loaded</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Seesion/cookies</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://g33kinfo.com/info/archives/2657"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Round robin or weighted round robin</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer#layer-4-load-balancing"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Layer 4</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer#layer-7-load-balancing"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Layer 7</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-layer-4-load-balancing"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#layer-4-load-balancing"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Layer 4 load balancing</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Layer 4 load balancers look at info at the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#communication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">transport layer</a>&nbsp;to decide how to distribute requests. Generally, this involves the source, destination IP addresses, and ports in the header, but not the contents of the packet. Layer 4 load balancers forward network packets to and from the upstream server, performing&nbsp;<a href=""https://www.nginx.com/resources/glossary/layer-4-load-balancing/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Network Address Translation (NAT)</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-layer-7-load-balancing"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#layer-7-load-balancing"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>layer 7 load balancing</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Layer 7 load balancers look at the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#communication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">application layer</a>&nbsp;to decide how to distribute requests. This can involve contents of the header, message, and cookies. Layer 7 load balancers terminates network traffic, reads the message, makes a load-balancing decision, then opens a connection to the selected server. For example, a layer 7 load balancer can direct video traffic to servers that host videos while directing more sensitive user billing traffic to security-hardened servers.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">At the cost of flexibility, layer 4 load balancing requires less time and computing resources than Layer 7, although the performance impact can be minimal on modern commodity hardware.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-horizontal-scaling"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#horizontal-scaling"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Horizontal scaling</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Load balancers can also help with horizontal scaling, improving performance and availability. Scaling out using commodity machines is more cost efficient and results in higher availability than scaling up a single server on more expensive hardware, called&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Vertical Scaling</span>. It is also easier to hire for talent working on commodity hardware than it is for specialized enterprise systems.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-horizontal-scaling"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-horizontal-scaling"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): horizontal scaling</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Scaling horizontally introduces complexity and involves cloning servers<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Servers should be stateless: they should not contain any user-related data like sessions or profile pictures</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Sessions can be stored in a centralized data store such as a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#database"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">database</a>&nbsp;(SQL, NoSQL) or a persistent&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">cache</a>&nbsp;(Redis, Memcached)</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Downstream servers such as caches and databases need to handle more simultaneous connections as upstream servers scale out</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-load-balancer"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-load-balancer"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): load balancer</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The load balancer can become a performance bottleneck if it does not have enough resources or if it is not configured properly.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Introducing a load balancer to help eliminate single points of failure results in increased complexity.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">A single load balancer is a single point of failure, configuring multiple load balancers further increases complexity.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-7"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-7"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">NGINX architecture</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.haproxy.org/download/1.2/doc/architecture.txt"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HAProxy architecture guide</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.lecloud.net/post/7295452622/scalability-for-dummies-part-1-clones"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scalability</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Load_balancing_(computing)"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wikipedia</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.nginx.com/resources/glossary/layer-4-load-balancing/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Layer 4 load balancing</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.nginx.com/resources/glossary/layer-7-load-balancing/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Layer 7 load balancing</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-listener-config.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">ELB listener config</a></li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Reverse proxy (web server)</h2>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/a66e9f885b04db69638825c6a98f42e5570a83f3/687474703a2f2f692e696d6775722e636f6d2f7037784853345a2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/a66e9f885b04db69638825c6a98f42e5570a83f3/687474703a2f2f692e696d6775722e636f6d2f7037784853345a2e706e67"" data-canonical-src=""http://i.imgur.com/p7xHS4Z.png"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""https://commons.wikimedia.org/wiki/File:Proxy_concept_en.svg"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Wikipedia</a></i>&nbsp;<br style=""box-sizing: border-box;""></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A reverse proxy is a web server that centralizes internal services and provides unified interfaces to the public. Requests from clients are forwarded to a server that can fulfill it before the reverse proxy returns the server's response to the client.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Additional benefits include:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Increased security</span>&nbsp;- Hide information about backend servers, blacklist IPs, limit number of connections per client</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Increased scalability and flexibility</span>&nbsp;- Clients only see the reverse proxy's IP, allowing you to scale servers or change their configuration</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">SSL termination</span>&nbsp;- Decrypt incoming requests and encrypt server responses so backend servers do not have to perform these potentially expensive operations<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Removes the need to install&nbsp;<a href=""https://en.wikipedia.org/wiki/X.509"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">X.509 certificates</a>&nbsp;on each server</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Compression</span>&nbsp;- Compress server responses</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Caching</span>&nbsp;- Return the response for cached requests</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Static content</span>&nbsp;- Serve static content directly<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">HTML/CSS/JS</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Photos</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Videos</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Etc</li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-load-balancer-vs-reverse-proxy"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#load-balancer-vs-reverse-proxy"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Load balancer vs reverse proxy</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Deploying a load balancer is useful when you have multiple servers. Often, load balancers route traffic to a set of servers serving the same function.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Reverse proxies can be useful even with just one web server or application server, opening up the benefits described in the previous section.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Solutions such as NGINX and HAProxy can support both layer 7 reverse proxying and load balancing.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-reverse-proxy"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-reverse-proxy"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): reverse proxy</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Introducing a reverse proxy results in increased complexity.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">A single reverse proxy is a single point of failure, configuring multiple reverse proxies (ie a&nbsp;<a href=""https://en.wikipedia.org/wiki/Failover"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">failover</a>) further increases complexity.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-8"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-8"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://www.nginx.com/resources/glossary/reverse-proxy-vs-load-balancer/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Reverse proxy vs load balancer</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">NGINX architecture</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.haproxy.org/download/1.2/doc/architecture.txt"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HAProxy architecture guide</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Reverse_proxy"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wikipedia</a></li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Application layer</h2>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/feeb549c5b6e94f65c613635f7166dc26e0c7de7/687474703a2f2f692e696d6775722e636f6d2f7942355359776d2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/feeb549c5b6e94f65c613635f7166dc26e0c7de7/687474703a2f2f692e696d6775722e636f6d2f7942355359776d2e706e67"" data-canonical-src=""http://i.imgur.com/yB5SYwm.png"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://lethain.com/introduction-to-architecting-systems-for-scale/#platform_layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Intro to architecting systems for scale</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Separating out the web layer from the application layer (also known as platform layer) allows you to scale and configure both layers independently. Adding a new API results in adding application servers without necessarily adding additional web servers.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">single responsibility principle</span>&nbsp;advocates for small and autonomous services that work together. Small teams with small services can plan more aggressively for rapid growth.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Workers in the application layer also help enable&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#asynchronism"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">asynchronism</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-microservices"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#microservices"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Microservices</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Related to this discussion are&nbsp;<a href=""https://en.wikipedia.org/wiki/Microservices"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">microservices</a>, which can be described as a suite of independently deployable, small, modular services. Each service runs a unique process and communicates through a well-definied, lightweight mechanism to serve a business goal.&nbsp;<span style=""box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;""><a href=""https://smartbear.com/learn/api-design/what-are-microservices"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">1</a></span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Pinterest, for example, could have the following microservices: user profile, follower, feed, search, photo upload, etc.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-service-discovery"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#service-discovery"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Service Discovery</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Systems such as&nbsp;<a href=""http://www.slideshare.net/sauravhaloi/introduction-to-apache-zookeeper"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Zookeeper</a>&nbsp;can help services find each other by keeping track of registered names, addresses, ports, etc.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-application-layer"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-application-layer"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): application layer</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Adding an application layer with loosely coupled services requires a different approach from an architectural, operations, and process viewpoint (vs a monolithic system).</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Microservices can add complexity in terms of deployments and operations.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-9"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-9"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://lethain.com/introduction-to-architecting-systems-for-scale"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Intro to architecting systems for scale</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.puncsky.com/blog/2016/02/14/crack-the-system-design-interview/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Crack the system design interview</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Service-oriented_architecture"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Service oriented architecture</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.slideshare.net/sauravhaloi/introduction-to-apache-zookeeper"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Introduction to Zookeeper</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://cloudncode.wordpress.com/2016/07/22/msa-getting-started/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Here's what you need to know about building microservices</a></li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Database</h2>"	"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Database</h2><p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/15a7553727e6da98d0de5e9ca3792f6d2b5e92d4/687474703a2f2f692e696d6775722e636f6d2f586b6d3543587a2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/15a7553727e6da98d0de5e9ca3792f6d2b5e92d4/687474703a2f2f692e696d6775722e636f6d2f586b6d3543587a2e706e67"" data-canonical-src=""http://i.imgur.com/Xkm5CXz.png"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""https://www.youtube.com/watch?v=vg5onp8TU6Q"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Scaling up to your first 10 million users</a></i></p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-relational-database-management-system-rdbms"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#relational-database-management-system-rdbms"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Relational database management system (RDBMS)</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A relational database like SQL is a collection of data items organized in tables.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">ACID</span>&nbsp;is a set of properties of relational database&nbsp;<a href=""https://en.wikipedia.org/wiki/Database_transaction"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">transactions</a>.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Atomicity</span>&nbsp;- Each transaction is all or nothing</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Consistency</span>&nbsp;- Any tranaction will bring the database from one valid state to another</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Isolation</span>&nbsp;- Excuting transactions concurrently has the same results as if the transactions were executed serially</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Durability</span>&nbsp;- Once a transaction has been committed, it will remain so</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">There are many techniques to scale a relational database:&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">master-slave replication</span>,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">master-master replication</span>,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">federation</span>,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">sharding</span>,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">denormalization</span>, and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL tuning</span>.</p>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Federation</h4>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/6eb6570a8b6b4e1d52e3d7cc07e7959ea5dac75f/687474703a2f2f692e696d6775722e636f6d2f553371563333652e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/6eb6570a8b6b4e1d52e3d7cc07e7959ea5dac75f/687474703a2f2f692e696d6775722e636f6d2f553371563333652e706e67"" data-canonical-src=""http://i.imgur.com/U3qV33e.png"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""https://www.youtube.com/watch?v=vg5onp8TU6Q"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Scaling up to your first 10 million users</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Federation (or functional partitioning) splits up databases by function. For example, instead of a single, monolithic database, you could have three databases:&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">forums</span>,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">users</span>, and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">products</span>, resulting in less read and write traffic to each database and therefore less replication lag. Smaller databases result in more data that can fit in memory, which in turn results in more cache hits due to improved cache locality. With no single central master serializing writes you can write in parallel, increasing throughput.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-federation"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-federation"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): federation</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Federation is not effective if your schema requires huge functions or tables.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">You'll need to update your application logic to determine which database to read and write.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Joining data from two databases is more complex with a&nbsp;<a href=""http://stackoverflow.com/questions/5145637/querying-data-by-joining-two-tables-in-two-database-on-different-servers"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">server link</a>.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Federation adds more hardware and additional complexity.</li></ul><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-federation"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-federation"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: federation</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://www.youtube.com/watch?v=vg5onp8TU6Q"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scaling up to your first 10 million users</a></li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Sharding</h4>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/1df78be67b749171569a0e11a51aa76b3b678d4f/687474703a2f2f692e696d6775722e636f6d2f775538783549642e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/1df78be67b749171569a0e11a51aa76b3b678d4f/687474703a2f2f692e696d6775722e636f6d2f775538783549642e706e67"" data-canonical-src=""http://i.imgur.com/wU8x5Id.png"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.slideshare.net/jboner/scalability-availability-stability-patterns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Scalability, availability, stability, patterns</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Sharding distributes data across different databases such that each database can only manage a subset of the data. Taking a users database as an example, as the number of users increases, more shards are added to the cluster.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Similar to the advantages of&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">federation</a>, sharding results in less read and write traffic, less replication, and more cache hits. Index size is also reduced, which generally improves performance with faster queries. If one shard goes down, the other shards are still operational, although you'll want to add some form of replication to avoid data loss. Like federation, there is no single central master serializing writes, allowing you to write in parallel with increased throughput.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Common ways to shard a table of users is either through the user's last name initial or the user's geographic location.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-sharding"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-sharding"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): sharding</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">You'll need to update your application logic to work with shards, which could result in complex SQL queries.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Data distribution can become lobsided in a shard. For example, a set of power users on a shard could result in increased load to that shard compared to others.<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Rebalancing adds additional complexity. A sharding function based on&nbsp;<a href=""http://www.paperplanes.de/2011/12/9/the-magic-of-consistent-hashing.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">consistent hashing</a>&nbsp;can reduce the amount of transferred data.</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Joining data from multiple shards is more complex.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Sharding adds more hardware and additional complexity.</li></ul><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-sharding"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-sharding"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: sharding</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://highscalability.com/blog/2009/8/6/an-unorthodox-approach-to-database-design-the-coming-of-the.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">The coming of the shard</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Shard_(database_architecture)"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Shard database architecture</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.paperplanes.de/2011/12/9/the-magic-of-consistent-hashing.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Consistent hashing</a></li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Denormalization</h4>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Denormalization attemps to improve read performance at the expense of some write performance. Redundant copies of the data are written in multiple tables to avoid expensive joins. Some RDBMS such as&nbsp;<a href=""https://en.wikipedia.org/wiki/PostgreSQL"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">PostgreSQL</a>&nbsp;and Oracle support&nbsp;<a href=""https://en.wikipedia.org/wiki/Materialized_view"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">materialized views</a>&nbsp;which handle the work of storing redudant information and keeping redundant copies consistent.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Once data becomes distributed with techniques such as&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">federation</a>&nbsp;and&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">sharding</a>, managing joins across data centers further increases complexity. Denormalization might circumvent the need for such complex joins.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">In most systems, reads can heavily number writes 100:1 or even 1000:1. A read resulting in a complex database join can be very expensive, spending a significant amount of time on disk operations.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-denormalization"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-denormalization"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): denormalization</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Data is duplicated.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Constraints can help redundant copies of information stay in sync, which increases complexity of the database design.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">A denormalized database under heavy write load might perform worse than its normalized counterpart.</li></ul><h6 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.85em; font-weight: 600; line-height: 1.25; color: rgb(106, 115, 125); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-denormalization"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-denormalization"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: denormalization</h6><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://en.wikipedia.org/wiki/Denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalization</a></li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">SQL tuning</h4>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">SQL tuning is a broad topic and many&nbsp;<a href=""https://www.amazon.com/s/ref=nb_sb_noss_2?url=search-alias%3Daps&amp;field-keywords=sql+tuning"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">books</a>&nbsp;have been written as reference.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">It's important to&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">benchmark</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">profile</span>&nbsp;to simulate and uncover bottlenecks.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Benchmark</span>&nbsp;- Simulate high-load situations with tools such as&nbsp;<a href=""http://httpd.apache.org/docs/2.2/programs/ab.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">ab</a>.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Profile</span>&nbsp;- Enable tools such as the&nbsp;<a href=""http://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">slow query log</a>&nbsp;to help track performance issues.</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Benchmarking and profiling might point you to the following optimizations.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-tighten-up-the-schema"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#tighten-up-the-schema"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Tighten up the schema</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">MySQL dumps to disk in contiguous blocks for fast access.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">CHAR</code>&nbsp;instead of&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">VARCHAR</code>&nbsp;for fixed-length fields.<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">CHAR</code>&nbsp;effectively allows for fast, random access, whereas with&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">VARCHAR</code>, you must find the end of a string before moving onto the next one.</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">TEXT</code>&nbsp;for large blocks of text such as blog posts.&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">TEXT</code>&nbsp;also allows for boolean searches. Using a&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">TEXT</code>&nbsp;field results in storing a pointer on disk that is used to locate the text block.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">INT</code>&nbsp;for larger numbers up to 2^32 or 4 billion.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">DECIMAL</code>&nbsp;for currency to avoid floating point representation errors.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Avoid storing large&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">BLOBS</code>, store the location of where to get the object instead.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">VARCHAR(255)</code>&nbsp;is the largest number of characters that can be counted in an 8 bit number, often maximizing the use of a byte in some RDBMS.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Set the&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">NOT NULL</code>&nbsp;constraint where applicable to&nbsp;<a href=""http://stackoverflow.com/questions/1017239/how-do-null-values-affect-performance-in-a-database-search"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">improve search performance</a>.</li></ul><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-good-indices"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#use-good-indices"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use good indices</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Columns that you are querying (<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">SELECT</code>,&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">GROUP BY</code>,&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">ORDER BY</code>,&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">JOIN</code>) could be faster with indices.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Indices are usually represented as self-balancing&nbsp;<a href=""https://en.wikipedia.org/wiki/B-tree"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">B-tree</a>&nbsp;that keeps data sorted and allows searches, sequential access, insertions, and deletions in logarithmic time.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Placing an index can keep the data in memory, requiring more space.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Writes could also be slower since the index also needs to be updated.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">When loading large amounts of data, it might be faster to disable indices, load the data, then rebuild the indices.</li></ul><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-avoid-expensive-joins"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#avoid-expensive-joins"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Avoid expensive joins</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer#denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalize</a>&nbsp;where performance demands it.</li></ul><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-partition-tables"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#partition-tables"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Partition tables</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Break up a table by putting hot spots in a separate table to help keep it in memory.</li></ul><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-tune-the-query-cache"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#tune-the-query-cache"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Tune the query cache</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">In some cases, the&nbsp;<a href=""http://dev.mysql.com/doc/refman/5.7/en/query-cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">query cache</a>&nbsp;could lead to&nbsp;<a href=""https://www.percona.com/blog/2014/01/28/10-mysql-performance-tuning-settings-after-installation/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">performance issues</a>.</li></ul><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-sql-tuning"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-sql-tuning"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: SQL tuning</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://20bits.com/article/10-tips-for-optimizing-mysql-queries-that-dont-suck"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Tips for optimizing MySQL queries</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://stackoverflow.com/questions/1217466/is-there-a-good-reason-i-see-varchar255-used-so-often-as-opposed-to-another-l"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Is there a good reason i see VARCHAR(255) used so often?</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://stackoverflow.com/questions/1017239/how-do-null-values-affect-performance-in-a-database-search"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">How do null values affect performance?</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Slow query log</a></li></ul>"
"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">NoSQL</h3>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">NoSQL is a collection of data items represented in a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">key-value store</span>,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">document-store</span>,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">wide column store</span>, or a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">graph database</span>. Data is denormalized, and joins are generally done in the application code. Most NoSQL stores lack true ACID transactions and favor&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#eventual-consistency"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">eventual consistency</a>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">BASE</span>&nbsp;is often used to describe the properties of NoSQL databases. In comparison with the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#cap-theorem"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CAP Theorem</a>, BASE chooses availability over consistency.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Basically available</span>&nbsp;- the system guarantees availability.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Soft state</span>&nbsp;- the state of the system may change over time, even without input.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Eventual consistency</span>&nbsp;- the system will become consistent over a period of time, given that the system doesn't receive input during that period.</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">In addition to choosing between&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#sql-or-nosql"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL or NoSQL</a>, it is helpful to understand which type of NoSQL database best fits your use case(s). We'll review&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">key-value stores</span>,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">document-stores</span>,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">wide column stores</span>, and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">graph databases</span>&nbsp;in the next section.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Source(s) and further reading: NoSQL</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://stackoverflow.com/questions/3342497/explanation-of-base-terminology"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Explanation of base terminology</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://medium.com/baqend-blog/nosql-databases-a-survey-and-decision-guidance-ea7823a822d#.wskogqenq"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">NoSQL databases a survey and decision guidance</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.lecloud.net/post/7994751381/scalability-for-dummies-part-2-database"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scalability</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.youtube.com/watch?v=qI_g07C_Q5I"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Introduction to NoSQL</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://horicky.blogspot.com/2009/11/nosql-patterns.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">NoSQL patterns</a></li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Key-value store</h4>"	"<blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Abstraction: hash table</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A key-value store generally allows for O(1) reads and writes and is often backed by memory or SSD. Data stores can maintain keys in&nbsp;<a href=""https://en.wikipedia.org/wiki/Lexicographical_order"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">lexicographic order</a>, allowing efficient retrieval of key ranges. Key-value stores can allow for storing of metadata with a value.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Key-value stores provide high performance and are often used for simple data models or for rapidly-changing data, such as an in-memory cache layer. Since they offer only a limited set of operations, complexity is shifted to the application layer if additional operations are needed.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A key-value store is the basis for more complex system systems such as a document store, and in some cases, a graph database.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-key-value-store"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-key-value-store"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: key-value store</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://en.wikipedia.org/wiki/Key-value_database"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Key-value database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://stackoverflow.com/questions/4056093/what-are-the-disadvantages-of-using-a-key-value-table-over-nullable-columns-or"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Disadvantages of key-value stores</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://qnimate.com/overview-of-redis-architecture/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Redis architecture</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.adayinthelifeof.nl/2011/02/06/memcache-internals/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Memcached architecture</a></li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; line-height: 1.25; color: rgb(51, 51, 51); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Document store</h4>"	"<blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Abstraction: key-value store with documents stored as values</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A document store is centered around documents (XML, JSON, binary, etc), where a document stores all information for a given object. Document stores provide APIs or a query language to query based on the internal structure of the document itself.&nbsp;<em style=""box-sizing: border-box;"">Note, many key-value stores include features for working with a value's metadata, blurring the lines between these two storage types.</em></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Based on the underlying implementation, documents are organized in either collections, tags, metadata, or directories. Although documents can be organized or grouped together, documents may have fields that are completely different from each other.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Some document stores like&nbsp;<a href=""https://www.mongodb.com/mongodb-architecture"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">MongoDB</a>&nbsp;and&nbsp;<a href=""https://blog.couchdb.org/2016/08/01/couchdb-2-0-architecture/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CouchDB</a>&nbsp;also provide a SQL-like language to perform complex queries.<a href=""http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/decandia07dynamo.pdf"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DynamoDB</a>&nbsp;supports both key-values and documents.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Document stores provide high flexibility and are often used for working with occasionally changing data.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-document-store"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-document-store"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: document store</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://en.wikipedia.org/wiki/Document-oriented_database"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Document-oriented database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.mongodb.com/mongodb-architecture"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">MongoDB architecture</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://blog.couchdb.org/2016/08/01/couchdb-2-0-architecture/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CouchDB architecture</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.elastic.co/blog/found-elasticsearch-from-the-bottom-up"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Elasticsearch architecture</a></li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Wide column store</h4>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/823668b07b4bff50574e934273c9244e4e5017d6/687474703a2f2f692e696d6775722e636f6d2f6e3136694f476b2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/823668b07b4bff50574e934273c9244e4e5017d6/687474703a2f2f692e696d6775722e636f6d2f6e3136694f476b2e706e67"" data-canonical-src=""http://i.imgur.com/n16iOGk.png"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://blog.grio.com/2015/11/sql-nosql-a-brief-history.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: SQL &amp; NoSQL, a brief history</a></i></p><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Abstraction: nested map&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">ColumnFamily&lt;RowKey, Columns&lt;ColKey, Value, Timestamp&gt;&gt;</code></p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A wide column store's basic unit of data is a column (name/value pair). A column can be grouped in column families (analogous to a SQL table). Super column families further group column families. You can access each column independently with a row key, and columns with the same row key form a row. Each value contains a timestamp for versioning and for conflict resolution.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Google introduced&nbsp;<a href=""http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/chang06bigtable.pdf"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Bigtable</a>&nbsp;as the first wide column store, which influenced the open-source&nbsp;<a href=""https://www.mapr.com/blog/in-depth-look-hbase-architecture"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HBase</a>&nbsp;often-used in the Hadoop ecosystem, and&nbsp;<a href=""http://docs.datastax.com/en/archived/cassandra/2.0/cassandra/architecture/architectureIntro_c.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cassandra</a>&nbsp;from Facebook. Stores such as BigTable, HBase, and Cassandra maintain keys in lexicographic order, allowing efficient retrieval of selective key ranges.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Wide column stores offer high availability and high scalability. They are often used for very large data sets.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-wide-column-store"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-wide-column-store"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: wide column store</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://blog.grio.com/2015/11/sql-nosql-a-brief-history.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL &amp; NoSQL, a brief history</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/chang06bigtable.pdf"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Bigtable architecture</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.mapr.com/blog/in-depth-look-hbase-architecture"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HBase architecture</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://docs.datastax.com/en/archived/cassandra/2.0/cassandra/architecture/architectureIntro_c.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cassandra architecture</a></li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; line-height: 1.25; color: rgb(51, 51, 51); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Graph database</h4>"	"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Graph database</h4><p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/bf6508b65e98a7210d9861515833afa0d9434436/687474703a2f2f692e696d6775722e636f6d2f664e636c3635672e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/bf6508b65e98a7210d9861515833afa0d9434436/687474703a2f2f692e696d6775722e636f6d2f664e636c3635672e706e67"" data-canonical-src=""http://i.imgur.com/fNcl65g.png"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""https://en.wikipedia.org/wiki/File:GraphDatabase_PropertyGraph.png"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Graph database</a></i></p><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Abstraction: graph</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">In a graph database, each node is a record and each arc is a relationship between two nodes. Graph databases are optimized to represent complex relationships with many foreign keys or many-to-many relationships.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Graphs databases offer high performance for data models with complex relationships, such as a social network. They are relatively new and are not yet widely-used; it might be more difficult to find development tools and resources. Many graphs can only be accessed with&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">REST APIs</a>.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-graph"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-graph"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: graph</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://en.wikipedia.org/wiki/Graph_database"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Graph database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://neo4j.com/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Neo4j</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://blog.twitter.com/2010/introducing-flockdb"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">FlockDB</a></li></ul>"
"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">SQL or NoSQL</h3>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/a6e2e844765c9d5382d9c9b64ef7693977981646/687474703a2f2f692e696d6775722e636f6d2f775847714735662e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/a6e2e844765c9d5382d9c9b64ef7693977981646/687474703a2f2f692e696d6775722e636f6d2f775847714735662e706e67"" data-canonical-src=""http://i.imgur.com/wXGqG5f.png"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""https://www.infoq.com/articles/Transition-RDBMS-NoSQL/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Transitioning from RDBMS to NoSQL</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Reasons for&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL</span>:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Structured data</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Strict schema</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Relational data</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Need for complex joins</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Transactions</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Clear patterns for scaling</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">More established: developers, community, code, tools, etc</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Lookups by index are very fast</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Reasons for&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL</span>:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Semi-structured data</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Dynamic or flexible schema</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Non relational data</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">No need for complex joins</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Store many TB (or PB) of data</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Very data intensive workload</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Very high throughput for IOPS</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Sample data well-suited for NoSQL:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Rapid ingest of clickstream and log data</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Leaderboard or scoring data</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Temporary data, such as a shopping cart</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Frequently accessed ('hot') tables</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Metadata/lookup tables</li></ul><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-sql-or-nosql"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-sql-or-nosql"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: SQL or NoSQL</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://www.youtube.com/watch?v=vg5onp8TU6Q"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scaling up to your first 10 million users</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.sitepoint.com/sql-vs-nosql-differences/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL vs NoSQL differences</a></li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Cache</h2>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/7acedde6aa7853baf2eb4a53f88e2595ebe43756/687474703a2f2f692e696d6775722e636f6d2f51367a32344c612e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/7acedde6aa7853baf2eb4a53f88e2595ebe43756/687474703a2f2f692e696d6775722e636f6d2f51367a32344c612e706e67"" data-canonical-src=""http://i.imgur.com/Q6z24La.png"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Scalable system design patterns</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Caching improves page load times and can reduce the load on your servers and databases. In this model, the dispatcher will first lookup if the request has been made before and try to find the previous result to return, in order to save the actual execution.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Databases often benefit from a uniform distribution of reads and writes across its partitions. Popular items can skew the distribution, causing bottlenecks. Putting a cache in front of a database can help absorb uneven loads and spikes in traffic.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Disadvantage(s): cache</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Need to maintain consistency between caches and the source of truth such as the database through&nbsp;<a href=""https://en.wikipedia.org/wiki/Cache_algorithms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">cache invalidation</a>.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Need to make application changes such as adding Redis or memcached.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Cache invalidation is a difficult problem, there is additional complexity associated with when to update the cache.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-10"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-10"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">From cache to in-memory data grid</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scalable system design patterns</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://lethain.com/introduction-to-architecting-systems-for-scale/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Introduction to architecting systems for scale</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.slideshare.net/jboner/scalability-availability-stability-patterns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scalability, availability, stability, patterns</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.lecloud.net/post/9246290032/scalability-for-dummies-part-3-cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scalability</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/Strategies.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">AWS ElastiCache strategies</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Cache_(computing)"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wikipedia</a></li></ul>"
Cache locations	"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Client caching</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Caches can be located on the client side (OS or browser),&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#reverse-proxy"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">server side</a>, or in a distinct cache layer.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-cdn-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#cdn-caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>CDN caching</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://github.com/donnemartin/system-design-primer#content-delivery-network"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDNs</a>&nbsp;are considered a type of cache.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-web-server-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#web-server-caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Web server caching</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://github.com/donnemartin/system-design-primer#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Reverse proxies</a>&nbsp;and caches such as&nbsp;<a href=""https://www.varnish-cache.org/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Varnish</a>&nbsp;can serve static and dynamic content directly. Web servers can also cache requests, returning responses without having to contact application servers.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-database-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#database-caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Database caching</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Your database usually includes some level of caching in a default configuration, optimized for a generic use case. Tweaking these settings for specific usage patterns can further boost performance.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-application-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#application-caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Application caching</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">In-memory caches such as Memcached and Redis are key-value stores between your application and your data storage. Since the data is held in RAM, it is much faster than typical databases where data is stored on disk. RAM is more limited than disk, so&nbsp;<a href=""https://en.wikipedia.org/wiki/Cache_algorithms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">cache invalidation</a>&nbsp;algorithms such as&nbsp;<a href=""https://en.wikipedia.org/wiki/Cache_algorithms#Least_Recently_Used"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">least recently used (LRU)</a>&nbsp;can help invalidate 'cold' entries and keep 'hot' data in RAM.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Redis has the following additional features:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Persistence option</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Built-in data structures such as sorted sets and lists</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">There are multiple levels you can cache that fall into two general categories:&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">database queries</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">objects</span>:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Row level</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Query-level</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Fully-formed serializable objects</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Fully-rendered HTML</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Generaly, you should try to avoid file-based caching, as it makes cloning and auto-scaling more difficult.</p>"
Database caching, what to cache	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">There are multiple levels you can cache that fall into two general categories:&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">database queries</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">objects</span>:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Row level</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Query-level</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Fully-formed serializable objects</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Fully-rendered HTML</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Generaly, you should try to avoid file-based caching, as it makes cloning and auto-scaling more difficult.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-caching-at-the-database-query-level"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#caching-at-the-database-query-level"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Caching at the database query level</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Whenever you query the database, hash the query as a key and store the result to the cache. This approach suffers from expiration issues:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Hard to delete a cached result with complex queries</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">If one piece of data changes such as a table cell, you need to delete all cached queries that might include the changed cell</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-caching-at-the-object-level"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#caching-at-the-object-level"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Caching at the object level</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">See your data as an object, similar to what you do with your application code. Have your application assemble the dataset from the database into a class instance or a data structure(s):</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Remove the object from cache if its underlying data has changed</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Allows for asynchronous processing: workers assemble objects by consuming the latest cached object</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Suggestions of what to cache:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">User sessions</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Fully rendered web pages</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Activity streams</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">User graph data</li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Cache-aside</h4>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/7f5934e49a678b67f65e5ed53134bc258b007ebb/687474703a2f2f692e696d6775722e636f6d2f4f4e6a4f52716b2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/7f5934e49a678b67f65e5ed53134bc258b007ebb/687474703a2f2f692e696d6775722e636f6d2f4f4e6a4f52716b2e706e67"" data-canonical-src=""http://i.imgur.com/ONjORqk.png"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: From cache to in-memory data grid</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The application is responsible for reading and writing from storage. The cache does not interact with storage directly. The application does the following:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Look for entry in cache, resulting in a cache miss</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Load entry from the database</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Add entry to cache</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Return entry</li></ul><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">def get_user(self, user_id):     user = cache.get(""user.{0}"", user_id)     if user is None:         user = db.query(""SELECT * FROM users WHERE user_id = {0}"", user_id)         if user is not None:             cache.set(key, json.dumps(user))     return user </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://memcached.org/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Memcached</a>&nbsp;is generally used in this manner.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Subsequent reads of data added to cache are fast. Cache-aside is also referred to as lazy loading. Only requested data is cached, which avoids filling up the cache with data that isn't requested.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-cache-aside"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-cache-aside"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): cache-aside</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Each cache miss results in three trips, which can cause a noticeable delay.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Data can become stale if it is updated in the database. This issue is mitigated by setting a time-to-live (TTL) which forces an update of the cache entry, or by using write-through.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">When a node fails, it is replaced by a new, empty node, increasing latency.</li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Write-through</h4>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/56b870f4d199335ccdbc98b989ef6511ed14f0e2/687474703a2f2f692e696d6775722e636f6d2f3076426330684e2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/56b870f4d199335ccdbc98b989ef6511ed14f0e2/687474703a2f2f692e696d6775722e636f6d2f3076426330684e2e706e67"" data-canonical-src=""http://i.imgur.com/0vBc0hN.png"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.slideshare.net/jboner/scalability-availability-stability-patterns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Scalability, availability, stability, patterns</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The application uses the cache as the main data store, reading and writing data to it, while the cache is responsible for reading and writing to the database:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Application adds/updates entry in cache</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Cache synchronously writes entry to data store</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Return</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Application code:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">set_user(12345, {""foo"":""bar""}) </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Cache code:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">def set_user(user_id, values):     user = db.query(""UPDATE Users WHERE id = {0}"", user_id, values)     cache.set(user_id, user) </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Write-through is a slow overall operation due to the write operation, but subsequent reads of just written data are fast. Users are generally more tolerant of latency when updating data than reading data. Data in the cache is not stale.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-write-through"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-write-through"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): write through</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">When a new node is created due to failure or scaling, the new node will not cache entries until the entry is updated in the database. Cache-aside in conjunction with write through can mitigate this issue.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Most data written might never read, which can be minimized with a TTL.</li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Write-behind (write-back)</h4>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/8aa9f1a2f050c1422898bb5e82f1f01773334e22/687474703a2f2f692e696d6775722e636f6d2f72675372766a472e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/8aa9f1a2f050c1422898bb5e82f1f01773334e22/687474703a2f2f692e696d6775722e636f6d2f72675372766a472e706e67"" data-canonical-src=""http://i.imgur.com/rgSrvjG.png"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.slideshare.net/jboner/scalability-availability-stability-patterns/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Scalability, availability, stability, patterns</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">In write-behind, tha application does the following:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Add/update entry in cache</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Asynchronously write entry to the data store, improving write performance</li></ul><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-write-behind"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-write-behind"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): write-behind</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">There could be data loss if the cache goes down prior to its contents hitting the data store.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">It is more complex to implement write-behind than it is to implement cache-aside or write-through.</li></ul>"
"<h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; line-height: 1.25; color: rgb(51, 51, 51); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Refresh-ahead</h4>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/49dcb54307763b4f56d61a4a1369826e2e7d52e4/687474703a2f2f692e696d6775722e636f6d2f6b78746a7167452e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/49dcb54307763b4f56d61a4a1369826e2e7d52e4/687474703a2f2f692e696d6775722e636f6d2f6b78746a7167452e706e67"" data-canonical-src=""http://i.imgur.com/kxtjqgE.png"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: From cache to in-memory data grid</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">You can configure the cache to automatically refresh any recently accessed cache entry prior to its expiration.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refresh-ahead can result in reduced latency vs read-through if the cache can accurately predict which items are likely to be needed in the future.</p><h5 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-refresh-ahead"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-refresh-ahead"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): refresh-ahead</h5><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Not accurately predicting which items are likely to be needed in the future can result in reduced performance than without refresh-ahead.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-cache"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-cache"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a></h3>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Asynchronism</h2>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/c01ec137453216bbc188e3a8f16da39ec9131234/687474703a2f2f692e696d6775722e636f6d2f353447597353782e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/c01ec137453216bbc188e3a8f16da39ec9131234/687474703a2f2f692e696d6775722e636f6d2f353447597353782e706e67"" data-canonical-src=""http://i.imgur.com/54GYsSx.png"" style=""box-sizing: content-box; max-width: 100%;""></a><br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://lethain.com/introduction-to-architecting-systems-for-scale/#platform_layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Intro to architecting systems for scale</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Asynchronous workflows help reduce request times for expensive operations that would otherwise be performed in-line. They can also help by doing time-consuming work in advance, such as periodic aggregation of data.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-message-queues"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#message-queues"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Message queues</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Message queues receive, hold, and deliver messages. If an operation is too slow to perform inline, you can use a message queue with the following workflow:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">An application publishes a job to the queue, then notifies the user of job status</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">A worker picks up the job from the queue, processes it, then signals the job is complete</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The user is not blocked and the job is processed in the background. During this time, the client might optionally do a small amount of processing to make it seem like the task has completed. For example, if posting a tweet, the tweet could be instantly posted to your timeline, but it could take some time before your tweet is actually delivered to all of your followers.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Redis</span>&nbsp;is useful as a simple message broker but messages can be lost.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">RabbitMQ</span>&nbsp;is popular but requires you to adapt to the 'AMQP' protocol and manage your own nodes.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Amazon SQS</span>, is hosted but can have high latency and has the possibility of messages being delivered twice.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-task-queues"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#task-queues"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Task queues</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Tasks queues receive tasks and their related data, runs them, then delivers their results. They can support scheduling and can be used to run computationally-intensive jobs in the background.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Celery</span>&nbsp;has support for scheduling and primarily has python support.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-back-pressure"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#back-pressure"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Back pressure</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">If queues start to grow significantly, the queue size can become larger than memory, resulting in cache misses, disk reads, and even slower performance.&nbsp;<a href=""http://mechanical-sympathy.blogspot.com/2012/05/apply-back-pressure-when-overloaded.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Back pressure</a>&nbsp;can help by limiting the queue size, thereby maintaining a high throughput rate and good response times for jobs already in the queue. Once the queue fills up, clients get a server busy or HTTP 503 status code to try again later. Clients can retry the request at a later time, perhaps with&nbsp;<a href=""https://en.wikipedia.org/wiki/Exponential_backoff"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">exponential backoff</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-asynchronism"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-asynchronism"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): asynchronism</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Use cases such as inexpensive calculations and realtime workflows might be better suited for synchronous operations, as introducing queues can add delays and complexity.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-11"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-11"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://www.youtube.com/watch?v=1KRYH75wgy4"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">It's all a numbers game</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://mechanical-sympathy.blogspot.com/2012/05/apply-back-pressure-when-overloaded.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Applying back pressure when overloaded</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Little%27s_law"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Little's law</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.quora.com/What-is-the-difference-between-a-message-queue-and-a-task-queue-Why-would-a-task-queue-require-a-message-broker-like-RabbitMQ-Redis-Celery-or-IronMQ-to-function"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">What is the difference between a message queue and a task queue?</a></li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-communication"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#communication"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a></h2>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Communication</h2>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/1d761d5688d28ce1fb12a0f1c8191bca96eece4c/687474703a2f2f692e696d6775722e636f6d2f354b656f6351732e6a7067"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/1d761d5688d28ce1fb12a0f1c8191bca96eece4c/687474703a2f2f692e696d6775722e636f6d2f354b656f6351732e6a7067"" data-canonical-src=""http://i.imgur.com/5KeocQs.jpg"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.escotal.com/osilayer.html"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: OSI 7 layer model</a></i></p>"
"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Hypertext transfer protocol (HTTP)</h3>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">HTTP is a method for encoding and transporting data between a client and a server. It is a request/response protocol: clients issue requests and servers issue responses with relevant content and completion status info about the request. HTTP is self-contained, allowing requests and responses to flow through many intermediate routers and servers that perform load balancing, caching, encryption, and compression.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">A basic HTTP request consists of a verb (method) and a resource (endpoint). Below are common HTTP verbs:</p><table style=""box-sizing: border-box; border-spacing: 0px; margin-top: 0px; margin-bottom: 16px; display: block; width: 888px; overflow: auto; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><thead style=""box-sizing: border-box;""><tr style=""box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);""><th style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Verb</th><th style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Description</th><th style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Idempotent*</th><th style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Safe</th><th style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Cacheable</th></tr></thead><tbody style=""box-sizing: border-box;""><tr style=""box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">GET</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Reads a resource</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Yes</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Yes</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Yes</td></tr><tr style=""box-sizing: border-box; background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">POST</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Creates a resource or trigger a process that handles data</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">No</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">No</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Yes if response contains freshness info</td></tr><tr style=""box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">PUT</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Creates or replace a resource</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Yes</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">No</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">No</td></tr><tr style=""box-sizing: border-box; background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">PATCH</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Partially updates a resource</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">No</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">No</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Yes if response contains freshness info</td></tr><tr style=""box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">DELETE</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Deletes a resource</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Yes</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">No</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">No</td></tr></tbody></table><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">*Can be called many times without different outcomes.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">HTTP is an application layer protocol relying on lower-level protocols such as&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">TCP</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">UDP</span>.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://www.nginx.com/resources/glossary/http/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HTTP</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.quora.com/What-is-the-difference-between-HTTP-protocol-and-TCP-protocol"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">README</a></li></ul>"
"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Transmission control protocol (TCP)</h3>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/821620cf6aa83566f4def561e754e5991480ca8d/687474703a2f2f692e696d6775722e636f6d2f4a6441736476472e6a7067"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/821620cf6aa83566f4def561e754e5991480ca8d/687474703a2f2f692e696d6775722e636f6d2f4a6441736476472e6a7067"" data-canonical-src=""http://i.imgur.com/JdAsdvG.jpg"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.wildbunny.co.uk/blog/2012/10/09/how-to-make-a-multi-player-game-part-1/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: How to make a multiplayer game</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">TCP is a connection-oriented protocol over an&nbsp;<a href=""https://en.wikipedia.org/wiki/Internet_Protocol"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">IP network</a>. Connection is established and terminated using a&nbsp;<a href=""https://en.wikipedia.org/wiki/Handshaking"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">handshake</a>. All packets sent are guaranteed to reach the destination in the original order and without corruption through:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Sequence numbers and&nbsp;<a href=""https://en.wikipedia.org/wiki/Transmission_Control_Protocol#Checksum_computation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">checksum fields</a>&nbsp;for each packet</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Acknowledgement_(data_networks)"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Acknowledgement</a>&nbsp;packets and automatic retransmission</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">If the sender does not receive a correct response, it will resend the packets. If there are multiple timeouts, the connection is dropped. TCP also implements&nbsp;<a href=""https://en.wikipedia.org/wiki/Flow_control_(data)"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">flow control</a>&nbsp;and&nbsp;<a href=""https://en.wikipedia.org/wiki/Network_congestion#Congestion_control"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">congestion control</a>. These guarantees cause delays and generally results in less efficient transmission than UDP.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To ensure high throughput, web servers can keep a large number of TCP connections open, resulting in high memory usage. It can be expensive to have a large number of open connections between web server threads and say, a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#memcached"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">memcached</a>&nbsp;server.&nbsp;<a href=""https://en.wikipedia.org/wiki/Connection_pool"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Connection pooling</a>&nbsp;can help in addition to switching to UDP where applicable.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">TCP is useful for applications that require high reliability but are less time critical. Some examples include web servers, database info, SMTP, FTP, and SSH.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Use TCP over UDP when:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">You need all of the data to arrive in tact</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">You want to automatically make a best estimate use of the network throughput</li></ul>"
"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">User datagram protocol (UDP)</h3>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/47eb14c0a2dff2166f8781a6ce8c7f33d4c33da8/687474703a2f2f692e696d6775722e636f6d2f797a44724a74412e6a7067"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/47eb14c0a2dff2166f8781a6ce8c7f33d4c33da8/687474703a2f2f692e696d6775722e636f6d2f797a44724a74412e6a7067"" data-canonical-src=""http://i.imgur.com/yzDrJtA.jpg"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.wildbunny.co.uk/blog/2012/10/09/how-to-make-a-multi-player-game-part-1/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: How to make a multiplayer game</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">UDP is connectionless. Datagrams (analogous to packets) are guaranteed only at the datagram level. Datagrams might reach their destination out of order or not at all. UDP does not support congestion control. Without the guarantees that TCP support, UDP is generally more efficient.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">UDP can broadcast, sending datagrams to all devices on the subnet. This is useful with&nbsp;<a href=""https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DHCP</a>&nbsp;because the client has not yet received an IP address, thus preventing a way for TCP to stream without the IP address.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">UDP is less reliable but works well in real time use cases such as VoIP, video chat, streaming, and realtime multiplayer games.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Use UDP over TCP when:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">You need the lowest latency</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Late data is worse than loss of data</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">You want to implement your own error correction</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-tcp-and-udp"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-tcp-and-udp"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: TCP and UDP</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""http://gafferongames.com/networking-for-game-programmers/udp-vs-tcp/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Networking for game programming</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.cyberciti.biz/faq/key-differences-between-tcp-and-udp-protocols/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Key differences between TCP and UDP protocols</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://stackoverflow.com/questions/5970383/difference-between-tcp-and-udp"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Difference between TCP and UDP</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/Transmission_Control_Protocol"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Transmission control protocol</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://en.wikipedia.org/wiki/User_Datagram_Protocol"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">User datagram protocol</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.cs.bu.edu/~jappavoo/jappavoo.github.com/451/papers/memcache-fb.pdf"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scaling memcache at Facebook</a></li></ul>"
"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Remote procedure call (RPC)</h3>"	"<p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/1a3d7771c0b0a7816d0533fffeb6eeeb442d9945/687474703a2f2f692e696d6775722e636f6d2f6946344d6b62352e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/1a3d7771c0b0a7816d0533fffeb6eeeb442d9945/687474703a2f2f692e696d6775722e636f6d2f6946344d6b62352e706e67"" data-canonical-src=""http://i.imgur.com/iF4Mkb5.png"" style=""box-sizing: content-box; max-width: 100%;""></a>&nbsp;<br style=""box-sizing: border-box;""><i style=""box-sizing: border-box;""><a href=""http://www.puncsky.com/blog/2016/02/14/crack-the-system-design-interview/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Crack the system design interview</a></i></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">In an RPC, a client causes a procedure to execute on a different address space, usually a remote server. The procedure is coded as if it were a local procedure call, abstracting away the details of how to communicate with the server from the client program. Remote calls are usually slower and less reliable than local calls so it is helpful to distinguish RPC calls from local calls. Popular RPC frameworks include&nbsp;<a href=""https://developers.google.com/protocol-buffers/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Protobuf</a>,&nbsp;<a href=""https://thrift.apache.org/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Thrift</a>, and&nbsp;<a href=""https://avro.apache.org/docs/current/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Avro</a>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">RPC is a request-response protocol:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Client program</span>&nbsp;- Calls the client stub procedure. The parameters are pushed onto the stack like a local procedure call.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Client stub procedure</span>&nbsp;- Marshals (packs) procedure id and arguments into a request message.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Client communication module</span>&nbsp;- OS sends the message from the client to the server.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Server communication module</span>&nbsp;- OS passes the incoming packets to the server stub procedure.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Server stub procedure</span>&nbsp;- Unmarshalls the results, calls the server procedure matching the procedure id and passes the given arguments.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The server response repeats the steps above in reverse order.</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Sample RPC calls:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">GET /someoperation?data=anId  POST /anotheroperation {   ""data"":""anId"";   ""anotherdata"": ""another value"" } </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">RPC is focused on exposing behaviors. RPCs are often used for performance reasons with internal communications, as you can hand-craft native calls to better fit your use cases.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Choose a Native Library aka SDK when:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">You know your target platform.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">You want to control how your ""logic"" is accessed</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">You want to control how error control happens off your library</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Performance and end user experience is your primary concern</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">HTTP APIs following&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">REST</span>&nbsp;tend to be used more often for public APIs.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-rpc"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-rpc"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): RPC</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">RPC clients become tightly coupled to the service implementation.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">A new API must be definied for every new operation or use case.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">It can be difficult to debug RPC.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">You might not be able to leverage existing technologies out of the box. For example, it might require additional effort to ensure&nbsp;<a href=""http://etherealbits.com/2012/12/debunking-the-myths-of-rpc-rest/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">RPC calls are properly cached</a>&nbsp;on caching servers such as&nbsp;<a href=""http://www.squid-cache.org/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Squid</a>.</li></ul>"
"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Representational state transfer (REST)</h3>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">REST is an architectural style enforcing a client/server model where the client acts on a set of resources managed by the server. The server provides a representation of resources and actions that can either manipulate or get a new representation of resources. All communication must be stateless and cacheable.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">There are four qualities of a RESTful interface:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Identify resources (URI in HTTP)</span>&nbsp;- use the same URI regardless of any operation.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Change with representations (Verbs in HTTP)</span>&nbsp;- use verbs, headers, and body.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Self-descriptive error message (status response in HTTP)</span>&nbsp;- Use status codes, don't reinvent the wheel.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;""><a href=""http://restcookbook.com/Basics/hateoas/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HATEOAS</a>&nbsp;(HTML interface for HTTP)</span>&nbsp;- your web service should be fully accessible in a browser.</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Sample REST calls:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">GET /someresources/anId  PUT /someresources/anId {""anotherdata"": ""another value""} </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">REST is focused on exposing data. It minimizes the coupling between client/server and is often used for public HTTP APIs. REST uses a more generic and uniform method of exposing resources through URIs,&nbsp;<a href=""https://github.com/for-GET/know-your-http-well/blob/master/headers.md"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">representation through headers</a>, and actions through verbs such as GET, POST, PUT, DELETE, and PATCH. Being stateless, REST is great for horizontal scaling and partitioning.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-disadvantages-rest"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#disadvantages-rest"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Disadvantage(s): REST</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">With REST being focused on exposing data, it might not be a good fit if resources are not naturally organized or accessed in a simple hierarchy. For example, returning all updated records from the past hour matching a particular set of events is not easily expressed as a path. With REST, it is likely to be implemented with a combination of URI path, query parameters, and possibly the request body.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">REST typically relies on a few verbs (GET, POST, PUT, DELETE, and PATCH) which sometimes doesn't fit your use case. For example, moving expired documents to the archive folder might not cleanly fit within these verbs.</li></ul>"
"<h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Security</h2>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">This section could use some updates. Consider&nbsp;<a href=""https://github.com/donnemartin/system-design-primer#contributing"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">contributing</a>!</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Security is a broad topic. Unless you have considerable experience, a security background, or are applying for a position that requires knowledge of security, you probably won't need to know more than the basics:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Encrypt in transit and at rest.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Sanitize all user inputs or any input parameters exposed to user to prevent&nbsp;<a href=""https://en.wikipedia.org/wiki/Cross-site_scripting"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">XSS</a>&nbsp;and&nbsp;<a href=""https://en.wikipedia.org/wiki/SQL_injection"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL injection</a>.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use parameterized queries to prevent SQL injection.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use the principle of&nbsp;<a href=""https://en.wikipedia.org/wiki/Principle_of_least_privilege"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">least privilege</a>.</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-12"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-12"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/FallibleInc/security-guide-for-developers"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Security guide for developers</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.owasp.org/index.php/OWASP_Top_Ten_Cheat_Sheet"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">OWASP top ten</a></li></ul>"
"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Powers of two table</h3>"	"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Powers of two table</h3><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">Power           Exact Value         Approx Value        Bytes --------------------------------------------------------------- 7                             128 8                             256 10                           1024   1 thousand           1 KB 16                         65,536                       64 KB 20                      1,048,576   1 million            1 MB 30                  1,073,741,824   1 billion            1 GB 32                  4,294,967,296                        4 GB 40              1,099,511,627,776   1 trillion           1 TB </code></pre><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-13"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-13"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://en.wikipedia.org/wiki/Power_of_two"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Powers of two</a></li></ul>"
"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Latency numbers every programmer should know</h3>"	"<pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">Latency Comparison Numbers -------------------------- L1 cache reference                           0.5 ns Branch mispredict                            5   ns L2 cache reference                           7   ns                      14x L1 cache Mutex lock/unlock                          100   ns Main memory reference                      100   ns                      20x L2 cache, 200x L1 cache Compress 1K bytes with Zippy            10,000   ns       10 us Send 1 KB bytes over 1 Gbps network     10,000   ns       10 us Read 4 KB randomly from SSD*           150,000   ns      150 us          ~1GB/sec SSD Read 1 MB sequentially from memory     250,000   ns      250 us Round trip within same datacenter      500,000   ns      500 us Read 1 MB sequentially from SSD*     1,000,000   ns    1,000 us    1 ms  ~1GB/sec SSD, 4X memory Disk seek                           10,000,000   ns   10,000 us   10 ms  20x datacenter roundtrip Read 1 MB sequentially from 1 Gbps  10,000,000   ns   10,000 us   10 ms  40x memory, 10X SSD Read 1 MB sequentially from disk    30,000,000   ns   30,000 us   30 ms 120x memory, 30X SSD Send packet CA-&gt;Netherlands-&gt;CA    150,000,000   ns  150,000 us  150 ms  Notes ----- 1 ns = 10^-9 seconds 1 us = 10^-6 seconds = 1,000 ns 1 ms = 10^-3 seconds = 1,000 us = 1,000,000 ns </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Handy metrics based on numbers above:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Read sequentially from disk at 30 MB/s</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Read sequentially from 1 Gbps Ethernet at 100 MB/s</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Read sequentially from SSD at 1 GB/s</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Read sequentially from main memory at 4 GB/s</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">6-7 world-wide round trips per second</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">2,000 round trips per second within a data center</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-latency-numbers-visualized"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#latency-numbers-visualized"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Latency numbers visualized</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/77f72259e1eb58596b564d1ad823af1853bc60a3/687474703a2f2f692e696d6775722e636f6d2f6b307431652e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/77f72259e1eb58596b564d1ad823af1853bc60a3/687474703a2f2f692e696d6775722e636f6d2f6b307431652e706e67"" alt="""" style=""box-sizing: content-box; max-width: 100%;""></a></p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-14"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-14"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://gist.github.com/jboner/2841832"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Latency numbers every programmer should know - 1</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://gist.github.com/hellerbarde/2843375"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Latency numbers every programmer should know - 2</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.cs.cornell.edu/projects/ladis2009/talks/dean-keynote-ladis2009.pdf"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Designs, lessons, and advice from building large distributed systems</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://static.googleusercontent.com/media/research.google.com/en//people/jeff/stanford-295-talk.pdf"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Software Engineering Advice from Building Large-Scale Distributed Systems</a></li></ul>"
"<h1 style=""box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Design Mint.com</h1>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Note: This document links directly to relevant areas found in the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-1-outline-use-cases-and-constraints"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#step-1-outline-use-cases-and-constraints"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use cases</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-well-scope-the-problem-to-handle-only-the-following-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#well-scope-the-problem-to-handle-only-the-following-use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;connects to a financial account</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;extracts transactions from the account<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Updates daily</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Categorizes transactions<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Allows manual category override by the user</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">No automatic re-categorization</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Analyzes monthly spending, by category</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;recommends a budget<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Allows users to manually set a budget</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Sends notifications when approaching or exceeding budget</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;has high availability</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-out-of-scope"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#out-of-scope"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Out of scope</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;performs additional logging and analytics</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-constraints-and-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#constraints-and-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Constraints and assumptions</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-state-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#state-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>State assumptions</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Traffic is not evenly distributed</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Automatic daily update of accounts applies only to users active in the past 30 days</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Adding or removing financial accounts is relatively rare</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Budget notifications don't need to be instant</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">10 million users<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">10 budget categories per user = 100 million budget items</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Example categories:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Housing = $1,000</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Food = $200</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Gas = $100</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Sellers are used to determine transaction category<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">50,000 sellers</li></ul></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">30 million financial accounts</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">5 billion transactions per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">500 million read requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">10:1 write to read ratio<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Write-heavy, users make transactions daily, but few visit the site daily</li></ul></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-calculate-usage"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#calculate-usage"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Calculate usage</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Size per transaction:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">user_id</code>&nbsp;- 8 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">created_at</code>&nbsp;- 5 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">seller</code>&nbsp;- 32 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">amount</code>&nbsp;- 5 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Total: ~50 bytes</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">250 GB of new transaction content per month<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">50 bytes per transaction * 5 billion transactions per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">9 TB of new transaction content in 3 years</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Assume most are new transactions instead of updates to existing ones</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">2,000 transactions per second on average</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">200 read requests per second on average</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Handy conversion guide:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">2.5 million seconds per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 request per second = 2.5 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40 requests per second = 100 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 requests per second = 1 billion requests per month</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-2-create-a-high-level-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#step-2-create-a-high-level-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 2: Create a high level design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Outline a high level design with all important components.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/a1129136225c67ce2a92f4b15a7a27653b6257b1/687474703a2f2f692e696d6775722e636f6d2f45386b6c7242682e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/a1129136225c67ce2a92f4b15a7a27653b6257b1/687474703a2f2f692e696d6775722e636f6d2f45386b6c7242682e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/E8klrBh.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-3-design-core-components"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#step-3-design-core-components"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 3: Design core components</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Dive into details for each core component.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-connects-to-a-financial-account"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#use-case-user-connects-to-a-financial-account"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User connects to a financial account</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We could store info on the 10 million users in a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">relational database</a>. We should discuss the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">use cases and tradeoffs between choosing SQL or NoSQL</a>.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;sends a request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>, running as a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">reverse proxy</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Accounts API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Accounts API</span>&nbsp;server updates the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">accounts</code>&nbsp;table with the newly entered account info</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">accounts</code>&nbsp;table could have the following structure:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">id int NOT NULL AUTO_INCREMENT created_at datetime NOT NULL last_update datetime NOT NULL account_url varchar(255) NOT NULL account_login varchar(32) NOT NULL account_password_hash char(64) NOT NULL user_id int NOT NULL PRIMARY KEY(id) FOREIGN KEY(user_id) REFERENCES users(id) </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll create an&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#use-good-indices"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">index</a>&nbsp;on&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">id</code>,&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">user_id</code>, and&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">created_at</code>&nbsp;to speed up lookups (log-time instead of scanning the entire table) and to keep the data in memory. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=""box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">1</a></span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll use a public&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">REST API</span></a>:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">$ curl -X POST --data '{ ""user_id"": ""foo"", ""account_url"": ""bar"", \     ""account_login"": ""baz"", ""account_password"": ""qux"" }' \     https://mint.com/api/v1/account </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">For internal communications, we could use&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Remote Procedure Calls</a>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Next, the service extracts transactions from the account.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-service-extracts-transactions-from-the-account"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#use-case-service-extracts-transactions-from-the-account"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: Service extracts transactions from the account</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll want to extract information from an account in these cases:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The user first links the account</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The user manually refreshes the account</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Automatically each day for users who have been active in the past 30 days</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Data flow:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;sends a request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Accounts API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Accounts API</span>&nbsp;server places a job on a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Queue</span>&nbsp;such as Amazon SQS or&nbsp;<a href=""https://www.rabbitmq.com/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">RabbitMQ</a><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Extracting transactions could take awhile, we'd probably want to do this&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#asynchronism"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">asynchronously with a queue</a>, although this introduces additional complexity</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Transaction Extraction Service</span>&nbsp;does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Pulls from the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Queue</span>&nbsp;and extracts transactions for the given account from the financial institution, storing the results as raw log files in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Uses the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Category Service</span>&nbsp;to categorize each transaction</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Uses the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Budget Service</span>&nbsp;to calculate aggregate monthly spending by category<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Budget Service</span>&nbsp;uses the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Notification Service</span>&nbsp;to let users know if they are nearing or have exceeded their budget</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Updates the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">transactions</code>&nbsp;table with categorized transactions</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Updates the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">monthly_spending</code>&nbsp;table with aggregate monthly spending by category</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Notifies the user the transactions have completed through the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Notification Service</span>:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Uses a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Queue</span>&nbsp;(not pictured) to asynchronously send out notifications</li></ul></li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">transactions</code>&nbsp;table could have the following structure:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">id int NOT NULL AUTO_INCREMENT created_at datetime NOT NULL seller varchar(32) NOT NULL amount decimal NOT NULL user_id int NOT NULL PRIMARY KEY(id) FOREIGN KEY(user_id) REFERENCES users(id) </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll create an&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#use-good-indices"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">index</a>&nbsp;on&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">id</code>,&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">user_id</code>, and&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">created_at</code>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">monthly_spending</code>&nbsp;table could have the following structure:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">id int NOT NULL AUTO_INCREMENT month_year date NOT NULL category varchar(32) amount decimal NOT NULL user_id int NOT NULL PRIMARY KEY(id) FOREIGN KEY(user_id) REFERENCES users(id) </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll create an&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#use-good-indices"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">index</a>&nbsp;on&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">id</code>&nbsp;and&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">user_id</code>.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-category-service"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#category-service"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Category service</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">For the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Category Service</span>, we can seed a seller-to-category dictionary with the most popular sellers. If we estimate 50,000 sellers and estimate each entry to take less than 255 bytes, the dictionary would only take about 12 MB of memory.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class DefaultCategories(Enum):      HOUSING = 0     FOOD = 1     GAS = 2     SHOPPING = 3     ...  seller_category_map = {} seller_category_map['Exxon'] = DefaultCategories.GAS seller_category_map['Target'] = DefaultCategories.SHOPPING ... </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">For sellers not initially seeded in the map, we could use a crowdsourcing effort by evaluating the manual category overrides our users provide. We could use a heap to quickly lookup the top manual override per seller in O(1) time.</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class Categorizer(object):      def __init__(self, seller_category_map, self.seller_category_crowd_overrides_map):         self.seller_category_map = seller_category_map         self.seller_category_crowd_overrides_map = \             seller_category_crowd_overrides_map      def categorize(self, transaction):         if transaction.seller in self.seller_category_map:             return self.seller_category_map[transaction.seller]         elif transaction.seller in self.seller_category_crowd_overrides_map:             self.seller_category_map[transaction.seller] = \                 self.seller_category_crowd_overrides_map[transaction.seller].peek_min()             return self.seller_category_map[transaction.seller]         return None </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Transaction implementation:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class Transaction(object):      def __init__(self, created_at, seller, amount):         self.timestamp = timestamp         self.seller = seller         self.amount = amount </code></pre><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-service-recommends-a-budget"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#use-case-service-recommends-a-budget"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: Service recommends a budget</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To start, we could use a generic budget template that allocates category amounts based on income tiers. Using this approach, we would not have to store the 100 million budget items identified in the constraints, only those that the user overrides. If a user overrides a budget category, which we could store the override in the&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">TABLE budget_overrides</code>.</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class Budget(object):      def __init__(self, income):         self.income = income         self.categories_to_budget_map = self.create_budget_template()      def create_budget_template(self):         return {             'DefaultCategories.HOUSING': income * .4,             'DefaultCategories.FOOD': income * .2             'DefaultCategories.GAS': income * .1,             'DefaultCategories.SHOPPING': income * .2             ...         }      def override_category_budget(self, category, amount):         self.categories_to_budget_map[category] = amount </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">For the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Budget Service</span>, we can potentially run SQL queries on the&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">transactions</code>&nbsp;table to generate the&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">monthly_spending</code>&nbsp;aggregate table. The&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">monthly_spending</code>&nbsp;table would likely have much fewer rows than the total 5 billion transactions, since users typically have many transactions per month.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">As an alternative, we can run&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MapReduce</span>&nbsp;jobs on the raw transaction files to:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Categorize each transaction</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Generate aggregate monthly spending by category</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Running analyses on the transaction files could significantly reduce the load on the database.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We could call the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Budget Service</span>&nbsp;to re-run the analysis if the user updates a category.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Sample log file format, tab delimited:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">user_id   timestamp   seller  amount </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">MapReduce</span>&nbsp;implementation:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class SpendingByCategory(MRJob):      def __init__(self, categorizer):         self.categorizer = categorizer         self.current_year_month = calc_current_year_month()         ...      def calc_current_year_month(self):         """"""Return the current year and month.""""""         ...      def extract_year_month(self, timestamp):         """"""Return the year and month portions of the timestamp.""""""         ...      def handle_budget_notifications(self, key, total):         """"""Call notification API if nearing or exceeded budget.""""""         ...      def mapper(self, _, line):         """"""Parse each log line, extract and transform relevant lines.          Argument line will be of the form:          user_id   timestamp   seller  amount          Using the categorizer to convert seller to category,         emit key value pairs of the form:          (user_id, 2016-01, shopping), 25         (user_id, 2016-01, shopping), 100         (user_id, 2016-01, gas), 50         """"""         user_id, timestamp, seller, amount = line.split('\t')         category = self.categorizer.categorize(seller)         period = self.extract_year_month(timestamp)         if period == self.current_year_month:             yield (user_id, period, category), amount      def reducer(self, key, value):         """"""Sum values for each key.          (user_id, 2016-01, shopping), 125         (user_id, 2016-01, gas), 50         """"""         total = sum(values)         yield key, sum(values) </code></pre><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-4-scale-the-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#step-4-scale-the-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 4: Scale the design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/12fea5f9324f74189a9cd983b02239c68615b67e/687474703a2f2f692e696d6775722e636f6d2f563571353776552e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/12fea5f9324f74189a9cd983b02239c68615b67e/687474703a2f2f692e696d6775722e636f6d2f563571353776552e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/V5q57vU.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">State you would 1)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmark/Load Test</span>, 2)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/mint"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>?&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">CDN</span>?<span style=""box-sizing: border-box; font-weight: 600;"">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Trade-Offs</span>&nbsp;for each?</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#domain-name-system"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DNS</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#content-delivery-network"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#load-balancer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Load balancer</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Horizontal scaling</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server (reverse proxy)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">API server (application layer)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Relational database management system (RDBMS)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#fail-over"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL write master-slave failover</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#master-slave-replication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Master-slave replication</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#aysnchronism"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Asynchronism</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#consistency-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Consistency patterns</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#availability-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Availability patterns</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll add an additional use case:&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;accesses summaries and transactions.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">User sessions, aggregate stats by category, and recent transactions could be placed in a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;such as Redis or Memcached.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;sends a read request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read API</span>&nbsp;server<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Static content can be served from the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>&nbsp;such as S3, which is cached on the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">CDN</span></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read API</span>&nbsp;server does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Checks the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;for the content<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">If the url is in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>, returns the cached contents</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Else<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">If the url is in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>, fetches the contents<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Updates the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;with the contents</li></ul></li></ul></li></ul></li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refer to&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#when-to-update-the-cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">When to update the cache</a>&nbsp;for tradeoffs and alternatives. The approach above describes&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#cache-aside"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">cache-aside</a>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Instead of keeping the&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">monthly_spending</code>&nbsp;aggregate table in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>, we could create a separate&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Analytics Database</span>&nbsp;using a data warehousing solution such as Amazon Redshift or Google BigQuery.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We might only want to store a month of&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">transactions</code>&nbsp;data in the database, while storing the rest in a data warehouse or in an&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>. An&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>&nbsp;such as Amazon S3 can comfortably handle the constraint of 250 GB of new content per month.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To address the 2,000&nbsp;<em style=""box-sizing: border-box;"">average</em>&nbsp;read requests per second (higher at peak), traffic for popular content should be handled by the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;instead of the database. The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;is also useful for handling the unevenly distributed traffic and traffic spikes. The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Read Replicas</span>&nbsp;should be able to handle the cache misses, as long as the replicas are not bogged down with replicating writes.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">200&nbsp;<em style=""box-sizing: border-box;"">average</em>&nbsp;transaction writes per second (higher at peak) might be tough for a single&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Write Master-Slave</span>. We might need to employ additional SQL scaling patterns:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Federation</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Sharding</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalization</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sql-tuning"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL Tuning</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We should also consider moving some data to a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span>.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-additional-talking-points"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#additional-talking-points"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Additional talking points</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-nosql"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#nosql"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>NoSQL</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Key-value store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Document store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wide column store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Graph database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL vs NoSQL</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Caching</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Where to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#client-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Client caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cdn-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#web-server-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#database-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Database caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Application caching</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">What to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the database query level</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the object level</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">When to update the cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache-aside"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache-aside</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-through"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-through</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-behind (write-back)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#refresh-ahead"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Refresh ahead</a></li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-asynchronism-and-microservices"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#asynchronism-and-microservices"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Asynchronism and microservices</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Message queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Task queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Back pressure</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Microservices</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-communications"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#communications"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Communications</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Discuss tradeoffs:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">External communication with clients -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HTTP APIs following REST</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Internal communications -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">RPC</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#service-discovery"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Service discovery</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-security"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#security"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Security</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refer to the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#security"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">security section</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-latency-numbers"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#latency-numbers"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Latency numbers</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Latency numbers every programmer should know</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-ongoing"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#ongoing"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Ongoing</h3><ul style=""box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;""><li style=""box-sizing: border-box;"">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Scaling is an iterative process</li></ul>"
"<h1 style=""box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Design Pastebin.com (or Bit.ly)</h1>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Note: This document links directly to relevant areas found in the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Design Bit.ly</span>&nbsp;- is a similar question, except pastebin requires storing the paste contents instead of the original unshortened url.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-1-outline-use-cases-and-constraints"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#step-1-outline-use-cases-and-constraints"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use cases</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-well-scope-the-problem-to-handle-only-the-following-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#well-scope-the-problem-to-handle-only-the-following-use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;enters a block of text and gets a randomly generated link<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Expiration<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Default setting does not expire</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Can optionally set a timed expiration</li></ul></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;enters a paste's url and views the contents</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;is anonymous</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;tracks analytics of pages<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Monthly visit stats</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;deletes expired pastes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;has high availability</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-out-of-scope"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#out-of-scope"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Out of scope</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;registers for an account<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;verifies email</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;logs into a registered account<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;edits the document</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;can set visibility</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;can set the shortlink</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-constraints-and-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#constraints-and-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Constraints and assumptions</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-state-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#state-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>State assumptions</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Traffic is not evenly distributed</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Following a short link should be fast</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Pastes are text only</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Page view analytics do not need to be realtime</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">10 million users</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">10 million paste writes per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">100 million paste reads per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">10:1 read to write ratio</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-calculate-usage"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#calculate-usage"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Calculate usage</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Size per paste<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">1 KB content per paste</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">shortlink</code>&nbsp;- 7 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">expiration_length_in_minutes</code>&nbsp;- 4 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">created_at</code>&nbsp;- 5 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">paste_path</code>&nbsp;- 255 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">total = ~1.27 KB</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">12.7 GB of new paste content per month<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">1.27 KB per paste * 10 million pastes per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">~450 GB of new paste content in 3 years</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">360 million shortlinks in 3 years</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Assume most are new pastes instead of updates to existing ones</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">4 paste writes per second on average</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40 read requests per second on average</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Handy conversion guide:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">2.5 million seconds per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 request per second = 2.5 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40 requests per second = 100 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 requests per second = 1 billion requests per month</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-2-create-a-high-level-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#step-2-create-a-high-level-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 2: Create a high level design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Outline a high level design with all important components.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/2e0371e591b8311e36f5f5fa6ae18711f252b1f8/687474703a2f2f692e696d6775722e636f6d2f424b73426e6d472e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/2e0371e591b8311e36f5f5fa6ae18711f252b1f8/687474703a2f2f692e696d6775722e636f6d2f424b73426e6d472e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/BKsBnmG.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-3-design-core-components"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#step-3-design-core-components"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 3: Design core components</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Dive into details for each core component.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-enters-a-block-of-text-and-gets-a-randomly-generated-link"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#use-case-user-enters-a-block-of-text-and-gets-a-randomly-generated-link"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User enters a block of text and gets a randomly generated link</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We could use a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">relational database</a>&nbsp;as a large hash table, mapping the generated url to a file server and path containing the paste file.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Instead of managing a file server, we could use a managed&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>&nbsp;such as Amazon S3 or a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#document-store"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">NoSQL document store</a>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">An alternative to a relational database acting as a large hash table, we could use a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#key-value-store"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">NoSQL key-value store</a>. We should discuss the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">tradeoffs between choosing SQL or NoSQL</a>. The following discussion uses the relational database approach.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;sends a create paste request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>, running as a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">reverse proxy</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Write API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Write API</span>&nbsp;server does does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Generates a unique url<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Checks if the url is unique by looking at the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>&nbsp;for a duplicate</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">If the url is not unique, it generates another url</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">If we supported a custom url, we could use the user-supplied (also check for a duplicate)</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Saves to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">pastes</code>&nbsp;table</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Saves the paste data to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Returns the url</li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">pastes</code>&nbsp;table could have the following structure:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">shortlink char(7) NOT NULL expiration_length_in_minutes int NOT NULL created_at datetime NOT NULL paste_path varchar(255) NOT NULL PRIMARY KEY(shortlink) </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll create an&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#use-good-indices"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">index</a>&nbsp;on&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">shortlink</code>&nbsp;and&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">created_at</code>&nbsp;to speed up lookups (log-time instead of scanning the entire table) and to keep the data in memory. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=""box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">1</a></span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To generate the unique url, we could:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Take the&nbsp;<a href=""https://en.wikipedia.org/wiki/MD5"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">MD5</span></a>&nbsp;hash of the user's ip_address + timestamp<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">MD5 is a widely used hashing function that produces a 128-bit hash value</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">MD5 is uniformly distributed</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Alternatively, we could also take the MD5 hash of randomly-generated data</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.kerstner.at/2012/07/shortening-strings-using-base-62-encoding/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Base 62</span></a>&nbsp;encode the MD5 hash<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Base 62 encodes to&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">[a-zA-Z0-9]</code>&nbsp;which works well for urls, eliminating the need for escaping special characters</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">There is only one hash result for the original input and and Base 62 is deterministic (no randomness involved)</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Base 64 is another popular encoding but provides issues for urls because of the additional&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">+</code>&nbsp;and&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">/</code>characters</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The following&nbsp;<a href=""http://stackoverflow.com/questions/742013/how-to-code-a-url-shortener"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Base 62 pseudocode</a>&nbsp;runs in O(k) time where k is the number of digits = 7:</li></ul></li></ul><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">def base_encode(num, base=62):     digits = []     while num &gt; 0       remainder = modulo(num, base)       digits.push(remainder)       num = divide(num, base)     digits = digits.reverse </code></pre><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Take the first 7 characters of the output, which results in 62^7 possible values and should be sufficient to handle our constraint of 360 million shortlinks in 3 years:</li></ul><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">url = base_encode(md5(ip_address+timestamp))[:URL_LENGTH] </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll use a public&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">REST API</span></a>:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">$ curl -X POST --data '{ ""expiration_length_in_minutes"": ""60"", \     ""paste_contents"": ""Hello World!"" }' https://pastebin.com/api/v1/paste </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Response:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">{     ""shortlink"": ""foobar"" } </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">For internal communications, we could use&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Remote Procedure Calls</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-enters-a-pastes-url-and-views-the-contents"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#use-case-user-enters-a-pastes-url-and-views-the-contents"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User enters a paste's url and views the contents</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;sends a get paste request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read API</span>&nbsp;server does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Checks the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>&nbsp;for the generated url<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">If the url is in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>, fetch the paste contents from the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Else, return an error message for the user</li></ul></li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">REST API:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">$ curl https://pastebin.com/api/v1/paste?shortlink=foobar </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Response:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">{     ""paste_contents"": ""Hello World""     ""created_at"": ""YYYY-MM-DD HH:MM:SS""     ""expiration_length_in_minutes"": ""60"" } </code></pre><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-service-tracks-analytics-of-pages"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#use-case-service-tracks-analytics-of-pages"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: Service tracks analytics of pages</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Since realtime analytics are not a requirement, we could simply&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MapReduce</span>&nbsp;the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;logs to generate hit counts.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class HitCounts(MRJob):      def extract_url(self, line):         """"""Extract the generated url from the log line.""""""         ...      def extract_year_month(self, line):         """"""Return the year and month portions of the timestamp.""""""         ...      def mapper(self, _, line):         """"""Parse each log line, extract and transform relevant lines.          Emit key value pairs of the form:          (2016-01, url0), 1         (2016-01, url0), 1         (2016-01, url1), 1         """"""         url = self.extract_url(line)         period = self.extract_year_month(line)         yield (period, url), 1      def reducer(self, key, value):         """"""Sum values for each key.          (2016-01, url0), 2         (2016-01, url1), 1         """"""         yield key, sum(values) </code></pre><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-service-deletes-expired-pastes"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#use-case-service-deletes-expired-pastes"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: Service deletes expired pastes</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To delete expired pastes, we could just scan the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>&nbsp;for all entries whose expiration timestamp are older than the current timestamp. All expired entries would then be deleted (or marked as expired) from the table.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-4-scale-the-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#step-4-scale-the-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 4: Scale the design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/4aee2d26ebedc20e7fa07a2c30780e332fa29f2c/687474703a2f2f692e696d6775722e636f6d2f346564584730542e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/4aee2d26ebedc20e7fa07a2c30780e332fa29f2c/687474703a2f2f692e696d6775722e636f6d2f346564584730542e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/4edXG0T.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">State you would do this iteratively: 1)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmark/Load Test</span>, 2)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/pastebin"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>?&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">CDN</span>?<span style=""box-sizing: border-box; font-weight: 600;"">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Trade-Offs</span>&nbsp;for each?</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#domain-name-system"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DNS</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#content-delivery-network"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#load-balancer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Load balancer</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Horizontal scaling</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server (reverse proxy)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">API server (application layer)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Relational database management system (RDBMS)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#fail-over"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL write master-slave failover</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#master-slave-replication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Master-slave replication</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#consistency-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Consistency patterns</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#availability-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Availability patterns</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Analytics Database</span>&nbsp;could use a data warehousing solution such as Amazon Redshift or Google BigQuery.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">An&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>&nbsp;such as Amazon S3 can comfortably handle the constraint of 12.7 GB of new content per month.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To address the 40&nbsp;<em style=""box-sizing: border-box;"">average</em>&nbsp;read requests per second (higher at peak), traffic for popular content should be handled by the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;instead of the database. The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;is also useful for handling the unevenly distributed traffic and traffic spikes. The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Read Replicas</span>&nbsp;should be able to handle the cache misses, as long as the replicas are not bogged down with replicating writes.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">4&nbsp;<em style=""box-sizing: border-box;"">average</em>&nbsp;paste writes per second (with higher at peak) should be do-able for a single&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Write Master-Slave</span>. Otherwise, we'll need to employ additional SQL scaling patterns:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Federation</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Sharding</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalization</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sql-tuning"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL Tuning</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We should also consider moving some data to a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span>.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-additional-talking-points"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#additional-talking-points"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Additional talking points</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-nosql"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#nosql"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>NoSQL</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Key-value store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Document store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wide column store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Graph database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL vs NoSQL</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Caching</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Where to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#client-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Client caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cdn-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#web-server-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#database-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Database caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Application caching</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">What to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the database query level</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the object level</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">When to update the cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache-aside"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache-aside</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-through"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-through</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-behind (write-back)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#refresh-ahead"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Refresh ahead</a></li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-asynchronism-and-microservices"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#asynchronism-and-microservices"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Asynchronism and microservices</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Message queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Task queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Back pressure</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Microservices</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-communications"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#communications"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Communications</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Discuss tradeoffs:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">External communication with clients -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HTTP APIs following REST</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Internal communications -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">RPC</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#service-discovery"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Service discovery</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-security"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#security"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Security</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refer to the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#security"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">security section</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-latency-numbers"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#latency-numbers"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Latency numbers</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Latency numbers every programmer should know</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-ongoing"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#ongoing"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Ongoing</h3><ul style=""box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;""><li style=""box-sizing: border-box;"">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Scaling is an iterative process</li></ul>"
"<h1 style=""box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Design Amazon's sales rank by category feature</h1>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Note: This document links directly to relevant areas found in the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-1-outline-use-cases-and-constraints"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#step-1-outline-use-cases-and-constraints"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use cases</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-well-scope-the-problem-to-handle-only-the-following-use-case"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#well-scope-the-problem-to-handle-only-the-following-use-case"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>We'll scope the problem to handle only the following use case</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;calculates the past week's most popular products by category</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;views the past week's most popular products by category</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;has high availability</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-out-of-scope"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#out-of-scope"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Out of scope</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The general e-commerce site<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Design components only for calculating sales rank</li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-constraints-and-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#constraints-and-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Constraints and assumptions</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-state-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#state-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>State assumptions</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Traffic is not evenly distributed</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Items can be in multiple categories</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Items cannot change categories</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">There are no subcategories ie&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">foo/bar/baz</code></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Results must be updated hourly<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">More popular products might need to be updated more frequently</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">10 million products</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1000 categories</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 billion transactions per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">100 billion read requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">100:1 read to write ratio</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-calculate-usage"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#calculate-usage"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Calculate usage</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Size per transaction:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">created_at</code>&nbsp;- 5 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">product_id</code>&nbsp;- 8 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">category_id</code>&nbsp;- 4 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">seller_id</code>&nbsp;- 8 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">buyer_id</code>&nbsp;- 8 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">quantity</code>&nbsp;- 4 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">total_price</code>&nbsp;- 5 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Total: ~40 bytes</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40 GB of new transaction content per month<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">40 bytes per transaction * 1 billion transactions per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1.44 TB of new transaction content in 3 years</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Assume most are new transactions instead of updates to existing ones</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 transactions per second on average</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40,000 read requests per second on average</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Handy conversion guide:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">2.5 million seconds per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 request per second = 2.5 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40 requests per second = 100 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 requests per second = 1 billion requests per month</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-2-create-a-high-level-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#step-2-create-a-high-level-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 2: Create a high level design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Outline a high level design with all important components.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/4dde26cbd75416ff93313d00ac6d7c1e4200064a/687474703a2f2f692e696d6775722e636f6d2f76774d613151752e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/4dde26cbd75416ff93313d00ac6d7c1e4200064a/687474703a2f2f692e696d6775722e636f6d2f76774d613151752e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/vwMa1Qu.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-3-design-core-components"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#step-3-design-core-components"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 3: Design core components</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Dive into details for each core component.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-service-calculates-the-past-weeks-most-popular-products-by-category"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#use-case-service-calculates-the-past-weeks-most-popular-products-by-category"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: Service calculates the past week's most popular products by category</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We could store the raw&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Sales API</span>&nbsp;server log files on a managed&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>&nbsp;such as Amazon S3, rather than managing our own distributed file system.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll assume this is a sample log entry, tab delimited:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">timestamp   product_id  category_id    qty     total_price   seller_id    buyer_id t1          product1    category1      2       20.00         1            1 t2          product1    category2      2       20.00         2            2 t2          product1    category2      1       10.00         2            3 t3          product2    category1      3        7.00         3            4 t4          product3    category2      7        2.00         4            5 t5          product4    category1      1        5.00         5            6 ... </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Sales Rank Service</span>&nbsp;could use&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MapReduce</span>, using the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Sales API</span>&nbsp;server log files as input and writing the results to an aggregate table&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">sales_rank</code>&nbsp;in a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>. We should discuss the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">use cases and tradeoffs between choosing SQL or NoSQL</a>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll use a multi-step&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MapReduce</span>:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Step 1</span>&nbsp;- Transform the data to&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">(category, product_id), sum(quantity)</code></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Step 2</span>&nbsp;- Perform a distributed sort</li></ul><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class SalesRanker(MRJob):      def within_past_week(self, timestamp):         """"""Return True if timestamp is within past week, False otherwise.""""""         ...      def mapper(self, _ line):         """"""Parse each log line, extract and transform relevant lines.          Emit key value pairs of the form:          (category1, product1), 2         (category2, product1), 2         (category2, product1), 1         (category1, product2), 3         (category2, product3), 7         (category1, product4), 1         """"""         timestamp, product_id, category_id, quantity, total_price, seller_id, \             buyer_id = line.split('\t')         if self.within_past_week(timestamp):             yield (category_id, product_id), quantity      def reducer(self, key, value):         """"""Sum values for each key.          (category1, product1), 2         (category2, product1), 3         (category1, product2), 3         (category2, product3), 7         (category1, product4), 1         """"""         yield key, sum(values)      def mapper_sort(self, key, value):         """"""Construct key to ensure proper sorting.          Transform key and value to the form:          (category1, 2), product1         (category2, 3), product1         (category1, 3), product2         (category2, 7), product3         (category1, 1), product4          The shuffle/sort step of MapReduce will then do a         distributed sort on the keys, resulting in:          (category1, 1), product4         (category1, 2), product1         (category1, 3), product2         (category2, 3), product1         (category2, 7), product3         """"""         category_id, product_id = key         quantity = value         yield (category_id, quantity), product_id      def reducer_identity(self, key, value):         yield key, value      def steps(self):         """"""Run the map and reduce steps.""""""         return [             self.mr(mapper=self.mapper,                     reducer=self.reducer),             self.mr(mapper=self.mapper_sort,                     reducer=self.reducer_identity),         ] </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The result would be the following sorted list, which we could insert into the&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">sales_rank</code>&nbsp;table:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">(category1, 1), product4 (category1, 2), product1 (category1, 3), product2 (category2, 3), product1 (category2, 7), product3 </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">sales_rank</code>&nbsp;table could have the following structure:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">id int NOT NULL AUTO_INCREMENT category_id int NOT NULL total_sold int NOT NULL product_id int NOT NULL PRIMARY KEY(id) FOREIGN KEY(category_id) REFERENCES Categories(id) FOREIGN KEY(product_id) REFERENCES Products(id) </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll create an&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#use-good-indices"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">index</a>&nbsp;on&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">id</code>,&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">category_id</code>, and&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">product_id</code>&nbsp;to speed up lookups (log-time instead of scanning the entire table) and to keep the data in memory. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=""box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">1</a></span></p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-views-the-past-weeks-most-popular-products-by-category"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#use-case-user-views-the-past-weeks-most-popular-products-by-category"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User views the past week's most popular products by category</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;sends a request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>, running as a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">reverse proxy</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read API</span>&nbsp;server reads from the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">sales_rank</code>&nbsp;table</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll use a public&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">REST API</span></a>:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">$ curl https://amazon.com/api/v1/popular?category_id=1234 </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Response:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">{     ""id"": ""100"",     ""category_id"": ""1234"",     ""total_sold"": ""100000"",     ""product_id"": ""50"", }, {     ""id"": ""53"",     ""category_id"": ""1234"",     ""total_sold"": ""90000"",     ""product_id"": ""200"", }, {     ""id"": ""75"",     ""category_id"": ""1234"",     ""total_sold"": ""80000"",     ""product_id"": ""3"", }, </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">For internal communications, we could use&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Remote Procedure Calls</a>.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-4-scale-the-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#step-4-scale-the-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 4: Scale the design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/a56f5600f7ae29dc0c2e436b8e4e4b55c44d6894/687474703a2f2f692e696d6775722e636f6d2f4d7a45785030362e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/a56f5600f7ae29dc0c2e436b8e4e4b55c44d6894/687474703a2f2f692e696d6775722e636f6d2f4d7a45785030362e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/MzExP06.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">State you would 1)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmark/Load Test</span>, 2)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/sales_rank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>?&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">CDN</span>?<span style=""box-sizing: border-box; font-weight: 600;"">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Trade-Offs</span>&nbsp;for each?</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#domain-name-system"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DNS</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#content-delivery-network"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#load-balancer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Load balancer</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Horizontal scaling</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server (reverse proxy)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">API server (application layer)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Relational database management system (RDBMS)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#fail-over"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL write master-slave failover</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#master-slave-replication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Master-slave replication</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#consistency-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Consistency patterns</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#availability-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Availability patterns</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Analytics Database</span>&nbsp;could use a data warehousing solution such as Amazon Redshift or Google BigQuery.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We might only want to store a limited time period of data in the database, while storing the rest in a data warehouse or in an&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>. An&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>&nbsp;such as Amazon S3 can comfortably handle the constraint of 40 GB of new content per month.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To address the 40,000&nbsp;<em style=""box-sizing: border-box;"">average</em>&nbsp;read requests per second (higher at peak), traffic for popular content (and their sales rank) should be handled by the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;instead of the database. The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;is also useful for handling the unevenly distributed traffic and traffic spikes. With the large volume of reads, the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Read Replicas</span>&nbsp;might not be able to handle the cache misses. We'll probably need to employ additional SQL scaling patterns.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">400&nbsp;<em style=""box-sizing: border-box;"">average</em>&nbsp;writes per second (higher at peak) might be tough for a single&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Write Master-Slave</span>, also pointing to a need for additional scaling techniques.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">SQL scaling patterns include:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Federation</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Sharding</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalization</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sql-tuning"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL Tuning</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We should also consider moving some data to a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span>.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-additional-talking-points"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#additional-talking-points"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Additional talking points</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-nosql"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#nosql"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>NoSQL</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Key-value store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Document store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wide column store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Graph database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL vs NoSQL</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Caching</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Where to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#client-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Client caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cdn-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#web-server-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#database-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Database caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Application caching</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">What to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the database query level</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the object level</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">When to update the cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache-aside"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache-aside</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-through"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-through</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-behind (write-back)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#refresh-ahead"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Refresh ahead</a></li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-asynchronism-and-microservices"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#asynchronism-and-microservices"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Asynchronism and microservices</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Message queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Task queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Back pressure</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Microservices</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-communications"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#communications"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Communications</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Discuss tradeoffs:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">External communication with clients -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HTTP APIs following REST</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Internal communications -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">RPC</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#service-discovery"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Service discovery</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-security"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#security"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Security</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refer to the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#security"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">security section</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-latency-numbers"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#latency-numbers"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Latency numbers</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Latency numbers every programmer should know</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-ongoing"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#ongoing"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Ongoing</h3><ul style=""box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;""><li style=""box-sizing: border-box;"">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Scaling is an iterative process</li></ul>"
"<h1 style=""box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Design a web crawler</h1>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Note: This document links directly to relevant areas found in the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-1-outline-use-cases-and-constraints"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#step-1-outline-use-cases-and-constraints"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use cases</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-well-scope-the-problem-to-handle-only-the-following-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#well-scope-the-problem-to-handle-only-the-following-use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;crawls a list of urls:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Generates reverse index of words to pages containing the search terms</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Generates titles and snippets for pages<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Title and snippets are static, they do not change based on search query</li></ul></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;inputs a search term and sees a list of relevant pages with titles and snippets the crawler generated<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Only sketch high level components and interactions for this use case, no need to go into depth</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;has high availability</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-out-of-scope"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#out-of-scope"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Out of scope</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Search analytics</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Personalized search results</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Page rank</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-constraints-and-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#constraints-and-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Constraints and assumptions</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-state-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#state-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>State assumptions</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Traffic is not evenly distributed<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Some searches are very popular, while others are only executed once</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Support only anonymous users</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Generating search results should be fast</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The web crawler should not get stuck in an infinite loop<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">We get stuck in an infinite loop if the graph contains a cycle</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 billion links to crawl<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Pages need to be crawled regularly to ensure freshness</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Average refresh rate of about once per week, more frequent for popular sites<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">4 billion links crawled each month</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Average stored size per web page: 500 KB<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">For simplicity, count changes the same as new pages</li></ul></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">100 billion searches per month</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Exercise the use of more traditional systems - don't use existing systems such as&nbsp;<a href=""http://lucene.apache.org/solr/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">solr</a>&nbsp;or&nbsp;<a href=""http://nutch.apache.org/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">nutch</a>.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-calculate-usage"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#calculate-usage"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Calculate usage</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">2 PB of stored page content per month<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">500 KB per page * 4 billion links crawled per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">72 PB of stored page content in 3 years</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1,600 write requests per second</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40,000 search requests per second</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Handy conversion guide:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">2.5 million seconds per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 request per second = 2.5 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40 requests per second = 100 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 requests per second = 1 billion requests per month</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-2-create-a-high-level-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#step-2-create-a-high-level-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 2: Create a high level design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Outline a high level design with all important components.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/379e7661ccfd4303985ca8b90f1ce7e9e664d3ab/687474703a2f2f692e696d6775722e636f6d2f786a64414155762e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/379e7661ccfd4303985ca8b90f1ce7e9e664d3ab/687474703a2f2f692e696d6775722e636f6d2f786a64414155762e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/xjdAAUv.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-3-design-core-components"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#step-3-design-core-components"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 3: Design core components</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Dive into details for each core component.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-service-crawls-a-list-of-urls"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#use-case-service-crawls-a-list-of-urls"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: Service crawls a list of urls</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll assume we have an initial list of&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">links_to_crawl</code>&nbsp;ranked initially based on overall site popularity. If this is not a reasonable assumption, we can seed the crawler with popular sites that link to outside content such as&nbsp;<a href=""https://www.yahoo.com/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Yahoo</a>,&nbsp;<a href=""http://www.dmoz.org/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DMOZ</a>, etc</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll use a table&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">crawled_links</code>&nbsp;to store processed links and their page signatures.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We could store&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">links_to_crawl</code>&nbsp;and&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">crawled_links</code>&nbsp;in a key-value&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span>. For the ranked links in&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">links_to_crawl</code>, we could use&nbsp;<a href=""https://redis.io/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Redis</a>&nbsp;with sorted sets to maintain a ranking of page links. We should discuss the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">use cases and tradeoffs between choosing SQL or NoSQL</a>.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Crawler Service</span>&nbsp;processes each page link by doing the following in a loop:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Takes the top ranked page link to crawl<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Checks&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">crawled_links</code>&nbsp;in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span>&nbsp;for an entry with a similar page signature<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">If we have a similar page, reduces the priority of the page link<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">This prevents us from getting into a cycle</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Continue</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Else, crawls the link<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Adds a job to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Reverse Index Service</span>&nbsp;queue to generate a&nbsp;<a href=""https://en.wikipedia.org/wiki/Search_engine_indexing"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">reverse index</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Adds a job to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Document Service</span>&nbsp;queue to generate a static title and snippet</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Generates the page signature</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Removes the link from&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">links_to_crawl</code>&nbsp;in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Inserts the page link and signature to&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">crawled_links</code>&nbsp;in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span></li></ul></li></ul></li></ul></li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">PagesDataStore</code>&nbsp;is an abstraction within the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Crawler Service</span>&nbsp;that uses the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span>:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class PagesDataStore(object):      def __init__(self, db);         self.db = db         ...      def add_link_to_crawl(self, url):         """"""Add the given link to `links_to_crawl`.""""""         ...      def remove_link_to_crawl(self, url):         """"""Remove the given link from `links_to_crawl`.""""""         ...      def reduce_priority_link_to_crawl(self, url)         """"""Reduce the priority of a link in `links_to_crawl` to avoid cycles.""""""         ...      def extract_max_priority_page(self):         """"""Return the highest priority link in `links_to_crawl`.""""""         ...      def insert_crawled_link(self, url, signature):         """"""Add the given link to `crawled_links`.""""""         ...      def crawled_similar(self, signature):         """"""Determine if we've already crawled a page matching the given signature""""""         ... </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">Page</code>&nbsp;is an abstraction within the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Crawler Service</span>&nbsp;that encapsulates a page, its contents, child urls, and signature:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class Page(object):      def __init__(self, url, contents, child_urls, signature):         self.url = url         self.contents = contents         self.child_urls = child_urls         self.signature = signature </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">Crawler</code>&nbsp;is the main class within&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Crawler Service</span>, composed of&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">Page</code>&nbsp;and&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">PagesDataStore</code>.</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class Crawler(object):      def __init__(self, data_store, reverse_index_queue, doc_index_queue):         self.data_store = data_store         self.reverse_index_queue = reverse_index_queue         self.doc_index_queue = doc_index_queue      def create_signature(self, page):         """"""Create signature based on url and contents.""""""         ...      def crawl_page(self, page):         for url in page.child_urls:             self.data_store.add_link_to_crawl(url)         page.signature = self.create_signature(page)         self.data_store.remove_link_to_crawl(page.url)         self.data_store.insert_crawled_link(page.url, page.signature)      def crawl(self):         while True:             page = self.data_store.extract_max_priority_page()             if page is None:                 break             if self.data_store.crawled_similar(page.signature):                 self.data_store.reduce_priority_link_to_crawl(page.url)             else:                 self.crawl_page(page) </code></pre><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-handling-duplicates"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#handling-duplicates"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Handling duplicates</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We need to be careful the web crawler doesn't get stuck in an infinite loop, which happens when the graph contains a cycle.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll want to remove duplicate urls:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">For smaller lists we could use something like&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">sort | unique</code></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">With 1 billion links to crawl, we could use&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MapReduce</span>&nbsp;to output only entries that have a frequency of 1</li></ul><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class RemoveDuplicateUrls(MRJob):      def mapper(self, _, line):         yield line, 1      def reducer(self, key, values):         total = sum(values)         if total == 1:             yield key, total </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Detecting duplicate content is more complex. We could generate a signature based on the contents of the page and compare those two signatures for similarity. Some potential algorithms are&nbsp;<a href=""https://en.wikipedia.org/wiki/Jaccard_index"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Jaccard index</a>&nbsp;and&nbsp;<a href=""https://en.wikipedia.org/wiki/Cosine_similarity"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">cosine similarity</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-determining-when-to-update-the-crawl-results"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#determining-when-to-update-the-crawl-results"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Determining when to update the crawl results</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Pages need to be crawled regularly to ensure freshness. Crawl results could have a&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">timestamp</code>&nbsp;field that indicates the last time a page was crawled. After a default time period, say one week, all pages should be refreshed. Frequently updated or more popular sites could be refreshed in shorter intervals.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Although we won't dive into details on analytics, we could do some data mining to determine the mean time before a particular page is updated, and use that statistic to determine how often to re-crawl the page.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We might also choose to support a&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">Robots.txt</code>&nbsp;file that gives webmasters control of crawl frequency.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-inputs-a-search-term-and-sees-a-list-of-relevant-pages-with-titles-and-snippets"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#use-case-user-inputs-a-search-term-and-sees-a-list-of-relevant-pages-with-titles-and-snippets"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User inputs a search term and sees a list of relevant pages with titles and snippets</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;sends a request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>, running as a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">reverse proxy</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Query API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Query API</span>&nbsp;server does does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Parses the query<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Removes markup</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Breaks up the text into terms</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Fixes typos</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Normalizes capitalization</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Converts the query to use boolean operations</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Uses the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Reverse Index Service</span>&nbsp;to find documents matching the query<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Reverse Index Service</span>&nbsp;ranks the matching results and returns the top ones</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Uses the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Document Service</span>&nbsp;to return titles and snippets</li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll use a public&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">REST API</span></a>:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">$ curl https://search.com/api/v1/search?query=hello+world </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Response:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">{     ""title"": ""foo's title"",     ""snippet"": ""foo's snippet"",     ""link"": ""https://foo.com"", }, {     ""title"": ""bar's title"",     ""snippet"": ""bar's snippet"",     ""link"": ""https://bar.com"", }, {     ""title"": ""baz's title"",     ""snippet"": ""baz's snippet"",     ""link"": ""https://baz.com"", }, </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">For internal communications, we could use&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Remote Procedure Calls</a>.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-4-scale-the-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#step-4-scale-the-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 4: Scale the design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/ba21a95852d1cf7bb64c8c4622a79d1d5a20d344/687474703a2f2f692e696d6775722e636f6d2f625778507451412e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/ba21a95852d1cf7bb64c8c4622a79d1d5a20d344/687474703a2f2f692e696d6775722e636f6d2f625778507451412e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/bWxPtQA.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">State you would 1)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmark/Load Test</span>, 2)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/web_crawler"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>?&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">CDN</span>?<span style=""box-sizing: border-box; font-weight: 600;"">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Trade-Offs</span>&nbsp;for each?</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#domain-name-system"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DNS</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#load-balancer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Load balancer</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Horizontal scaling</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server (reverse proxy)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">API server (application layer)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#nosql"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">NoSQL</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#consistency-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Consistency patterns</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#availability-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Availability patterns</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Some searches are very popular, while others are only executed once. Popular queries can be served from a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;such as Redis or Memcached to reduce response times and to avoid overloading the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Reverse Index Service</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Document Service</span>. The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;is also useful for handling the unevenly distributed traffic and traffic spikes. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=""box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">1</a></span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Below are a few other optimizations to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Crawling Service</span>:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">To handle the data size and request load, the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Reverse Index Service</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Document Service</span>&nbsp;will likely need to make heavy use sharding and replication.</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">DNS lookup can be a bottleneck, the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Crawler Service</span>&nbsp;can keep its own DNS lookup that is refreshed periodically</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Crawler Service</span>&nbsp;can improve performance and reduce memory usage by keeping many open connections at a time, referred to as&nbsp;<a href=""https://en.wikipedia.org/wiki/Connection_pool"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">connection pooling</a><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Switching to&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#user-datagram-protocol-udp"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">UDP</a>&nbsp;could also boost performance</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Web crawling is bandwidth intensive, ensure there is enough bandwidth to sustain high throughput</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-additional-talking-points"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#additional-talking-points"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Additional talking points</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sql-scaling-patterns"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#sql-scaling-patterns"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>SQL scaling patterns</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#master-slave"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Read replicas</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Federation</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Sharding</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalization</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sql-tuning"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL Tuning</a></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-nosql"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#nosql"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>NoSQL</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Key-value store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Document store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wide column store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Graph database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL vs NoSQL</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Caching</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Where to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#client-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Client caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cdn-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#web-server-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#database-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Database caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Application caching</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">What to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the database query level</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the object level</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">When to update the cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache-aside"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache-aside</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-through"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-through</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-behind (write-back)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#refresh-ahead"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Refresh ahead</a></li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-asynchronism-and-microservices"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#asynchronism-and-microservices"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Asynchronism and microservices</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Message queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Task queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Back pressure</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Microservices</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-communications"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#communications"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Communications</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Discuss tradeoffs:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">External communication with clients -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HTTP APIs following REST</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Internal communications -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">RPC</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#service-discovery"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Service discovery</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-security"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#security"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Security</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refer to the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#security"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">security section</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-latency-numbers"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#latency-numbers"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Latency numbers</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Latency numbers every programmer should know</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-ongoing"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#ongoing"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Ongoing</h3><ul style=""box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;""><li style=""box-sizing: border-box;"">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Scaling is an iterative process</li></ul>"
"<h1 style=""box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Design the data structures for a social network</h1>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Note: This document links directly to relevant areas found in the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-1-outline-use-cases-and-constraints"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#step-1-outline-use-cases-and-constraints"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use cases</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-well-scope-the-problem-to-handle-only-the-following-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#well-scope-the-problem-to-handle-only-the-following-use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;searches for someone and sees the shortest path to the searched person</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;has high availability</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-constraints-and-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#constraints-and-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Constraints and assumptions</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-state-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#state-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>State assumptions</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Traffic is not evenly distributed<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Some searches are more popular than others, while others are only executed once</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Graph data won't fit on a single machine</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Graph edges are unweighted</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">100 million users</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">50 friends per user average</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 billion friend searches per month</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Exercise the use of more traditional systems - don't use graph-specific solutions such as&nbsp;<a href=""http://graphql.org/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">GraphQL</a>&nbsp;or a graph database like&nbsp;<a href=""https://neo4j.com/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Neo4j</a></p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-calculate-usage"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#calculate-usage"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Calculate usage</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">5 billion friend relationships<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">100 million users * 50 friends per user average</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 search requests per second</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Handy conversion guide:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">2.5 million seconds per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 request per second = 2.5 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40 requests per second = 100 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 requests per second = 1 billion requests per month</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-2-create-a-high-level-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#step-2-create-a-high-level-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 2: Create a high level design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Outline a high level design with all important components.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/75bd95a4871663004787cfb1737704918886121b/687474703a2f2f692e696d6775722e636f6d2f7778587971324a2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/75bd95a4871663004787cfb1737704918886121b/687474703a2f2f692e696d6775722e636f6d2f7778587971324a2e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/wxXyq2J.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-3-design-core-components"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#step-3-design-core-components"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 3: Design core components</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Dive into details for each core component.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-searches-for-someone-and-sees-the-shortest-path-to-the-searched-person"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#use-case-user-searches-for-someone-and-sees-the-shortest-path-to-the-searched-person"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User searches for someone and sees the shortest path to the searched person</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Without the constraint of millions of users (vertices) and billions of friend relationships (edges), we could solve this unweighted shortest path task with a general BFS approach:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class Graph(Graph):      def shortest_path(self, source, dest):         if source is None or dest is None:             return None         if source is dest:             return [source.key]         prev_node_keys = self._shortest_path(source, dest)         if prev_node_keys is None:             return None         else:             path_ids = [dest.key]             prev_node_key = prev_node_keys[dest.key]             while prev_node_key is not None:                 path_ids.append(prev_node_key)                 prev_node_key = prev_node_keys[prev_node_key]             return path_ids[::-1]      def _shortest_path(self, source, dest):         queue = deque()         queue.append(source)         prev_node_keys = {source.key: None}         source.visit_state = State.visited         while queue:             node = queue.popleft()             if node is dest:                 return prev_node_keys             prev_node = node             for adj_node in node.adj_nodes.values():                 if adj_node.visit_state == State.unvisited:                     queue.append(adj_node)                     prev_node_keys[adj_node.key] = prev_node.key                     adj_node.visit_state = State.visited         return None </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We won't be able to fit all users on the same machine, we'll need to&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">shard</a>&nbsp;users across&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Person Servers</span>&nbsp;and access them with a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Lookup Service</span>.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;sends a request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>, running as a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">reverse proxy</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Search API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Search API</span>&nbsp;server forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">User Graph Service</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">User Graph Service</span>&nbsp;does does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Uses the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Lookup Service</span>&nbsp;to find the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Person Server</span>&nbsp;where the current user's info is stored</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Finds the appropriate&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Person Server</span>&nbsp;to retrieve the current user's list of&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">friend_ids</code></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Runs a BFS search using the current user as the&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">source</code>&nbsp;and the current user's&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">friend_ids</code>&nbsp;as the ids for each&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">adjacent_node</code></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">To get the&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">adjacent_node</code>&nbsp;from a given id:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">User Graph Service</span>&nbsp;will&nbsp;<em style=""box-sizing: border-box;"">again</em>&nbsp;need to communicate with the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Lookup Service</span>&nbsp;to determine which&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Person Server</span>&nbsp;stores the<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">adjacent_node</code>&nbsp;matching the given id (potential for optimization)</li></ul></li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you should be writing</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Note</span>: Error handling is excluded below for simplicity. Ask if you should code proper error handing.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Lookup Service</span>&nbsp;implementation:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class LookupService(object):      def __init__(self):         self.lookup = self._init_lookup()  # key: person_id, value: person_server      def _init_lookup(self):         ...      def lookup_person_server(self, person_id):         return self.lookup[person_id] </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Person Server</span>&nbsp;implementation:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class PersonServer(object):      def __init__(self):         self.people = {}  # key: person_id, value: person      def add_person(self, person):         ...      def people(self, ids):         results = []         for id in ids:             if id in self.people:                 results.append(self.people[id])         return results </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Person</span>&nbsp;implementation:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class Person(object):      def __init__(self, id, name, friend_ids):         self.id = id         self.name = name         self.friend_ids = friend_ids </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">User Graph Service</span>&nbsp;implementation:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class UserGraphService(object):      def __init__(self, lookup_service):         self.lookup_service = lookup_service      def person(self, person_id):         person_server = self.lookup_service.lookup_person_server(person_id)         return person_server.people([person_id])      def shortest_path(self, source_key, dest_key):         if source_key is None or dest_key is None:             return None         if source_key is dest_key:             return [source_key]         prev_node_keys = self._shortest_path(source_key, dest_key)         if prev_node_keys is None:             return None         else:             # Iterate through the path_ids backwards, starting at dest_key             path_ids = [dest_key]             prev_node_key = prev_node_keys[dest_key]             while prev_node_key is not None:                 path_ids.append(prev_node_key)                 prev_node_key = prev_node_keys[prev_node_key]             # Reverse the list since we iterated backwards             return path_ids[::-1]      def _shortest_path(self, source_key, dest_key, path):         # Use the id to get the Person         source = self.person(source_key)         # Update our bfs queue         queue = deque()         queue.append(source)         # prev_node_keys keeps track of each hop from         # the source_key to the dest_key         prev_node_keys = {source_key: None}         # We'll use visited_ids to keep track of which nodes we've         # visited, which can be different from a typical bfs where         # this can be stored in the node itself         visited_ids = set()         visited_ids.add(source.id)         while queue:             node = queue.popleft()             if node.key is dest_key:                 return prev_node_keys             prev_node = node             for friend_id in node.friend_ids:                 if friend_id not in visited_ids:                     friend_node = self.person(friend_id)                     queue.append(friend_node)                     prev_node_keys[friend_id] = prev_node.key                     visited_ids.add(friend_id)         return None </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll use a public&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">REST API</span></a>:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">$ curl https://social.com/api/v1/friend_search?person_id=1234 </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Response:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">{     ""person_id"": ""100"",     ""name"": ""foo"",     ""link"": ""https://social.com/foo"", }, {     ""person_id"": ""53"",     ""name"": ""bar"",     ""link"": ""https://social.com/bar"", }, {     ""person_id"": ""1234"",     ""name"": ""baz"",     ""link"": ""https://social.com/baz"", }, </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">For internal communications, we could use&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Remote Procedure Calls</a>.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-4-scale-the-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#step-4-scale-the-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 4: Scale the design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/16d78e51c2e2949e23122f4c26afe5886f82a96f/687474703a2f2f692e696d6775722e636f6d2f636443763567372e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/16d78e51c2e2949e23122f4c26afe5886f82a96f/687474703a2f2f692e696d6775722e636f6d2f636443763567372e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/cdCv5g7.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">State you would 1)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmark/Load Test</span>, 2)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/social_graph"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>?&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">CDN</span>?<span style=""box-sizing: border-box; font-weight: 600;"">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Trade-Offs</span>&nbsp;for each?</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#domain-name-system"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DNS</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#load-balancer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Load balancer</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Horizontal scaling</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server (reverse proxy)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">API server (application layer)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#consistency-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Consistency patterns</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#availability-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Availability patterns</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To address the constraint of 400&nbsp;<em style=""box-sizing: border-box;"">average</em>&nbsp;read requests per second (higher at peak), person data can be served from a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;such as Redis or Memcached to reduce response times and to reduce traffic to downstream services. This could be especially useful for people who do multiple searches in succession and for people who are well-connected. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=""box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">1</a></span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Below are further optimizations:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Store complete or partial BFS traversals to speed up subsequent lookups in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Batch compute offline then store complete or partial BFS traversals to speed up subsequent lookups in a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Reduce machine jumps by batching together friend lookups hosted on the same&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Person Server</span><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#Sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Shard</a>&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Person Servers</span>&nbsp;by location to further improve this, as friends generally live closer to each other</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Do two BFS searches at the same time, one starting from the source, and one from the destination, then merge the two paths</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Start the BFS search from people with large numbers of friends, as they are more likely to reduce the number of&nbsp;<a href=""https://en.wikipedia.org/wiki/Six_degrees_of_separation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">degrees of separation</a>&nbsp;between the current user and the search target</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Set a limit based on time or number of hops before asking the user if they want to continue searching, as searching could take a considerable amount of time in some cases</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Graph Database</span>&nbsp;such as&nbsp;<a href=""https://neo4j.com/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Neo4j</a>&nbsp;or a graph-specific query language such as&nbsp;<a href=""http://graphql.org/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">GraphQL</a>&nbsp;(if there were no constraint preventing the use of&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Graph Databases</span>)</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-additional-talking-points"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#additional-talking-points"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Additional talking points</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sql-scaling-patterns"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#sql-scaling-patterns"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>SQL scaling patterns</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#master-slave"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Read replicas</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Federation</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Sharding</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalization</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sql-tuning"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL Tuning</a></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-nosql"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#nosql"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>NoSQL</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Key-value store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Document store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wide column store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Graph database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL vs NoSQL</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Caching</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Where to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#client-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Client caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cdn-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#web-server-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#database-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Database caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Application caching</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">What to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the database query level</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the object level</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">When to update the cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache-aside"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache-aside</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-through"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-through</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-behind (write-back)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#refresh-ahead"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Refresh ahead</a></li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-asynchronism-and-microservices"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#asynchronism-and-microservices"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Asynchronism and microservices</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Message queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Task queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Back pressure</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Microservices</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-communications"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#communications"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Communications</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Discuss tradeoffs:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">External communication with clients -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HTTP APIs following REST</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Internal communications -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">RPC</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#service-discovery"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Service discovery</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-security"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#security"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Security</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refer to the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#security"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">security section</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-latency-numbers"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#latency-numbers"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Latency numbers</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Latency numbers every programmer should know</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-ongoing"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#ongoing"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Ongoing</h3><ul style=""box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;""><li style=""box-sizing: border-box;"">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Scaling is an iterative process</li></ul>"
"<h1 style=""box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Design the Twitter timeline and search</h1>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Note: This document links directly to relevant areas found in the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Design the Facebook feed</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Design Facebook search</span>&nbsp;are similar questions.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-1-outline-use-cases-and-constraints"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#step-1-outline-use-cases-and-constraints"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use cases</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-well-scope-the-problem-to-handle-only-the-following-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#well-scope-the-problem-to-handle-only-the-following-use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;posts a tweet<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;pushes tweets to followers, sending push notifications and emails</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;views the user timeline (activity from the user)</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;views the home timeline (activity from people the user is following)</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;searches keywords</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;has high availability</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-out-of-scope"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#out-of-scope"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Out of scope</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;pushes tweets to the Twitter Firehose and other streams</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;strips out tweets based on user's visibility settings<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Hide @reply if the user is not also following the person being replied to</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Respect 'hide retweets' setting</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Analytics</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-constraints-and-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#constraints-and-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Constraints and assumptions</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-state-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#state-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>State assumptions</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">General</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Traffic is not evenly distributed</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Posting a tweet should be fast<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Fanning out a tweet to all of your followers should be fast, unless you have millions of followers</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">100 million active users</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">500 million tweets per day or 15 billion tweets per month<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Each tweet averages a fanout of 10 deliveries</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">5 billion total tweets delivered on fanout per day</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">150 billion tweets delivered on fanout per month</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">250 billion read requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">10 billion searches per month</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Timeline</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Viewing the timeline should be fast</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Twitter is more read heavy than write heavy<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Optimize for fast reads of tweets</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Ingesting tweets is write heavy</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Search</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Searching should be fast</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Search is read-heavy</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-calculate-usage"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#calculate-usage"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Calculate usage</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Size per tweet:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">tweet_id</code>&nbsp;- 8 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">user_id</code>&nbsp;- 32 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">text</code>&nbsp;- 140 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">media</code>&nbsp;- 10 KB average</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Total: ~10 KB</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">150 TB of new tweet content per month<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">10 KB per tweet * 500 million tweets per day * 30 days per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">5.4 PB of new tweet content in 3 years</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">100 thousand read requests per second<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">250 billion read requests per month * (400 requests per second / 1 billion requests per month)</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">6,000 tweets per second<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">15 billion tweets delivered on fanout per month * (400 requests per second / 1 billion requests per month)</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">60 thousand tweets delivered on fanout per second<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">150 billion tweets delivered on fanout per month * (400 requests per second / 1 billion requests per month)</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">4,000 search requests per second</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Handy conversion guide:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">2.5 million seconds per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 request per second = 2.5 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40 requests per second = 100 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 requests per second = 1 billion requests per month</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-2-create-a-high-level-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#step-2-create-a-high-level-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 2: Create a high level design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Outline a high level design with all important components.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/f7f74718418c9b3d552d1f061cce920d2f50e81c/687474703a2f2f692e696d6775722e636f6d2f3438744541326a2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/f7f74718418c9b3d552d1f061cce920d2f50e81c/687474703a2f2f692e696d6775722e636f6d2f3438744541326a2e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/48tEA2j.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-3-design-core-components"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#step-3-design-core-components"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 3: Design core components</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Dive into details for each core component.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-posts-a-tweet"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#use-case-user-posts-a-tweet"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User posts a tweet</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We could store the user's own tweets to populate the user timeline (activity from the user) in a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">relational database</a>. We should discuss the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">use cases and tradeoffs between choosing SQL or NoSQL</a>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Delivering tweets and building the home timeline (activity from people the user is following) is trickier. Fanning out tweets to all followers (60 thousand tweets delivered on fanout per second) will overload a traditional&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">relational database</a>. We'll probably want to choose a data store with fast writes such as a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL database</span>&nbsp;or&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=""box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">1</a></span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We could store media such as photos or videos on an&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;posts a tweet to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>, running as a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">reverse proxy</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Write API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Write API</span>&nbsp;stores the tweet in the user's timeline on a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL database</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Write API</span>&nbsp;contacts the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Fan Out Service</span>, which does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Queries the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">User Graph Service</span>&nbsp;to find the user's followers stored in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Stores the tweet in the&nbsp;<em style=""box-sizing: border-box;"">home timeline of the user's followers</em>&nbsp;in a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">O(n) operation: 1,000 followers = 1,000 lookups and inserts</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Stores the tweet in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Search Index Service</span>&nbsp;to enable fast searching</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Stores media in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Uses the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Notification Service</span>&nbsp;to send out push notifications to followers:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Uses a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Queue</span>&nbsp;(not pictured) to asynchronously send out notifications</li></ul></li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">If our&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;is Redis, we could use a native Redis list with the following structure:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">           tweet n+2                   tweet n+1                   tweet n | 8 bytes   8 bytes  1 byte | 8 bytes   8 bytes  1 byte | 8 bytes   7 bytes  1 byte | | tweet_id  user_id  meta   | tweet_id  user_id  meta   | tweet_id  user_id  meta   | </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The new tweet would be placed in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>, which populates user's home timeline (activity from people the user is following).</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll use a public&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">REST API</span></a>:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">$ curl -X POST --data '{ ""user_id"": ""123"", ""auth_token"": ""ABC123"", \     ""status"": ""hello world!"", ""media_ids"": ""ABC987"" }' \     https://twitter.com/api/v1/tweet </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Response:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">{     ""created_at"": ""Wed Sep 05 00:37:15 +0000 2012"",     ""status"": ""hello world!"",     ""tweet_id"": ""987"",     ""user_id"": ""123"",     ... } </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">For internal communications, we could use&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Remote Procedure Calls</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-views-the-home-timeline"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#use-case-user-views-the-home-timeline"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User views the home timeline</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;posts a home timeline request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read API</span>&nbsp;server contacts the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Timeline Service</span>, which does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Gets the timeline data stored in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>, containing tweet ids and user ids - O(1)</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Queries the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Tweet Info Service</span>&nbsp;with a&nbsp;<a href=""http://redis.io/commands/mget"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">multiget</a>&nbsp;to obtain additional info about the tweet ids - O(n)</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Queries the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">User Info Service</span>&nbsp;with a multiget to obtain additional info about the user ids - O(n)</li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">REST API:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">$ curl https://twitter.com/api/v1/home_timeline?user_id=123 </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Response:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">{     ""user_id"": ""456"",     ""tweet_id"": ""123"",     ""status"": ""foo"" }, {     ""user_id"": ""789"",     ""tweet_id"": ""456"",     ""status"": ""bar"" }, {     ""user_id"": ""789"",     ""tweet_id"": ""579"",     ""status"": ""baz"" }, </code></pre><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-views-the-user-timeline"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#use-case-user-views-the-user-timeline"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User views the user timeline</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;posts a home timeline request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read API</span>&nbsp;retrieves the user timeline from the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The REST API would be similar to the home timeline, except all tweets would come from the user as opposed to the people the user is following.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-searches-keywords"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#use-case-user-searches-keywords"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User searches keywords</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;sends a search request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Search API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Search API</span>&nbsp;contacts the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Search Service</span>, which does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Parses/tokenizes the input query, determining what needs to be searched<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Removes markup</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Breaks up the text into terms</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Fixes typos</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Normalizes capitalization</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Converts the query to use boolean operations</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Queries the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Search Cluster</span>&nbsp;(ie&nbsp;<a href=""https://lucene.apache.org/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Lucene</a>) for the results:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#scatter-gather"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Scatter gathers</a>&nbsp;each server in the cluster to determine if there are any results for the query</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Merges, ranks, sorts, and returns the results</li></ul></li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">REST API:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">$ curl https://twitter.com/api/v1/search?query=hello+world </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The response would be similar to that of the home timeline, except for tweets matching the given query.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-4-scale-the-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#step-4-scale-the-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 4: Scale the design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/14f76dab28dfbfa12ea6b02c6bd0ec726fc17306/687474703a2f2f692e696d6775722e636f6d2f6a7255424146372e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/14f76dab28dfbfa12ea6b02c6bd0ec726fc17306/687474703a2f2f692e696d6775722e636f6d2f6a7255424146372e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/jrUBAF7.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">State you would 1)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmark/Load Test</span>, 2)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/twitter"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>?&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">CDN</span>?<span style=""box-sizing: border-box; font-weight: 600;"">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Trade-Offs</span>&nbsp;for each?</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#domain-name-system"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DNS</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#content-delivery-network"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#load-balancer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Load balancer</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Horizontal scaling</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server (reverse proxy)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">API server (application layer)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Relational database management system (RDBMS)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#fail-over"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL write master-slave failover</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#master-slave-replication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Master-slave replication</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#consistency-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Consistency patterns</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#availability-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Availability patterns</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Fanout Service</span>&nbsp;is a potential bottleneck. Twitter users with millions of followers could take several minutes to have their tweets go through the fanout process. This could lead to race conditions with @replies to the tweet, which we could mitigate by re-ordering the tweets at serve time.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We could also avoid fanning out tweets from highly-followed users. Instead, we could search to find tweets for high-followed users, merge the search results with the user's home timeline results, then re-order the tweets at serve time.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Additional optimizations include:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Keep only several hundred tweets for each home timeline in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Keep only active users' home timeline info in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">If a user was not previously active in the past 30 days, we could rebuild the timeline from the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Query the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">User Graph Service</span>&nbsp;to determine who the user is following</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Get the tweets from the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>&nbsp;and add them to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span></li></ul></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Store only a month of tweets in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Tweet Info Service</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Store only active users in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">User Info Service</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Search Cluster</span>&nbsp;would likely need to keep the tweets in memory to keep latency low</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll also want to address the bottleneck with the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Database</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Although the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;should reduce the load on the database, it is unlikely the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Read Replicas</span>&nbsp;alone would be enough to handle the cache misses. We'll probably need to employ additional SQL scaling patterns.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The high volume of writes would overwhelm a single&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Write Master-Slave</span>, also pointing to a need for additional scaling techniques.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Federation</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Sharding</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalization</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sql-tuning"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL Tuning</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We should also consider moving some data to a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span>.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-additional-talking-points"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#additional-talking-points"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Additional talking points</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-nosql"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#nosql"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>NoSQL</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Key-value store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Document store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wide column store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Graph database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL vs NoSQL</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Caching</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Where to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#client-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Client caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cdn-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#web-server-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#database-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Database caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Application caching</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">What to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the database query level</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the object level</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">When to update the cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache-aside"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache-aside</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-through"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-through</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-behind (write-back)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#refresh-ahead"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Refresh ahead</a></li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-asynchronism-and-microservices"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#asynchronism-and-microservices"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Asynchronism and microservices</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Message queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Task queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Back pressure</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Microservices</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-communications"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#communications"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Communications</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Discuss tradeoffs:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">External communication with clients -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HTTP APIs following REST</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Internal communications -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">RPC</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#service-discovery"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Service discovery</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-security"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#security"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Security</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refer to the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#security"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">security section</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-latency-numbers"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#latency-numbers"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Latency numbers</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Latency numbers every programmer should know</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-ongoing"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#ongoing"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Ongoing</h3><ul style=""box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;""><li style=""box-sizing: border-box;"">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Scaling is an iterative process</li></ul>"
"<h1 style=""box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Design a key-value cache to save the results of the most recent web server queries</h1>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Note: This document links directly to relevant areas found in the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-1-outline-use-cases-and-constraints"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#step-1-outline-use-cases-and-constraints"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use cases</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-well-scope-the-problem-to-handle-only-the-following-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#well-scope-the-problem-to-handle-only-the-following-use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;sends a search request resulting in a cache hit</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;sends a search request resulting in a cache miss</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;has high availability</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-constraints-and-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#constraints-and-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Constraints and assumptions</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-state-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#state-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>State assumptions</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Traffic is not evenly distributed<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Popular queries should almost always be in the cache</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Need to determine how to expire/refresh</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Serving from cache requires fast lookups</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Low latency between machines</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Limited memory in cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Need to determine what to keep/remove</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Need to cache millions of queries</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">10 million users</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">10 billion queries per month</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-calculate-usage"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#calculate-usage"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Calculate usage</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Cache stores ordered list of key: query, value: results<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">query</code>&nbsp;- 50 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">title</code>&nbsp;- 20 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">snippet</code>&nbsp;- 200 bytes</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Total: 270 bytes</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">2.7 TB of cache data per month if all 10 billion queries are unique and all are stored<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">270 bytes per search * 10 billion searches per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Assumptions state limited memory, need to determine how to expire contents</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">4,000 requests per second</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Handy conversion guide:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">2.5 million seconds per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 request per second = 2.5 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40 requests per second = 100 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 requests per second = 1 billion requests per month</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-2-create-a-high-level-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#step-2-create-a-high-level-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 2: Create a high level design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Outline a high level design with all important components.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/57223dafbceaf008d0fcec518ff40932f504b985/687474703a2f2f692e696d6775722e636f6d2f4b715a336453782e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/57223dafbceaf008d0fcec518ff40932f504b985/687474703a2f2f692e696d6775722e636f6d2f4b715a336453782e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/KqZ3dSx.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-3-design-core-components"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#step-3-design-core-components"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 3: Design core components</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Dive into details for each core component.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-sends-a-request-resulting-in-a-cache-hit"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#use-case-user-sends-a-request-resulting-in-a-cache-hit"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User sends a request resulting in a cache hit</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Popular queries can be served from a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;such as Redis or Memcached to reduce read latency and to avoid overloading the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Reverse Index Service</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Document Service</span>. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=""box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">1</a></span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Since the cache has limited capacity, we'll use a least recently used (LRU) approach to expire older entries.</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;sends a request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>, running as a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">reverse proxy</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Query API</span>&nbsp;server</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Query API</span>&nbsp;server does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Parses the query<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Removes markup</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Breaks up the text into terms</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Fixes typos</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Normalizes capitalization</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Converts the query to use boolean operations</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Checks the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;for the content matching the query<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">If there's a hit in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>, the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Updates the cached entry's position to the front of the LRU list</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Returns the cached contents</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Else, the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Query API</span>&nbsp;does the following:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Uses the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Reverse Index Service</span>&nbsp;to find documents matching the query<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Reverse Index Service</span>&nbsp;ranks the matching results and returns the top ones</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Uses the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Document Service</span>&nbsp;to return titles and snippets</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Updates the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;with the contents, placing the entry at the front of the LRU list</li></ul></li></ul></li></ul></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-cache-implementation"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#cache-implementation"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Cache implementation</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The cache can use a doubly-linked list: new items will be added to the head while items to expire will be removed from the tail. We'll use a hash table for fast lookups to each linked list node.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Query API Server</span>&nbsp;implementation:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class QueryApi(object):      def __init__(self, memory_cache, reverse_index_service):         self.memory_cache = memory_cache         self.reverse_index_service = reverse_index_service      def parse_query(self, query):         """"""Remove markup, break text into terms, deal with typos,         normalize capitalization, convert to use boolean operations.         """"""         ...      def process_query(self, query):         query = self.parse_query(query)         results = self.memory_cache.get(query)         if results is None:             results = self.reverse_index_service.process_search(query)             self.memory_cache.set(query, results)         return results </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Node</span>&nbsp;implementation:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class Node(object):      def __init__(self, query, results):         self.query = query         self.results = results </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">LinkedList</span>&nbsp;implementation:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class LinkedList(object):      def __init__(self):         self.head = None         self.tail = None      def move_to_front(self, node):         ...      def append_to_front(self, node):         ...      def remove_from_tail(self):         ... </code></pre><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Cache</span>&nbsp;implementation:</p><pre style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);""><code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;"">class Cache(object):      def __init__(self, MAX_SIZE):         self.MAX_SIZE = MAX_SIZE         self.size = 0         self.lookup = {}  # key: query, value: node         self.linked_list = LinkedList()      def get(self, query)         """"""Get the stored query result from the cache.          Accessing a node updates its position to the front of the LRU list.         """"""         node = self.lookup[query]         if node is None:             return None         self.linked_list.move_to_front(node)         return node.results      def set(self, results, query):         """"""Set the result for the given query key in the cache.          When updating an entry, updates its position to the front of the LRU list.         If the entry is new and the cache is at capacity, removes the oldest entry         before the new entry is added.         """"""         node = self.lookup[query]         if node is not None:             # Key exists in cache, update the value             node.results = results             self.linked_list.move_to_front(node)         else:             # Key does not exist in cache             if self.size == self.MAX_SIZE:                 # Remove the oldest entry from the linked list and lookup                 self.lookup.pop(self.linked_list.tail.query, None)                 self.linked_list.remove_from_tail()             else:                 self.size += 1             # Add the new key and value             new_node = Node(query, results)             self.linked_list.append_to_front(new_node)             self.lookup[query] = new_node </code></pre><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-when-to-update-the-cache"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#when-to-update-the-cache"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>When to update the cache</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The cache should be updated when:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The page contents change</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The page is removed or a new page is added</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The page rank changes</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The most straightforward way to handle these cases is to simply set a max time that a cached entry can stay in the cache before it is updated, usually referred to as time to live (TTL).</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refer to&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#when-to-update-the-cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">When to update the cache</a>&nbsp;for tradeoffs and alternatives. The approach above describes&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#cache-aside"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">cache-aside</a>.</p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-4-scale-the-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#step-4-scale-the-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 4: Scale the design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/b6439861687b9a0fc62d0149a364082643ebaf86/687474703a2f2f692e696d6775722e636f6d2f346a39396d68652e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/b6439861687b9a0fc62d0149a364082643ebaf86/687474703a2f2f692e696d6775722e636f6d2f346a39396d68652e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/4j99mhe.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">State you would 1)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmark/Load Test</span>, 2)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/query_cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>?&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">CDN</span>?<span style=""box-sizing: border-box; font-weight: 600;"">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Trade-Offs</span>&nbsp;for each?</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#domain-name-system"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">DNS</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#load-balancer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Load balancer</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Horizontal scaling</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server (reverse proxy)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">API server (application layer)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#consistency-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Consistency patterns</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#availability-patterns"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Availability patterns</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-expanding-the-memory-cache-to-many-machines"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#expanding-the-memory-cache-to-many-machines"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Expanding the Memory Cache to many machines</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To handle the heavy request load and the large amount of memory needed, we'll scale horizontally. We have three main options on how to store the data on our&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>&nbsp;cluster:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Each machine in the cache cluster has its own cache</span>&nbsp;- Simple, although it will likely result in a low cache hit rate.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Each machine in the cache cluster has a copy of the cache</span>&nbsp;- Simple, although it is an inefficient use of memory.</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">The cache is&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">sharded</a>&nbsp;across all machines in the cache cluster</span>&nbsp;- More complex, although it is likely the best option. We could use hashing to determine which machine could have the cached results of a query using&nbsp;<code style=""box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;"">machine = hash(query)</code>. We'll likely want to use&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#consistent-hashing"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">consistent hashing</a>.</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-additional-talking-points"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#additional-talking-points"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Additional talking points</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sql-scaling-patterns"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#sql-scaling-patterns"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>SQL scaling patterns</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#master-slave"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Read replicas</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Federation</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Sharding</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalization</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sql-tuning"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL Tuning</a></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-nosql"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#nosql"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>NoSQL</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Key-value store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Document store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wide column store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Graph database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL vs NoSQL</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Caching</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Where to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#client-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Client caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cdn-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#web-server-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#database-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Database caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Application caching</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">What to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the database query level</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the object level</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">When to update the cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache-aside"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache-aside</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-through"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-through</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-behind (write-back)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#refresh-ahead"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Refresh ahead</a></li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-asynchronism-and-microservices"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#asynchronism-and-microservices"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Asynchronism and microservices</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Message queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Task queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Back pressure</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Microservices</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-communications"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#communications"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Communications</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Discuss tradeoffs:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">External communication with clients -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HTTP APIs following REST</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Internal communications -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">RPC</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#service-discovery"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Service discovery</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-security"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#security"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Security</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refer to the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#security"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">security section</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-latency-numbers"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#latency-numbers"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Latency numbers</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Latency numbers every programmer should know</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-ongoing"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#ongoing"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Ongoing</h3><ul style=""box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;""><li style=""box-sizing: border-box;"">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Scaling is an iterative process</li></ul>"
"<h1 style=""box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">Design a system that scales to millions of users on AWS</h1>"	"<p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Note: This document links directly to relevant areas found in the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-1-outline-use-cases-and-constraints"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#step-1-outline-use-cases-and-constraints"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use cases</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Solving this problem takes an iterative approach of: 1)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmark/Load Test</span>, 2)&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat, which is good pattern for evolving basic designs to scalable designs.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Unless you have a background in AWS or are applying for a position that requires AWS knowledge, AWS-specific details are not a requirement. However,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">much of the principles discussed in this exercise can apply more generally outside of the AWS ecosystem.</span></p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-well-scope-the-problem-to-handle-only-the-following-use-cases"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#well-scope-the-problem-to-handle-only-the-following-use-cases"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">User</span>&nbsp;makes a read or write request<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;does processing, stores user data, then returns the results</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;needs to evolve from serving a small amount of users to millions of users<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Discuss general scaling patterns as we evolve an architecture to handle a large number of users and requests</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Service</span>&nbsp;has high availability</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-constraints-and-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#constraints-and-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Constraints and assumptions</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-state-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#state-assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>State assumptions</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Traffic is not evenly distributed</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Need for relational data</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Scale from 1 user to tens of millions of users<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Denote increase of users as:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Users+</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Users++</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Users+++</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">...</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">10 million users</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 billion writes per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">100 billion reads per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">100:1 read to write ratio</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 KB content per write</li></ul></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-calculate-usage"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#calculate-usage"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Calculate usage</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">1 TB of new content per month<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">1 KB per write * 1 billion writes per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">36 TB of new content in 3 years</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Assume most writes are from new content instead of updates to existing ones</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 writes per second on average</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40,000 reads per second on average</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Handy conversion guide:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">2.5 million seconds per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">1 request per second = 2.5 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">40 requests per second = 100 million requests per month</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 requests per second = 1 billion requests per month</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-2-create-a-high-level-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#step-2-create-a-high-level-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 2: Create a high level design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Outline a high level design with all important components.</p></blockquote><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/19e81d65d7ced13c58952f72fe1002e0f8c5798c/687474703a2f2f692e696d6775722e636f6d2f42384c444b44372e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/19e81d65d7ced13c58952f72fe1002e0f8c5798c/687474703a2f2f692e696d6775722e636f6d2f42384c444b44372e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/B8LDKD7.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-3-design-core-components"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#step-3-design-core-components"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 3: Design core components</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Dive into details for each core component.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-case-user-makes-a-read-or-write-request"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#use-case-user-makes-a-read-or-write-request"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use case: User makes a read or write request</h3><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-goals"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Goals</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">With only 1-2 users, you only need a basic setup<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Single box for simplicity</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Vertical scaling when needed</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Monitor to determine bottlenecks</li></ul></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-start-with-a-single-box"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#start-with-a-single-box"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Start with a single box</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Web server</span>&nbsp;on EC2<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Storage for user data</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sql"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">MySQL Database</span></a></li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Use&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Vertical Scaling</span>:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Simply choose a bigger box</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Keep an eye on metrics to determine how to scale up<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Use basic monitoring to determine bottlenecks: CPU, memory, IO, network, etc</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">CloudWatch, top, nagios, statsd, graphite, etc</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Scaling vertically can get very expensive</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">No redundancy/failover</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Trade-offs, alternatives, and additional details:</em></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The alternative to&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Vertical Scaling</span>&nbsp;is&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Horizontal scaling</span></a></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-start-with-sql-consider-nosql"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#start-with-sql-consider-nosql"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Start with SQL, consider NoSQL</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">The constraints assume there is a need for relational data. We can start off using a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Database</span>&nbsp;on the single box.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Trade-offs, alternatives, and additional details:</em></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">See the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Relational database management system (RDBMS)</a>&nbsp;section</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Discuss reasons to use&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL or NoSQL</a></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-assign-a-public-static-ip"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assign-a-public-static-ip"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Assign a public static IP</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Elastic IPs provide a public endpoint whose IP doesn't change on reboot</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Helps with failover, just point the domain to a new IP</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-use-a-dns"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#use-a-dns"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Use a DNS</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Add a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">DNS</span>&nbsp;such as Route 53 to map the domain to the instance's public IP.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Trade-offs, alternatives, and additional details:</em></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">See the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#domain-name-system"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Domain name system</a>&nbsp;section</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-secure-the-web-server"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#secure-the-web-server"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Secure the web server</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Open up only necessary ports<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Allow the web server to respond to incoming requests from:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">80 for HTTP</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">443 for HTTPS</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">22 for SSH to only whitelisted IPs</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Prevent the web server from initiating outbound connections</li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Trade-offs, alternatives, and additional details:</em></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">See the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#security"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Security</a>&nbsp;section</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-step-4-scale-the-design"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#step-4-scale-the-design"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Step 4: Scale the design</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Identify and address bottlenecks, given the constraints.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-users"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#users"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Users+</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/91df3093298a51bf3b70a2e24622f37d5ee19d0f/687474703a2f2f692e696d6775722e636f6d2f7272666a4d58422e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/91df3093298a51bf3b70a2e24622f37d5ee19d0f/687474703a2f2f692e696d6775722e636f6d2f7272666a4d58422e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/rrfjMXB.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-assumptions"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assumptions"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Assumptions</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Our user count is starting to pick up and the load is increasing on our single box. Our&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profiling</span>&nbsp;are pointing to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Database</span>&nbsp;taking up more and more memory and CPU resources, while the user content is filling up disk space.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We've been able to address these issues with&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Vertical Scaling</span>&nbsp;so far. Unfortunately, this has become quite expensive and it doesn't allow for independent scaling of the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Database</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-goals-1"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals-1"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Goals</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Lighten load on the single box and allow for independent scaling<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Store static content separately in an&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Move the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Database</span>&nbsp;to a separate box</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Disadvantages<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">These changes would increase complexity and would require changes to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;to point to the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>&nbsp;and the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Database</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Additional security measures must be taken to secure the new components</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">AWS costs could also increase, but should be weighed with the costs of managing similar systems on your own</li></ul></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-store-static-content-separately"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#store-static-content-separately"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Store static content separately</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Consider using a managed&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span>&nbsp;like S3 to store static content<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Highly scalable and reliable</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Server side encryption</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Move static content to S3<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">User files</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">JS</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">CSS</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Images</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Videos</li></ul></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-move-the-mysql-database-to-a-separate-box"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#move-the-mysql-database-to-a-separate-box"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Move the MySQL database to a separate box</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Consider using a service like RDS to manage the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Database</span><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Simple to administer, scale</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Multiple availability zones</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Encryption at rest</li></ul></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-secure-the-system"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#secure-the-system"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Secure the system</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Encrypt data in transit and at rest</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use a Virtual Private Cloud<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Create a public subnet for the single&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;so it can send and receive traffic from the internet</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Create a private subnet for everything else, preventing outside access</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Only open ports from whitelisted IPs for each component</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">These same patterns should be implemented for new components in the remainder of the exercise</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Trade-offs, alternatives, and additional details:</em></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">See the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#security"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Security</a>&nbsp;section</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-users-1"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#users-1"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Users++</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/0a8044552aafe305f21804e136aa3d69e08e958a/687474703a2f2f692e696d6775722e636f6d2f72616f4654584d2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/0a8044552aafe305f21804e136aa3d69e08e958a/687474703a2f2f692e696d6775722e636f6d2f72616f4654584d2e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/raoFTXM.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-assumptions-1"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assumptions-1"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Assumptions</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Our&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profiling</span>&nbsp;show that our single&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;bottlenecks during peak hours, resulting in slow responses and in some cases, downtime. As the service matures, we'd also like to move towards higher availability and redundancy.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-goals-2"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals-2"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Goals</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The following goals attempt to address the scaling issues with the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Based on the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profiling</span>, you might only need to implement one or two of these techniques</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Horizontal Scaling</span></a>&nbsp;to handle increasing loads and to address single points of failure<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Add a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#load-balancer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Load Balancer</span></a>&nbsp;such as Amazon's ELB or HAProxy<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">ELB is highly available</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">If you are configuring your own&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Load Balancer</span>, setting up multiple servers in&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#active-active"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">active-active</a>&nbsp;or&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#active-passive"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">active-passive</a>&nbsp;in multiple availability zones will improve availability</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Terminate SSL on the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Load Balancer</span>&nbsp;to reduce computational load on backend servers and to simplify certificate administration</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use multiple&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>&nbsp;spread out over multiple availability zones</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Use multiple&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL</span>&nbsp;instances in&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#master-slave-replication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Master-Slave Failover</span></a>&nbsp;mode across multiple availability zones to improve redundancy</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Separate out the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>&nbsp;from the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#application-layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Application Servers</span></a><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Scale and configure both layers independently</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>&nbsp;can run as a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#reverse-proxy"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Reverse Proxy</span></a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">For example, you can add&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Application Servers</span>&nbsp;handling&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Read APIs</span>&nbsp;while others handle&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Write APIs</span></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Move static (and some dynamic) content to a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#content-delivery-network"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Content Delivery Network (CDN)</span></a>&nbsp;such as CloudFront to reduce load and latency</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Trade-offs, alternatives, and additional details:</em></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">See the linked content above for details</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-users-2"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#users-2"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Users+++</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/45ccce17b66f6089bc014a2c9ed538753df69ed9/687474703a2f2f692e696d6775722e636f6d2f4f5a43784a72302e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/45ccce17b66f6089bc014a2c9ed538753df69ed9/687474703a2f2f692e696d6775722e636f6d2f4f5a43784a72302e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/OZCxJr0.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Note:</span>&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Internal Load Balancers</span>&nbsp;not shown to reduce clutter</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-assumptions-2"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assumptions-2"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Assumptions</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Our&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profiling</span>&nbsp;show that we are read-heavy (100:1 with writes) and our database is suffering from poor performance from the high read requests.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-goals-3"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals-3"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Goals</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">The following goals attempt to address the scaling issues with the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Database</span><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Based on the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profiling</span>, you might only need to implement one or two of these techniques</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Move the following data to a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#cache"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span></a>&nbsp;such as Elasticache to reduce load and latency:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Frequently accessed content from&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL</span><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">First, try to configure the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Database</span>&nbsp;cache to see if that is sufficient to relieve the bottleneck before implementing a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Session data from the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>&nbsp;become stateless, allowing for&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Autoscaling</span></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=""box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">1</a></span></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Add&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#master-slave-replication"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">MySQL Read Replicas</span></a>&nbsp;to reduce load on the write master</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Add more&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Servers</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Application Servers</span>&nbsp;to improve responsiveness</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Trade-offs, alternatives, and additional details:</em></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">See the linked content above for details</li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-add-mysql-read-replicas"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#add-mysql-read-replicas"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Add MySQL read replicas</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">In addition to adding and scaling a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>,&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Read Replicas</span>&nbsp;can also help relieve load on the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Write Master</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Add logic to&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;to separate out writes and reads</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Add&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Load Balancers</span>&nbsp;in front of&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Read Replicas</span>&nbsp;(not pictured to reduce clutter)</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Most services are read-heavy vs write-heavy</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Trade-offs, alternatives, and additional details:</em></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">See the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Relational database management system (RDBMS)</a>&nbsp;section</li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-users-3"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#users-3"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Users++++</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/2b12de3a8a5c67a6bccadee0061bdb3d2c02c9d0/687474703a2f2f692e696d6775722e636f6d2f3358386e6d644c2e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/2b12de3a8a5c67a6bccadee0061bdb3d2c02c9d0/687474703a2f2f692e696d6775722e636f6d2f3358386e6d644c2e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/3X8nmdL.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-assumptions-3"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assumptions-3"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Assumptions</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Our&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profiling</span>&nbsp;show that our traffic spikes during regular business hours in the U.S. and drop significantly when users leave the office. We think we can cut costs by automatically spinning up and down servers based on actual load. We're a small shop so we'd like to automate as much of the DevOps as possible for&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Autoscaling</span>&nbsp;and for the general operations.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-goals-4"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals-4"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Goals</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Add&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Autoscaling</span>&nbsp;to provision capacity as needed<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Keep up with traffic spikes</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Reduce costs by powering down unused instances</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Automate DevOps<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Chef, Puppet, Ansible, etc</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Continue monitoring metrics to address bottlenecks<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Host level</span>&nbsp;- Review a single EC2 instance</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Aggregate level</span>&nbsp;- Review load balancer stats</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Log analysis</span>&nbsp;- CloudWatch, CloudTrail, Loggly, Splunk, Sumo</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">External site performance</span>&nbsp;- Pingdom or New Relic</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Handle notifications and incidents</span>&nbsp;- PagerDuty</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Error Reporting</span>&nbsp;- Sentry</li></ul></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-add-autoscaling"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#add-autoscaling"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Add autoscaling</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Consider a managed service such as AWS&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Autoscaling</span><ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Create one group for each&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Web Server</span>&nbsp;and one for each&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Application Server</span>&nbsp;type, place each group in multiple availability zones</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Set a min and max number of instances</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Trigger to scale up and down through CloudWatch<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Simple time of day metric for predictable loads or</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Metrics over a time period:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">CPU load</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Latency</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Network traffic</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Custom metric</li></ul></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Disadvantages<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Autoscaling can introduce complexity</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">It could take some time before a system appropriately scales up to meet increased demand, or to scale down when demand drops</li></ul></li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-users-4"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#users-4"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Users+++++</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><a href=""https://camo.githubusercontent.com/e45e39c36eebcc4c66e1aecd4e4145112d8e88e3/687474703a2f2f692e696d6775722e636f6d2f6a6a3341354e382e706e67"" target=""_blank"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><img src=""https://camo.githubusercontent.com/e45e39c36eebcc4c66e1aecd4e4145112d8e88e3/687474703a2f2f692e696d6775722e636f6d2f6a6a3341354e382e706e67"" alt=""Imgur"" data-canonical-src=""http://i.imgur.com/jj3A5N8.png"" style=""box-sizing: content-box; max-width: 100%;""></a></p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><span style=""box-sizing: border-box; font-weight: 600;"">Note:</span>&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Autoscaling</span>&nbsp;groups not shown to reduce clutter</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-assumptions-4"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assumptions-4"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Assumptions</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">As the service continues to grow towards the figures outlined in the constraints, we iteratively run&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Profiling</span>&nbsp;to uncover and address new bottlenecks.</p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-goals-5"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals-5"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Goals</h4><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We'll continue to address scaling issues due to the problem's constraints:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">If our&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">MySQL Database</span>&nbsp;starts to grow too large, we might considering only storing a limited time period of data in the database, while storing the rest in a data warehouse such as Redshift<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">A data warehouse such as Redshift can comfortably handle the constraint of 1 TB of new content per month</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">With 40,000 average read requests per second, read traffic for popular content can be addressed by scaling the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Memory Cache</span>, which is also useful for handling the unevenly distributed traffic and traffic spikes<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Read Replicas</span>&nbsp;might have trouble handling the cache misses, we'll probably need to employ additional SQL scaling patterns</li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">400 average writes per second (with presumably significantly higher peaks) might be tough for a single&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">SQL Write Master-Slave</span>, also pointing to a need for additional scaling techniques</li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">SQL scaling patterns include:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Federation</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Sharding</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalization</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sql-tuning"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL Tuning</a></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">To further address the high read and write requests, we should also consider moving appropriate data to a&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#nosql"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">NoSQL Database</span></a>&nbsp;such as DynamoDB.</p><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">We can further separate out our&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#application-layer"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Application Servers</span></a>&nbsp;to allow for independent scaling. Batch processes or computations that do not need to be done in real-time can be done&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#asynchronism"" style=""box-sizing: border-box; color: rgb(3, 102, 214);""><span style=""box-sizing: border-box; font-weight: 600;"">Asynchronously</span></a>&nbsp;with&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Queues</span>&nbsp;and&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Workers</span>:</p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">For example, in a photo service, the photo upload and the thumbnail creation can be separated:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><span style=""box-sizing: border-box; font-weight: 600;"">Client</span>&nbsp;uploads photo</li><li style=""box-sizing: border-box; margin-top: 0.25em;""><span style=""box-sizing: border-box; font-weight: 600;"">Application Server</span>&nbsp;puts a job in a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Queue</span>&nbsp;such as SQS</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">The&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Worker Service</span>&nbsp;on EC2 or Lambda pulls work off the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Queue</span>&nbsp;then:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">Creates a thumbnail</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Updates a&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Database</span></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Stores the thumbnail in the&nbsp;<span style=""box-sizing: border-box; font-weight: 600;"">Object Store</span></li></ul></li></ul></li></ul><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><em style=""box-sizing: border-box;"">Trade-offs, alternatives, and additional details:</em></p><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">See the linked content above for details</li></ul><h2 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-additional-talking-points"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#additional-talking-points"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Additional talking points</h2><blockquote style=""box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><p style=""box-sizing: border-box; margin-bottom: 0px;"">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sql-scaling-patterns"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#sql-scaling-patterns"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>SQL scaling patterns</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#master-slave"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Read replicas</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#federation"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Federation</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sharding"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Sharding</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#denormalization"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Denormalization</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#sql-tuning"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL Tuning</a></li></ul><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-nosql"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#nosql"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>NoSQL</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Key-value store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Document store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Wide column store</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Graph database</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">SQL vs NoSQL</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-caching"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#caching"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Caching</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Where to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#client-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Client caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cdn-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">CDN caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#web-server-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Web server caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#database-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Database caching</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#application-caching"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Application caching</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">What to cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the database query level</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Caching at the object level</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">When to update the cache<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#cache-aside"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Cache-aside</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-through"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-through</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Write-behind (write-back)</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#refresh-ahead"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Refresh ahead</a></li></ul></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-asynchronism-and-microservices"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#asynchronism-and-microservices"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Asynchronism and microservices</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Message queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Task queues</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Back pressure</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Microservices</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-communications"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#communications"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Communications</h3><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;"">Discuss tradeoffs:<ul style=""box-sizing: border-box; padding-left: 2em;""><li style=""box-sizing: border-box;"">External communication with clients -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">HTTP APIs following REST</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Internal communications -&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">RPC</a></li></ul></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://github.com/donnemartin/system-design-primer-interview#service-discovery"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Service discovery</a></li></ul><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-security"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#security"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Security</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">Refer to the&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#security"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">security section</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-latency-numbers"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#latency-numbers"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Latency numbers</h3><p style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;"">See&nbsp;<a href=""https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Latency numbers every programmer should know</a>.</p><h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-ongoing"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#ongoing"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Ongoing</h3><ul style=""box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;""><li style=""box-sizing: border-box;"">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=""box-sizing: border-box; margin-top: 0.25em;"">Scaling is an iterative process</li></ul>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Given an array, find the two indices that sum to a specific value.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is there exactly one solution?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is there always a solution?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the array an array of ints?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the array sorted? No</span></li> <li class=""li2""><span class=""s1"">Are negative values possible?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None input -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">[] -&gt; ValueError</span></li> <li class=""li2""><span class=""s1"">[1, 3, 2, -7, 5], 7 -&gt; [2, 4]</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p4""><span class=""s1""><b><br /></b></span></p><p class=""p4""><span class=""s1""><b>Brute force</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">For i in range(len(input)):</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">For j in range(i+1, len(input)):</span></li> <ul class=""ul3""> <li class=""li2""><span class=""s1"">if i + j == target return True</span></li> </ul> </ul> <li class=""li2""><span class=""s1"">return False</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n^2)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p4""><span class=""s1""><b>Optimized</b></span></p><p class=""p4""><span class=""s1""><b><br /></b></span></p> <p class=""p5""><span class=""s1"">* Loop through each num in nums</span></p> <p class=""p5""><span class=""s1"">&nbsp; &nbsp; * Calculate the cache_target = target - num</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">target = 7</span></p> <p class=""p5""><span class=""s1"">index&nbsp; =&nbsp; 0&nbsp; 1&nbsp; 2 &nbsp; 3&nbsp; 4</span></p> <p class=""p5""><span class=""s1"">nums &nbsp; = [1, 3, 2, -7, 5]</span></p> <p class=""p5""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p5""><span class=""s1"">cache_target = 7 - 1 = 6</span></p> <p class=""p5""><span class=""s1"">cache</span></p> <p class=""p5""><span class=""s1"">6 -&gt; 0</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">1 not in cache</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">index&nbsp; =&nbsp; 0&nbsp; 1&nbsp; 2 &nbsp; 3&nbsp; 4</span></p> <p class=""p5""><span class=""s1"">nums &nbsp; = [1, 3, 2, -7, 5]</span></p> <p class=""p5""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p5""><span class=""s1"">cache_target = 7 - 3 = 4</span></p> <p class=""p5""><span class=""s1"">cache</span></p> <p class=""p5""><span class=""s1"">6 -&gt; 0</span></p> <p class=""p5""><span class=""s1"">4 -&gt; 1</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">3 not in cache</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">index&nbsp; =&nbsp; 0&nbsp; 1&nbsp; 2 &nbsp; 3&nbsp; 4</span></p> <p class=""p5""><span class=""s1"">nums &nbsp; = [1, 3, 2, -7, 5]</span></p> <p class=""p5""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p5""><span class=""s1"">cache_target = 7 - 2 = 5</span></p> <p class=""p5""><span class=""s1"">cache</span></p> <p class=""p5""><span class=""s1"">6 -&gt; 0</span></p> <p class=""p5""><span class=""s1"">4 -&gt; 1</span></p> <p class=""p5""><span class=""s1"">5 -&gt; 2</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">2 not in cache</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">index&nbsp; =&nbsp; 0&nbsp; 1&nbsp; 2 &nbsp; 3&nbsp; 4</span></p> <p class=""p5""><span class=""s1"">nums &nbsp; = [1, 3, 2, -7, 5]</span></p> <p class=""p5""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p5""><span class=""s1"">cache_target = 7 + 7 = 14</span></p> <p class=""p5""><span class=""s1"">cache</span></p> <p class=""p5""><span class=""s1"">6&nbsp; -&gt; 0</span></p> <p class=""p5""><span class=""s1"">4&nbsp; -&gt; 1</span></p> <p class=""p5""><span class=""s1"">5&nbsp; -&gt; 2</span></p> <p class=""p5""><span class=""s1"">14 -&gt; 3</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">-7 not in cache</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">index&nbsp; =&nbsp; 0&nbsp; 1&nbsp; 2 &nbsp; 3&nbsp; 4</span></p> <p class=""p5""><span class=""s1"">nums &nbsp; = [1, 3, 2, -7, 5]</span></p> <p class=""p5""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</span></p> <p class=""p5""><span class=""s1"">cache_target = 7 - 5 = 2</span></p> <p class=""p5""><span class=""s1"">cache</span></p> <p class=""p5""><span class=""s1"">6&nbsp; -&gt; 0</span></p> <p class=""p5""><span class=""s1"">4&nbsp; -&gt; 1</span></p> <p class=""p5""><span class=""s1"">5&nbsp; -&gt; 2</span></p> <p class=""p5""><span class=""s1"">14 -&gt; 3</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">5 in cache, success, output matching indices: cache[num] and current iteration index</span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1"">output = [2, 4]</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">two_sum</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, nums, target):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> nums </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> target </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'nums or target cannot be None'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> nums:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s1""> ValueError(</span><span class=""s7"">'nums cannot be empty'</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; cache = {}</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> index, num </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">enumerate</span><span class=""s1"">(nums):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cache_target = target </span><span class=""s8""><b>-</b></span><span class=""s1""> num</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> num </span><span class=""s5""><b>in</b></span><span class=""s1""> cache:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> [cache[num], index]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cache[cache_target] = index</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s3""> </span><span class=""s1""><b>None</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_two_sum.py</span></p> <p class=""p8""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">TestTwoSum</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_two_sum</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.two_sum, </span><span class=""s5""><b>None</b></span><span class=""s1"">, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(ValueError, solution.two_sum, [], </span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; target = </span><span class=""s9"">7</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nums = [</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s8""><b>-</b></span><span class=""s9"">7</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = [</span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">]</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.two_sum(nums, target), expected)</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_two_sum'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test = TestTwoSum()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_two_sum()</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s7"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Given a knapsack with a total weight capacity and a list of items with weight w(i) and value v(i), determine which items to select to maximize total value.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #000080; -webkit-text-stroke: #000080; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #000080; -webkit-text-stroke: #000080} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; min-height: 17.0px} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff} p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000} span.s1 {font-kerning: none; background-color: #ffffff} span.s2 {font-kerning: none; color: #337ab7; background-color: #ffffff; -webkit-text-stroke: 0px #337ab7} span.s3 {background-color: #ffffff} span.s4 {font-kerning: none} span.s5 {font-kerning: none; background-color: #f7f7f7} span.s6 {font-kerning: none; color: #000000; background-color: #f7f7f7; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #0000ff; background-color: #f7f7f7; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #008000; background-color: #f7f7f7; -webkit-text-stroke: 0px #008000} span.s9 {font-kerning: none; color: #1a1a1a; background-color: #f7f7f7; -webkit-text-stroke: 0px #1a1a1a} span.s10 {font-kerning: none; color: #aa22ff; background-color: #f7f7f7; -webkit-text-stroke: 0px #aa22ff} span.s11 {font-kerning: none; color: #ba2121; background-color: #f7f7f7; -webkit-text-stroke: 0px #ba2121} span.s12 {font-kerning: none; color: #008800; background-color: #f7f7f7; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Can we replace the items once they are placed in the knapsack?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">No, this is the 0/1 knapsack problem</span></li> </ul> <li class=""li2""><span class=""s3""></span><span class=""s1"">Can we split an item?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s3""></span><span class=""s1"">Can we get an input item with weight of 0 or value of 0?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s3""></span><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s3""></span><span class=""s1"">Are the inputs in sorted order by val/weight?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Yes, if not we'd need to sort them first</span></li> </ul> <li class=""li2""><span class=""s3""></span><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s1"">items or total weight is None -&gt; Exception</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">items or total weight is 0 -&gt; 0</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">General case</span></li> </ul> <p class=""p4""><span class=""s4"">total_weight = 8</span></p> <p class=""p4""><span class=""s4"">items</span></p> <p class=""p4""><span class=""s4"">&nbsp; v | w</span></p> <p class=""p4""><span class=""s4"">&nbsp; 0 | 0</span></p> <p class=""p4""><span class=""s4"">a 2 | 2</span></p> <p class=""p4""><span class=""s4"">b 4 | 2</span></p> <p class=""p4""><span class=""s4"">c 6 | 4</span></p> <p class=""p4""><span class=""s4"">d 9 | 5</span></p> <p class=""p5""><span class=""s4""></span><br></p> <p class=""p4""><span class=""s4"">max value = 13</span></p> <p class=""p4""><span class=""s4"">items</span></p> <p class=""p4""><span class=""s4"">&nbsp; v | w</span></p> <p class=""p4""><span class=""s4"">b 4 | 2</span></p> <p class=""p4""><span class=""s4"">d 9 | 5&nbsp;</span></p> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">We'll use bottom up dynamic programming to build a table.</span></p> <p class=""p2""><span class=""s1"">The solution for the top down approach is also provided below.</span></p><p class=""p2""><span class=""s1""><br></span></p> <p class=""p4""><span class=""s4"">v = value</span></p> <p class=""p4""><span class=""s4"">w = weight</span></p> <p class=""p5""><span class=""s4""></span><br></p> <p class=""p4""><span class=""s4"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s4"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p4""><span class=""s4"">&nbsp; &nbsp; | v | w || 0 | 1 | 2 | 3 | 4 | 5 | 6&nbsp; | 7&nbsp; | 8&nbsp; |</span></p> <p class=""p4""><span class=""s4"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p4""><span class=""s4"">&nbsp; &nbsp; | 0 | 0 || 0 | 0 | 0 | 0 | 0 | 0 | 0&nbsp; | 0&nbsp; | 0&nbsp; |</span></p> <p class=""p4""><span class=""s4"">i a | 2 | 2 || 0 | 0 | 2 | 2 | 2 | 2 | 2&nbsp; | 2&nbsp; | 2&nbsp; |</span></p> <p class=""p4""><span class=""s4"">&nbsp; b | 4 | 2 || 0 | 0 | 4 | 4 | 6 | 6 | 6&nbsp; | 6&nbsp; | 6&nbsp; |</span></p> <p class=""p4""><span class=""s4"">&nbsp; c | 6 | 4 || 0 | 0 | 4 | 4 | 6 | 6 | 10 | 10 | 12 |</span></p> <p class=""p4""><span class=""s4"">&nbsp; d | 9 | 5 || 0 | 0 | 4 | 4 | 6 | 9 | 10 | 13 | 13 |</span></p> <p class=""p4""><span class=""s4"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p5""><span class=""s4""></span><br></p> <p class=""p4""><span class=""s4"">i = row</span></p> <p class=""p4""><span class=""s4"">j = col</span></p> <p class=""p5""><span class=""s4""></span><br></p> <p class=""p4""><span class=""s4"">if j &gt;= item[i].weight:</span></p> <p class=""p4""><span class=""s4"">&nbsp; &nbsp; T[i][j] = max(item[i].value + T[i - 1][j - item[i].weight],</span></p> <p class=""p4""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i - 1][j])</span></p> <p class=""p4""><span class=""s4"">else:</span></p> <p class=""p4""><span class=""s4"">&nbsp; &nbsp; T[i][j] = T[i - 1][j]</span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s3""></span><span class=""s1"">Time: O(n * w), where n is the number of items and w is the total weight</span></li> <li class=""li2""><span class=""s3""></span><span class=""s1"">Space: O(n * w), where n is the number of items and w is the total weight</span></li> </ul> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p6""><span class=""s1""><b>Item Class</b></span></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p9""><span class=""s5"">&nbsp;</span></p> <p class=""p10""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s7"">Item</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">__init__</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">, label, value, weight):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s5"">.label = label</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s5"">.value = value</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s5"">.weight = weight</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">__repr__</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> </span><span class=""s9"">self</span><span class=""s5"">.label </span><span class=""s10""><b>+</b></span><span class=""s5""> </span><span class=""s11"">' v:'</span><span class=""s5""> </span><span class=""s10""><b>+</b></span><span class=""s5""> </span><span class=""s8"">str</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">.value) </span><span class=""s10""><b>+</b></span><span class=""s5""> </span><span class=""s11"">' w:'</span><span class=""s5""> </span><span class=""s10""><b>+</b></span><span class=""s5""> </span><span class=""s8"">str</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">.weight)</span></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p6""><span class=""s1""><b>Knapsack Bottom Up</b></span></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p9""><span class=""s5"">&nbsp;</span></p> <p class=""p10""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s7"">Knapsack</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">fill_knapsack</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">, input_items, total_weight):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> input_items </span><span class=""s8""><b>is</b></span><span class=""s5""> </span><span class=""s8""><b>None</b></span><span class=""s5""> </span><span class=""s8""><b>or</b></span><span class=""s5""> total_weight </span><span class=""s8""><b>is</b></span><span class=""s5""> </span><span class=""s8""><b>None</b></span><span class=""s5"">:</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>raise</b></span><span class=""s6""> TypeError(</span><span class=""s5"">'input_items or total_weight cannot be None'</span><span class=""s6"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> </span><span class=""s8""><b>not</b></span><span class=""s5""> input_items </span><span class=""s8""><b>or</b></span><span class=""s5""> total_weight </span><span class=""s10""><b>==</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5"">:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> </span><span class=""s12"">0</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items = </span><span class=""s8"">list</span><span class=""s5"">([Item(label=</span><span class=""s11"">''</span><span class=""s5"">, value=</span><span class=""s12"">0</span><span class=""s5"">, weight=</span><span class=""s12"">0</span><span class=""s5"">)] </span><span class=""s10""><b>+</b></span><span class=""s5""> input_items)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; num_rows = </span><span class=""s8"">len</span><span class=""s5"">(items)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; num_cols = total_weight </span><span class=""s10""><b>+</b></span><span class=""s5""> </span><span class=""s12"">1</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; T = [[</span><span class=""s8""><b>None</b></span><span class=""s5"">] </span><span class=""s10""><b>*</b></span><span class=""s5""> num_cols </span><span class=""s8""><b>for</b></span><span class=""s5""> _ </span><span class=""s8""><b>in</b></span><span class=""s5""> </span><span class=""s8"">range</span><span class=""s5"">(num_rows)]</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s5""> i </span><span class=""s8""><b>in</b></span><span class=""s5""> </span><span class=""s8"">range</span><span class=""s5"">(num_rows):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s5""> j </span><span class=""s8""><b>in</b></span><span class=""s5""> </span><span class=""s8"">range</span><span class=""s5"">(num_cols):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> i </span><span class=""s10""><b>==</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5""> </span><span class=""s8""><b>or</b></span><span class=""s5""> j </span><span class=""s10""><b>==</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5"">:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = </span><span class=""s12"">0</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>elif</b></span><span class=""s5""> j </span><span class=""s10""><b>&gt;=</b></span><span class=""s5""> items[i].weight:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = </span><span class=""s8"">max</span><span class=""s5"">(items[i].value </span><span class=""s10""><b>+</b></span><span class=""s5""> T[i </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">][j </span><span class=""s10""><b>-</b></span><span class=""s5""> items[i].weight],</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">][j])</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>else</b></span><span class=""s5"">:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[i][j] = T[i </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">][j]</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; results = []</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; i = num_rows </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; j = num_cols </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>while</b></span><span class=""s5""> T[i][j] </span><span class=""s10""><b>!=</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5"">:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> T[i </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">][j] </span><span class=""s10""><b>==</b></span><span class=""s5"">&nbsp; T[i][j]:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i -= </span><span class=""s12"">1</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>elif</b></span><span class=""s5""> T[i][j </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">] </span><span class=""s10""><b>==</b></span><span class=""s5"">&nbsp; T[i][j]:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j -= </span><span class=""s12"">1</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>else</b></span><span class=""s5"">:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(items[i])</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i -= </span><span class=""s12"">1</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j -= items[i].weight</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> results</span></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p6""><span class=""s1""><b>Knapsack Top Down</b></span></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p9""><span class=""s5"">&nbsp;</span></p> <p class=""p12""><span class=""s8""><b>class</b></span><span class=""s6""> </span><span class=""s5"">KnapsackTopDown</span><span class=""s6"">(</span><span class=""s8"">object</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">fill_knapsack</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">, items, total_weight):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> items </span><span class=""s8""><b>is</b></span><span class=""s5""> </span><span class=""s8""><b>None</b></span><span class=""s5""> </span><span class=""s8""><b>or</b></span><span class=""s5""> total_weight </span><span class=""s8""><b>is</b></span><span class=""s5""> </span><span class=""s8""><b>None</b></span><span class=""s5"">:</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>raise</b></span><span class=""s6""> TypeError(</span><span class=""s5"">'input_items or total_weight cannot be None'</span><span class=""s6"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> </span><span class=""s8""><b>not</b></span><span class=""s5""> items </span><span class=""s8""><b>or</b></span><span class=""s5""> </span><span class=""s8""><b>not</b></span><span class=""s5""> total_weight:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> </span><span class=""s12"">0</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; memo = {}</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; result = </span><span class=""s9"">self</span><span class=""s5"">._fill_knapsack(items, total_weight, memo, index=</span><span class=""s12"">0</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> result</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">_fill_knapsack</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">, items, total_weight, memo, index):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> total_weight </span><span class=""s10""><b>&lt;</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5"">:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> </span><span class=""s12"">0</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> </span><span class=""s8""><b>not</b></span><span class=""s5""> total_weight </span><span class=""s8""><b>or</b></span><span class=""s5""> index </span><span class=""s10""><b>&gt;=</b></span><span class=""s5""> </span><span class=""s8"">len</span><span class=""s5"">(items):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> items[index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">].value</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> (total_weight, </span><span class=""s8"">len</span><span class=""s5"">(items) </span><span class=""s10""><b>-</b></span><span class=""s5""> index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">) </span><span class=""s8""><b>in</b></span><span class=""s5""> memo:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> memo[(total_weight, </span><span class=""s8"">len</span><span class=""s5"">(items) </span><span class=""s10""><b>-</b></span><span class=""s5""> index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">)] </span><span class=""s10""><b>+</b></span><span class=""s5""> items[index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">].value</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; results = []</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s5""> i </span><span class=""s8""><b>in</b></span><span class=""s5""> </span><span class=""s8"">range</span><span class=""s5"">(index, </span><span class=""s8"">len</span><span class=""s5"">(items)):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total_weight -= items[i].weight</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = </span><span class=""s9"">self</span><span class=""s5"">._fill_knapsack(items, total_weight, memo, index=i </span><span class=""s10""><b>+</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total_weight += items[i].weight</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results.append(result)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; results_index = </span><span class=""s12"">0</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s5""> i </span><span class=""s8""><b>in</b></span><span class=""s5""> </span><span class=""s8"">range</span><span class=""s5"">(index, </span><span class=""s8"">len</span><span class=""s5"">(items)):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; memo[total_weight, </span><span class=""s8"">len</span><span class=""s5"">(items) </span><span class=""s10""><b>-</b></span><span class=""s5""> i] = </span><span class=""s8"">max</span><span class=""s5"">(results[results_index:])</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; results_index += </span><span class=""s12"">1</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> </span><span class=""s8"">max</span><span class=""s5"">(results) </span><span class=""s10""><b>+</b></span><span class=""s5""> (items[index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">].value </span><span class=""s8""><b>if</b></span><span class=""s5""> index </span><span class=""s10""><b>&gt;</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5""> </span><span class=""s8""><b>else</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5"">)</span></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p6""><span class=""s1""><b>Knapsack Top Down Alternate</b></span></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p9""><span class=""s5"">&nbsp;</span></p> <p class=""p10""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s7"">Result</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">__init__</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">, total_weight, item):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s5"">.total_weight = total_weight</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s5"">.item = item</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">__repr__</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> </span><span class=""s11"">'w:'</span><span class=""s5""> </span><span class=""s10""><b>+</b></span><span class=""s5""> </span><span class=""s8"">str</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">.total_weight) </span><span class=""s10""><b>+</b></span><span class=""s5""> </span><span class=""s11"">' i:'</span><span class=""s5""> </span><span class=""s10""><b>+</b></span><span class=""s5""> </span><span class=""s8"">str</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">.item)</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">__lt__</span><span class=""s5"">(</span><span class=""s9"">self</span><span class=""s5"">, other):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> </span><span class=""s9"">self</span><span class=""s5"">.total_weight </span><span class=""s10""><b>&lt;</b></span><span class=""s5""> other.total_weight</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">knapsack_top_down_alt</span><span class=""s5"">(items, total_weight):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> items </span><span class=""s8""><b>is</b></span><span class=""s5""> </span><span class=""s8""><b>None</b></span><span class=""s5""> </span><span class=""s8""><b>or</b></span><span class=""s5""> total_weight </span><span class=""s8""><b>is</b></span><span class=""s5""> </span><span class=""s8""><b>None</b></span><span class=""s5"">:</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>raise</b></span><span class=""s6""> TypeError(</span><span class=""s5"">'input_items or total_weight cannot be None'</span><span class=""s6"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> </span><span class=""s8""><b>not</b></span><span class=""s5""> items </span><span class=""s8""><b>or</b></span><span class=""s5""> </span><span class=""s8""><b>not</b></span><span class=""s5""> total_weight:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> </span><span class=""s12"">0</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; memo = {}</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; result = _knapsack_top_down_alt(items, total_weight, memo, index=</span><span class=""s12"">0</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; curr_item = result.item</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; curr_weight = curr_item.weight</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; picked_items = [curr_item]</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>while</b></span><span class=""s5""> curr_weight </span><span class=""s10""><b>&gt;</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5"">:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; total_weight -= curr_item.weight</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; curr_item = memo[(total_weight, </span><span class=""s8"">len</span><span class=""s5"">(items) </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s8"">len</span><span class=""s5"">(picked_items))].item</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> result</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">_knapsack_top_down_alt</span><span class=""s5"">(items, total_weight, memo, index):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> total_weight </span><span class=""s10""><b>&lt;</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5"">:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> Result(total_weight=</span><span class=""s12"">0</span><span class=""s5"">, item=</span><span class=""s8""><b>None</b></span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> </span><span class=""s8""><b>not</b></span><span class=""s5""> total_weight </span><span class=""s8""><b>or</b></span><span class=""s5""> index </span><span class=""s10""><b>&gt;=</b></span><span class=""s5""> </span><span class=""s8"">len</span><span class=""s5"">(items):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> Result(total_weight=items[index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">].value, item=items[index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">])</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> (total_weight, </span><span class=""s8"">len</span><span class=""s5"">(items) </span><span class=""s10""><b>-</b></span><span class=""s5""> index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">) </span><span class=""s8""><b>in</b></span><span class=""s5""> memo:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; weight=memo[(total_weight,&nbsp;</span></p> <p class=""p9""><span class=""s5"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">len</span><span class=""s5"">(items) </span><span class=""s10""><b>-</b></span><span class=""s5""> index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">)].total_weight </span><span class=""s10""><b>+</b></span><span class=""s5""> items[index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">].value</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> Result(total_weight=weight,</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item=items[index</span><span class=""s10""><b>-</b></span><span class=""s12"">1</span><span class=""s5"">])</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; results = []</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s5""> i </span><span class=""s8""><b>in</b></span><span class=""s5""> </span><span class=""s8"">range</span><span class=""s5"">(index, </span><span class=""s8"">len</span><span class=""s5"">(items)):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; total_weight -= items[i].weight</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; result = _knapsack_top_down_alt(items, total_weight, memo, index=i </span><span class=""s10""><b>+</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; total_weight += items[i].weight</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; results.append(result)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; results_index = </span><span class=""s12"">0</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s5""> i </span><span class=""s8""><b>in</b></span><span class=""s5""> </span><span class=""s8"">range</span><span class=""s5"">(index, </span><span class=""s8"">len</span><span class=""s5"">(items)):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; memo[(total_weight, </span><span class=""s8"">len</span><span class=""s5"">(items) </span><span class=""s10""><b>-</b></span><span class=""s5""> i)] = </span><span class=""s8"">max</span><span class=""s5"">(results[results_index:])</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; results_index += </span><span class=""s12"">1</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s5""> index </span><span class=""s10""><b>==</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5"">:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; result_item = memo[(total_weight, </span><span class=""s8"">len</span><span class=""s5"">(items) </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">)].item</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>else</b></span><span class=""s5"">:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; result_item = items[index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">]</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; weight = </span><span class=""s8"">max</span><span class=""s5"">(results).total_weight </span><span class=""s10""><b>+</b></span><span class=""s5""> (items[index </span><span class=""s10""><b>-</b></span><span class=""s5""> </span><span class=""s12"">1</span><span class=""s5"">].value </span><span class=""s8""><b>if</b></span><span class=""s5""> index </span><span class=""s10""><b>&gt;</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5""> </span><span class=""s8""><b>else</b></span><span class=""s5""> </span><span class=""s12"">0</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s5""> Result(total_weight=weight,</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item=result_item)</span></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p3""><span class=""s4""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p8""><span class=""s4""></span><br></p> <p class=""p9""><span class=""s5"">&nbsp;</span></p> <p class=""p9""><span class=""s10""><b>%%</b></span><span class=""s5"">writefile test_knapsack.py</span></p> <p class=""p9""><span class=""s8""><b>from</b></span><span class=""s5""> nose.tools </span><span class=""s8""><b>import</b></span><span class=""s5""> assert_equal, assert_raises</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p12""><span class=""s8""><b>class</b></span><span class=""s6""> </span><span class=""s5"">TestKnapsack</span><span class=""s6"">(</span><span class=""s8"">object</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s6""> </span><span class=""s5"">test_knapsack_bottom_up</span><span class=""s6"">(</span><span class=""s9"">self</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; knapsack = Knapsack()</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, knapsack.fill_knapsack, </span><span class=""s8""><b>None</b></span><span class=""s5"">, </span><span class=""s8""><b>None</b></span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(knapsack.fill_knapsack(</span><span class=""s12"">0</span><span class=""s5"">, </span><span class=""s12"">0</span><span class=""s5"">), </span><span class=""s12"">0</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items = []</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s11"">'a'</span><span class=""s5"">, value=</span><span class=""s12"">2</span><span class=""s5"">, weight=</span><span class=""s12"">2</span><span class=""s5"">))</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s11"">'b'</span><span class=""s5"">, value=</span><span class=""s12"">4</span><span class=""s5"">, weight=</span><span class=""s12"">2</span><span class=""s5"">))</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s11"">'c'</span><span class=""s5"">, value=</span><span class=""s12"">6</span><span class=""s5"">, weight=</span><span class=""s12"">4</span><span class=""s5"">))</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s11"">'d'</span><span class=""s5"">, value=</span><span class=""s12"">9</span><span class=""s5"">, weight=</span><span class=""s12"">5</span><span class=""s5"">))</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; total_weight = </span><span class=""s12"">8</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; expected_value = </span><span class=""s12"">13</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; results = knapsack.fill_knapsack(items, total_weight)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(results[</span><span class=""s12"">0</span><span class=""s5"">].label, </span><span class=""s11"">'d'</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(results[</span><span class=""s12"">1</span><span class=""s5"">].label, </span><span class=""s11"">'b'</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; total_value = </span><span class=""s12"">0</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s5""> item </span><span class=""s8""><b>in</b></span><span class=""s5""> results:</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total_value += item.value</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(total_value, expected_value)</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">print</span><span class=""s6"">(</span><span class=""s5"">'Success: test_knapsack_bottom_up'</span><span class=""s6"">)</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p12""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s6""> </span><span class=""s5"">test_knapsack_top_down</span><span class=""s6"">(</span><span class=""s9"">self</span><span class=""s6"">):</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; knapsack = KnapsackTopDown()</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, knapsack.fill_knapsack, </span><span class=""s8""><b>None</b></span><span class=""s5"">, </span><span class=""s8""><b>None</b></span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(knapsack.fill_knapsack(</span><span class=""s12"">0</span><span class=""s5"">, </span><span class=""s12"">0</span><span class=""s5"">), </span><span class=""s12"">0</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items = []</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s11"">'a'</span><span class=""s5"">, value=</span><span class=""s12"">2</span><span class=""s5"">, weight=</span><span class=""s12"">2</span><span class=""s5"">))</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s11"">'b'</span><span class=""s5"">, value=</span><span class=""s12"">4</span><span class=""s5"">, weight=</span><span class=""s12"">2</span><span class=""s5"">))</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s11"">'c'</span><span class=""s5"">, value=</span><span class=""s12"">6</span><span class=""s5"">, weight=</span><span class=""s12"">4</span><span class=""s5"">))</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s11"">'d'</span><span class=""s5"">, value=</span><span class=""s12"">9</span><span class=""s5"">, weight=</span><span class=""s12"">5</span><span class=""s5"">))</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; total_weight = </span><span class=""s12"">8</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; expected_value = </span><span class=""s12"">13</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(knapsack.fill_knapsack(items, total_weight), expected_value)</span></p> <p class=""p11""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">print</span><span class=""s6"">(</span><span class=""s5"">'Success: test_knapsack_top_down'</span><span class=""s6"">)</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s8""><b>def</b></span><span class=""s5""> </span><span class=""s7"">main</span><span class=""s5"">():</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; test = TestKnapsack()</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; test.test_knapsack_bottom_up()</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; test.test_knapsack_top_down()</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s5"">​</span></p> <p class=""p9""><span class=""s8""><b>if</b></span><span class=""s5""> __name__ </span><span class=""s10""><b>==</b></span><span class=""s5""> </span><span class=""s11"">'__main__'</span><span class=""s5"">:</span></p> <p class=""p13""><span class=""s4"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Given a knapsack with a total weight capacity and a list of items with weight w(i) and value v(i), determine the max total value you can carry.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we replace the items once they are placed in the knapsack?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes, this is the unbounded knapsack problem</span></li> </ul> <li class=""li2""><span class=""s1"">Can we split an item?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we get an input item with weight of 0 or value of 0?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Do we need to return the items that make up the max total value?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No, just the total value</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Are the inputs in sorted order by val/weight?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">items or total weight is None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">items or total weight is 0 -&gt; 0</span></li> <li class=""li2""><span class=""s1"">General case</span></li> </ul> <p class=""p4""><span class=""s1"">total_weight = 8</span></p><p class=""p4""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">items</span></p> <p class=""p4""><span class=""s1"">&nbsp; v | w</span></p> <p class=""p4""><span class=""s1"">&nbsp; 0 | 0</span></p> <p class=""p4""><span class=""s1"">a 1 | 1</span></p> <p class=""p4""><span class=""s1"">b 3 | 2</span></p> <p class=""p4""><span class=""s1"">c 7 | 4</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">max value = 14&nbsp;</span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">We'll use bottom up dynamic programming to build a table.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Taking what we learned with the 0/1 knapsack problem, we could solve the problem like the following:</span></p> <p class=""p4""><span class=""s1""><br /></span></p><p class=""p4""><span class=""s1"">v = value</span></p> <p class=""p4""><span class=""s1"">w = weight</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; | v | w || 0 | 1 | 2 | 3 | 4 | 5 |&nbsp; 6 |&nbsp; 7 |&nbsp; 8&nbsp; |</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; | 0 | 0 || 0 | 0 | 0 | 0 | 0 | 0 | &nbsp;0 | &nbsp;0 | &nbsp;0 &nbsp;|</span></p><p class=""p4""><span class=""s1"">&nbsp; a | 1 | 1 || 0 | 1 | 2 | 3 | 4 | 5 |&nbsp; 6 |&nbsp; 7 |&nbsp; 8&nbsp; |</span></p> <p class=""p4""><span class=""s1"">i b | 3 | 2 || 0 | 1 | 3 | 4 | 6 | 7 |&nbsp; 9 | 10 | 12&nbsp; |</span></p> <p class=""p4""><span class=""s1"">&nbsp; c | 7 | 4 || 0 | 1 | 3 | 4 | 7 | 8 | 10 | 11 | 14&nbsp; |</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">i = row</span></p> <p class=""p4""><span class=""s1"">j = col</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p2""><span class=""s1"">However, unlike the 0/1 knapsack variant, we don't actually need to keep space of O(n * w), where n is the number of items and w is the total weight. We just need a single array that we update after we process each item:</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; | v | w || 0 | 1 | 2 | 3 | 4 | 5 |&nbsp; 6 |&nbsp; 7 |&nbsp; 8&nbsp; |</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; a | 1 | 1 || 0 | 1 | 2 | 3 | 4 | 5 |&nbsp; 6 |&nbsp; 7 |&nbsp; 8&nbsp; |</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; b | 3 | 2 || 0 | 1 | 3 | 4 | 6 | 7 |&nbsp; 9 | 10 | 12&nbsp; |</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p4""><span class=""s1"">&nbsp; c | 7 | 4 || 0 | 1 | 3 | 4 | 7 | 8 | 10 | 11 | 14&nbsp; |</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; -------------------------------------------------</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p4""><span class=""s1"">if j &gt;= items[i].weight:</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; T[j] = max(items[i].value + T[j - items[i].weight],</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[j])</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n * w), where n is the number of items and w is the total weight</span></li> <li class=""li2""><span class=""s1"">Space: O(w), where w is the total weight</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""><b>Item Class</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Item</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">__init__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, label, value, weight):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.label = label</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.value = value</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">self</span><span class=""s1"">.weight = weight</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">__repr__</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s6"">self</span><span class=""s1"">.label </span><span class=""s7""><b>+</b></span><span class=""s1""> </span><span class=""s8"">' v:'</span><span class=""s1""> </span><span class=""s7""><b>+</b></span><span class=""s1""> </span><span class=""s5"">str</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">.value) </span><span class=""s7""><b>+</b></span><span class=""s1""> </span><span class=""s8"">' w:'</span><span class=""s1""> </span><span class=""s7""><b>+</b></span><span class=""s1""> </span><span class=""s5"">str</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">.weight)</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1""><b>Knapsack Bottom Up</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Knapsack</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">fill_knapsack</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, items, total_weight):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> items </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> total_weight </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'items or total_weight cannot be None'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> items </span><span class=""s5""><b>or</b></span><span class=""s1""> total_weight </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">0</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s9"">0</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_rows = </span><span class=""s5"">len</span><span class=""s1"">(items)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; num_cols = total_weight </span><span class=""s7""><b>+</b></span><span class=""s1""> </span><span class=""s9"">1</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; T = [</span><span class=""s9"">0</span><span class=""s1"">] </span><span class=""s7""><b>*</b></span><span class=""s1""> (num_cols)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> i </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(num_rows):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> j </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(num_cols):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> j </span><span class=""s7""><b>&gt;=</b></span><span class=""s1""> items[i].weight:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[j] = </span><span class=""s5"">max</span><span class=""s1"">(items[i].value </span><span class=""s7""><b>+</b></span><span class=""s1""> T[j&nbsp;</span><span class=""s7""><b>-&nbsp;</b></span><span class=""s1"">items[i].weight],</span></p> <p class=""p8""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T[j])</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> T[</span><span class=""s7""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">]</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p8""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_knapsack_unbounded.py</span></p> <p class=""p8""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestKnapsack</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_knapsack</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; knapsack = Knapsack()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, knapsack.fill_knapsack, </span><span class=""s5""><b>None</b></span><span class=""s1"">, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(knapsack.fill_knapsack(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">0</span><span class=""s1"">), </span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; items = []</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s8"">'a'</span><span class=""s1"">, value=</span><span class=""s9"">1</span><span class=""s1"">, weight=</span><span class=""s9"">1</span><span class=""s1"">))</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s8"">'b'</span><span class=""s1"">, value=</span><span class=""s9"">3</span><span class=""s1"">, weight=</span><span class=""s9"">2</span><span class=""s1"">))</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; items.append(Item(label=</span><span class=""s8"">'c'</span><span class=""s1"">, value=</span><span class=""s9"">7</span><span class=""s1"">, weight=</span><span class=""s9"">4</span><span class=""s1"">))</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; total_weight = </span><span class=""s9"">8</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected_value = </span><span class=""s9"">14</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results = knapsack.fill_knapsack(items, total_weight)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; total_weight = </span><span class=""s9"">7</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected_value = </span><span class=""s9"">11</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; results = knapsack.fill_knapsack(items, total_weight)</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(results, expected_value)</span></p> <p class=""p10""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_knapsack'</span><span class=""s3"">)</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test = TestKnapsack()</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; test.test_knapsack()</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Given a magazine, see if a ransom note could have been written using the letters in the magazine.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s8 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is this case sensitive?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume we're working with ASCII characters?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we scan the entire magazine, or should we scan only when necessary?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">You can scan the entire magazine</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">'', '' -&gt; Exception</span></li> <li class=""li2""><span class=""s1"">'a', 'b' -&gt; False</span></li> <li class=""li2""><span class=""s1"">'aa', 'ab' -&gt; False</span></li> <li class=""li2""><span class=""s1"">'aa', 'aab' -&gt; True</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Build a dictionary of the magazine characters and counts.</span></li> <li class=""li2""><span class=""s1"">Loop through each letter in the ransom note and see if there are enough letters in the magazine's dictionary.</span></li> <li class=""li2""><span class=""s1"">Note: You could make this more efficient by not scanning the entire magazine all at once, but instead scan just in time as you run out of letters in the dictionary.</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n+m), where n is the length of the ransom note and m is the length of the magazine</span></li> <li class=""li2""><span class=""s1"">Space: O(n+m)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">match_note_to_magazine</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, ransom_note, magazine):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> ransom_note </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> magazine </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'ransom_note or magazine cannot be None'</span><span class=""s3"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; seen_chars = {}</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> magazine:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> seen_chars:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; seen_chars[char] += </span><span class=""s7"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; seen_chars[char] = </span><span class=""s7"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> char </span><span class=""s5""><b>in</b></span><span class=""s1""> ransom_note:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>try</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; seen_chars[char] -= </span><span class=""s7"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>except</b></span><span class=""s1""> KeyError:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>False</b></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> seen_chars[char] </span><span class=""s8""><b>&lt;</b></span><span class=""s1""> </span><span class=""s7"">0</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>False</b></span></p> <p class=""p7""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s3""> </span><span class=""s1""><b>True</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s8""><b>%%</b></span><span class=""s1"">writefile test_ransom_note.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestRansomNote</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_ransom_note</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.match_note_to_magazine, </span><span class=""s5""><b>None</b></span><span class=""s1"">, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.match_note_to_magazine(</span><span class=""s9"">''</span><span class=""s1"">, </span><span class=""s9"">''</span><span class=""s1"">), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.match_note_to_magazine(</span><span class=""s9"">'a'</span><span class=""s1"">, </span><span class=""s9"">'b'</span><span class=""s1"">), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.match_note_to_magazine(</span><span class=""s9"">'aa'</span><span class=""s1"">, </span><span class=""s9"">'ab'</span><span class=""s1"">), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.match_note_to_magazine(</span><span class=""s9"">'aa'</span><span class=""s1"">, </span><span class=""s9"">'aab'</span><span class=""s1"">), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_ransom_note'</span><span class=""s3"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestRansomNote()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_ransom_note()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s8""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
MD5	"<ul style=""-webkit-print-color-adjust: exact; margin: 15px 0px; padding-left: 30px; font-family: Helvetica, arial, sans-serif; font-size: 14px; text-size-adjust: auto;""><li style=""-webkit-print-color-adjust: exact; margin: 0px;"">Widely used hashing function that produces a 128-bit hash value</li><li style=""-webkit-print-color-adjust: exact; margin: 0px;"">Uniformly distributed</li></ul>"
Base 62	"<ul style=""-webkit-print-color-adjust: exact; margin: 15px 0px; padding-left: 30px; font-family: Helvetica, arial, sans-serif; font-size: 14px; text-size-adjust: auto;""><li style=""-webkit-print-color-adjust: exact; margin: 0px;"">Encodes to&nbsp;<code style=""-webkit-print-color-adjust: exact; margin: 0px 2px; padding: 0px 5px; white-space: nowrap; border: 1px solid rgb(234, 234, 234); background-color: rgb(248, 248, 248); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;"">[a-zA-Z0-9]</code>&nbsp;which works well for urls, eliminating the need for escaping special characters</li><li style=""-webkit-print-color-adjust: exact; margin: 0px;"">Only one hash result for the original input and and the operation is deterministic (no randomness involved)</li><li style=""-webkit-print-color-adjust: exact; margin: 0px;"">Base 64 is another popular encoding but provides issues for urls because of the additional&nbsp;<code style=""-webkit-print-color-adjust: exact; margin: 0px 2px; padding: 0px 5px; white-space: nowrap; border: 1px solid rgb(234, 234, 234); background-color: rgb(248, 248, 248); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;"">+</code>&nbsp;and&nbsp;<code style=""-webkit-print-color-adjust: exact; margin: 0px 2px; padding: 0px 5px; white-space: nowrap; border: 1px solid rgb(234, 234, 234); background-color: rgb(248, 248, 248); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;"">/</code>&nbsp;characters</li></ul>"
What is HATEOAS?	"<h2 class=""question"" style=""box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 30px; background-color: rgb(224, 224, 224);"">What is HATEOAS and why is it important for my REST API?</h2><p style=""box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; background-color: rgb(224, 224, 224);"">HATEOAS stands for&nbsp;<b style=""box-sizing: border-box;"">Hypertext As The Engine Of Application State</b>. It means that hypertext should be used to find your way through the API. An example:</p><figure class=""highlight"" style=""box-sizing: border-box; margin: 0px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; background-color: rgb(224, 224, 224);""><pre style=""box-sizing: border-box; overflow: auto; font-family: monospace, monospace; padding: 6px 10px; margin-top: 0px; margin-bottom: 10px; margin-left: 3em; line-height: 19px; color: white; word-break: break-all; word-wrap: break-word; background-color: rgb(73, 72, 62); border: 1px solid rgb(204, 204, 204); border-radius: 3px;""><code class=""language-xml"" data-lang=""xml"" style=""box-sizing: border-box; font-family: monospace, monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-radius: 0px; white-space: pre-wrap;"">GET /account/12345 HTTP/1.1  HTTP/1.1 200 OK <span class=""cp"" style=""box-sizing: border-box;"">&lt;?xml version=""1.0""?&gt;</span> <span class=""nt"" style=""box-sizing: border-box;"">&lt;account&gt;</span>     <span class=""nt"" style=""box-sizing: border-box;"">&lt;account_number&gt;</span>12345<span class=""nt"" style=""box-sizing: border-box;"">&lt;/account_number&gt;</span>     <span class=""nt"" style=""box-sizing: border-box;"">&lt;balance</span> <span class=""na"" style=""box-sizing: border-box;"">currency=</span><span class=""s"" style=""box-sizing: border-box;"">""usd""</span><span class=""nt"" style=""box-sizing: border-box;"">&gt;</span>100.00<span class=""nt"" style=""box-sizing: border-box;"">&lt;/balance&gt;</span>     <span class=""nt"" style=""box-sizing: border-box;"">&lt;link</span> <span class=""na"" style=""box-sizing: border-box;"">rel=</span><span class=""s"" style=""box-sizing: border-box;"">""deposit""</span> <span class=""na"" style=""box-sizing: border-box;"">href=</span><span class=""s"" style=""box-sizing: border-box;"">""/account/12345/deposit""</span> <span class=""nt"" style=""box-sizing: border-box;"">/&gt;</span>     <span class=""nt"" style=""box-sizing: border-box;"">&lt;link</span> <span class=""na"" style=""box-sizing: border-box;"">rel=</span><span class=""s"" style=""box-sizing: border-box;"">""withdraw""</span> <span class=""na"" style=""box-sizing: border-box;"">href=</span><span class=""s"" style=""box-sizing: border-box;"">""/account/12345/withdraw""</span> <span class=""nt"" style=""box-sizing: border-box;"">/&gt;</span>     <span class=""nt"" style=""box-sizing: border-box;"">&lt;link</span> <span class=""na"" style=""box-sizing: border-box;"">rel=</span><span class=""s"" style=""box-sizing: border-box;"">""transfer""</span> <span class=""na"" style=""box-sizing: border-box;"">href=</span><span class=""s"" style=""box-sizing: border-box;"">""/account/12345/transfer""</span> <span class=""nt"" style=""box-sizing: border-box;"">/&gt;</span>     <span class=""nt"" style=""box-sizing: border-box;"">&lt;link</span> <span class=""na"" style=""box-sizing: border-box;"">rel=</span><span class=""s"" style=""box-sizing: border-box;"">""close""</span> <span class=""na"" style=""box-sizing: border-box;"">href=</span><span class=""s"" style=""box-sizing: border-box;"">""/account/12345/close""</span> <span class=""nt"" style=""box-sizing: border-box;"">/&gt;</span> <span class=""nt"" style=""box-sizing: border-box;"">&lt;/account&gt;</span></code></pre></figure><p style=""box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; background-color: rgb(224, 224, 224);"">Apart from the fact that we have 100 dollars (US) in our account, we can see 4 options: deposit more money, withdraw money, transfer money to another account, or close our account. The ""link""-tags allows us to find out the URLs that are needed for the specified actions. Now, let's suppose we didn't have 100 usd in the bank, but we actually are in the red:</p><figure class=""highlight"" style=""box-sizing: border-box; margin: 0px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; background-color: rgb(224, 224, 224);""><pre style=""box-sizing: border-box; overflow: auto; font-family: monospace, monospace; padding: 6px 10px; margin-top: 0px; margin-bottom: 10px; margin-left: 3em; line-height: 19px; color: white; word-break: break-all; word-wrap: break-word; background-color: rgb(73, 72, 62); border: 1px solid rgb(204, 204, 204); border-radius: 3px;""><code class=""language-xml"" data-lang=""xml"" style=""box-sizing: border-box; font-family: monospace, monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-radius: 0px; white-space: pre-wrap;"">GET /account/12345 HTTP/1.1  HTTP/1.1 200 OK <span class=""cp"" style=""box-sizing: border-box;"">&lt;?xml version=""1.0""?&gt;</span> <span class=""nt"" style=""box-sizing: border-box;"">&lt;account&gt;</span>     <span class=""nt"" style=""box-sizing: border-box;"">&lt;account_number&gt;</span>12345<span class=""nt"" style=""box-sizing: border-box;"">&lt;/account_number&gt;</span>     <span class=""nt"" style=""box-sizing: border-box;"">&lt;balance</span> <span class=""na"" style=""box-sizing: border-box;"">currency=</span><span class=""s"" style=""box-sizing: border-box;"">""usd""</span><span class=""nt"" style=""box-sizing: border-box;"">&gt;</span>-25.00<span class=""nt"" style=""box-sizing: border-box;"">&lt;/balance&gt;</span>     <span class=""nt"" style=""box-sizing: border-box;"">&lt;link</span> <span class=""na"" style=""box-sizing: border-box;"">rel=</span><span class=""s"" style=""box-sizing: border-box;"">""deposit""</span> <span class=""na"" style=""box-sizing: border-box;"">href=</span><span class=""s"" style=""box-sizing: border-box;"">""/account/12345/deposit""</span> <span class=""nt"" style=""box-sizing: border-box;"">/&gt;</span> <span class=""nt"" style=""box-sizing: border-box;"">&lt;/account&gt;</span></code></pre></figure><p style=""box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; background-color: rgb(224, 224, 224);"">Now we are 25 dollars in the red. Do you see that right now we have lost many of our options, and only depositing money is valid? As long as we are in the red, we cannot close our account, nor transfer or withdraw any money from the account. The hypertext is actually telling us what is allowed and what not: HATEOAS</p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the shortest path between two nodes in an unweighted graph.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s4 {font-kerning: none; color: #ff0000; -webkit-text-stroke: 0px #ff0000} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} ul.ul3 {list-style-type: circle} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the graph directed?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li></ul><ul class=""ul2""> </ul> <li class=""li2""><span class=""s1"">Can we assume we already have Graph and Node classes?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Are the inputs two Nodes?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output a list of Node keys that make up the shortest path?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">If there is no path, should we return None?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Input:</span></p> <ul class=""ul1""> <li class=""li4""><span class=""s1"">add_edge(source, destination, weight)</span></li> </ul> <p class=""p4""><span class=""s1"">graph.add_edge(0, 1)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(0, 4)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(0, 5)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(1, 3)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(1, 4)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(2, 1)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(3, 2)</span></p> <p class=""p4""><span class=""s1"">graph.add_edge(3, 4)</span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Result:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">search_path(start=0, end=2) -&gt; [0, 1, 3, 2]</span></li> <li class=""li2""><span class=""s1"">search_path(start=0, end=0) -&gt; [0]</span></li> <li class=""li2""><span class=""s1"">search_path(start=4, end=5) -&gt; None</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2"" style=""-webkit-text-stroke-width: 0px;""><span class=""s1"">To determine the shorted path in an unweighted graph, we can use breadth-first search keeping track of the previous nodes ids for each node. Previous nodes ids can be a dictionary of key: current node id and value: previous node id.</span></p><ul class=""ul1""><li class=""li2""><span class=""s1"">If the start node is the end node, return True</span></li><li class=""li2""><span class=""s1"">Add the start node to the queue and mark it as visited</span></li><ul class=""ul2""><li class=""li2""><span class=""s1"">Update the previous node ids, the previous node id of the start node is None</span></li></ul><li class=""li2""><span class=""s1"">While the queue is not empty</span></li><ul class=""ul2""><li class=""li2""><span class=""s1"">Dequeue a node and visit it</span></li><li class=""li2""><span class=""s1"">If the node is the end node, return the previous nodes</span></li><li class=""li2""><span class=""s1"">Set the previous node to the current node</span></li><li class=""li2""><span class=""s1"">Iterate through each adjacent node</span></li><ul class=""ul3""><li class=""li2""><span class=""s1"">If the node has not been visited, add it to the queue and mark it as visited</span></li><ul class=""ul3""><li class=""li2""><span class=""s1"">Update the previous node ids</span></li></ul></ul></ul><li class=""li2""><span class=""s1"">Return None</span></li></ul><p class=""p2"" style=""-webkit-text-stroke-width: 0px;""><span class=""s1"">Walk the previous node ids backwards to get the path.</span></p><p class=""p2"" style=""-webkit-text-stroke-width: 0px;""><span class=""s1"">Complexity:</span></p><ul class=""ul1""><li class=""li2""><span class=""s1"">Time: O(V + E), where V = number of vertices and E = number of edges</span></li><li class=""li2""><span class=""s1"">Space: O(V + E)</span></li></ul><ul class=""ul1""> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> collections </span><span class=""s5""><b>import</b></span><span class=""s1""> deque</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">GraphShortestPath</span><span class=""s6"">(Graph):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">shortest_path</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, source_key, dest_key):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> source_key </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1""> </span><span class=""s5""><b>or</b></span><span class=""s1""> dest_key </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> source_key </span><span class=""s5""><b>is</b></span><span class=""s1""> dest_key:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> [source_key]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; prev_node_keys = </span><span class=""s8"">self</span><span class=""s1"">._shortest_path(source_key, dest_key)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> prev_node_keys </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; path_ids = [dest_key]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prev_node_key = prev_node_keys[dest_key]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> prev_node_key </span><span class=""s5""><b>is</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; path_ids.append(prev_node_key)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prev_node_key = prev_node_keys[prev_node_key]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> path_ids[::</span><span class=""s3""><b>-</b></span><span class=""s9"">1</span><span class=""s1"">]</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">_shortest_path</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, source_key, dest_key):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue = deque()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; queue.append(</span><span class=""s8"">self</span><span class=""s1"">.nodes[source_key])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; prev_node_keys = {source_key: </span><span class=""s5""><b>None</b></span><span class=""s1"">}</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">self</span><span class=""s1"">.nodes[source_key].visit_state = State.visited</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>while</b></span><span class=""s1""> queue:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = queue.popleft()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> node.key </span><span class=""s5""><b>is</b></span><span class=""s1""> dest_key:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> prev_node_keys</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prev_node = node</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> adj_node </span><span class=""s5""><b>in</b></span><span class=""s1""> node.adj_nodes.values():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> adj_node.visit_state </span><span class=""s3""><b>==</b></span><span class=""s1""> State.unvisited:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; queue.append(adj_node)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prev_node_keys[adj_node.key] = prev_node.key</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; adj_node.visit_state = State.visited</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>return</b></span><span class=""s6""> </span><span class=""s1""><b>None</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s3""><b>%%</b></span><span class=""s1"">writefile test_shortest_path.py</span></p> <p class=""p7""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s5""><b>class</b></span><span class=""s6""> </span><span class=""s1"">TestShortestPath</span><span class=""s6"">(</span><span class=""s5"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_shortest_path</span><span class=""s6"">(</span><span class=""s8"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; nodes = []</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph = GraphShortestPath()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>for</b></span><span class=""s1""> </span><span class=""s5"">id</span><span class=""s1""> </span><span class=""s5""><b>in</b></span><span class=""s1""> </span><span class=""s5"">range</span><span class=""s1"">(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">6</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodes.append(graph.add_node(</span><span class=""s5"">id</span><span class=""s1"">))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">5</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">2</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; graph.add_edge(</span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">4</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.shortest_path(nodes[</span><span class=""s9"">0</span><span class=""s1"">].key, nodes[</span><span class=""s9"">2</span><span class=""s1"">].key), [</span><span class=""s9"">0</span><span class=""s1"">, </span><span class=""s9"">1</span><span class=""s1"">, </span><span class=""s9"">3</span><span class=""s1"">, </span><span class=""s9"">2</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.shortest_path(nodes[</span><span class=""s9"">0</span><span class=""s1"">].key, nodes[</span><span class=""s9"">0</span><span class=""s1"">].key), [</span><span class=""s9"">0</span><span class=""s1"">])</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(graph.shortest_path(nodes[</span><span class=""s9"">4</span><span class=""s1"">].key, nodes[</span><span class=""s9"">5</span><span class=""s1"">].key), </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_shortest_path'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestShortestPath()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_shortest_path()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s3""><b>==</b></span><span class=""s1""> </span><span class=""s10"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} </style> <p class=""p1""><span class=""s1""><b>Problem: Determine whether you can win the Nim game given the remaining stones.</b></span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">See the <a href=""https://leetcode.com/problems/nim-game/""><span class=""s3"">LeetCode</span></a> problem page.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">You are playing the following Nim Game with your friend: There is a heap of stones on the table, each time one of you take turns to remove 1 to 3 stones. The one who removes the last stone will be the winner. You will take the first turn to remove the stones.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Both of you are very clever and have optimal strategies for the game. Write a function to determine whether you can win the game given the number of stones in the heap.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">For example, if there are 4 stones in the heap, then you will never win the game: no matter 1, 2, or 3 stones you remove, the last stone will always be removed by your friend.<br /></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s4 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s5 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s6 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s7 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s8 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s9 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the input an int?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output a boolean?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">1, 2, or 3 -&gt; True</span></li> <li class=""li2""><span class=""s1"">4 -&gt; False</span></li> <li class=""li2""><span class=""s1"">7 -&gt; True</span></li> <li class=""li2""><span class=""s1"">40 -&gt; False</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">This is somewhat of a one-trick puzzle, where the only way you can lose if you take the first stone while playing optimally is if the number of remaining stones is divisible by 4.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s1""><b>class</b></span><span class=""s3""> </span><span class=""s4"">Solution</span><span class=""s3"">(</span><span class=""s1"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">can_win_nim</span><span class=""s1"">(</span><span class=""s6"">self</span><span class=""s1"">, num_stones_left):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>if</b></span><span class=""s1""> </span><span class=""s5""><b>not</b></span><span class=""s1""> </span><span class=""s5"">isinstance</span><span class=""s1"">(num_stones_left, </span><span class=""s5"">int</span><span class=""s1"">):</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>raise</b></span><span class=""s3""> TypeError(</span><span class=""s1"">'num_stones_left must be an int'</span><span class=""s3"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5""><b>return</b></span><span class=""s1""> num_stones_left </span><span class=""s7""><b>%</b></span><span class=""s1""> </span><span class=""s8"">4</span><span class=""s1""> </span><span class=""s7""><b>!=</b></span><span class=""s1""> </span><span class=""s8"">0</span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p5""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s7""><b>%%</b></span><span class=""s1"">writefile test_can_win_nim.py</span></p> <p class=""p6""><span class=""s5""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s5""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s5""><b>class</b></span><span class=""s3""> </span><span class=""s1"">TestSolution</span><span class=""s3"">(</span><span class=""s5"">object</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s3"">&nbsp; &nbsp; </span><span class=""s5""><b>def</b></span><span class=""s3""> </span><span class=""s1"">test_can_win_nim</span><span class=""s3"">(</span><span class=""s6"">self</span><span class=""s3"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.can_win_nim, </span><span class=""s5""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.can_win_nim(</span><span class=""s8"">1</span><span class=""s1"">), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.can_win_nim(</span><span class=""s8"">2</span><span class=""s1"">), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.can_win_nim(</span><span class=""s8"">3</span><span class=""s1"">), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.can_win_nim(</span><span class=""s8"">4</span><span class=""s1"">), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.can_win_nim(</span><span class=""s8"">7</span><span class=""s1"">), </span><span class=""s5""><b>True</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.can_win_nim(</span><span class=""s8"">40</span><span class=""s1"">), </span><span class=""s5""><b>False</b></span><span class=""s1"">)</span></p> <p class=""p8""><span class=""s3"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s5"">print</span><span class=""s3"">(</span><span class=""s1"">'Success: test_can_win_nim'</span><span class=""s3"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>def</b></span><span class=""s1""> </span><span class=""s4"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestSolution()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_can_win_nim()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s5""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s7""><b>==</b></span><span class=""s1""> </span><span class=""s9"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style> <p class=""p1""><span class=""s1""><b>Problem: Find the length of the longest substring with at most k distinct characters.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #d9d9d9; min-height: 17.0px} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s5 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s8 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s9 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s10 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the strings are ASCII?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is this case sensitive?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is a substring a contiguous block of chars?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Do we expect an int as a result?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">'', k = 3 -&gt; 0</span></li> <li class=""li2""><span class=""s1"">'abcabcdefgghiij', k=3 -&gt; 6</span></li> <li class=""li2""><span class=""s1"">'abcabcdefgghighij', k=3 -&gt; 7</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p2""><span class=""s1"">We'll use a </span><span class=""s3"">chars_to_index_map</span><span class=""s1""> dictionary: char (key) to index (val) map to maintain a sliding window.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">The index (val) will keep track of the character index in the input string.</span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">For each character in the string:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Add the char (key) and index (value) to the map</span></li> <li class=""li2""><span class=""s1"">If the length of our map is greater than k, then we'll need to eliminate one item</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Scan the map to find the lowest index and remove it</span></li> <li class=""li2""><span class=""s1"">The new lowest index will therefore be incremented by 1</span></li> </ul> <li class=""li2""><span class=""s1"">The max length will be the current index minus the lower index + 1</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n * k), where n is the number of chars, k is the length of the map due to the min() call</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p><p class=""p1""><span class=""s1""><b><br /></b></span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s4""> </span><span class=""s5"">Solution</span><span class=""s4"">(</span><span class=""s1"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">longest_substr</span><span class=""s1"">(</span><span class=""s7"">self</span><span class=""s1"">, string, k):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> </span><span class=""s6"">isinstance</span><span class=""s1"">(string, </span><span class=""s6"">str</span><span class=""s1"">):</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s4""> TypeError(</span><span class=""s1"">'string must be of type str'</span><span class=""s4"">)</span></p> <p class=""p9""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>if</b></span><span class=""s4""> </span><span class=""s1""><b>not</b></span><span class=""s4""> </span><span class=""s1"">isinstance</span><span class=""s4"">(k, </span><span class=""s1"">int</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s8"">'k must be of type int'</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; low_index = </span><span class=""s9"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_length = </span><span class=""s9"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; chars_to_index_map = {}</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>for</b></span><span class=""s1""> index, char </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s6"">enumerate</span><span class=""s1"">(string):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chars_to_index_map[char] = index</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s6"">len</span><span class=""s1"">(chars_to_index_map) </span><span class=""s10""><b>&gt;</b></span><span class=""s1""> k:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; low_index = </span><span class=""s6"">min</span><span class=""s1"">(chars_to_index_map.values())</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>del</b></span><span class=""s1""> chars_to_index_map[string[low_index]]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; low_index += </span><span class=""s9"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_length = </span><span class=""s6"">max</span><span class=""s1"">(max_length, index </span><span class=""s10""><b>-</b></span><span class=""s1""> low_index </span><span class=""s10""><b>+</b></span><span class=""s1""> </span><span class=""s9"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> max_length</span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s10""><b>%%</b></span><span class=""s1"">writefile test_longest_substr.py</span></p> <p class=""p6""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s6""><b>class</b></span><span class=""s4""> </span><span class=""s1"">TestSolution</span><span class=""s4"">(</span><span class=""s6"">object</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p11""><span class=""s4"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s4""> </span><span class=""s1"">test_longest_substr</span><span class=""s4"">(</span><span class=""s7"">self</span><span class=""s4"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.longest_substr, </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.longest_substr(</span><span class=""s8"">''</span><span class=""s1"">, k=</span><span class=""s9"">3</span><span class=""s1"">), </span><span class=""s9"">0</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.longest_substr(</span><span class=""s8"">'abcabcdefgghiij'</span><span class=""s1"">, k=</span><span class=""s9"">3</span><span class=""s1"">), </span><span class=""s9"">6</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.longest_substr(</span><span class=""s8"">'abcabcdefgghighij'</span><span class=""s1"">, k=</span><span class=""s9"">3</span><span class=""s1"">), </span><span class=""s9"">7</span><span class=""s1"">)</span></p> <p class=""p10""><span class=""s4"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s4"">(</span><span class=""s1"">'Success: test_longest_substr'</span><span class=""s4"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s5"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestSolution()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_longest_substr()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s10""><b>==</b></span><span class=""s1""> </span><span class=""s8"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} </style>   <p class=""p1""><span class=""s1""><b>Problem: Find the longest absolute file path.</b></span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">See the <a href=""https://leetcode.com/problems/longest-absolute-file-path/""><span class=""s3"">LeetCode</span></a> problem page.</span></p> <p class=""p3""><span class=""s1""><br></span></p><p class=""p3""><span class=""s1"">Suppose we abstract our file system by a string in the following manner:</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">The string ""dir\n\tsubdir1\n\tsubdir2\n\t\tfile.ext"" represents:</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">dir</span></p> <p class=""p3""><span class=""s1"">&nbsp; &nbsp; subdir1</span></p> <p class=""p3""><span class=""s1"">&nbsp; &nbsp; subdir2</span></p> <p class=""p3""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; file.ext</span></p> <p class=""p3""><span class=""s1"">The directory dir contains an empty sub-directory subdir1 and a sub-directory subdir2 containing a file file.ext.</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">The string ""dir\n\tsubdir1\n\t\tfile1.ext\n\t\tsubsubdir1\n\tsubdir2\n\t\tsubsubdir2\n\t\t\tfile2.ext"" represents:</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">dir</span></p> <p class=""p3""><span class=""s1"">&nbsp; &nbsp; subdir1</span></p> <p class=""p3""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; file1.ext</span></p> <p class=""p3""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; subsubdir1</span></p> <p class=""p3""><span class=""s1"">&nbsp; &nbsp; subdir2</span></p> <p class=""p3""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; subsubdir2</span></p> <p class=""p3""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; file2.ext</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">The directory dir contains two sub-directories subdir1 and subdir2. subdir1 contains a file file1.ext and an empty second-level sub-directory subsubdir1. subdir2 contains a second-level sub-directory subsubdir2 containing a file file2.ext.</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">We are interested in finding the longest (number of characters) absolute path to a file within our file system. For example, in the second example above, the longest absolute path is ""dir/subdir2/subsubdir2/file2.ext"", and its length is 32 (not including the double quotes).</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">Given a string representing the file system in the above format, return the length of the longest absolute path to file in the abstracted file system. If there is no file in the system, return 0.</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">Note:</span></p> <p class=""p3""><span class=""s1"">The name of a file contains at least a . and an extension.</span></p> <p class=""p3""><span class=""s1"">The name of a directory or sub-directory will not contain a ..</span></p> <p class=""p3""><span class=""s1"">Time complexity required: O(n) where n is the size of the input string.</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">Notice that a/aa/aaa/file1.txt is not the longest file path, if there is another path aaaaaaaaaaaaaaaaaaaaa/sth.png.</span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font: 14.0px 'Helvetica Neue'} span.s5 {font: 14.0px 'Helvetica Neue'; font-kerning: none} span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s7 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s8 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s9 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s11 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s12 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Is the input a string?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the input is valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Will there always be a file in the input?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output an int?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">'dir\n\tsubdir1\n\t\tfile1.ext\n\t\tsubsubdir1\n\tsubdir2\n\t\tsubsubdir2\n\t\t\tfile2.ext' -&gt; 32</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">We'll use a dictionary </span><span class=""s3"">path_len</span><span class=""s1""> to keep track of the current character length (values) at each depth (keys). Depth 0 will have a length of 0.</span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Initialize </span><span class=""s3"">max_len</span><span class=""s1""> to 0.</span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Split the input based on the newline character. Iterate on each resulting line:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Extract the </span><span class=""s3"">name</span><span class=""s1""> by excluding the tab characters</span></li> <li class=""li2""><span class=""s1"">Calculate the depth length by taking into account the tab characters</span></li> <li class=""li2""><span class=""s1"">If we are dealing with a file path (there is a '.' in </span><span class=""s3"">name</span><span class=""s1"">)</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Calculate </span><span class=""s3"">path_len[depth] + len(name)</span><span class=""s1""> and update </span><span class=""s3"">max_len</span><span class=""s1""> if needed</span></li> </ul> <li class=""li4""><span class=""s4""></span><span class=""s5"">Else, update </span><span class=""s1"">path_len[depth + 1] = path_len[depth] + len(name) + 1</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">We add </span><span class=""s3"">+ 1</span><span class=""s1""> because each depth is separated by the '/' character</span></li> </ul> <li class=""li2""><span class=""s1"">Return </span><span class=""s3"">max_len</span></li> </ul> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(n)</span></li> <li class=""li2""><span class=""s1"">Space: O(n)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s6""> </span><span class=""s7"">Solution</span><span class=""s6"">(</span><span class=""s1"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s1""> </span><span class=""s7"">length_longest_path</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, file_system):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s1""> </span><span class=""s8""><b>not</b></span><span class=""s1""> </span><span class=""s8"">isinstance</span><span class=""s1"">(file_system, </span><span class=""s8"">str</span><span class=""s1"">):</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>raise</b></span><span class=""s6""> TypeError(</span><span class=""s1"">'file_system must be a string'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_len = </span><span class=""s10"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; path_len = {</span><span class=""s10"">0</span><span class=""s1"">: </span><span class=""s10"">0</span><span class=""s1"">}</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>for</b></span><span class=""s1""> line </span><span class=""s8""><b>in</b></span><span class=""s1""> file_system.splitlines():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; name = line.lstrip(</span><span class=""s11"">'\t'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; depth = </span><span class=""s8"">len</span><span class=""s1"">(line) </span><span class=""s12""><b>-</b></span><span class=""s1""> </span><span class=""s8"">len</span><span class=""s1"">(name)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>if</b></span><span class=""s1""> </span><span class=""s11"">'.'</span><span class=""s1""> </span><span class=""s8""><b>in</b></span><span class=""s1""> name:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_len = </span><span class=""s8"">max</span><span class=""s1"">(max_len, path_len[depth] </span><span class=""s12""><b>+</b></span><span class=""s1""> </span><span class=""s8"">len</span><span class=""s1"">(name))</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; path_len[depth </span><span class=""s12""><b>+</b></span><span class=""s1""> </span><span class=""s10"">1</span><span class=""s1"">] = path_len[depth] </span><span class=""s12""><b>+</b></span><span class=""s1""> </span><span class=""s8"">len</span><span class=""s1"">(name) </span><span class=""s12""><b>+</b></span><span class=""s1""> </span><span class=""s10"">1</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8""><b>return</b></span><span class=""s1""> max_len</span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p6""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s12""><b>%%</b></span><span class=""s1"">writefile test_length_longest_path.py</span></p> <p class=""p7""><span class=""s8""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s8""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s8""><b>class</b></span><span class=""s6""> </span><span class=""s1"">TestSolution</span><span class=""s6"">(</span><span class=""s8"">object</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p10""><span class=""s6"">&nbsp; &nbsp; </span><span class=""s8""><b>def</b></span><span class=""s6""> </span><span class=""s1"">test_length_longest_path</span><span class=""s6"">(</span><span class=""s9"">self</span><span class=""s6"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.length_longest_path, </span><span class=""s8""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; file_system = </span><span class=""s1"">'dir\n\tsubdir1\n\t\tfile1.ext\n\t\tsubsubdir1\n\tsubdir2\n\t\tsubsubdir2\n\t\t\tfile2.ext'</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s10"">32</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.length_longest_path(file_system), expected)</span></p> <p class=""p9""><span class=""s6"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s8"">print</span><span class=""s6"">(</span><span class=""s1"">'Success: test_length_longest_path'</span><span class=""s6"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s8""><b>def</b></span><span class=""s1""> </span><span class=""s7"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestSolution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_length_longest_path()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s8""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s12""><b>==</b></span><span class=""s1""> </span><span class=""s11"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} </style> <p class=""p1""><span class=""s1""><b>Problem: Find how many times a sentence can fit on a screen.</b></span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">See the <a href=""https://leetcode.com/problems/sentence-screen-fitting/""><span class=""s3"">LeetCode</span></a> problem page.</span></p><p class=""p2""><span class=""s1""><br /></span></p> <p class=""p3""><span class=""s1"">Given a rows x cols screen and a sentence represented by a list of non-empty words, find how many times the given sentence can be fitted on the screen.</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">Note:</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">A word cannot be split into two lines.</span></p> <p class=""p3""><span class=""s1"">The order of words in the sentence must remain unchanged.</span></p> <p class=""p3""><span class=""s1"">Two consecutive words in a line must be separated by a single space.</span></p> <p class=""p3""><span class=""s1"">Total words in the sentence won't exceed 100.</span></p> <p class=""p3""><span class=""s1"">Length of each word is greater than 0 and won't exceed 10.</span></p> <p class=""p3""><span class=""s1"">1 ≤ rows, cols ≤ 20,000.</span></p> <p class=""p3""><span class=""s1"">Example 1:</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">Input:</span></p> <p class=""p3""><span class=""s1"">rows = 2, cols = 8, sentence = [""hello"", ""world""]</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">Output:&nbsp;</span></p> <p class=""p3""><span class=""s1"">1</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">Explanation:</span></p> <p class=""p3""><span class=""s1"">hello---</span></p> <p class=""p3""><span class=""s1"">world---</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">The character '-' signifies an empty space on the screen.</span></p> <p class=""p3""><span class=""s1"">Example 2:</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">Input:</span></p> <p class=""p3""><span class=""s1"">rows = 3, cols = 6, sentence = [""a"", ""bcd"", ""e""]</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">Output:&nbsp;</span></p> <p class=""p3""><span class=""s1"">2</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">Explanation:</span></p> <p class=""p3""><span class=""s1"">a-bcd-&nbsp;</span></p> <p class=""p3""><span class=""s1"">e-a---</span></p> <p class=""p3""><span class=""s1"">bcd-e-</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">The character '-' signifies an empty space on the screen.</span></p> <p class=""p3""><span class=""s1"">Example 3:</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">Input:</span></p> <p class=""p3""><span class=""s1"">rows = 4, cols = 5, sentence = [""I"", ""had"", ""apple"", ""pie""]</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">Output:&nbsp;</span></p> <p class=""p3""><span class=""s1"">1</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">Explanation:</span></p> <p class=""p3""><span class=""s1"">I-had</span></p> <p class=""p3""><span class=""s1"">apple</span></p> <p class=""p3""><span class=""s1"">pie-I</span></p> <p class=""p3""><span class=""s1"">had--</span></p> <p class=""p4""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1"">The character '-' signifies an empty space on the screen.</span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #d9d9d9; min-height: 17.0px} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #408080; -webkit-text-stroke: #408080; background-color: #f7f7f7} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s5 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s6 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s7 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s8 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s9 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s10 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} span.s11 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style> <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume sentence is ASCII?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Is the output an integer?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">rows &lt; 0 or cols &lt; 0 -&gt; ValueError</span></li> <li class=""li2""><span class=""s1"">cols = 0 -&gt; 0</span></li> <li class=""li2""><span class=""s1"">sentence = '' -&gt; 0</span></li> <li class=""li2""><span class=""s1"">rows = 2, cols = 8, sentence = [""hello"", ""world""] -&gt; 1</span></li> <li class=""li2""><span class=""s1"">rows = 3, cols = 6, sentence = [""a"", ""bcd"", ""e""] -&gt; 2</span></li> <li class=""li2""><span class=""s1"">rows = 4, cols = 5, sentence = [""I"", ""had"", ""apple"", ""pie""] -&gt; 1</span></li> </ul> <p class=""p3""><span class=""s1"" style='font-family: ""Helvetica Neue""; font-size: 22px; -webkit-text-stroke: rgb(0, 0, 0); color: rgb(0, 0, 0);'><b><br /></b></span></p><p class=""p3""><span class=""s1"" style='font-family: ""Helvetica Neue""; font-size: 22px; -webkit-text-stroke: rgb(0, 0, 0); color: rgb(0, 0, 0);'><b>Algorithm</b></span><span class=""s1""></span></p> <p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">It can be relatively straightforward to come up with the brute force solution, check out the method </span><span class=""s3"">count_sentence_fit_brute_force</span><span class=""s1""> below.&nbsp;</span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">The optimized solutions is discussed in more depth <a href=""https://discuss.leetcode.com/topic/62455/21ms-18-lines-java-solution/25""><span class=""s4"">here</span></a>.</span></p><p class=""p2""><span class=""s1""><br /></span></p><p class=""p2""><span class=""s1"">rows = 4</span></p><p class=""p2""><span class=""s1"">cols = 6</span></p><p class=""p2""><span class=""s1"">sentence = ['abc', 'de', 'f']</span></p> <p class=""p4""><span class=""s1""><br /></span></p><p class=""p4""><span class=""s1"">""abc de f abc de f abc de f ..."" // start=0</span></p> <p class=""p4""><span class=""s1"">&nbsp;012345&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // start=start+cols+adjustment=0+6+1=7 (1 space removed in screen string)</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; 012345 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // start=7+6+0=13</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 012345 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // start=13+6-1=18 (1 space added)</span></p> <p class=""p4""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 012345&nbsp; &nbsp; &nbsp; &nbsp; // start=18+6+1=25 (1 space added)</span></p> <p class=""p4""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 012345</span></p> <p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(1)</span></li> <li class=""li2""><span class=""s1"">Space: O(1)</span></li> </ul> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p9""><span class=""s1""><b>class</b></span><span class=""s5""> </span><span class=""s6"">Solution</span><span class=""s5"">(</span><span class=""s1"">object</span><span class=""s5"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">count_sentence_fit_brute_force</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, sentence, rows, cols):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>try</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">iter</span><span class=""s1"">(sentence)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>except</b></span><span class=""s1""> TypeError:</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s5""> TypeError(</span><span class=""s1"">'sentence must be of type str'</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>if</b></span><span class=""s5""> </span><span class=""s1""><b>not</b></span><span class=""s5""> </span><span class=""s1"">isinstance</span><span class=""s5"">(rows, </span><span class=""s1"">int</span><span class=""s5"">) </span><span class=""s1""><b>or</b></span><span class=""s5""> </span><span class=""s1""><b>not</b></span><span class=""s5""> </span><span class=""s1"">isinstance</span><span class=""s5"">(cols, </span><span class=""s1"">int</span><span class=""s5"">):</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s5""> TypeError(</span><span class=""s1"">'rows and cols must be of type int'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> rows </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1""> </span><span class=""s7""><b>or</b></span><span class=""s1""> cols </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1"">:</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s5""> ValueError(</span><span class=""s1"">'rows and cols cannot be negative'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> cols </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1""> </span><span class=""s7""><b>or</b></span><span class=""s1""> </span><span class=""s7""><b>not</b></span><span class=""s1""> sentence:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s10"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_row = </span><span class=""s10"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_col = </span><span class=""s10"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; count = </span><span class=""s10"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>while</b></span><span class=""s1""> curr_row </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> cols:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> word </span><span class=""s7""><b>in</b></span><span class=""s1""> sentence:</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># If the current word doesn't fit on the current line,</i></span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># move to the next line</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> </span><span class=""s7"">len</span><span class=""s1"">(word) </span><span class=""s9""><b>&gt;</b></span><span class=""s1""> cols </span><span class=""s9""><b>-</b></span><span class=""s1""> curr_col:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_col = </span><span class=""s10"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_row += </span><span class=""s10"">1</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># If we are beyond the number of rows, return</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> curr_row </span><span class=""s9""><b>&gt;=</b></span><span class=""s1""> rows:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> count</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># If the current word fits on the current line,</i></span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># 'insert' it here</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> </span><span class=""s7"">len</span><span class=""s1"">(word) </span><span class=""s9""><b>&lt;=</b></span><span class=""s1""> cols </span><span class=""s9""><b>-</b></span><span class=""s1""> curr_col:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_col += </span><span class=""s7"">len</span><span class=""s1"">(word) </span><span class=""s9""><b>+</b></span><span class=""s1""> </span><span class=""s10"">1</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># If it still doesn't fit, then the word is too long</i></span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># and we should just return the current count</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> count</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count += </span><span class=""s10"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> count</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">count_sentence_fit</span><span class=""s1"">(</span><span class=""s8"">self</span><span class=""s1"">, sentence, rows, cols):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>try</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">iter</span><span class=""s1"">(sentence)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>except</b></span><span class=""s1""> TypeError:</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s5""> TypeError(</span><span class=""s1"">'sentence must be of type str'</span><span class=""s5"">)</span></p> <p class=""p9""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><b>if</b></span><span class=""s5""> </span><span class=""s1""><b>not</b></span><span class=""s5""> </span><span class=""s1"">isinstance</span><span class=""s5"">(rows, </span><span class=""s1"">int</span><span class=""s5"">) </span><span class=""s1""><b>or</b></span><span class=""s5""> </span><span class=""s1""><b>not</b></span><span class=""s5""> </span><span class=""s1"">isinstance</span><span class=""s5"">(cols, </span><span class=""s1"">int</span><span class=""s5"">):</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s5""> TypeError(</span><span class=""s1"">'rows and cols must be of type int'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> rows </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1""> </span><span class=""s7""><b>or</b></span><span class=""s1""> cols </span><span class=""s9""><b>&lt;</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1"">:</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>raise</b></span><span class=""s5""> ValueError(</span><span class=""s1"">'rows and cols cannot be negative'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> cols </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1""> </span><span class=""s7""><b>or</b></span><span class=""s1""> </span><span class=""s7""><b>not</b></span><span class=""s1""> sentence:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> </span><span class=""s10"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; string = </span><span class=""s11"">' '</span><span class=""s1"">.join(sentence) </span><span class=""s9""><b>+</b></span><span class=""s1""> </span><span class=""s11"">' '</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; start = </span><span class=""s10"">0</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; str_len = </span><span class=""s7"">len</span><span class=""s1"">(string)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>for</b></span><span class=""s1""> row </span><span class=""s7""><b>in</b></span><span class=""s1""> </span><span class=""s7"">range</span><span class=""s1"">(rows):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start += cols</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># We don't need extra space for the current row</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>if</b></span><span class=""s1""> string[start </span><span class=""s9""><b>%</b></span><span class=""s1""> str_len] </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s11"">' '</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start += </span><span class=""s10"">1</span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># The current row can't fit, so we'll need to&nbsp;</i></span></p> <p class=""p11""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s1""><i># remove characters from the next word</i></span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>while</b></span><span class=""s1""> (start </span><span class=""s9""><b>&gt;</b></span><span class=""s1""> </span><span class=""s10"">0</span><span class=""s1""> </span><span class=""s7""><b>and</b></span><span class=""s1""> string[(start </span><span class=""s9""><b>-</b></span><span class=""s1""> </span><span class=""s10"">1</span><span class=""s1"">) </span><span class=""s9""><b>%</b></span><span class=""s1""> str_len] </span><span class=""s9""><b>!=</b></span><span class=""s1""> </span><span class=""s11"">' '</span><span class=""s1"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start -= </span><span class=""s10"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>return</b></span><span class=""s1""> start </span><span class=""s9""><b>//</b></span><span class=""s1""> str_len</span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p3""><span class=""s1""></span><br /></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p7""><span class=""s1""></span><br /></p> <p class=""p6""><span class=""s1"">&nbsp;</span></p> <p class=""p6""><span class=""s9""><b>%%</b></span><span class=""s1"">writefile test_count_sentence_fit.py</span></p> <p class=""p6""><span class=""s7""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s7""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s7""><b>class</b></span><span class=""s5""> </span><span class=""s1"">TestSolution</span><span class=""s5"">(</span><span class=""s7"">object</span><span class=""s5"">):</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p12""><span class=""s5"">&nbsp; &nbsp; </span><span class=""s7""><b>def</b></span><span class=""s5""> </span><span class=""s1"">test_count_sentence_fit</span><span class=""s5"">(</span><span class=""s8"">self</span><span class=""s5"">):</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.count_sentence_fit,&nbsp;</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7""><b>None</b></span><span class=""s1"">, </span><span class=""s7""><b>None</b></span><span class=""s1"">, </span><span class=""s7""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(ValueError, solution.count_sentence_fit,&nbsp;</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s11"">'abc'</span><span class=""s1"">, rows=</span><span class=""s9""><b>-</b></span><span class=""s10"">1</span><span class=""s1"">, cols=</span><span class=""s9""><b>-</b></span><span class=""s10"">1</span><span class=""s1"">)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sentence = [</span><span class=""s11"">""hello""</span><span class=""s1"">, </span><span class=""s11"">""world""</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s10"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.count_sentence_fit(sentence, rows=</span><span class=""s10"">2</span><span class=""s1"">, cols=</span><span class=""s10"">8</span><span class=""s1"">),</span></p> <p class=""p6""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; expected)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sentence = [</span><span class=""s11"">""a""</span><span class=""s1"">, </span><span class=""s11"">""bcd""</span><span class=""s1"">, </span><span class=""s11"">""e""</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s10"">2</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.count_sentence_fit(sentence, rows=</span><span class=""s10"">3</span><span class=""s1"">, cols=</span><span class=""s10"">6</span><span class=""s1"">),</span></p> <p class=""p6""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; expected)</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; sentence = [</span><span class=""s11"">""I""</span><span class=""s1"">, </span><span class=""s11"">""had""</span><span class=""s1"">, </span><span class=""s11"">""apple""</span><span class=""s1"">, </span><span class=""s11"">""pie""</span><span class=""s1"">]</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; expected = </span><span class=""s10"">1</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.count_sentence_fit(sentence, rows=</span><span class=""s10"">4</span><span class=""s1"">, cols=</span><span class=""s10"">5</span><span class=""s1"">),</span></p> <p class=""p6""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; expected)</span></p> <p class=""p10""><span class=""s5"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s7"">print</span><span class=""s5"">(</span><span class=""s1"">'Success: test_count_sentence_fit'</span><span class=""s5"">)</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s7""><b>def</b></span><span class=""s1""> </span><span class=""s6"">main</span><span class=""s1"">():</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test = TestSolution()</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; test.test_count_sentence_fit()</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s1"">​</span></p> <p class=""p6""><span class=""s7""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s9""><b>==</b></span><span class=""s1""> </span><span class=""s11"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p6""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
" <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px 'Helvetica Neue'; text-decoration: underline ; font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} </style> <p class=""p1""><span class=""s1""><b>Problem: Format license keys.</b></span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">See the <a href=""https://leetcode.com/problems/license-key-formatting/""><span class=""s3"">LeetCode</span></a> problem page.</span></p> <p class=""p3""><span class=""s1""><br></span></p><p class=""p3""><span class=""s1"">Now you are given a string S, which represents a software license key which we would like to format. The string S is composed of alphanumerical characters and dashes. The dashes split the alphanumerical characters within the string into groups. (i.e. if there are M dashes, the string is split into M+1 groups). The dashes in the given string are possibly misplaced.</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">We want each group of characters to be of length K (except for possibly the first group, which could be shorter, but still must contain at least one character). To satisfy this requirement, we will reinsert dashes. Additionally, all the lower case letters in the string must be converted to upper case.</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">So, you are given a non-empty string S, representing a license key to format, and an integer K. And you need to return the license key formatted according to the description above.</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">Example 1:</span></p> <p class=""p3""><span class=""s1"">Input: S = ""2-4A0r7-4k"", K = 4</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">Output: ""24A0-R74K""</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">Explanation: The string S has been split into two parts, each part has 4 characters.</span></p> <p class=""p3""><span class=""s1"">Example 2:</span></p> <p class=""p3""><span class=""s1"">Input: S = ""2-4A0r7-4k"", K = 3</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">Output: ""24-A0R-74K""</span></p> <p class=""p4""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1"">Explanation: The string S has been split into three parts, each part has 3 characters except the first part as it could be shorter as said above.</span></p> <p class=""p3""><span class=""s1""><br></span></p><p class=""p3""><span class=""s1"">Note:</span></p> <p class=""p3""><span class=""s1"">The length of string S will not exceed 12,000, and K is a positive integer.</span></p> <p class=""p3""><span class=""s1"">String S consists only of alphanumerical characters (a-z and/or A-Z and/or 0-9) and dashes(-).</span></p> <p class=""p3""><span class=""s1"">String S is non-empty.</span></p>"	"<div class=""cell text_cell rendered unselected"" tabindex=""2"" style=""box-sizing: border-box; border: thin solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; width: 1110px; padding: 5px; margin: 0px; outline: none; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""box-sizing: border-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0px;""><div class=""text_cell_render rendered_html"" tabindex=""-1"" style=""box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; overflow-x: auto;""><h2 id=""Constraints"" style=""box-sizing: border-box; font-family: inherit; line-height: 1; color: inherit; margin: 0.636em 0px 0px; font-size: 21.994001388549805px;"">Constraints<a class=""anchor-link"" href=""http://localhost:8888/notebooks/online_judges/license_key/format_license_key_solution.ipynb#Constraints"" style=""box-sizing: border-box; background-color: transparent; color: rgb(51, 122, 183); padding: 0px 20px; visibility: hidden;""></a></h2><ul style=""box-sizing: border-box; margin: 1em 2em 0em; list-style-position: initial; list-style-image: initial; padding-left: 0px;""><li style=""box-sizing: border-box;"">Is the output a string?<ul style=""box-sizing: border-box; margin: 0em 2em; list-style: square; padding-left: 0px;""><li style=""box-sizing: border-box;"">Yes</li></ul></li><li style=""box-sizing: border-box;"">Can we change the input string?<ul style=""box-sizing: border-box; margin: 0em 2em; list-style: square; padding-left: 0px;""><li style=""box-sizing: border-box;"">No, you can't modify the input string</li></ul></li><li style=""box-sizing: border-box;"">Can we assume the inputs are valid?<ul style=""box-sizing: border-box; margin: 0em 2em; list-style: square; padding-left: 0px;""><li style=""box-sizing: border-box;"">No</li></ul></li><li style=""box-sizing: border-box;"">Can we assume this fits memory?<ul style=""box-sizing: border-box; margin: 0em 2em; list-style: square; padding-left: 0px;""><li style=""box-sizing: border-box;"">Yes</li></ul></li></ul></div></div></div><div class=""cell text_cell unselected rendered"" tabindex=""2"" style=""box-sizing: border-box; border: thin solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; width: 1110px; padding: 5px; margin: 0px; outline: none; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""box-sizing: border-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0px;""><div class=""text_cell_render rendered_html"" tabindex=""-1"" style=""box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; overflow-x: auto;""><h2 id=""Test-Cases"" style=""box-sizing: border-box; font-family: inherit; line-height: 1; color: inherit; margin: 0.636em 0px 0px; font-size: 21.994001388549805px;"">Test Cases<a class=""anchor-link"" href=""http://localhost:8888/notebooks/online_judges/license_key/format_license_key_solution.ipynb#Test-Cases"" style=""box-sizing: border-box; background-color: transparent; color: rgb(51, 122, 183); padding: 0px 20px; visibility: hidden;""></a></h2><ul style=""box-sizing: border-box; margin: 1em 2em 0em; list-style-position: initial; list-style-image: initial; padding-left: 0px;""><li style=""box-sizing: border-box;"">None -&gt; TypeError</li><li style=""box-sizing: border-box;"">'---', k=3 -&gt; ''</li><li style=""box-sizing: border-box;"">'2-4A0r7-4k', k=3 -&gt; '24-A0R-74K'</li><li style=""box-sizing: border-box;"">'2-4A0r7-4k', k=4 -&gt; '24A0-R74K'</li></ul></div></div></div><div class=""cell text_cell unselected rendered"" tabindex=""2"" style=""box-sizing: border-box; border: thin solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; width: 1110px; padding: 5px; margin: 0px; outline: none; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""box-sizing: border-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0px;""><div class=""text_cell_render rendered_html"" tabindex=""-1"" style=""box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; overflow-x: auto;""><h2 id=""Algorithm"" style=""box-sizing: border-box; font-family: inherit; line-height: 1; color: inherit; margin: 0.636em 0px 0px; font-size: 21.994001388549805px;"">Algorithm<a class=""anchor-link"" href=""http://localhost:8888/notebooks/online_judges/license_key/format_license_key_solution.ipynb#Algorithm"" style=""box-sizing: border-box; background-color: transparent; color: rgb(51, 122, 183); padding: 0px 20px; visibility: hidden;""></a></h2><ul style=""box-sizing: border-box; margin: 1em 2em 0em; list-style-position: initial; list-style-image: initial; padding-left: 0px;""><li style=""box-sizing: border-box;"">Loop through each character in the license key backwards, keeping a count of the number of chars we've reached so far, while inserting each character into a result list (convert to upper case)<ul style=""box-sizing: border-box; margin: 0em 2em; list-style: square; padding-left: 0px;""><li style=""box-sizing: border-box;"">If we reach a '-', skip it</li><li style=""box-sizing: border-box;"">Whenever we reach a char count of k, append a '-' character to the result list, reset the char count</li></ul></li><li style=""box-sizing: border-box;"">Careful that we don't have a leading '-', which we might hit with test case: '2-4A0r7-4k', k=4 -&gt; '24A0-R74K'</li><li style=""box-sizing: border-box;"">Reverse the result list and return it</li></ul><p style=""box-sizing: border-box; margin: 1em 0px 0px;"">Complexity:</p><ul style=""box-sizing: border-box; margin: 1em 2em 0em; list-style-position: initial; list-style-image: initial; padding-left: 0px;""><li style=""box-sizing: border-box;"">Time: O(n)</li><li style=""box-sizing: border-box;"">Space: O(n)</li></ul></div></div></div><div class=""cell text_cell unselected rendered"" tabindex=""2"" style=""box-sizing: border-box; border: thin solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; width: 1110px; padding: 5px; margin: 0px; outline: none; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""box-sizing: border-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0px;""><div class=""text_cell_render rendered_html"" tabindex=""-1"" style=""box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; overflow-x: auto;""><h2 id=""Code"" style=""box-sizing: border-box; font-family: inherit; line-height: 1; color: inherit; margin: 0.636em 0px 0px; font-size: 21.994001388549805px;"">Code</h2></div></div></div><div class=""cell code_cell unselected rendered"" tabindex=""2"" style=""box-sizing: border-box; border: thin solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; width: 1110px; padding: 5px; margin: 0px; outline: none; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""input"" style=""box-sizing: border-box; page-break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;""><div class=""inner_cell"" style=""box-sizing: border-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0px;""><div class=""input_area"" style=""box-sizing: border-box; border: 1px solid rgb(207, 207, 207); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; background-color: rgb(247, 247, 247); line-height: 1.21429em; background-position: initial initial; background-repeat: initial initial;""><div class=""CodeMirror cm-s-ipython"" style=""box-sizing: border-box; font-family: monospace; height: auto; position: relative; overflow: hidden; background-image: none; line-height: 1.21429em;""><div style=""box-sizing: border-box; overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 39.59375px;""><textarea autocorrect=""off"" autocapitalize=""off"" spellcheck=""false"" tabindex=""0"" style=""box-sizing: border-box; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; line-height: inherit; margin: 0px; overflow: auto; position: absolute; padding: 0px; width: 1000px; height: 1em; outline: none;""></textarea></div><div class=""CodeMirror-scroll"" tabindex=""-1"" style=""box-sizing: content-box; margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; height: 385.1875px; outline: none; position: relative; overflow: scroll !important;""><div class=""CodeMirror-sizer"" style=""box-sizing: content-box; position: relative; border-right-width: 30px; border-right-style: solid; border-right-color: transparent; margin-left: 34px; min-width: 591.095703125px; margin-bottom: 0px; min-height: 385px; padding-right: 0px; padding-bottom: 0px;""><div style=""box-sizing: border-box; position: relative; top: 0px;""><div class=""CodeMirror-lines"" style=""box-sizing: border-box; padding: 0.4em; cursor: text; min-height: 1px;""><div style=""box-sizing: border-box; position: relative; outline: none;""><div class=""CodeMirror-measure"" style=""box-sizing: border-box; position: absolute; width: 962.390625px; height: 0px; overflow: hidden; visibility: hidden;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4;""><div style=""box-sizing: border-box;""></div></div><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4;""><div style=""box-sizing: border-box;""></div></div></div><div class=""CodeMirror-measure"" style=""box-sizing: border-box; position: absolute; width: 962.390625px; height: 0px; overflow: hidden; visibility: hidden;""></div><div style=""box-sizing: border-box; position: relative; z-index: 1;""></div><div class=""CodeMirror-cursors"" style=""box-sizing: border-box; visibility: hidden; position: relative; z-index: 3;""><div class=""CodeMirror-cursor"" style=""box-sizing: border-box; border-left-width: 1px; border-left-style: solid; border-left-color: black; position: absolute; border-right-style: none; width: 0px; left: 0px; top: 0px; height: 17px;""></div></div><div class=""CodeMirror-code"" style=""box-sizing: border-box; outline: none;""><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">1</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""cm-def"" style=""box-sizing: border-box; color: rgb(0, 0, 255);"">Solution</span>(<span class=""cm-builtin"" style=""box-sizing: border-box; color: rgb(0, 128, 0);"">object</span>):</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">2</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span cm-text="""" style=""box-sizing: border-box;"">​</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">3</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">    <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""cm-def"" style=""box-sizing: border-box; color: rgb(0, 0, 255);"">format_license_key</span>(<span class=""cm-variable-2"" style=""box-sizing: border-box; color: rgb(26, 26, 26);"">self</span>, <span class=""cm-variable"" style=""box-sizing: border-box;"">license_key</span>, <span class=""cm-variable"" style=""box-sizing: border-box;"">k</span>):</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">4</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">not</span> <span class=""cm-builtin"" style=""box-sizing: border-box; color: rgb(0, 128, 0);"">isinstance</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">license_key</span>, <span class=""cm-builtin"" style=""box-sizing: border-box; color: rgb(0, 128, 0);"">str</span>):</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">5</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">            <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">raise</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">TypeError</span>(<span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'license_key must be a str'</span>)</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">6</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">not</span> <span class=""cm-builtin"" style=""box-sizing: border-box; color: rgb(0, 128, 0);"">isinstance</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">k</span>, <span class=""cm-builtin"" style=""box-sizing: border-box; color: rgb(0, 128, 0);"">int</span>):</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">7</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">            <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">raise</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">TypeError</span>(<span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'k must be an int'</span>)</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">8</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">not</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">license_key</span>:</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">9</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">            <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">raise</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">ValueError</span>(<span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'license_key must not be empty'</span>)</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">10</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">formatted_license_key</span> = []</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">11</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">num_chars</span> = <span class=""cm-number"" style=""box-sizing: border-box; color: rgb(0, 136, 0);"">0</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">12</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">for</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">char</span> <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">in</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">license_key</span>[::<span class=""cm-operator"" style=""box-sizing: border-box; color: rgb(170, 34, 255); font-weight: bold;"">-</span><span class=""cm-number"" style=""box-sizing: border-box; color: rgb(0, 136, 0);"">1</span>]:</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">13</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">            <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">char</span> <span class=""cm-operator"" style=""box-sizing: border-box; color: rgb(170, 34, 255); font-weight: bold;"">==</span> <span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'-'</span>:</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">14</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">                <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">continue</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">15</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">            <span class=""cm-variable"" style=""box-sizing: border-box;"">num_chars</span> += <span class=""cm-number"" style=""box-sizing: border-box; color: rgb(0, 136, 0);"">1</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">16</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">            <span class=""cm-variable"" style=""box-sizing: border-box;"">formatted_license_key</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">append</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">char</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">upper</span>())</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">17</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">            <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">num_chars</span> <span class=""cm-operator"" style=""box-sizing: border-box; color: rgb(170, 34, 255); font-weight: bold;"">&gt;=</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">k</span>:</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">18</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">                <span class=""cm-variable"" style=""box-sizing: border-box;"">formatted_license_key</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">append</span>(<span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'-'</span>)</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">19</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">                <span class=""cm-variable"" style=""box-sizing: border-box;"">num_chars</span> = <span class=""cm-number"" style=""box-sizing: border-box; color: rgb(0, 136, 0);"">0</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">20</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">formatted_license_key</span> <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">and</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">formatted_license_key</span>[<span class=""cm-operator"" style=""box-sizing: border-box; color: rgb(170, 34, 255); font-weight: bold;"">-</span><span class=""cm-number"" style=""box-sizing: border-box; color: rgb(0, 136, 0);"">1</span>] <span class=""cm-operator"" style=""box-sizing: border-box; color: rgb(170, 34, 255); font-weight: bold;"">==</span> <span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'-'</span>:</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">21</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">            <span class=""cm-variable"" style=""box-sizing: border-box;"">formatted_license_key</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">pop</span>(<span class=""cm-operator"" style=""box-sizing: border-box; color: rgb(170, 34, 255); font-weight: bold;"">-</span><span class=""cm-number"" style=""box-sizing: border-box; color: rgb(0, 136, 0);"">1</span>)</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">22</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">''</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">join</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">formatted_license_key</span>[::<span class=""cm-operator"" style=""box-sizing: border-box; color: rgb(170, 34, 255); font-weight: bold;"">-</span><span class=""cm-number"" style=""box-sizing: border-box; color: rgb(0, 136, 0);"">1</span>])</span></pre></div></div></div></div></div></div><div style=""box-sizing: border-box; position: absolute; height: 30px; width: 1px; top: 385px;""></div><div class=""CodeMirror-gutters"" style=""box-sizing: content-box; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); white-space: nowrap; position: absolute; left: 0px; top: 0px; z-index: 3; border-bottom-left-radius: 2px; border-top-left-radius: 2px; height: 415px;""><div class=""CodeMirror-gutter CodeMirror-linenumbers"" style=""box-sizing: content-box; white-space: normal; height: 415px; display: inline-block; margin-bottom: -30px; width: 33px;""></div></div></div></div></div></div></div><div class=""output_wrapper"" style=""box-sizing: border-box; position: relative; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; z-index: 1;""><div class=""out_prompt_overlay prompt"" title=""click to expand output; double click to hide output"" style=""box-sizing: border-box; min-width: 14ex; padding: 0px 0.4em; margin: 0px; font-family: monospace; text-align: right; line-height: 1.21429em; height: 0px; position: absolute; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px;""></div><div class=""output"" style=""box-sizing: border-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch;""></div></div></div><div class=""cell text_cell unselected rendered"" tabindex=""2"" style=""box-sizing: border-box; border: thin solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; width: 1110px; padding: 5px; margin: 0px; outline: none; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""box-sizing: border-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0px;""><div class=""text_cell_render rendered_html"" tabindex=""-1"" style=""box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; overflow-x: auto;""><h2 id=""Unit-Test"" style=""box-sizing: border-box; font-family: inherit; line-height: 1; color: inherit; margin: 0.636em 0px 0px; font-size: 21.994001388549805px;"">Unit Test</h2></div></div></div><div class=""cell code_cell unselected rendered"" tabindex=""2"" style=""box-sizing: border-box; border: thin solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; width: 1110px; padding: 5px; margin: 0px; outline: none; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""input"" style=""box-sizing: border-box; page-break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;""><div class=""inner_cell"" style=""box-sizing: border-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0px;""><div class=""input_area"" style=""box-sizing: border-box; border: 1px solid rgb(207, 207, 207); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; background-color: rgb(247, 247, 247); line-height: 1.21429em; background-position: initial initial; background-repeat: initial initial;""><div class=""CodeMirror cm-s-ipython"" style=""box-sizing: border-box; font-family: monospace; height: auto; position: relative; overflow: hidden; background-image: none; line-height: 1.21429em;""><div style=""box-sizing: border-box; overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 39.59375px;""><textarea autocorrect=""off"" autocapitalize=""off"" spellcheck=""false"" tabindex=""0"" style=""box-sizing: border-box; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; line-height: inherit; margin: 0px; overflow: auto; position: absolute; padding: 0px; width: 1000px; height: 1em; outline: none;""></textarea></div><div class=""CodeMirror-scroll"" tabindex=""-1"" style=""box-sizing: content-box; margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; height: 521.1875px; outline: none; position: relative; overflow: scroll !important;""><div class=""CodeMirror-sizer"" style=""box-sizing: content-box; position: relative; border-right-width: 30px; border-right-style: solid; border-right-color: transparent; margin-left: 34px; min-width: 633.1025390625px; margin-bottom: 0px; min-height: 521px; padding-right: 0px; padding-bottom: 0px;""><div style=""box-sizing: border-box; position: relative; top: 0px;""><div class=""CodeMirror-lines"" style=""box-sizing: border-box; padding: 0.4em; cursor: text; min-height: 1px;""><div style=""box-sizing: border-box; position: relative; outline: none;""><div class=""CodeMirror-measure"" style=""box-sizing: border-box; position: absolute; width: 962.390625px; height: 0px; overflow: hidden; visibility: hidden;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4;""><div style=""box-sizing: border-box;""></div></div><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4;""><div style=""box-sizing: border-box;""></div></div></div><div class=""CodeMirror-measure"" style=""box-sizing: border-box; position: absolute; width: 962.390625px; height: 0px; overflow: hidden; visibility: hidden;""></div><div style=""box-sizing: border-box; position: relative; z-index: 1;""></div><div class=""CodeMirror-cursors"" style=""box-sizing: border-box; visibility: hidden; position: relative; z-index: 3;""><div class=""CodeMirror-cursor"" style=""box-sizing: border-box; border-left-width: 1px; border-left-style: solid; border-left-color: black; position: absolute; border-right-style: none; width: 0px; left: 0px; top: 0px; height: 17px;""></div></div><div class=""CodeMirror-code"" style=""box-sizing: border-box; outline: none;""><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">1</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span class=""cm-operator"" style=""box-sizing: border-box; color: rgb(170, 34, 255); font-weight: bold;"">%%</span><span class=""cm-variable"" style=""box-sizing: border-box;"">writefile</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">test_format_license_key</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">py</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">2</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">from</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">nose</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">tools</span> <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">import</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">assert_equal</span>, <span class=""cm-variable"" style=""box-sizing: border-box;"">assert_raises</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">3</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span cm-text="""" style=""box-sizing: border-box;"">​</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">4</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span cm-text="""" style=""box-sizing: border-box;"">​</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">5</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""cm-def"" style=""box-sizing: border-box; color: rgb(0, 0, 255);"">TestSolution</span>(<span class=""cm-builtin"" style=""box-sizing: border-box; color: rgb(0, 128, 0);"">object</span>):</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">6</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span cm-text="""" style=""box-sizing: border-box;"">​</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">7</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">    <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""cm-def"" style=""box-sizing: border-box; color: rgb(0, 0, 255);"">test_format_license_key</span>(<span class=""cm-variable-2"" style=""box-sizing: border-box; color: rgb(26, 26, 26);"">self</span>):</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">8</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">solution</span> = <span class=""cm-variable"" style=""box-sizing: border-box;"">Solution</span>()</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">9</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">assert_raises</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">TypeError</span>, <span class=""cm-variable"" style=""box-sizing: border-box;"">solution</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">format_license_key</span>, <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">None</span>, <span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">None</span>)</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">10</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">license_key</span> = <span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'---'</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">11</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">k</span> = <span class=""cm-number"" style=""box-sizing: border-box; color: rgb(0, 136, 0);"">3</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">12</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">expected</span> = <span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">''</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">13</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">assert_equal</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">solution</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">format_license_key</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">license_key</span>, <span class=""cm-variable"" style=""box-sizing: border-box;"">k</span>), <span class=""cm-variable"" style=""box-sizing: border-box;"">expected</span>)</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">14</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">license_key</span> = <span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'2-4A0r7-4k'</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">15</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">k</span> = <span class=""cm-number"" style=""box-sizing: border-box; color: rgb(0, 136, 0);"">3</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">16</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">expected</span> = <span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'24-A0R-74K'</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">17</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">assert_equal</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">solution</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">format_license_key</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">license_key</span>, <span class=""cm-variable"" style=""box-sizing: border-box;"">k</span>), <span class=""cm-variable"" style=""box-sizing: border-box;"">expected</span>)</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">18</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">license_key</span> = <span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'2-4A0r7-4k'</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">19</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">k</span> = <span class=""cm-number"" style=""box-sizing: border-box; color: rgb(0, 136, 0);"">4</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">20</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">expected</span> = <span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'24A0-R74K'</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">21</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-variable"" style=""box-sizing: border-box;"">assert_equal</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">solution</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">format_license_key</span>(<span class=""cm-variable"" style=""box-sizing: border-box;"">license_key</span>, <span class=""cm-variable"" style=""box-sizing: border-box;"">k</span>), <span class=""cm-variable"" style=""box-sizing: border-box;"">expected</span>)</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">22</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">        <span class=""cm-builtin"" style=""box-sizing: border-box; color: rgb(0, 128, 0);"">print</span>(<span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'Success: test_format_license_key'</span>)</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">23</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span cm-text="""" style=""box-sizing: border-box;"">​</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">24</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""cm-def"" style=""box-sizing: border-box; color: rgb(0, 0, 255);"">main</span>():</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">25</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">    <span class=""cm-variable"" style=""box-sizing: border-box;"">test</span> = <span class=""cm-variable"" style=""box-sizing: border-box;"">TestSolution</span>()</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">26</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">    <span class=""cm-variable"" style=""box-sizing: border-box;"">test</span>.<span class=""cm-variable"" style=""box-sizing: border-box;"">test_format_license_key</span>()</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">27</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span cm-text="""" style=""box-sizing: border-box;"">​</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">28</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span cm-text="""" style=""box-sizing: border-box;"">​</span></span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">29</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;""><span class=""cm-keyword"" style=""box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""cm-variable"" style=""box-sizing: border-box;"">__name__</span> <span class=""cm-operator"" style=""box-sizing: border-box; color: rgb(170, 34, 255); font-weight: bold;"">==</span> <span class=""cm-string"" style=""box-sizing: border-box; color: rgb(186, 33, 33);"">'__main__'</span>:</span></pre></div><div style=""box-sizing: border-box; position: relative;""><div class=""CodeMirror-gutter-wrapper"" style=""box-sizing: border-box; position: absolute; z-index: 4; background-image: none !important; border: none !important; -webkit-user-select: none; left: -34px; background-position: initial initial !important; background-repeat: initial initial !important;""><div class=""CodeMirror-linenumber CodeMirror-gutter-elt"" style=""box-sizing: content-box; padding: 0px 8px 0px 4px; min-width: 20px; text-align: right; color: rgb(153, 153, 153); white-space: nowrap; position: absolute; cursor: default; z-index: 4; left: 0px; width: 21px;"">30</div></div><pre class="" CodeMirror-line "" style=""box-sizing: border-box; overflow: visible; font-family: inherit; font-size: inherit; padding: 0px; margin-top: 0px; margin-bottom: 0px; line-height: inherit; word-break: break-all; word-wrap: normal; color: inherit; background-color: transparent; border: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; z-index: 2; position: relative;""><span style=""box-sizing: border-box; padding-right: 0.1px;"">    <span class=""cm-variable"" style=""box-sizing: border-box;"">main</span>()</span></pre></div></div></div></div></div></div></div></div></div></div></div></div>"
"     <style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} </style>   <p class=""p1""><span class=""s1""><b>Problem: Given an array of (unix_timestamp, num_people, EventType.ENTER or EventType.EXIT), find the busiest period.</b></span></p>"	"<style type=""text/css""> p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff; min-height: 17.0px} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 17.0px} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #303f9f; -webkit-text-stroke: #303f9f; background-color: #ffffff} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #f7f7f7} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #008000; -webkit-text-stroke: #008000; background-color: #f7f7f7} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #0000ff; -webkit-text-stroke: #0000ff; background-color: #f7f7f7} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #ba2121; -webkit-text-stroke: #ba2121; background-color: #f7f7f7} li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; -webkit-text-stroke: #000000; background-color: #ffffff} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; -webkit-text-stroke: #000000; background-color: #ffffff} span.s1 {font-kerning: none} span.s2 {font-kerning: none; color: #337ab7; -webkit-text-stroke: 0px #337ab7} span.s3 {font: 14.0px Courier; font-kerning: none} span.s4 {font: 14.0px 'Helvetica Neue'} span.s5 {font: 14.0px 'Helvetica Neue'; font-kerning: none} span.s6 {font-kerning: none; color: #008000; -webkit-text-stroke: 0px #008000} span.s7 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000} span.s8 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff} span.s9 {font-kerning: none; color: #1a1a1a; -webkit-text-stroke: 0px #1a1a1a} span.s10 {font-kerning: none; color: #aa22ff; -webkit-text-stroke: 0px #aa22ff} span.s11 {font-kerning: none; color: #ba2121; -webkit-text-stroke: 0px #ba2121} span.s12 {font-kerning: none; color: #008800; -webkit-text-stroke: 0px #008800} ul.ul1 {list-style-type: disc} ul.ul2 {list-style-type: square} </style>   <p class=""p1""><span class=""s1""><b>Constraints</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Can we assume the input array is valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Check for None</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the elements of the input array are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Is the input sorted by time?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can you have enter and exit elements for the same timestamp?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes you can, order of enter and exit is not guaranteed</span></li> </ul> <li class=""li2""><span class=""s1"">Could we have multiple enter events (or multiple exit events) for the same timestamp?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">What is the format of the output?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">An array of timestamps [t1, t2]</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the starting number of people is zero?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume the inputs are valid?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">No</span></li> </ul> <li class=""li2""><span class=""s1"">Can we assume this fits memory?</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">Yes</span></li> </ul> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Test Cases</b></span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">None -&gt; TypeError</span></li> <li class=""li2""><span class=""s1"">[] -&gt; None</span></li> <li class=""li2""><span class=""s1"">General case</span></li> </ul> <p class=""p4""><span class=""s1"">timestamp&nbsp; num_people&nbsp; event_type</span></p> <p class=""p4""><span class=""s1"">3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.EXIT</span></p> <p class=""p4""><span class=""s1"">1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.ENTER</span></p> <p class=""p4""><span class=""s1"">3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.ENTER</span></p> <p class=""p4""><span class=""s1"">7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.ENTER</span></p> <p class=""p4""><span class=""s1"">9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.EXIT</span></p> <p class=""p4""><span class=""s1"">8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.EXIT</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p4""><span class=""s1"">result = Period(7, 8)</span></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Algorithm</b></span></p><p class=""p1""><span class=""s1""><b><br></b></span></p> <p class=""p2""><span class=""s1"">Since the input is not sorted, we'll need to sort it first by timestamp, ascending.</span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">For each interval in the data set:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">If this is an ""enter"" event, increment </span><span class=""s3"">curr_people</span><span class=""s1"">, else, decrement</span></li> <li class=""li2""><span class=""s1"">Since we can have an ""enter"" and ""exit"" event for the same timestamp, we'll need to look ahead one</span></li> <ul class=""ul2""> <li class=""li2""><span class=""s1"">If the next element has the same timestamp, hold off (continue) on updating </span><span class=""s3"">max_people</span><span class=""s1""> and </span><span class=""s3"">max_period</span></li> <li class=""li2""><span class=""s1"">Watch out for indexing out-of-bounds at the end of the array</span></li> </ul> <li class=""li4""><span class=""s4""></span><span class=""s5"">Update </span><span class=""s1"">max_people</span><span class=""s5""> and </span><span class=""s1"">max_period</span></li> </ul> <p class=""p2""><span class=""s1"">Sorted:</span></p><p class=""p2""><span class=""s1""><br></span></p> <p class=""p4""><span class=""s1"">timestamp&nbsp; num_people&nbsp; event_type &nbsp; &nbsp; &nbsp; curr_people&nbsp; max_people &nbsp; &nbsp; &nbsp; max_period</span></p> <p class=""p4""><span class=""s1"">1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.ENTER&nbsp; 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1, 3]</span></p> <p class=""p4""><span class=""s1"">3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.ENTER&nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 (not updated)&nbsp; [1, 3]</span></p> <p class=""p4""><span class=""s1"">3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.EXIT &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [3, 7]</span></p> <p class=""p4""><span class=""s1"">7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.ENTER&nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [7, 8]</span></p> <p class=""p4""><span class=""s1"">8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.EXIT &nbsp; 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [7, 8]</span></p> <p class=""p4""><span class=""s1"">9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EventType.EXIT &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [7, 8]</span></p> <p class=""p2""><span class=""s1""><br></span></p><p class=""p2""><span class=""s1"">Complexity:</span></p> <ul class=""ul1""> <li class=""li2""><span class=""s1"">Time: O(nlog(n)) for the sort</span></li> <li class=""li2""><span class=""s1"">Space: O(1), assuming the sort is in-place</span></li> </ul> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Code</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> enum </span><span class=""s6""><b>import</b></span><span class=""s1""> Enum</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s7""> </span><span class=""s8"">Data</span><span class=""s7"">(</span><span class=""s1"">object</span><span class=""s7"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__init__</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, timestamp, num_people, event_type):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.timestamp = timestamp</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.num_people = num_people</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.event_type = event_type</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__lt__</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, other):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.timestamp </span><span class=""s10""><b>&lt;</b></span><span class=""s1""> other.timestamp</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s7""> </span><span class=""s8"">Period</span><span class=""s7"">(</span><span class=""s1"">object</span><span class=""s7"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__init__</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, start, end):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.start = start</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s9"">self</span><span class=""s1"">.end = end</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__eq__</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">, other):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.start </span><span class=""s10""><b>==</b></span><span class=""s1""> other.start </span><span class=""s6""><b>and</b></span><span class=""s1""> </span><span class=""s9"">self</span><span class=""s1"">.end </span><span class=""s10""><b>==</b></span><span class=""s1""> other.end</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">__repr__</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">.start) </span><span class=""s10""><b>+</b></span><span class=""s1""> </span><span class=""s11"">', '</span><span class=""s1""> </span><span class=""s10""><b>+</b></span><span class=""s1""> </span><span class=""s6"">str</span><span class=""s1"">(</span><span class=""s9"">self</span><span class=""s1"">.end)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6""><b>class</b></span><span class=""s7""> </span><span class=""s1"">EventType</span><span class=""s7"">(Enum):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; ENTER = </span><span class=""s12"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; EXIT = </span><span class=""s12"">1</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p8""><span class=""s1""><b>class</b></span><span class=""s7""> </span><span class=""s8"">Solution</span><span class=""s7"">(</span><span class=""s1"">object</span><span class=""s7"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s7""> </span><span class=""s1"">find_busiest_period</span><span class=""s7"">(</span><span class=""s9"">self</span><span class=""s7"">, data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> data </span><span class=""s6""><b>is</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> TypeError(</span><span class=""s11"">'data cannot be None'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> </span><span class=""s6""><b>not</b></span><span class=""s1""> data:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> </span><span class=""s6""><b>None</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data.sort()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_period = Period(</span><span class=""s12"">0</span><span class=""s1"">, </span><span class=""s12"">0</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; max_people = </span><span class=""s12"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; curr_people = </span><span class=""s12"">0</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>for</b></span><span class=""s1""> index, interval </span><span class=""s6""><b>in</b></span><span class=""s1""> </span><span class=""s6"">enumerate</span><span class=""s1"">(data):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> interval.event_type </span><span class=""s10""><b>==</b></span><span class=""s1""> EventType.ENTER:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_people += interval.num_people</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>elif</b></span><span class=""s1""> interval.event_type </span><span class=""s10""><b>==</b></span><span class=""s1""> EventType.EXIT:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_people -= interval.num_people</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>raise</b></span><span class=""s1""> ValueError(</span><span class=""s11"">'Invalid event type'</span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> (index </span><span class=""s10""><b>&lt;</b></span><span class=""s1""> </span><span class=""s6"">len</span><span class=""s1"">(data) </span><span class=""s10""><b>-</b></span><span class=""s1""> </span><span class=""s12"">1</span><span class=""s1""> </span><span class=""s6""><b>and</b></span><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data[index].timestamp </span><span class=""s10""><b>==</b></span><span class=""s1""> data[index </span><span class=""s10""><b>+</b></span><span class=""s1""> </span><span class=""s12"">1</span><span class=""s1"">].timestamp):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>continue</b></span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> curr_people </span><span class=""s10""><b>&gt;</b></span><span class=""s1""> max_people:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_people = curr_people</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_period.start = data[index].timestamp</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>if</b></span><span class=""s1""> index </span><span class=""s10""><b>&lt;</b></span><span class=""s1""> </span><span class=""s6"">len</span><span class=""s1"">(data) </span><span class=""s10""><b>-</b></span><span class=""s1""> </span><span class=""s12"">1</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_period.end = data[index </span><span class=""s10""><b>+</b></span><span class=""s1""> </span><span class=""s12"">1</span><span class=""s1"">].timestamp</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>else</b></span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_period.end = data[index].timestamp</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6""><b>return</b></span><span class=""s1""> max_period</span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p3""><span class=""s1""></span><br></p> <p class=""p1""><span class=""s1""><b>Unit Test</b></span></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p5""><span class=""s1""></span><br></p> <p class=""p7""><span class=""s1"">&nbsp;</span></p> <p class=""p7""><span class=""s10""><b>%%</b></span><span class=""s1"">writefile test_find_busiest_period.py</span></p> <p class=""p7""><span class=""s6""><b>from</b></span><span class=""s1""> nose.tools </span><span class=""s6""><b>import</b></span><span class=""s1""> assert_equal, assert_raises</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s6""><b>class</b></span><span class=""s7""> </span><span class=""s1"">TestSolution</span><span class=""s7"">(</span><span class=""s6"">object</span><span class=""s7"">):</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p9""><span class=""s7"">&nbsp; &nbsp; </span><span class=""s6""><b>def</b></span><span class=""s7""> </span><span class=""s1"">test_find_busiest_period</span><span class=""s7"">(</span><span class=""s9"">self</span><span class=""s7"">):</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; solution = Solution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_raises(TypeError, solution.find_busiest_period, </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.find_busiest_period([]), </span><span class=""s6""><b>None</b></span><span class=""s1"">)</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; data = [</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Data(</span><span class=""s12"">3</span><span class=""s1"">, </span><span class=""s12"">2</span><span class=""s1"">, EventType.EXIT),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Data(</span><span class=""s12"">1</span><span class=""s1"">, </span><span class=""s12"">2</span><span class=""s1"">, EventType.ENTER),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Data(</span><span class=""s12"">3</span><span class=""s1"">, </span><span class=""s12"">1</span><span class=""s1"">, EventType.ENTER),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Data(</span><span class=""s12"">7</span><span class=""s1"">, </span><span class=""s12"">3</span><span class=""s1"">, EventType.ENTER),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Data(</span><span class=""s12"">9</span><span class=""s1"">, </span><span class=""s12"">2</span><span class=""s1"">, EventType.EXIT),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Data(</span><span class=""s12"">8</span><span class=""s1"">, </span><span class=""s12"">2</span><span class=""s1"">, EventType.EXIT),</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; ]</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(solution.find_busiest_period(data), Period(</span><span class=""s12"">7</span><span class=""s1"">, </span><span class=""s12"">8</span><span class=""s1"">))</span></p> <p class=""p10""><span class=""s7"">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class=""s6"">print</span><span class=""s7"">(</span><span class=""s1"">'Success: test_find_busiest_period'</span><span class=""s7"">)</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>def</b></span><span class=""s1""> </span><span class=""s8"">main</span><span class=""s1"">():</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test = TestSolution()</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; test.test_find_busiest_period()</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s1"">​</span></p> <p class=""p7""><span class=""s6""><b>if</b></span><span class=""s1""> __name__ </span><span class=""s10""><b>==</b></span><span class=""s1""> </span><span class=""s11"">'__main__'</span><span class=""s1"">:</span></p> <p class=""p7""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
"<h1 style=""margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1; color: rgb(0, 0, 0); text-rendering: optimizeLegibility; font-size: 25.998px;"">Design a deck of cards</h1>"	"<div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Constraints and assumptions<a class=""anchor-link"" href=""https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f6465636b5f6f665f63617264732f6465636b5f6f665f63617264732e6970796e623f746f6b656e3d41464e4d4e546a3266637a72397534306855687555506b74377351696936696c6b7335597634704c7741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fdeck_of_cards%2Fdeck_of_cards.ipynb&amp;repository_id=83222441#Constraints-and-assumptions"" style=""margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;""></a></h2><ul style=""margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Is this a generic deck of cards for games like poker and black jack?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes, design a generic deck then extend it to black jack</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Can we assume the deck has 52 cards (2-10, Jack, Queen, King, Ace) and 4 suits?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Can we assume inputs are valid or do we have to validate them?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Assume they're valid</li></ul></li></ul></div></div></div><div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Solution</h2></div></div></div><div class=""cell border-box-sizing code_cell rendered"" style=""margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""input"" style=""margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""input_area"" style=""margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;""><div class="" highlight hl-ipython3"" style=""margin: 0.4em; padding: 0px; background: transparent; border: none;""><pre style=""margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;""><span style=""margin: 0px; padding: 0px;""></span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">%%</span><span class=""n"" style=""margin: 0px; padding: 0px;"">writefile</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">deck_of_cards</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">py</span> <span class=""kn"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">from</span> <span class=""nn"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">abc</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">import</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">ABCMeta</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">abstractmethod</span> <span class=""kn"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">from</span> <span class=""nn"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">enum</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">import</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Enum</span> <span class=""kn"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">import</span> <span class=""nn"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">sys</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Suit</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Enum</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""n"" style=""margin: 0px; padding: 0px;"">HEART</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">0</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">DIAMOND</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">CLUBS</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">2</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">SPADE</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">3</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Card</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">metaclass</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span><span class=""n"" style=""margin: 0px; padding: 0px;"">ABCMeta</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">suit</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">value</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">value</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">suit</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">suit</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">is_available</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">True</span>      <span class=""nd"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255);"">@property</span>     <span class=""nd"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255);"">@abstractmethod</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">pass</span>      <span class=""nd"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255);"">@value</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">setter</span>     <span class=""nd"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255);"">@abstractmethod</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">other</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">pass</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">BlackJackCard</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Card</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">suit</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">super</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">BlackJackCard</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">suit</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">is_ace</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">True</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_value</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">False</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">is_face_card</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">""""""Jack = 11, Queen = 12, King = 13""""""</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">True</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">10</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">&lt;</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_value</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">&lt;=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">13</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">False</span>      <span class=""nd"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255);"">@property</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">is_ace</span><span class=""p"" style=""margin: 0px; padding: 0px;"">()</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">elif</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">is_face_card</span><span class=""p"" style=""margin: 0px; padding: 0px;"">():</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">10</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_value</span>      <span class=""nd"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255);"">@value</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">setter</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">new_value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">&lt;=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">new_value</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">&lt;=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">13</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_value</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">new_value</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">raise</span> <span class=""ne"" style=""margin: 0px; padding: 0px; color: rgb(210, 65, 58); font-weight: bold;"">ValueError</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""s1"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33);"">'Invalid card value: </span><span class=""si"" style=""margin: 0px; padding: 0px; color: rgb(187, 102, 136); font-weight: bold;"">{}</span><span class=""s1"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33);"">'</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">format</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">new_value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">))</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Hand</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">add_card</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">card</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">append</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">card</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">score</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">total_value</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">0</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">for</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">card</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">in</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">card</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""n"" style=""margin: 0px; padding: 0px;"">total_value</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">+=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">card</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">value</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">total_value</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">BlackJackHand</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Hand</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""n"" style=""margin: 0px; padding: 0px;"">BLACKJACK</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">21</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">super</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">BlackJackHand</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">score</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">min_over</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">sys</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">MAXSIZE</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">max_under</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">-</span><span class=""n"" style=""margin: 0px; padding: 0px;"">sys</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">MAXSIZE</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">for</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">score</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">in</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">possible_scores</span><span class=""p"" style=""margin: 0px; padding: 0px;"">():</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">BLACKJACK</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">&lt;</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">score</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">&lt;</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">min_over</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>                 <span class=""n"" style=""margin: 0px; padding: 0px;"">min_over</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">score</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">elif</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">max_under</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">&lt;</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">score</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">&lt;=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">BLACKJACK</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>                 <span class=""n"" style=""margin: 0px; padding: 0px;"">max_under</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">score</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">max_under</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">max_under</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">!=</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">-</span><span class=""n"" style=""margin: 0px; padding: 0px;"">sys</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">MAXSIZE</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">min_over</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">possible_scores</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">""""""Return a list of possible scores, taking Aces into account.""""""</span>         <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Deck</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">deal_index</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">0</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">remaining_cards</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">len</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">-</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">deal_index</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">deal_card</span><span class=""p"" style=""margin: 0px; padding: 0px;"">():</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">try</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""n"" style=""margin: 0px; padding: 0px;"">card</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">cards</span><span class=""p"" style=""margin: 0px; padding: 0px;"">[</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">deal_index</span><span class=""p"" style=""margin: 0px; padding: 0px;"">]</span>             <span class=""n"" style=""margin: 0px; padding: 0px;"">card</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">is_available</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">False</span>             <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">deal_index</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">+=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">except</span> <span class=""ne"" style=""margin: 0px; padding: 0px; color: rgb(210, 65, 58); font-weight: bold;"">IndexError</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">card</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">shuffle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span></pre></div></div></div></div></div>"
"<h1 style=""margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1; color: rgb(0, 0, 0); text-rendering: optimizeLegibility; font-size: 25.998px;"">Design a call center</h1>"	"<div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Constraints and assumptions<a class=""anchor-link"" href=""https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f63616c6c5f63656e7465722f63616c6c5f63656e7465722e6970796e623f746f6b656e3d41464e4d4e5561474554335752633972736e3541796b4e626344786b474342626b73355976346e4b7741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fcall_center%2Fcall_center.ipynb&amp;repository_id=83222441#Constraints-and-assumptions"" style=""margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;""></a></h2><ul style=""margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">What levels of employees are in the call center?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Operator, supervisor, director</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Can we assume operators always get the initial calls?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">If there is no free operators or the operator can't handle the call, does the call go to the supervisors?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">If there is no free supervisors or the supervisor can't handle the call, does the call go to the directors?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Can we assume the directors can handle all calls?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">What happens if nobody can answer the call?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">It gets queued</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Do we need to handle 'VIP' calls where we put someone to the front of the line?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">No</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Can we assume inputs are valid or do we have to validate them?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Assume they're valid</li></ul></li></ul></div></div></div><div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Solution</h2></div></div></div><div class=""cell border-box-sizing code_cell rendered"" style=""margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""input"" style=""margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""input_area"" style=""margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;""><div class="" highlight hl-ipython3"" style=""margin: 0.4em; padding: 0px; background: transparent; border: none;""><pre style=""margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;""><span style=""margin: 0px; padding: 0px;""></span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">%%</span><span class=""n"" style=""margin: 0px; padding: 0px;"">writefile</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call_center</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">py</span> <span class=""kn"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">from</span> <span class=""nn"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">abc</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">import</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">ABCMeta</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">abstractmethod</span> <span class=""kn"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">from</span> <span class=""nn"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">collections</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">import</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">deque</span> <span class=""kn"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">from</span> <span class=""nn"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">enum</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">import</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Enum</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Rank</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Enum</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""n"" style=""margin: 0px; padding: 0px;"">OPERATOR</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">0</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">SUPERVISOR</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">DIRECTOR</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">2</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Employee</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">metaclass</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span><span class=""n"" style=""margin: 0px; padding: 0px;"">ABCMeta</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call_center</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">employee_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee_id</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">name</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call_center</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call_center</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">take_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">""""""Assume the employee will always successfully take the call.""""""</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">state</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">CallState</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">IN_PROGRESS</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">complete_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">state</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">CallState</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">COMPLETE</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call_center</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">notify_call_completed</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""nd"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255);"">@abstractmethod</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">escalate_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">pass</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">_escalate_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">state</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">CallState</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">READY</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call_center</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">notify_call_escalated</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Operator</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Employee</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">super</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Operator</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">employee_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">OPERATOR</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">escalate_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">level</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">SUPERVISOR</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_escalate_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">()</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Supervisor</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Employee</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">super</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Operator</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">employee_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">SUPERVISOR</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">escalate_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">level</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">DIRECTOR</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_escalate_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">()</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Director</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Employee</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">super</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Operator</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">employee_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">DIRECTOR</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">escalate_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">raise</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">NotImplemented</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""s1"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33);"">'Directors must be able to handle any call'</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">CallState</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Enum</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""n"" style=""margin: 0px; padding: 0px;"">READY</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">0</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">IN_PROGRESS</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">COMPLETE</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">2</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">state</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">CallState</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">READY</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">CallCenter</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">operators</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">supervisors</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">directors</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">operators</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">operators</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">supervisors</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">supervisors</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">directors</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">directors</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">queued_calls</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">deque</span><span class=""p"" style=""margin: 0px; padding: 0px;"">()</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">dispatch_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">not</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">in</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">OPERATOR</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">SUPERVISOR</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">DIRECTOR</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">raise</span> <span class=""ne"" style=""margin: 0px; padding: 0px; color: rgb(210, 65, 58); font-weight: bold;"">ValueError</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""s1"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33);"">'Invalid call rank: </span><span class=""si"" style=""margin: 0px; padding: 0px; color: rgb(187, 102, 136); font-weight: bold;"">{}</span><span class=""s1"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33);"">'</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">format</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span><span class=""p"" style=""margin: 0px; padding: 0px;"">))</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">OPERATOR</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_dispatch_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">operators</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">SUPERVISOR</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">or</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">is</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_dispatch_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">supervisors</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">rank</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Rank</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">DIRECTOR</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">or</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">is</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_dispatch_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">directors</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">is</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">queued_calls</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">append</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">_dispatch_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employees</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">for</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">in</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employees</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">is</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>                 <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">take_call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>                 <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">notify_call_escalated</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">notify_call_completed</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">dispatch_queued_call_to_newly_freed_employee</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">call</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">employee</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span></pre></div></div></div></div></div>"
"<h1 style=""margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1; color: rgb(0, 0, 0); text-rendering: optimizeLegibility; font-size: 25.998px;"">Design a hash map</h1>"	"<div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Constraints and assumptions<a class=""anchor-link"" href=""https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f686173685f7461626c652f686173685f6d61702e6970796e623f746f6b656e3d41464e4d4e6154574a664268747464727250714459466848363633536c54664d6b733559763470307741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fhash_table%2Fhash_map.ipynb&amp;repository_id=83222441#Constraints-and-assumptions"" style=""margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;""></a></h2><ul style=""margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">For simplicity, are the keys integers only?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">For collision resolution, can we use chaining?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Do we have to worry about load factors?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">No</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Can we assume inputs are valid or do we have to validate them?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Assume they're valid</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Can we assume this fits memory?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li></ul></li></ul></div></div></div><div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Solution</h2></div></div></div><div class=""cell border-box-sizing code_cell rendered"" style=""margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""input"" style=""margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""input_area"" style=""margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;""><div class="" highlight hl-ipython3"" style=""margin: 0.4em; padding: 0px; background: transparent; border: none;""><pre style=""margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;""><span style=""margin: 0px; padding: 0px;""></span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">%%</span><span class=""n"" style=""margin: 0px; padding: 0px;"">writefile</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">hash_map</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">py</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Item</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">key</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">key</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">value</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">value</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">HashTable</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">size</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">size</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">size</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">table</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">[[]</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">for</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">_</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">in</span> <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">range</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">size</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)]</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">_hash_function</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">key</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">%</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">size</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">set</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">hash_index</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_hash_function</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">for</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">item</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">in</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">table</span><span class=""p"" style=""margin: 0px; padding: 0px;"">[</span><span class=""n"" style=""margin: 0px; padding: 0px;"">hash_index</span><span class=""p"" style=""margin: 0px; padding: 0px;"">]:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">item</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">key</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>                 <span class=""n"" style=""margin: 0px; padding: 0px;"">item</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">value</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">value</span>                 <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">table</span><span class=""p"" style=""margin: 0px; padding: 0px;"">[</span><span class=""n"" style=""margin: 0px; padding: 0px;"">hash_index</span><span class=""p"" style=""margin: 0px; padding: 0px;"">]</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">append</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Item</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">value</span><span class=""p"" style=""margin: 0px; padding: 0px;"">))</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">get</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">hash_index</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_hash_function</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">for</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">item</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">in</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">table</span><span class=""p"" style=""margin: 0px; padding: 0px;"">[</span><span class=""n"" style=""margin: 0px; padding: 0px;"">hash_index</span><span class=""p"" style=""margin: 0px; padding: 0px;"">]:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">item</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">key</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>                 <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">item</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">value</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">raise</span> <span class=""ne"" style=""margin: 0px; padding: 0px; color: rgb(210, 65, 58); font-weight: bold;"">KeyError</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""s1"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33);"">'Key not found'</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">remove</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">hash_index</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_hash_function</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">for</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">index</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">item</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">in</span> <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">enumerate</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">table</span><span class=""p"" style=""margin: 0px; padding: 0px;"">[</span><span class=""n"" style=""margin: 0px; padding: 0px;"">hash_index</span><span class=""p"" style=""margin: 0px; padding: 0px;"">]):</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">item</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">key</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">key</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>                 <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">del</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">table</span><span class=""p"" style=""margin: 0px; padding: 0px;"">[</span><span class=""n"" style=""margin: 0px; padding: 0px;"">hash_index</span><span class=""p"" style=""margin: 0px; padding: 0px;"">][</span><span class=""n"" style=""margin: 0px; padding: 0px;"">index</span><span class=""p"" style=""margin: 0px; padding: 0px;"">]</span>                 <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">raise</span> <span class=""ne"" style=""margin: 0px; padding: 0px; color: rgb(210, 65, 58); font-weight: bold;"">KeyError</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""s1"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33);"">'Key not found'</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span></pre></div></div></div></div></div>"
"<h1 style=""margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1; color: rgb(0, 0, 0); text-rendering: optimizeLegibility; font-size: 25.998px;"">Design an LRU cache</h1>"	"<div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Constraints and assumptions<a class=""anchor-link"" href=""https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f6c72755f63616368652f6c72755f63616368652e6970796e623f746f6b656e3d41464e4d4e54596b6d63306e516a66337435575772465a702d6d685874366e4f6b733559763471797741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Flru_cache%2Flru_cache.ipynb&amp;repository_id=83222441#Constraints-and-assumptions"" style=""margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;""></a></h2><ul style=""margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">What are we caching?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">We are cahing the results of web queries</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Can we assume inputs are valid or do we have to validate them?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Assume they're valid</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Can we assume this fits memory?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li></ul></li></ul></div></div></div><div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Solution</h2></div></div></div><div class=""cell border-box-sizing code_cell rendered"" style=""margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""input"" style=""margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""input_area"" style=""margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;""><div class="" highlight hl-ipython3"" style=""margin: 0.4em; padding: 0px; background: transparent; border: none;""><pre style=""margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;""><span style=""margin: 0px; padding: 0px;""></span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">%%</span><span class=""n"" style=""margin: 0px; padding: 0px;"">writefile</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">lru_cache</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">py</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Node</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">results</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">results</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">results</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">next</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">next</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">LinkedList</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">head</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">tail</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">move_to_front</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">node</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">append_to_front</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">node</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">remove_from_tail</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Cache</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">MAX_SIZE</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">MAX_SIZE</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">MAX_SIZE</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">size</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">0</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">lookup</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">{}</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># key: query, value: node</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">linked_list</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">LinkedList</span><span class=""p"" style=""margin: 0px; padding: 0px;"">()</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">get</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">query</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">""""""Get the stored query result from the cache.</span> <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">        </span> <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">        Accessing a node updates its position to the front of the LRU list.</span> <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">        """"""</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">node</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">lookup</span><span class=""p"" style=""margin: 0px; padding: 0px;"">[</span><span class=""n"" style=""margin: 0px; padding: 0px;"">query</span><span class=""p"" style=""margin: 0px; padding: 0px;"">]</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">node</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">is</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">linked_list</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">move_to_front</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">node</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">node</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">results</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">set</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">results</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">query</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">""""""Set the result for the given query key in the cache.</span> <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">        </span> <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">        When updating an entry, updates its position to the front of the LRU list.</span> <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">        If the entry is new and the cache is at capacity, removes the oldest entry</span> <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">        before the new entry is added.</span> <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">        """"""</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">node</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">lookup</span><span class=""p"" style=""margin: 0px; padding: 0px;"">[</span><span class=""n"" style=""margin: 0px; padding: 0px;"">query</span><span class=""p"" style=""margin: 0px; padding: 0px;"">]</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">node</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">is</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">not</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># Key exists in cache, update the value</span>             <span class=""n"" style=""margin: 0px; padding: 0px;"">node</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">results</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">results</span>             <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">linked_list</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">move_to_front</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">node</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># Key does not exist in cache</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">size</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">MAX_SIZE</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>                 <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># Remove the oldest entry from the linked list and lookup</span>                 <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">lookup</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">pop</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">linked_list</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">tail</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">query</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>                 <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">linked_list</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">remove_from_tail</span><span class=""p"" style=""margin: 0px; padding: 0px;"">()</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>                 <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">size</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">+=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span>             <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># Add the new key and value</span>             <span class=""n"" style=""margin: 0px; padding: 0px;"">new_node</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">Node</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">results</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>             <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">linked_list</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">append_to_front</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">new_node</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>             <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">lookup</span><span class=""p"" style=""margin: 0px; padding: 0px;"">[</span><span class=""n"" style=""margin: 0px; padding: 0px;"">query</span><span class=""p"" style=""margin: 0px; padding: 0px;"">]</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">new_node</span></pre></div></div></div></div></div>"
"<h1 style=""margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1; color: rgb(0, 0, 0); text-rendering: optimizeLegibility; font-size: 25.998px;"">Design an online chat</h1>"	"<div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Constraints and assumptions<a class=""anchor-link"" href=""https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f6f6e6c696e655f636861742f6f6e6c696e655f636861742e6970796e623f746f6b656e3d41464e4d4e5970664a4f49413830576f68654e6c7252344171616546743971786b733559763472627741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fonline_chat%2Fonline_chat.ipynb&amp;repository_id=83222441#Constraints-and-assumptions"" style=""margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;""></a></h2><ul style=""margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Assume we'll focus on the following workflows:<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Text conversations only</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Users<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: circle;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Add a user</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Remove a user</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Update a user</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Add to a user's friends list<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: circle;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Add friend request<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: circle;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Approve friend request</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Reject friend request</li></ul></li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Remove from a user's friends list</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Create a group chat<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: circle;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Invite friends to a group chat</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Post a message to a group chat</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Private 1-1 chat<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: circle;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Invite a friend to a private chat</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Post a meesage to a private chat</li></ul></li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">No need to worry about scaling initially</li></ul></div></div></div><div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""prompt input_prompt"" style=""margin: 0px; padding: 0.4em; min-width: 11ex; font-family: monospace; text-align: right; line-height: 1.21429em; color: rgb(0, 0, 128); border-top: 1px solid transparent;""></div><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Solution<a class=""anchor-link"" href=""https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f6f6e6c696e655f636861742f6f6e6c696e655f636861742e6970796e623f746f6b656e3d41464e4d4e5970664a4f49413830576f68654e6c7252344171616546743971786b733559763472627741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fonline_chat%2Fonline_chat.ipynb&amp;repository_id=83222441#Solution"" style=""margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;""></a></h2></div></div></div><div class=""cell border-box-sizing code_cell rendered"" style=""margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""input"" style=""margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;""><div class=""prompt input_prompt"" style=""margin: 0px; padding: 0.4em; min-width: 11ex; font-family: monospace; text-align: right; line-height: 1.21429em; color: rgb(0, 0, 128); border-top: 1px solid transparent;"">In&nbsp;[1]:</div><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""input_area"" style=""margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;""><div class="" highlight hl-ipython3"" style=""margin: 0.4em; padding: 0px; background: transparent; border: none;""><pre style=""margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;""><span style=""margin: 0px; padding: 0px;""></span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">%%</span><span class=""n"" style=""margin: 0px; padding: 0px;"">writefile</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">online_chat</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">py</span> <span class=""kn"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">from</span> <span class=""nn"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">abc</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">import</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">ABCMeta</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">UserService</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">users_by_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">{}</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># key: user id, value: User</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">add_user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">pass_hash</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">remove_user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">add_friend_request</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">from_user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">to_user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">approve_friend_request</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">from_user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">to_user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">reject_friend_request</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">from_user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">to_user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">User</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">pass_hash</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">user_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">user_id</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">name</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">name</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">pass_hash</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">pass_hash</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">friends_by_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">{}</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># key: friend id, value: User</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">friend_ids_to_private_chats</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">{}</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># key: friend id, value: private chats</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">group_chats_by_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">{}</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># key: chat id, value: GroupChat</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">received_friend_requests_by_friend_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">{}</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># key: friend id, value: AddRequest</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">sent_friend_requests_by_friend_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">{}</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># key: friend id, value: AddRequest</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">message_user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">friend_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">message</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">message_group</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">group_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">message</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">send_friend_request</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">friend_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">receive_friend_request</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">friend_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">approve_friend_request</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">friend_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">reject_friend_request</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">friend_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Chat</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">metaclass</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span><span class=""n"" style=""margin: 0px; padding: 0px;"">ABCMeta</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">chat_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">chat_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">chat_id</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">users</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">[]</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">messages</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">[]</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">PrivateChat</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Chat</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">first_user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">second_user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">super</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">PrivateChat</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">()</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">users</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">append</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">first_user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">users</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">append</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">second_user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">GroupChat</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Chat</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">add_user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">remove_user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">user</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ... </span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Message</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">message_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">message</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">timestamp</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">message_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">message_id</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">message</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">message</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">timestamp</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">timestamp</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">AddRequest</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">from_user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">to_user_id</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">request_status</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">timestamp</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">from_user_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">from_user_id</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">to_user_id</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">to_user_id</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">request_status</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">request_status</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">timestamp</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">timestamp</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">RequestStatus</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Enum</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""n"" style=""margin: 0px; padding: 0px;"">UNREAD</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">0</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">READ</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">ACCEPTED</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">2</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">REJECTED</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">3</span><br></pre></div></div></div></div></div>"
"<div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h1 style=""margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 25.998px;"">Design a parking lot<a class=""anchor-link"" href=""https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f7061726b696e675f6c6f742f7061726b696e675f6c6f742e6970796e623f746f6b656e3d41464e4d4e586a6c4f79316a4757335078536f43477441366f56505a566674636b733559763473777741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fparking_lot%2Fparking_lot.ipynb&amp;repository_id=83222441#Design-a-parking-lot"" style=""margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;""></a></h1></div></div></div><div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""></div>"	"<div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Constraints and assumptions<a class=""anchor-link"" href=""https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f7061726b696e675f6c6f742f7061726b696e675f6c6f742e6970796e623f746f6b656e3d41464e4d4e586a6c4f79316a4757335078536f43477441366f56505a566674636b733559763473777741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fparking_lot%2Fparking_lot.ipynb&amp;repository_id=83222441#Constraints-and-assumptions"" style=""margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;""></a></h2><ul style=""margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">What types of vehicles should we support?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Motorcycle, Car, Bus</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Does each vehicle type take up a different amount of parking spots?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Motorcycle spot -&gt; Motorcycle</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Compact spot -&gt; Motorcycle, Car</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Large spot -&gt; Motorcycle, Car</li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Bus can park if we have 5 consecutive ""large"" spots</li></ul></li><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Does the parking lot have multiple levels?<ul style=""margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;""><li style=""margin: 0px; padding: 0px; line-height: 20px;"">Yes</li></ul></li></ul></div></div></div><div class=""cell border-box-sizing text_cell rendered"" style=""margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""text_cell_render border-box-sizing rendered_html"" style=""margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;""><h2 style=""margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;"">Solution</h2></div></div></div><div class=""cell border-box-sizing code_cell rendered"" style=""margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;""><div class=""input"" style=""margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;""><div class=""inner_cell"" style=""margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;""><div class=""input_area"" style=""margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;""><div class="" highlight hl-ipython3"" style=""margin: 0.4em; padding: 0px; background: transparent; border: none;""><pre style=""margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;""><span style=""margin: 0px; padding: 0px;""></span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">%%</span><span class=""n"" style=""margin: 0px; padding: 0px;"">writefile</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">parking_lot</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">py</span> <span class=""kn"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">from</span> <span class=""nn"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">abc</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">import</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">ABCMeta</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">abstractmethod</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">VehicleSize</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Enum</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""n"" style=""margin: 0px; padding: 0px;"">MOTORCYCLE</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">0</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">COMPACT</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span>     <span class=""n"" style=""margin: 0px; padding: 0px;"">LARGE</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">2</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">metaclass</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span><span class=""n"" style=""margin: 0px; padding: 0px;"">ABCMeta</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle_size</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">license_plate</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot_size</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle_size</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle_size</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">license_plate</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">license_plate</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">spot_size</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">spots_taken</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">[]</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">clear_spots</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">for</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">in</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">spots_taken</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">remove_vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">spots_taken</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">[]</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">take_spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">spots_taken</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">append</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""nd"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255);"">@abstractmethod</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">can_fit_in_spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">pass</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Motorcycle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">license_plate</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">super</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Motorcycle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">VehicleSize</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">MOTORCYCLE</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">license_plate</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot_size</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span><span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">can_fit_in_spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">True</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Car</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">license_plate</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">super</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Car</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">VehicleSize</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">COMPACT</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">license_plate</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot_size</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span><span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">can_fit_in_spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">True</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">size</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">LARGE</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">or</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">size</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">COMPACT</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">False</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Bus</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">license_plate</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">super</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">Bus</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">VehicleSize</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">LARGE</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">license_plate</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot_size</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span><span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">5</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">can_fit_in_spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">True</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">size</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">==</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">LARGE</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">False</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">ParkingLot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">num_levels</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">num_levels</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">num_levels</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">levels</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">[]</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">park_vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">for</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">level</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">in</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">levels</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">level</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">park_vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>                 <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">True</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">False</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">Level</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""n"" style=""margin: 0px; padding: 0px;"">SPOTS_PER_ROW</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">10</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">floor</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">total_spots</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">floor</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">floor</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">num_spots</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">total_spots</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">available_spots</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">0</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">parking_spots</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""p"" style=""margin: 0px; padding: 0px;"">[]</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">spot_freed</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">available_spots</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">+=</span> <span class=""mi"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">1</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">park_vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">_find_available_spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">is</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">park_vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">_find_available_spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">""""""Find an available spot where vehicle can fit, or return None""""""</span>         <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">_park_starting_at_spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""sd"" style=""margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;"">""""""Occupy starting at spot.spot_number to vehicle.spot_size.""""""</span>         <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>   <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">class</span> <span class=""nc"" style=""margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;"">ParkingSpot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""nb"" style=""margin: 0px; padding: 0px; color: green;"">object</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">__init__</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">level</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">row</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot_number</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot_size</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle_size</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">level</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">level</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">row</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">row</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">spot_number</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot_number</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">spot_size</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">spot_size</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle_size</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle_size</span>         <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span> <span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">=</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">is_available</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">True</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">is</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span> <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">else</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">False</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">can_fit_vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">if</span> <span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">is</span> <span class=""ow"" style=""margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;"">not</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">None</span><span class=""p"" style=""margin: 0px; padding: 0px;"">:</span>             <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""kc"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">False</span>         <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">return</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span><span class=""o"" style=""margin: 0px; padding: 0px; color: rgb(102, 102, 102);"">.</span><span class=""n"" style=""margin: 0px; padding: 0px;"">can_fit_in_spot</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">)</span>      <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">park_vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">,</span> <span class=""n"" style=""margin: 0px; padding: 0px;"">vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span>     <span class=""k"" style=""margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;"">def</span> <span class=""nf"" style=""margin: 0px; padding: 0px; color: blue;"">remove_vehicle</span><span class=""p"" style=""margin: 0px; padding: 0px;"">(</span><span class=""bp"" style=""margin: 0px; padding: 0px; color: green;"">self</span><span class=""p"" style=""margin: 0px; padding: 0px;"">):</span>  <span class=""c1"" style=""margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;""># ...</span></pre></div></div></div></div></div>"
"<h3 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"">RPC and REST calls comparison</h3>"	"<table style=""box-sizing: border-box; border-spacing: 0px; margin-top: 0px; margin-bottom: 16px; display: block; width: 888px; overflow: auto; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><thead style=""box-sizing: border-box;""><tr style=""box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);""><th style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Operation</th><th style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">RPC</th><th style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">REST</th></tr></thead><tbody style=""box-sizing: border-box;""><tr style=""box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Signup</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">POST</span>&nbsp;/signup</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">POST</span>&nbsp;/persons</td></tr><tr style=""box-sizing: border-box; background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Resign</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">POST</span>&nbsp;/resign<br style=""box-sizing: border-box;"">{<br style=""box-sizing: border-box;"">""personid"": ""1234""<br style=""box-sizing: border-box;"">}</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">DELETE</span>&nbsp;/persons/1234</td></tr><tr style=""box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Read a person</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">GET</span>&nbsp;/readPerson?personid=1234</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">GET</span>&nbsp;/persons/1234</td></tr><tr style=""box-sizing: border-box; background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Read a person’s items list</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">GET</span>&nbsp;/readUsersItemsList?personid=1234</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">GET</span>&nbsp;/persons/1234/items</td></tr><tr style=""box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Add an item to a person’s items</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">POST</span>&nbsp;/addItemToUsersItemsList<br style=""box-sizing: border-box;"">{<br style=""box-sizing: border-box;"">""personid"": ""1234"";<br style=""box-sizing: border-box;"">""itemid"": ""456""<br style=""box-sizing: border-box;"">}</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">POST</span>&nbsp;/persons/1234/items<br style=""box-sizing: border-box;"">{<br style=""box-sizing: border-box;"">""itemid"": ""456""<br style=""box-sizing: border-box;"">}</td></tr><tr style=""box-sizing: border-box; background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Update an item</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">POST</span>&nbsp;/modifyItem<br style=""box-sizing: border-box;"">{<br style=""box-sizing: border-box;"">""itemid"": ""456"";<br style=""box-sizing: border-box;"">""key"": ""value""<br style=""box-sizing: border-box;"">}</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">PUT</span>&nbsp;/items/456<br style=""box-sizing: border-box;"">{<br style=""box-sizing: border-box;"">""key"": ""value""<br style=""box-sizing: border-box;"">}</td></tr><tr style=""box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);""><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);"">Delete an item</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">POST</span>&nbsp;/removeItem<br style=""box-sizing: border-box;"">{<br style=""box-sizing: border-box;"">""itemid"": ""456""<br style=""box-sizing: border-box;"">}</td><td style=""box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);""><span style=""box-sizing: border-box; font-weight: 600;"">DELETE</span>&nbsp;/items/456</td></tr></tbody></table><p align=""center"" style=""box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><i style=""box-sizing: border-box;""><a href=""https://apihandyman.io/do-you-really-know-why-you-prefer-rest-over-rpc/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Source: Do you really know why you prefer REST over RPC</a></i></p><h4 style=""box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;""><a id=""user-content-sources-and-further-reading-rest-and-rpc"" class=""anchor"" href=""https://github.com/donnemartin/system-design-primer#sources-and-further-reading-rest-and-rpc"" aria-hidden=""true"" style=""box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;""><svg aria-hidden=""true"" class=""octicon octicon-link"" height=""16"" version=""1.1"" viewBox=""0 0 16 16"" width=""16""><path fill-rule=""evenodd"" d=""M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z""></path></svg></a>Source(s) and further reading: REST and RPC</h4><ul style=""box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;""><li style=""box-sizing: border-box;""><a href=""https://apihandyman.io/do-you-really-know-why-you-prefer-rest-over-rpc/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Do you really know why you prefer REST over RPC</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://programmers.stackexchange.com/a/181186"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">When are RPC-ish approaches more appropriate than REST?</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://stackoverflow.com/questions/15056878/rest-vs-json-rpc"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">REST vs JSON-RPC</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://etherealbits.com/2012/12/debunking-the-myths-of-rpc-rest/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Debunking the myths of RPC and REST</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://www.quora.com/What-are-the-drawbacks-of-using-RESTful-APIs"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">What are the drawbacks of using REST</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://www.puncsky.com/blog/2016/02/14/crack-the-system-design-interview/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Crack the system design interview</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""https://code.facebook.com/posts/1468950976659943/"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Thrift</a></li><li style=""box-sizing: border-box; margin-top: 0.25em;""><a href=""http://arstechnica.com/civis/viewtopic.php?t=1190508"" style=""box-sizing: border-box; color: rgb(3, 102, 214);"">Why REST for internal use and not RPC</a></li></ul>"
<b></b><b>Problem: Implement a min heap with extract_min and insert methods.</b>	"<p class=""p1"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 22px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b>Constraints</b></span></p><ul class=""ul1"" style=""list-style-type: disc; ""><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Can we assume the inputs are ints?</span></li><ul class=""ul2"" style=""list-style-type: square; ""><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Yes</span></li></ul><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Can we assume this fits memory?</span></li><ul class=""ul2"" style=""list-style-type: square; ""><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Yes</span></li></ul></ul><p class=""p3"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(48, 63, 159); -webkit-text-stroke-color: rgb(48, 63, 159); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p1"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 22px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b>Test Cases</b></span></p><ul class=""ul1"" style=""list-style-type: disc; ""><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Extract min of an empty tree</span></li><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Extract min general case</span></li><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Insert into an empty tree</span></li><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Insert general case (left and right insert)</span></li></ul><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _5_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 20 &nbsp; &nbsp; 15</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \&nbsp; &nbsp; /&nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 22&nbsp; 40 25</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">extract_min(): 5</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _15_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; /&nbsp; &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 20&nbsp; &nbsp; &nbsp; 25</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \ &nbsp; &nbsp; /&nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 22&nbsp; 40&nbsp;</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">insert(2):</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _2_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 20&nbsp; &nbsp; &nbsp; 5</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \ &nbsp; &nbsp; / \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 22&nbsp; 40&nbsp; 25&nbsp; 15</span></p><p class=""p3"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(48, 63, 159); -webkit-text-stroke-color: rgb(48, 63, 159); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p1"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 22px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b>Algorithm</b></span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><br /></span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">A heap is a complete binary tree where each node is smaller than its children.</span></p><p class=""p6"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 18px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b><br /></b></span></p><p class=""p6"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 18px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b>extract_min</b></span></p><p class=""p6"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 18px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b><br /></b></span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _5_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 20 &nbsp; &nbsp; 15</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \&nbsp; &nbsp; /&nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 22&nbsp; 40 25</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Save the root as the value to be returned: 5</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Move the right most element to the root: 25</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _25_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; /&nbsp; &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 20&nbsp; &nbsp; &nbsp; 15</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \ &nbsp; &nbsp; /&nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 22&nbsp; 40&nbsp;</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Bubble down 25: Swap 25 and 15 (the smaller child)</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _15_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; /&nbsp; &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 20&nbsp; &nbsp; &nbsp; 25</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \ &nbsp; &nbsp; /&nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 22&nbsp; 40&nbsp;</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Return 5</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><br /></span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">We'll use an array to represent the tree, here are the indices:</span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><br /></span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _0_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; 2</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \ &nbsp; &nbsp; / \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 3 &nbsp; 4&nbsp; &nbsp;</span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><br /></span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">To get to a child, we take 2&nbsp;<i>index + 1 (left child) or 2&nbsp;</i>index + 2 (right child).</span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><br /></span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">For example, the right child of index 1 is 2 * 1 + 2 = 4.</span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><br /></span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Complexity:</span></p><ul class=""ul1"" style=""list-style-type: disc; ""><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Time: O(lg(n))</span></li><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Space: O(lg(n)) for the recursion depth (tree height), or O(1) if using an iterative approach</span></li></ul><p class=""p6"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 18px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b>insert</b></span></p><p class=""p6"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 18px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b><br /></b></span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _5_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 20 &nbsp; &nbsp; 15</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \&nbsp; &nbsp; /&nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 22&nbsp; 40 25</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">insert(2):</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Insert at the right-most spot to maintain the heap property.</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _5_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 20 &nbsp; &nbsp; 15</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \&nbsp; &nbsp; /&nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 22&nbsp; 40 25 &nbsp; 2</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Bubble up 2: Swap 2 and 15</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _5_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 20 &nbsp; &nbsp; 2</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \&nbsp; &nbsp; / \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 22&nbsp; 40 25&nbsp; 15</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Bubble up 2: Swap 2 and 5</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _2_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 20 &nbsp; &nbsp; 5</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \&nbsp; &nbsp; / \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 22&nbsp; 40 25&nbsp; 15</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><br /></span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">We'll use an array to represent the tree, here are the indices:</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><br /></span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _0_</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; 2</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; / \ &nbsp; &nbsp; / \</span></p><p class=""p4"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">&nbsp;&nbsp; &nbsp; 3 &nbsp; 4 &nbsp; 5 &nbsp; 6</span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><br /></span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">To get to a parent, we take (index - 1) // 2.</span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">For example, the parent of index 6 is (6 - 1) // 2 = 2.</span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><br /></span></p><p class=""p2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Complexity:</span></p><ul class=""ul1"" style=""list-style-type: disc; ""><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Time: O(lg(n))</span></li><li class=""li2"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1"">Space: O(lg(n)) for the recursion depth (tree height), or O(1) if using an iterative approach</span></li></ul><p class=""p3"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(48, 63, 159); -webkit-text-stroke-color: rgb(48, 63, 159); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p1"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 22px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b>Code</b></span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp;</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>%%</b></span><span class=""s1"">writefile min_heap.py</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>from</b></span><span class=""s1"">&nbsp;__future__&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>import</b></span><span class=""s1"">&nbsp;division</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p9"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(0, 128, 0); -webkit-text-stroke-color: rgb(0, 128, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1""><b>import</b></span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp;sys</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p9"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(0, 128, 0); -webkit-text-stroke-color: rgb(0, 128, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1""><b>class</b></span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp;</span><span class=""s6"" style=""color: rgb(0, 0, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 255); "">MinHeap</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">(</span><span class=""s1"">object</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>def</b></span><span class=""s1"">&nbsp;</span><span class=""s6"" style=""color: rgb(0, 0, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 255); "">__init__</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array = []</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>def</b></span><span class=""s1"">&nbsp;</span><span class=""s6"" style=""color: rgb(0, 0, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 255); "">__len__</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span><span class=""s1"">&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); "">len</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p10"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(0, 0, 255); -webkit-text-stroke-color: rgb(0, 0, 255); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>def</b></span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp;</span><span class=""s1"">extract_min</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>not</b></span><span class=""s1"">&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array:</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span><span class=""s1"">&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>None</b></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); "">len</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array)&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>==</b></span><span class=""s1"">&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span><span class=""s1"">:</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span><span class=""s1"">&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array.pop(</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; minimum =&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">]</span></p><p class=""p11"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(64, 128, 128); -webkit-text-stroke-color: rgb(64, 128, 128); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s1""><i># Move the last element to the root</i></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">] =&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array.pop(</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>-</b></span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">._bubble_down(index=</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span><span class=""s1"">&nbsp;minimum</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>def</b></span><span class=""s1"">&nbsp;</span><span class=""s6"" style=""color: rgb(0, 0, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 255); "">peek_min</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span><span class=""s1"">&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">]&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>else</b></span><span class=""s1"">&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>None</b></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>def</b></span><span class=""s1"">&nbsp;</span><span class=""s6"" style=""color: rgb(0, 0, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 255); "">insert</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">, key):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;key&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>is</b></span><span class=""s1"">&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>None</b></span><span class=""s1"">:</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>raise</b></span><span class=""s1"">&nbsp;TypeError(</span><span class=""s9"" style=""color: rgb(186, 33, 33); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(186, 33, 33); "">'key cannot be None'</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array.append(key)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">._bubble_up(index=</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); "">len</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array)&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>-&nbsp;</b></span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>def</b></span><span class=""s1"">&nbsp;</span><span class=""s6"" style=""color: rgb(0, 0, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 255); "">_bubble_up</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">, index):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;index&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>==</b></span><span class=""s1"">&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">:</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; index_parent = (index&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>-&nbsp;</b></span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span><span class=""s1"">)&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>//</b></span><span class=""s1"">&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">2</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[index]&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>&lt;</b></span><span class=""s1"">&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[index_parent]:</span></p><p class=""p11"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(64, 128, 128); -webkit-text-stroke-color: rgb(64, 128, 128); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s1""><i># Swap the indices and recurse</i></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[index],&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[index_parent] =&nbsp;</span><span class=""s10"" style=""color: rgb(255, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(255, 0, 0); "">\</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[index_parent],&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[index]</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">._bubble_up(index_parent)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>def</b></span><span class=""s1"">&nbsp;</span><span class=""s6"" style=""color: rgb(0, 0, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 255); "">_bubble_down</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">, index):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; min_child_index =&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">._find_smaller_child(index)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;min_child_index&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>==</b></span><span class=""s1"">&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>-</b></span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span><span class=""s1"">:</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[index]&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>&gt;</b></span><span class=""s1"">&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[min_child_index]:</span></p><p class=""p11"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(64, 128, 128); -webkit-text-stroke-color: rgb(64, 128, 128); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s1""><i># Swap the indices and recurse</i></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[index],&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[min_child_index] =&nbsp;</span><span class=""s10"" style=""color: rgb(255, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(255, 0, 0); "">\</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[min_child_index],&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[index]</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">._bubble_down(min_child_index)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p10"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(0, 0, 255); -webkit-text-stroke-color: rgb(0, 0, 255); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>def</b></span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp;</span><span class=""s1"">_find_smaller_child</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">, index):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; left_child_index =&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">2</span><span class=""s1"">&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>*</b></span><span class=""s1"">&nbsp;index&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>+</b></span><span class=""s1"">&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; right_child_index =&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">2</span><span class=""s1"">&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>*</b></span><span class=""s1"">&nbsp;index&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>+</b></span><span class=""s1"">&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">2</span></p><p class=""p11"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(64, 128, 128); -webkit-text-stroke-color: rgb(64, 128, 128); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s1""><i># No right child</i></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;right_child_index&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>&gt;=</b></span><span class=""s1"">&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); "">len</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array):</span></p><p class=""p11"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(64, 128, 128); -webkit-text-stroke-color: rgb(64, 128, 128); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s1""><i># No left child</i></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;left_child_index&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>&gt;=</b></span><span class=""s1"">&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); "">len</span><span class=""s1"">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span><span class=""s1"">&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>-</b></span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span></p><p class=""p11"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(64, 128, 128); -webkit-text-stroke-color: rgb(64, 128, 128); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s1""><i># Left child only</i></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>else</b></span><span class=""s1"">:</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span><span class=""s1"">&nbsp;left_child_index</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>else</b></span><span class=""s1"">:</span></p><p class=""p11"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(64, 128, 128); -webkit-text-stroke-color: rgb(64, 128, 128); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s1""><i># Compare left and right children</i></span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[left_child_index]&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>&lt;</b></span><span class=""s1"">&nbsp;</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s1"">.array[right_child_index]:</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span><span class=""s1"">&nbsp;left_child_index</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>else</b></span><span class=""s1"">:</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>return</b></span><span class=""s1"">&nbsp;right_child_index</span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><br /></p><p class=""p3"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(48, 63, 159); -webkit-text-stroke-color: rgb(48, 63, 159); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p1"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 22px/normal 'Helvetica Neue'; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); ""><span class=""s1""><b>Unit Test</b></span></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p5"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(255, 255, 255); min-height: 17px; ""><span class=""s1""></span><br /></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp;</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>%%</b></span><span class=""s1"">writefile test_min_heap.py</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>from</b></span><span class=""s1"">&nbsp;nose.tools&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>import</b></span><span class=""s1"">&nbsp;assert_equal</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p10"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(0, 0, 255); -webkit-text-stroke-color: rgb(0, 0, 255); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>class</b></span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp;</span><span class=""s1"">TestMinHeap</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">(</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); "">object</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p10"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(0, 0, 255); -webkit-text-stroke-color: rgb(0, 0, 255); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>def</b></span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp;</span><span class=""s1"">test_min_heap</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">(</span><span class=""s7"" style=""color: rgb(26, 26, 26); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(26, 26, 26); "">self</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">):</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; heap = MinHeap()</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.peek_min(),&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>None</b></span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.extract_min(),&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>None</b></span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; heap.insert(</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">20</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">20</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; heap.insert(</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">5</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">5</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">20</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; heap.insert(</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">15</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">5</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">20</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">2</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">15</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; heap.insert(</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">22</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">5</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">20</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">2</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">15</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">3</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">22</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; heap.insert(</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">40</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">5</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">20</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">2</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">15</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">3</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">22</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">4</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">40</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; heap.insert(</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">3</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">0</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">3</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">1</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">20</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">2</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">5</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">3</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">22</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">4</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">40</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(heap.array[</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">5</span><span class=""s1"">],&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">15</span><span class=""s1"">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; mins = []</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>while</b></span><span class=""s1"">&nbsp;heap:</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mins.append(heap.extract_min())</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; &nbsp; &nbsp; assert_equal(mins, [</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">3</span><span class=""s1"">,&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">5</span><span class=""s1"">,&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">15</span><span class=""s1"">,&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">20</span><span class=""s1"">,&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">22</span><span class=""s1"">,&nbsp;</span><span class=""s8"" style=""color: rgb(0, 136, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 136, 0); "">40</span><span class=""s1"">])</span></p><p class=""p12"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; color: rgb(186, 33, 33); -webkit-text-stroke-color: rgb(186, 33, 33); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); "">print</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">(</span><span class=""s1"">'Success: test_min_heap'</span><span class=""s5"" style=""color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); "">)</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p13"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); min-height: 17px; ""><span class=""s1"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>def</b></span><span class=""s1"">&nbsp;</span><span class=""s6"" style=""color: rgb(0, 0, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 255); "">main</span><span class=""s1"">():</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; test = TestMinHeap()</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; test.test_min_heap()</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">​</span></p><p class=""p13"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); min-height: 17px; ""><span class=""s1"">&nbsp;&nbsp; &nbsp;</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s4"" style=""color: rgb(0, 128, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 128, 0); ""><b>if</b></span><span class=""s1"">&nbsp;__name__&nbsp;</span><span class=""s3"" style=""color: rgb(170, 34, 255); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(170, 34, 255); ""><b>==</b></span><span class=""s1"">&nbsp;</span><span class=""s9"" style=""color: rgb(186, 33, 33); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(186, 33, 33); "">'__main__'</span><span class=""s1"">:</span></p><p class=""p8"" style=""margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 14px/normal Courier; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: initial; background-color: rgb(247, 247, 247); ""><span class=""s1"">&nbsp; &nbsp; main()</span></p>"
